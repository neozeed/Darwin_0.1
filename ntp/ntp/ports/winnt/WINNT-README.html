<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1252">
<META NAME="Generator" CONTENT="Microsoft Word 97">
<TITLE>---------------------------------------------------------------------------- </TITLE>
<META NAME="Template" CONTENT="C:\Program Files\Microsoft Office\Office\html.dot">
</HEAD>
<BODY LINK="#0000ff" VLINK="#800080">

<FONT SIZE=2><P ALIGN="CENTER">----------------------------------------------------------------------------</P>
</FONT><B><FONT SIZE=5><P ALIGN="CENTER">NTP Version 4 Release for Windows NT</P>
</B></FONT><FONT SIZE=2><P ALIGN="CENTER">---------------------------------------------------------------------------- </P>
<P>This is an unsupported release, for assistance from other users, post to the UseNet newsgroup: <I>comp.protocols.time.ntp</I></FONT> </P>
<FONT SIZE=2><P>There will eventually be documentation with this release, in the file NTPOG.WRI. It is Windows Write format. </P>
<P>To update to a newer version, run the setup program again.</P>
</FONT><U><FONT SIZE=5><P>Building NTP for Windows NT</P>
</U></FONT><FONT SIZE=2><P>Requirements:</FONT> </P>

<UL>
<FONT SIZE=2><LI>Latest InstallShield Professional 5.1 or later </LI>
<LI>Perl5 for Win32 from http://www.activestate.com or your favorite place</FONT> </LI></UL>

<P>&nbsp;</P>
<FONT SIZE=2><P>Optional:</P>

<UL>
<LI>Latest InstallShield Package For The Web (uses standard Install Shield package to create a self installing EXE)</LI></UL>

<P>&nbsp;</P>
<P>First off there are two options for installing. </P>

<UL>
<LI>Graphical <B>InstallShield </B>based installation process</FONT> </LI>
<B><FONT SIZE=2><LI>Batch file</B> for installing the executables (always works)</FONT> </LI></UL>

<FONT SIZE=2><P>&nbsp;</P>
</FONT><FONT SIZE=4><P ALIGN="CENTER">The software is known to work on Windows NT 3.5, 3.51, and 4.0.</P>
</FONT><FONT SIZE=2><P>&nbsp;</P>
</FONT><B><FONT SIZE=5><P ALIGN="CENTER">Windows 95 &amp; 98 are not supported.</P>
</B></FONT><FONT SIZE=2><P>To compile the sofware you have two options</FONT> </P>
<OL>

<FONT SIZE=2><LI>Debugging version</FONT> </LI></OL>

<FONT SIZE=2><P>Run <B>blddbg.bat</P>
<OL>

</B><LI>Nondebugging version</FONT> </LI></OL>

<FONT SIZE=2><P>Run <B>bldrel.bat</P>
</B><P>Either of these will compile the entire package, placing the executables into the <I>port\winnt\package\distrib</I> directory. After which the graphical installer will be built. </P>
<P>A new Microsoft Visual C++ 5.x top level makefile is almost complete, which will be another option.</P>
</FONT><U><FONT SIZE=5><P>Batch Install</P>
</U></FONT><I><FONT SIZE=2><P>package\distrib\install.bat</P>
</I><P>NOTE: You will now have to modify the configuration files installed by the install.bat program and also the ntp.conf file (config file) installed in the WinNT home directory. </P>
<P>****YOU MUST ****** modify the directory line in the ntp.conf or ntp.ini</FONT> </P>
<FONT SIZE=2><P>(it will accept either name)... and change the single slash to double slashes</FONT> </P>
<FONT SIZE=2><P>ie. <B>c:\winnt\ntp.conf</B> becomes <B>c:\\winnt\\ntp.conf <BR>
</P>
</B></FONT><U><FONT SIZE=5><P>Graphical Install</P>
</U></FONT><FONT SIZE=2><P>If you currently have NTP on this machine (any older version that was NOT installed using this GUI) you must STOP NOW, and REMOVE IT from your system before running this install program. There is no way to easily do this automatically.</P>
<I><P>port\winnt\package\\intel\disk1\setup.exe</P>
</I><P>This installation program will create what it thinks are sensible defaults for the configuration files for NTP. If you have a tricky setup, let it finish, then go back and stop the service (try the control panel applet) and edit the configuration files. The files will all be in the Windows System directory (default is %windir%\) and will be named as follows:</FONT> </P>
<FONT SIZE=2><P>ntp.conf - the NTP configuration file.</FONT> </P>
<FONT SIZE=2><P>ntp.drift - the NTP drift file</P>
</FONT><U><FONT SIZE=5><P>Other Batch Files</U></FONT> </P>

<UL>
<FONT SIZE=2><LI>mkdist.bat - To package binaries for in a ZIP archive.</FONT> </LI>
<FONT SIZE=2><LI>mksrc.bat - To package source, excluding files specified in the "excludes" file.</FONT> </LI>
<FONT SIZE=2><LI>port\winnt\package\build.bat - Creates GUI installer, must be modified to reflect InstallShield source directory.</FONT> </LI></UL>

<FONT SIZE=2><P>There are some important notes concerning the InstallShield SDK You must modify the build.bat file to change the InstallShield source directory, and you must modify the <I>setup.lst</I> to reflect the full pathnames based on where you are building the software.<BR>
</P>
</FONT><H2>ANNOUNCE: Enhancements to the Windows NT port of NTP </H2>
<FONT SIZE=2><P>This set of changes fixes all known bugs, and it includes several major enhancements.</FONT> </P>
<FONT SIZE=2><P>Many changes have been made both to the build environment as well as the code. There is no longer an ntp.mak file, instead there are two batch files bldrel.bat and blddbg.bat file that will build the entire source.</FONT> </P>
<FONT SIZE=2><P>Perl5 for Win32 is required, but is easily available from the NT Resource Kit or from the Internet at <I>http://www.perl.hip.com</I>.</FONT> </P>
<FONT SIZE=2><P>The multiple interface support was adapted from Larry Kahn's work on the BIND NT port. I have not been able to test it adequately as I only have NT servers with one network interfaces on which to test.</FONT> </P>
<FONT SIZE=2><P>Enhancements:</FONT> </P>

<UL>
<FONT SIZE=2><LI>Event Logging now works correctly.</FONT> </LI>
<FONT SIZE=2><LI>Version numbers now work (requires Perl during build)</FONT> </LI>
<FONT SIZE=2><LI>Support for multiple network interface cards (untested)</FONT> </LI>
<FONT SIZE=2><LI>NTP.CONF now default, but supports ntp.ini if not found</FONT> </LI>
<FONT SIZE=2><LI>Installation procedure automated.</FONT> </LI>
<FONT SIZE=2><LI>All paths now allow environment variables such as %windir%</FONT> </LI></UL>

<FONT SIZE=2><P>Bug fixes:</FONT> </P>

<UL>
<FONT SIZE=2><LI>INSTSRV replaced, works correctly</FONT> </LI>
<FONT SIZE=2><LI>Cleaned up many warnings</FONT> </LI>
<FONT SIZE=2><LI>Corrected use of an uninitialized variable in XNTPD</FONT> </LI>
<FONT SIZE=2><LI>Fixed ntpdate -b option</FONT> </LI>
<FONT SIZE=2><LI>Fixed ntpdate to accept names as well as IP addresses</FONT> </LI>
<FONT SIZE=2><LI>Fixed problem with "longjmp" in xntpdc/ntpdc.c that</FONT> </LI>
<FONT SIZE=2><LI>caused a software exception on doing a Control-C in xntpdc.</FONT> </LI>
<FONT SIZE=2><LI>A Cntrl-C now terminates the program.</FONT> </LI></UL>

<FONT SIZE=2><P>See below for more detail:</FONT> </P>
<FONT SIZE=2><P>Note: SIGINT is not supported for any Win32 application including Windows NT and Windows 95. When a CTRL+C interrupt occurs, Win32 operating systems generate a new thread to specifically handle that interrupt. This can cause a single-thread application such as UNIX, to become multithreaded, resulting in unexpected behavior.</P>
<P>Possible enhancements and things left to do:</FONT> </P>

<UL>
<FONT SIZE=2><LI>Reference clock drivers for NT (at least Local Clock support)</FONT> </LI>
<FONT SIZE=2><LI>Control Panel Applet</FONT> </LI>
<FONT SIZE=2><LI>InstallShield based installation, like NT BIND has</FONT> </LI>
<FONT SIZE=2><LI>Integration with NT Performance Monitor</FONT> </LI>
<FONT SIZE=2><LI>SNMP integration</FONT> </LI>
<FONT SIZE=2><LI>Fully test multiple interface support</FONT> </LI></UL>

<FONT SIZE=2><P>Known problems:</FONT> </P>

<UL>
<FONT SIZE=2><LI>bug in ntptrace - if no Stratum 1 servers are available,</FONT> </LI>
<FONT SIZE=2><LI>such as on an IntraNet, the application crashes.</FONT> </LI></UL>

<FONT SIZE=2><P>Greg Schueman - schueman@acm.org</P>
</FONT><TT><P>------------------------------------------------------------------------</TT> </P>
<TT><P>Disclaimer of Warranties. THE SOFTWARE AND ASSOCIATED DOCUMENTATION ARE PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY WARRANTY OF MERCHANTABILITY, FITNESS FOR ANY PARTICULAR PURPOSE, OR NON-INFRINGEMENT. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE SOFTWARE AND DOCUMENTATION IS WITH YOU. NO ONE WARRANTS THAT THE SOFTWARE WILL MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE SOFTWARE WILL BE UNINTERRUPTED OR ERROR FREE, OR THAT DEFECTS IN THE SOFTWARE WILL BE CORRECTED.</P>
<P>PRODUCTION, OR DISTRIBUTION OF THE SOFTWARE BE LIABLE TO YOU ON ACCOUNT OF ANY CLAIM FOR ANY SPECIAL EXEMPLARY OR PUNITIVE DAMAGES, INCLUDING ANY LOST PROFITS, LOST SAVINGS, BUSINESS INTERRUPTION, LOSS OF BUSINESS OR PERSONAL INFORMATION OR ANY OTHER INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE, THE INABILITY TO USE, QUALITY, OR PERFORMANCE OF THE SOFTWARE AND DOCUMENTATION, EVEN IF SAID AUTHORS, HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</TT> </P>
<TT><P>------------------------------------------------------------------------ </P></TT></BODY>
</HTML>
