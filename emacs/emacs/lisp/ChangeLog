1997-09-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* Version 20.2 released.

	* textmodes/outline.el (outline-up-heading):
	Avoid infinite loop at beginning of buffer.

1997-09-19  Kenichi Handa  <handa@etl.go.jp>

	* loadup.el: Load case-table before loading
	international/characters.el.

	* international/characters.el: Set case-table for Cyrillic characters.

1997-09-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* gnus/gnus-topic.el (gnus-topic-check-topology):
	Don't crash if (cadr topic) is nil.

	* language/english.el (ASCII): Define as alias for English.

	* saveplace.el (save-place-version-control): Make nil the default.

	* international/quail.el (quail-simple-translation-keymap):
	Bind delete and backspace explicitly, like DEL.

1997-09-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cal-menu.el: Require calendar only when compiling.

	* international/quail.el (quail-set-keyboard-layout):
	Add autoload cookie.

1997-09-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* Version 20.1 released.

	* startup.el (normal-top-level-add-to-load-path):
	Ignore case when comparing, if ms-dos or windows-nt.

	* mail/mh-comp.el: Many doc fixes.
	(mh-send-letter): Choose a coding system
	the same way sendmail-send-it (sendmail.el) does.

	* international/quail.el (quail-simple-translation-keymap): 
	Set the default (t) binding properly.
	
	* international/quail.el (quail-terminate-translation):
	If quail-overlay is not an overlay, don't mess with it.

	* international/mule-util.el:
	(coding-system-unification-table-for-encode): Recurse properly.
	(coding-system-unification-table-for-decode): Recurse properly.

1997-09-15  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* mule.el (find-new-buffer-file-coding-system): Reflect
	text coding part of default-buffer-file-coding-system to
	buffer-file-coding-system when buffer-file-coding-system is
	not locally set and ASCII only text is read.

1997-09-15  Barry A. Warsaw  <cc-mode-help@python.org>
	
	* progmodes/cc-styles.el (c-initialize-builtin-style):
	Copy the whole tree instead of just copy-sequence.

1997-09-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (Info-suffix-list): Add suffixes for MS-DOS version
	running on Windows 95 with long file name support.
	(info-insert-file-contents): When the Info file is to be
	uncompressed, insert it literally.

1997-09-15  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* international/quail.el (quail-completion-list-translations): Fix
	and simplify generation of translation list.

	* international/titdic-cnv.el (tit-process-header): Convert
	argument of KEYPROMPT if it contains an escape.
	(tit-process-body): Handle trailing whitespace and multiple spaces
	between phrases.

	* startup.el (initial-major-mode): Fix customize type.

	* gnus/gnus-sum.el (gnus-summary-respool-default-method):
	Likewise.

	* gnus/gnus-score.el (gnus-orphan-score): Likewise.
	(gnus-score-default-header): Likewise.
	(gnus-score-default-type): Likewise.

	* emulation/viper-mous.el (viper-mouse-search-key): Likewise.
	(viper-mouse-insert-key): Likewise.

	* gnus/gnus.el (gnus-valid-select-methods): Likewise.

	* gnus/gnus-art.el (gnus-article-x-face-too-ugly): Likewise.
	(gnus-saved-headers): Likewise.
	(gnus-article-time-format): Doc fix.

1997-09-15  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* font-lock.el (tex-font-lock-keywords-2): Don't treat \item like \it.

1997-09-15  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/kkc.el (kkc-mode-map): Bind all control keys to
	kkc-non-kkc-command.

1997-09-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emacs-lisp/edebug.el (edebug-enter): Save, and bind to nil,
	overriding-local-map and overriding-terminal-local-map.

	* textmodes/fill.el (canonically-space-region): Doc fix.
	(fill-context-prefix): If the second line has the first line prefix,
	plus whitespace, use the part that the first line shares.
	(fill-individual-paragraphs): When prefix changes,
	usually get the new prefix from just one line,
	with an exception for indented first lines of paragraphs.
	Start a new paragraph when a line has extra indentation
	after the fill prefix.
	
	* international/mule-util.el (truncate-string-to-width): Doc typo fix.

1997-09-14  Hrvoje Niksic  <hniksic@srce.hr>

	* arc-mode.el: Customized.

1997-09-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* disp-table.el (standard-display-european):
	Do something useful where AUTO is t or a symbol.

1997-09-13  Erik Naggum  <erik@naggum.no>

	* ph.el: Require cl at compile-time.

	* cl-macs.el (cl-loop-let): Use `last', not `last*'

1997-09-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* language/english.el (setup-english-environment): Don't set
	the terminal and keyboard coding systems.

	* international/mule-util.el (truncate-string-to-width):
	Rename arg WIDTH to END-COLUMN.  Fix the case when START-COLUMN
	is after END-COLUMN.  Doc fixes.

	* mail/sendmail.el (mail-do-fcc): When writing to an Rmail file,
	use rmail-file-coding-system or else emacs-mule.

	* gnus/gnus-start.el (gnus-default-subscribed-newsgroups):
	Fix custom type.  Doc fix.
	(gnus-init-file): Doc fix.

1997-09-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* startup.el (normal-top-level-add-to-load-path):
	Try looking for the unmodified default-directory in load-path.

	* gud.el (perldb): Fix paren error in call to read-from-minibuffer.

	* emacs-lisp/debug.el (debug): Allow recursive minibuffers
	if we're in a minibuffer already.

	* simple.el (next-history-element):
	Cope if minibuffer-text-before-history is nil.

	* cus-edit.el (customize-group): Handle groups not yet loaded.
	
1997-09-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* ph.el (ph-server): Fix customize type.

	* emulation/viper-cmd.el (viper-smart-suffix-list): Likewise

	* emulation/viper.el (viper-non-vi-major-modes): Likewise.

	* emulation/viper-macs.el (viper-repeat-from-history-key):
	Likewise.

	* emulation/viper-mous.el (viper-mouse-search-key): Likewise.
	(viper-mouse-insert-key): Likewise.

	* emulation/viper-ex.el (ex-unix-type-shell): Likewise.

	* add-log.el (add-log-current-defun-function): Likewise.

	* cal-china.el (chinese-calendar-time-zone): Likewise.
	(chinese-calendar-standard-time-zone-name): Likewise.

	* gnus/gnus-start.el (gnus-site-init-file): Likewise.

	* gnus/gnus-group.el (gnus-permanently-visible-groups): Likewise.

	* gnus/gnus-sum.el (gnus-summary-thread-gathering-function):
	Likewise.

1997-09-12  Erik Naggum  <erik@naggum.no>

	* cal-menu.el, cal-move.el: Require calendar.el.

1997-09-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* cus-edit.el (hook) [:value-to-internal]: Use a nil value
	unchanged.

	* completion.el (save-completions-flag): Doc fix.

	* indent.el (tab-stop-list): Doc fix.

	* strokes.el (strokes-click-command): Doc fix.

	* progmodes/make-mode.el
	(makefile-pickup-everything-picks-up-filenames-p): Doc fix.
	(makefile-mode): Doc fix.

	* solar.el (calendar-location-name): Doc fix.

1997-09-12  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-keym.el (viper-want-ctl-h-help): Updated doc string.
	(viper-vi-basic-map,viper-insert-basic-map,viper-replace-map):
	added binding for backspace.
	* viper-cmd.el (viper-adjust-keys-for): Separated backspace and C-h.

1997-09-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cal-french.el (french-calendar-accents): Change variable to function.
	Uses changed.  Test that we can display multibyte chars.
	(french-calendar-day-name-array, french-calendar-month-name-array):
	New functions.  Use them instead of directly using these variables.
	(french-calendar-multibyte-month-name-array): New variable.
	(french-calendar-multibyte-special-days-array): New variable.
	(calendar-print-french-date): Bind enable-multibyte-characters to t.

	* cus-edit.el (custom-face-menu): Use custom-face-save-command.
	not custom-face-save.
	(custom-face-save-command): New function.
	(custom-variable-save): Fix error message.

1997-09-12  Inge Frick  <inge@nada.kth.se>

	* compile.el (compilation-parse-errors): Fixed two bugs that
	could make compilation-parse-errors loop infinitely.  Each round
	of the parsing loop now either moves point ahead at least a line
	or sets `found-desired' to true to stop the loop.

1997-09-11  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/quail.el (quail-translation-keymap): Fix previous
	change.

	* mail/sendmail.el (sendmail-send-it): If both
	buffer-file-coding-system and sendmail-coding-system are nil, use
	iso-latin-1 for encoding.

1997-09-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ps-print.el (ps-emacs-face-kind-p): Function deleted.
	(ps-face-bold-p, ps-face-italic-p):
	Check ps-bold-faces or ps-italic-faces.
	(ps-zebra-stripes, ps-zebra-stripe-height): Doc fixes.
	(ps-line-lengths, ps-nb-pages-buffer, ps-nb-pages-region, ps-setup): 
	Doc fixes.

	* international/quail.el (quail-update-translation):
	Fix previous change.

	* term/internal.el: Use raw-text as coding system.

1997-09-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* international/mule-diag.el (describe-coding-system): Describe
	coding systems of type 5, raw-text.

	* hexl.el (hexlify-buffer): Bind coding-system-for-write to
	raw-text with eol-type derived from the buffer-file-coding-system.

1997-09-11  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-util.el (ediff-good-frame-under-mouse): new function.
	(ediff-really-quit): now uses ediff-good-frame-under-mouse instead 
	of testing a whole bunch of conds in-line.

1997-09-11  Kenichi Handa  <handa@etl.go.jp>

	* international/kkc.el (kkc-mode-map): Bind meta-prefix-char to a
	map which only has default key binding to
	quail-execute-non-quail-command.
	(kkc-non-kkc-command): Handle the key sequence as the same way as
	universal-argument-other-key.

	* international/quail.el (quail-translation-keymap):
	Make the default binding with define-key.
	(quail-simple-translation-keymap):
	Handle meta-prefix-char the way isearch does.
	Make the default binding with define-key.
	(quail-conversion-keymap): Likewise.
	(quail-execute-non-quail-command): Handle the key sequence as the
	same way as universal-argument-other-key.
	(quail-make-guidance-frame): Don't dedicate the guidance buffer window.
	(quail-show-guidance-buf): Likewise.
	(quail-hide-guidance-buf): Delete code to turn off window dedication.

1997-09-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* startup.el (initial-scratch-message): New variable.
	(command-line-1): Use initial-scratch-message.

	* international/quail.el (quail-translation-keymap):
	Handle meta-prefix-char the way isearch does.

	* international/mule-cmds.el (select-input-method):
	No error if enable-multibyte-characters is nil.

1997-09-11  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* gnus/gnus-mule.el: Set no-conversion for network communication
	with nntpd.
	(gnus-mule-initialize): For safety, set no-conversion for network
	communication with nntpd.

1997-09-10  Michael Ernst  <mernst@cs.washington.edu>

	* uniquify.el (uniquify-ignore-buffers-re): Added.

1997-09-10  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-keym.el (viper-help-modifier-map): deleted; help mode map is 
	no longer modified. 
	* viper.el (viper-set-hooks): make help buffers come up in emacs state.
	
1997-09-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emacs-lisp/eval-reg.el (elisp-eval-buffer):
	New arg FILENAME is ignored.

1997-09-10  Kenichi Handa  <handa@etl.go.jp>

	* language/ethio-util.el (setup-ethiopic-environment): Don't bind
	keys in global-map, don't add a hook to rmail-mode-hook and
	mail-mode-hook.
	(ethio-mode): New buffer local variable.
	(ethio-mode-map): New variable.
	(ethio-mode): New function.
	(ethio-sera-to-fidel-mail-or-marker): New function.
	(ethio-fidel-to-sera-mail-or-marker): New function.
	(ethio-find-file): Do nothing if not in ethio-mode.
	(ethio-write-file): Likewise.
	(ethio-prefer-ascii-space): Moved from leim/quail/ethiopic.el.
	(ethio-toggle-space): Likewise.
	(ethio-insert-space): Likewise.
	(ethio-insert-ethio-space): Likewise.
	(ethio-prefer-ascii-punctuation): Likewise.
	(ethio-toggle-punctuation): Likewise.
	(ethio-gemination): Likewise.

	* mail/sendmail.el (sendmail-send-it): The priority of coding
	system for encoding outgoing mails is (1) local value of
	buffer-file-coding-system, (2) sendmail-coding-system,
	(3) default-buffer-file-coding-system.

1997-09-10  Kenichi Handa  <handa@etl.go.jp>

	* language/japan-util.el (setup-japanese-environment): Give
	iso-2022-jp to set-default-coding-system if not running on DOS.
	(read-hiragana-string): Use input method "japanese-hiragana".

	* gnus/gnus-mule.el: Add coding system specification for several
	news groups.

1997-09-09  Dave Love  <d.love@dl.ac.uk>

	* lisp-mode.el (lisp-imenu-generic-expression):
	Recognize `defcustom' and `defgroup".

1997-09-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* disp-table.el (standard-display-european): Doc fix.

1997-09-09  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/mule-cmds.el (input-method-verbose-flag):
	Doc-string fixed.

	* international/quail.el (quail-simple): New function.
	(quail-require-guidance-buf): New function.
	(quail-show-guidance-buf): Do not show guidance buffer if simple
	input method is used in the minibuffer.
	(quail-update-guidance): Likewise.

1997-09-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* disp-table.el (standard-display-european):
	If AUTO is non-nil, intern it.
	Don't call set-terminal-coding-system if noninteractive.
	
	* international/quail.el (quail-translation-keymap)
	(quail-simple-translation-keymap, quail-conversion-keymap):
	Don't define escape.

	* ps-print.el (ps-face-bold-p): Use face-bold-p.
	(ps-face-italic-p): Use face-italic-p.

	* comint.el (comint-file-name-chars): Doc fix.
	(comint-word): Treat all non-ASCII chars as "part of word".

1997-09-09  Michael Ernst  <mernst@cs.washington.edu>

	* uniquify.el: use uniquify-file-name-nondirectory throughout;
	documentation tweaks.

1997-09-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* view.el (view-end-message): Don't mention q if it really do anything.

	* dired.el (dired-get-filename): Don't call encode-coding-string
	if file-name-coding-system is non-nil.

	* emacs-lisp/find-func.el: New file.

1997-09-08  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-variable-save): Fixed doc string.

	* cus-edit.el (custom-variable-menu): Make it clear that `Lisp
	mode' edit the initial lisp expression.

1997-09-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (info-insert-file-contents): Bind
	coding-system-for-write to no-conversion.

1997-09-08  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* dabbrev.el (dabbrev-case-fold-search): Remove extra quote in
	customize constant.
	(dabbrev-case-replace): Likewise.

	* ispell.el (ispell-personal-dictionary): Fix customize type.

	* shell.el (shell-chdrive-regexp): Likewise.

	* progmodes/executable.el (executable-chmod): Likewise.

	* emacs-lisp/lisp.el (defun-prompt-regexp): Likewise.

	* progmodes/f90.el (f90-break-before-delimiters): Likewise.

	* progmodes/hideshow.el (hs-minor-mode-hook): Likewise.

	* progmodes/icon.el (icon-tab-always-indent): Likewise.

	* browse-url.el (browse-url group): Remove autoload cookie.

	* diff.el (diff group): Remove autoload cookie.

1997-09-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (insert-directory): Encode the file name.

	* startup.el (command-line): Pass charset to
	standard-display-european.

	* disp-table.el (standard-display-european): Arg AUTO
	specifies coding system for terminal output (if needed).

1997-09-08  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/quail.el (quail-translation-keymap): Bind C-space
	to quail-select-current.

1997-09-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/fill.el (fill-individual-paragraphs): Don't include
	paragraph-separate lines in any paragraph; just skip them.

	* telnet.el (telnet-initial-filter): Temporarily go to proper buffer.

1997-09-07  Barry A. Warsaw  <cc-mode-help@python.org>

	* progmodes/cc-mode.el (c-version): Updated.

	* progmodes/cc-cmds.el (c-beginning-of-statement):
	Fixes in sentence movement to properly
	handle M-e moving forward into a comment when looking at preceding
	whitespace, and M-a moving backward into comment when looking at
	following whitespace.

	* progmodes/cc-cmds.el (c-comment-line-break-function):
	Don't break line in the middle of a string.

	* progmodes/cc-langs.el (c-mode-base-map): Don't define C-c C-e here.
	(c-mode-map, c++-mode-map): Define C-c C-e here.
	(objc-mode-map): Define C-c C-e, not /.
	(java-mode-map, idl-mode-map): Don't define /.

	* progmodes/cc-engine.el (c-end-of-statement-1):
	Wrap backward-up-list in a c-safe call so no error results when
	buffer contains only a comment and point is at eob.

	* progmodes/cc-engine.el (c-inside-bracelist-p):
	Add a test to the enum list test so that enum in a k&r
	arg decl doesn't confuse handling of the function body.

	* progmodes/cc-styles.el (c-style-alist) <python>:
	knr-argdecl-intro == +, fill-column = 78,
	arglist-intro <= +, inextern-lang <= 0.
	Set c-comment-continuation-stars to "".

1997-09-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/sendmail.el (mail-mode): Allow dash in citation prefixes
	in adaptive-fill-regexp and adaptive-fill-first-line-regexp.

	* cus-edit.el (custom-file): Now nil stands for "use the init file".
	(custom-save-delete): If custom-file is nil, use user-init-file.
	(custom-save-all): Likewise.

	* international/mule.el (load-with-code-conversion):
	Use third arg to eval-buffer and don't set buffer-file-name.

	* disp-table.el (standard-display-european): Set or clear
	the terminal coding system.

	* version.el (emacs-version): If HERE, add a newline.

	* startup.el (command-line-1): Update copyright year in string.

	* international/mule-cmds.el (universal-coding-system-argument):
	Improve prompt strings.

	* time-stamp.el (time-stamp-time-zone): Allow nil as alternative.

1997-09-06  Michael Ernst  <mernst@cs.washington.edu>

	* uniquify.el: Rename uniquify-fix-list-* to uniquify-fix-item-*.
	All callers changed.
 	(uniquify-rationalize-file-buffer-names):
	Use directory-file-name for directories (eliminate trailing slash).
	Call uniquify-fix-item-unrationalized-buffer.
	(uniquify-buffer-file-name): Use directory-file-name.
	(uniquify-fix-item-unrationalized-buffer): New function.
	(uniquify-unrationalized-buffer): Function deleted.

1997-09-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* font-lock.el (font-lock-comment-face, etc.):
	defvars moved up to avoid warnings.
	(font-lock-face-attributes, global-font-lock-mode): Add defvars.

	* ps-print.el (ps-setup): ps-zebra-stripe => ps-zebra-stripes.
	ps-number-of-zebra =>  ps-zebra-stripe-height.

	* international/quail.el (quail-execute-non-quail-command):
	Call quail-terminate-translation.

	* emacs-lisp/lisp.el (move-past-close-and-reindent):
	Don't move closeparen back onto the end of a comment.

	* dired.el (dired-flag-garbage-files): Move interactive flag
	across doc string.

	* progmodes/m4-mode.el (m4-mode): Add autoload cookie.

	* files.el (auto-mode-alist): Handle .m4 and .mc files.

1997-09-06  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* font-lock.el (global-font-lock-mode): When turning off
	Global Font Lock mode, turn off Font Lock mode everywhere.

	* menu-bar.el (menu-bar-options-menu): Simplify global-font-lock-mode
	entry using enhanced global-font-lock-mode function.

	* emacs-lisp/regexp-opt.el (regexp-opt): Doc fix.

1997-09-06  Michael Kifer  <kifer@cs.sunysb.edu>
	
	* ediff-ptch.el (ediff-patch-buffer-internal):
	now behaves uniformely, whether the buffer
	visits a file or not.
	* ediff-util.el (ediff-other-buffer): smarter selection of
	suitable other buffer. 
	Moved binding of backspace after the binding for C-h.
	Makes a difference in XEmacs. 
	* ediff.el (ediff-patch-buffer): smarter selection of the defaults.
	* ediff-mult.el (ediff-meta-session-p): new function
	(ediff-operate-on-marked-sessions): now recursively descends into
	subdirectories.
	
1997-09-05  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* faces.el (set-face-font-auto):
	instanciate-fontset renamed to instantiate-fontset.

	* international/fontset.el (uninstantiated-fontset-alist): 
	Variable name spelling fixed, and doc fix.  All uses fixed.
	(instantiate-fontset): Function name spelling fixed.

	* isearch.el (search-whitespace-regexp): Doc fix.

	* international/mule.el (load-with-code-conversion):
	Don't bind enable-multibyte-characters; set it in the temp buffer.

	* compile.el (compilation-ask-about-save): Add autoload cookie.

	* progmodes/simula.el (simula-emacs-features):
	Treat Emacs 20 like Emacs 19.

1997-09-05  Vinicius Jose Latorre  <vinicius@cpqd.br>

	* ps-print.el: Some comment and doc fixes.
	(ps-print-version): New version number (3.05.1).
	(ps-adobe-tag): Replace defvar by defcustom, and doc fix.
	(ps-print-with-faces, ps-print-without-faces)
	(ps-spool-with-faces, ps-spool-without-faces): Add arg REGION-P.
	(ps-print-region-with-faces, ps-print-region)
	(ps-spool-region, ps-spool-region-with-faces): Fix calls to
	the functions above.
	(ps-setup): Print value of ps-zebra-stripe, ps-number-of-zebra,
 	ps-line-number, ps-print-background-image,
	and ps-print-background-text.
	(ps-print-prologue-1): Bug fix in PostScript programming:
	/BeginDSCPage, /BeginPage.
	(ps-showpage-count, ps-ref-bold-faces, ps-ref-italic-faces)
	(ps-ref-underlined-faces, font-lock-face-attributes)
	(ps-initialize-faces): Vars deleted.
	(ps-override-list, ps-extension-to-bit-face)
	(ps-extension-to-screen-face, ps-initialize-faces, ps-header-height)
	(ps-hard-lf, ps-soft-lf, ps-get-face, ps-map-font-lock): Fn deleted.
	(ps-extend-face-list, ps-extend-face): Doc fix.
	(ps-print-face-alist): New var to handle face alist.
	(ps-printing-region): New var and fn.
	(ps-header-page, ps-set-face-bold, ps-set-face-italic)
	(ps-set-face-underline, ps-set-face-attribute, ps-map-face): New fn.
	(ps-rmail-mode-hook, ps-rmail-print-message-from-summary)
	(ps-print-message-from-summary, ps-vm-print-message-from-summary):
	Fns moved.
	(ps-background): New argument PAGE-NUMBER.
	(ps-begin-file): Bug fix and print proper line number in a region.
	(ps-begin-page): Call ps-header-page.
	(ps-get-buffer-name): Indicates in the header when printing a region.
	(ps-end-page): Delete ps-showpage-count.
	(ps-dummy-page): Calls ps-header-page.
	(ps-set-color): Programming improvement.
	(ps-plot-region): Doc fix.
	(ps-face-attributes): Same functionality as deleted ps-get-face.
	(ps-build-reference-face-lists): Do the job by calling
	ps-set-face-bold and ps-bold-faces, and friends.

1997-09-05  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* language/japan-util.el (setup-japanese-environment): Set
	coding-category-iso-8-else to japanese-iso-8bit.

1997-09-05  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emacs-lisp/easymenu.el (easy-menu-create-keymaps):
	If two distinct items have the same string, make different
	key events for them.

	* international/mule.el (charset-quoted-standard-p): New function.
	Use it instead of quoted-symbol-p.
	(charset-id): Use charset-quoted-standard-p.
	(quoted-symbol-p): Function deleted.

	* ispell.el (ispell-command-loop):
	Restore dedicated flg of selected window.
	(ispell-overlay-window): Move dedicated flag of old window
	into the bottom of the two windows made from it.

	* international/mule-cmds.el (read-language-name): Doc fix.
	(set-language-environment): Improve prompt.

	* international/mule.el (set-terminal-coding-system):
	Specify default to read-coding-system.
	(set-keyboard-coding-system): Likewise.

1997-09-05  Paul Eggert  <eggert@twinsun.com>

	* gnus/message.el (message-unix-mail-delimiter): Initialize
	to the same value that rmail-unix-mail-delimiter is initialized to.

1997-09-05  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-init.el (viper-replace-region-start-delimiter):
	Improved the default.
	* viper-mous.el (viper-mouse-click-search-word):
	(viper-mouse-click-insert-word):
	Fixed to not react when click is not over a text area.
	* viper.el (read-file-name): Unadvised.
	* viper-cmd.el (viper-insert-state-post-command-sentinel)
	(viper-save-last-insertion):
	Check if args and viper-insert-point are markers.
	(viper-minibuffer-trim-tail): New function.
	
1997-09-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule.el (set-buffer-file-coding-system): 
	Improve prompt.

	* international/mule-cmds.el (toggle-input-method):
	No error if enable-multibyte-characters is nil.
	(read-input-method-name): Specify the input history properly.
	(select-input-method): Improve prompt.

	* international/mule-util.el (string-to-sequence):
	Work usefully when enable-multibyte-characters is nil.

	* international/quail.el (quail-update-translation):
	Do insert translated char when enable-multibyte-characters is nil.

1997-09-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule-cmds.el (read-language-name): Use a default,
	not an initial input.

	* international/mule-conf.el (file-coding-system-alist):
	Match `loaddefs.el' more accurately.

	* rect.el (operate-on-rectangle): If we overshoot when looking
	for endcol, back up.

	* menu-bar.el (menu-bar-help-menu):
	Rename info item to "Info (Browse Manuals)".

	* menu-bar.el (menu-bar-options-menu): String now "Global Options".
	Rewrite the font lock toggle to turn off font lock on all buffers.
	Choose lazy-lock by setting font-lock-support-mode.

	* ispell.el (ispell-overlay-window): Undo previous change;
	in other words, don't bind inhibit-frame-unsplittable.

	* international/mule-cmds.el (mule-menu-keymap): 
	Define only as a variable; specify a name for the keymap.
	(mule-keymap): Define only as variable.

	* mail/sendmail.el (mail-mode): Set adaptive-fill-first-line-regexp
	specially, not same as adaptive-fill-regexp.

1997-09-03  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-update-guidance): If PROMPTKEY is
	specified in the original CXTERM dictionary, show also candidates
	in Quail guidance buffer.
	(quail-show-translations): Likewise.

1997-09-02  Andrew Innes  <andrewi@harlequin.co.uk>

	* term/w32-win.el (w32-handle-scroll-bar-event): On up and
	down events, place point at window start position.
	Bind f10 to menubar.
	Move keypad key definitions to w32-fns.el.

	* dos-w32.el (file-name-buffer-file-type-alist): Add more
	extensions for binary files.
	
	* w32-fns.el: Don't unset C-mouse-down bindings.
	Ignore "Windows" keys by default.
	Move keypad key definitions from term/w32-win.el.
	(convert-standard-file-name): New function.
	(make-auto-save-file-name): Use convert-standard-file-name.

1997-09-02  Michael Welsh Duggan  <md5i@schenley.com>

	* term/w32-win.el (mouse-wheel-scroll-amount): New variable.
	(mouse-wheel-scroll-line, mouse-wheel-scroll-screen): New functions.
	Bind mouse-wheel events to mouse-wheel functions.

1997-09-02  Geoff Voelker  <voelker@cs.washington.edu>

	* w32-fns.el: Update doc strings.
	(w32-startup): Deleted function.
	(w32-check-shell-configuration, w32-init-info): New functions.
	(w32-system-shell-p): Renamed from w32-using-system-shell-p.
	Added shell name argument.

1997-09-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/etags.el (find-tag-tag): Pass default to completing-read.

	* dired.el (dired-get-filename): Don't call encode-coding-string
	if FILE is nil.

1997-09-02  Andrew Innes  <andrewi@harlequin.co.uk>

	* comint.el (comint-file-name-chars): Use separate sets for ms-dos
	and windows-nt.

	* disp-table.el (standard-display-european): Map \222 to apostrophe.

	* files.el (file-truename) [windows-nt]: Use the canonicalized
	long file name as the truename.
	(auto-mode-alist): Use archive-mode for Java JAR files.
	(recover-file) [windows-nt]: Don't try to list directory.

	* frame.el (other-frame) [windows-nt]: Use w32-focus-frame.

	* gud.el (gud-gdb-marker-regexp): Allow for drive letter and colon.

	* scroll-bar.el (scroll-bar-maybe-set-window-start): Change window
	if current start is equal to start of next portion.
	
1997-09-02  Geoff Voelker  <voelker@cs.washington.edu>

	* cus-edit.el (custom-display): Use w32 instead of win32.
	* browse-url.el (browse-url-netscape): Check for w32 window-system
 	symbol.

1997-09-02  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* enriched.el (enriched-decode-foreground,
	enriched-decode-background): Test of facemenu-get-face return
	value no longer needed.

	* facemenu.el (facemenu-get-face): Just warn when given an
	undefined color, no error, still return face.

1997-09-02  Kenichi Handa  <handa@etl.go.jp>

	* mail/rmail.el (rmail): Reset enable-multibyte-characters to the
	default value to enable message decoding if the default value is
	non-nil.

	* international/quail.el (quail-keyboard-layout-alist): Add an
	entry for "atari-german".
	(quail-keyboard-translate): If CH is not in the keyboard location
	covered by quail-keyboard-layout-standard, return CH.
	(quail-show-kbd-layout): Show keyboard layout based on
	quail-keyboard-layout-standard if the current input method
	requires keyboard translation.

1997-09-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule-cmds.el (set-coding-system-map):
	Add an item for universal-coding-system-argument.

1997-09-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* userlock.el (ask-user-about-lock): Abbreviate file name
	and locking user's name.

	* international/mule.el (set-auto-coding): Recognize coding: in first
	line even if not the first variable.

	* language/european.el (setup-8-bit-environment):
	Inhibit message about loading latin-N.el.

1997-09-01  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/quail.el (quail-translation-keymap): Fix prev change.
	(quail-conversion-keymap): Likewise.

	* international/mule-cmds.el (describe-input-method): Fix prev change.
	(read-multilingual-string): Likewise.
	(describe-language-environment): Prompt modified.

	* ispell.el (ispell-region): Take account of the fact that `ispell'
	will return OFFSET by counting non-ASCII characters as one.
	(ispell-dictionary-alist-1): Add coding systems to each entry.
	(ispell-dictionary-alist-2): Likewise.
	(ispell-get-coding-system): New function.
	(ispell-decode-string): New function.
	(ispell-get-casechars): Decode the string if necessary.
	(ispell-get-not-casechars, ispell-get-otherchars): Likewise.

1997-09-01  Naoto TAKAHASHI  <ntakahas@etl.go.jp>

	* language/ethio-util.el (ethio-sera-to-fidel-region,
	ethio-sera-to-fidel-buffer, ethio-fidel-to-sera-region,
	ethio-fidel-to-sera-buffer): Doc-string fixed.

1997-09-01  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-translation-keymap): Do not bind
	"\C-c" to quail-abort-translation.
	(quail-mode-map): Bind key codes 128 through 256 to
	quail-start-translation.
	(quail-translation-keymap): Bind key codes 128 through 256 to
	quail-self-insert-command.
	(quail-conversion-keymap): Bind key codes 128 through 256 to
	quail-start-translation-in-conversion-mode.

	* international/mule-cmds.el (get-language-info): Accept a symbol
	as the arg LANGUAGE-NAME.
	(set-language-info): Likewise.
	(set-language-info-alist): Likewise.
	(register-input-method): Accept a symbol as the args INPUT-METHOD
	and LANGUAGE-NAME.
	(activate-input-method): Accept a symbol as the args INPUT-METHOD.
	(describe-input-method): Likewise.
	(read-multilingual-string): Likewise.
	(set-language-environment): Accept a symbol as the arg LANGUAGE-NAME.
	(describe-language-environment): Likewise.

	* files.el (hack-local-variables-prop-line): Ignore coding: tag.
	(hack-one-local-variable): Likewise.

	* international/mule.el (set-auto-coding): Name changed from
	auto-file-coding-system.  The argument STRING is now a
	concatination of the heading 1K-byte and the tailing 3K-byte of a
	file.
	(set-auto-coding-function): Set it to `set-auto-coding'.
	
1997-08-31  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* emacs-lisp/bytecomp.el (byte-compile-output-file-form): Handle
	custom-declare-variable.

	* international/mule-diag.el (describe-current-coding-system): Add
	missing newline in output.

1997-08-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* gnus/pop3.el (pop3-md5): New function.
	(pop3-apop): Use pop3-md5, not md5.
	(pop3-md5-program): New variable.

	* gnus/md5.el: File deleted.

	* gnus/gnus-soup.el: Require cl at compile time.
	* gnus/gnus-move.el, gnus/gnus-uu.el: Likewise.

	* add-log.el (change-log-font-lock-keywords): Add more to prev change.

1997-08-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dired.el (dired-get-filename): Encode file name
	using the buffer's coding system.

	* mail/sendmail.el (mail-send): Complain about invalid header line.

1997-08-30  Jerry James <jerry@cs.ucsb.edu>

	* format.el (format-subtract-regions): New function.
	(format-property-increment-region): New function.

	* format.el (format-deannotate-region): When multiple annotations
	go into a single text property, split the outer annotations (with
	format-subtract-regions) instead of resetting them; use lists of
	regions instead of a single number for the text property start.

	* format.el (format-deannotate-region): Don't change extents of
	enclosing annotations of the same kind.

	* format.el (format-deannotate-region): Use
	property-increment-region to add to numeric properties.

1997-08-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dos-w32.el (find-buffer-file-type): Don't check for untranslated
	file systems here.
	(find-buffer-file-type-coding-system): For reading a file,
	check for binary file, then text file, then existing file,
	then whether file name is translated.

	* textmodes/text-mode.el (text-mode-hook-identify): New function,
	put on text-mode-hook.  Set text-mode-variant here.
	(text-mode): Don't set it here.

	* disp-table.el (standard-display-european): Doc fix.

1997-08-29  Carsten Dominik  <dominik@strw.LeidenUniv.nl>

	* reftex.el (reftex-customize): Added call to customize browse.
	(reftex-show-commentary): New function.
	(reftex-label-alist): Prefix may contain % escapes.  Nth macro
 	argument may be context. May give two different context methods.
	(reftex-default-label-alist-entries): Customization type changed.
	(reftex-label-menu-flags): Extra flag for searches.
	(reftex-cite-format): Changed completely, % escapes are now used.
	(reftex-comment-citations): New variable.
	(reftex-cite-comment-format): New variable.
	(reftex-cite-punctuation): New variable.
	(reftex-make-master-buffer): Changed name of master buffer,
 	removed interactive.  Runs a hook on the buffer. Interprete
 	TEXINPUTS environment variable.  Allow naked argument for \input.
	Master buffer is now in fundamental mode.
	(reftex-access-scan-info): Name of master buffer changed.
	(reftex-section-regexp): Is now computed from section levels,
	not set	independantly.
	(reftex-section-levels): Made customizable.
	(reftex-label): Interpret % escapes in prefix.  Use label format
 	if given.
	(reftex-replace-prefix-escapes): New function.
	(reftex-uniquify-label): New function.
	(reftex-next-label-number): Function definition removed.
	(reftex-reference): Use reftex-uniquify-label.  Allow more general
 	label commands.
	(reftex-offer-label-menu):
	Interpret new flag in reftex-label-menu-flags.
	(reftex-make-and-insert-label-list): Use text properties to record
 	label index.
	(reftex-find-nearby-label): Allow more general label commands.
	(reftex-scan-buffer-for-labels): Allow more general label commands.
	(reftex-init-section-numbers): New function.
	(reftex-allow-for-ctrl-m): New function.
	(reftex-label-info-update): Allow more general label commands.
	(reftex-label-info): New parameter derive.
	(reftex-short-context): Interprete integer parse as nth arg of macro.
	(reftex-nth-parens-substring): New function.
	(reftex-select-item): Interprete the new 'cnt text property.
	(reftex-pop-to-label): Allow more general label commands.
	(reftex-nicify-text): Allow more general label commands.
	(reftex-toc): Remember previous window configuration.  Use text
 	properties to store info.  Bind mouse-2.
	(reftex-make-master-buffer): New Hook.
	(reftex-last-window-height): New variable.
	(reftex-toc-show-help): New function.
	(reftex-toc-help): New constant.
	(reftex-nearest-section): Use text properties to store info.
	(reftex-empty-toc-buffer): New function.
	(reftex-re-enlarge): New function.
	(reftex-toc-goto-line): New function.
	(reftex-toc-mouse-goto-line-and-hide): New function.
	(reftex-cite-format-builtin): New constant.
	(reftex-cite-format-default): Constant removed.
	(reftex-cite-format-1-author-simple): Constant removed.
	(reftex-cite-format-2-authors): Constant removed.
	(reftex-get-bib-names): New function.
	(reftex-get-bib-authors) Function removed.
	(reftex-format-bib-entry): Use now reftex-get-bib-names.
	(reftex-citation): Completely rewritten. Offers selection of
 	different cite macros first, then the reference menu.  Works with
 	the various new variables mentioned above.  Accept the `a' key to
 	use all selected citations.
	(reftex-insert-bib-matches): New function.
	(reftex-format-citation): Now interpretes % escapes.
	(reftex-select-item): Emulate a search in the menu buffer.
  	Interpret the 'cnt text property.
	(reftex-view-crossref): Allow more general label, cite and ref macros.
	(reftex-highlight-overlays): Add third overlay for search
	in menu buffer.
	(reftex-label-alist-builtin): xalignat and xxalignat environments
 	added.  Slightly reorganized.
	(reftex-reset-scanning-information): Just empty *toc* buffer, do
 	not kill it.
	(reftex-compute-ref-cite-tables): Read the new options in
	`reftex-label-alist' and store them.  Calculate the section regexp.

1997-08-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* compile.el (compilation-error-regexp-alist): 
	Allow spaces in file names for Microsoft C;
	check more carefully for the rest of the error message.

	* international/mule-cmds.el (set-terminal-coding-system): 
	Enable for menus whenever not using X.
	(set-keyboard-coding-system): Likewise.

	* international/quail.el (quail-define-package): New arg SIMPLE.
	(quail-simple-translation-keymap): New keymap.

	* textmodes/texnfo-upd.el, textmodes/texinfmt.el:
	(defgroup, defcustom): Add Emacs 19 compatibility definitions.
	* textmodes/texinfo.el:
	(defgroup, defcustom): Add Emacs 19 compatibility definitions.

1997-08-28  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (make-coding-system): Make TYPE 5 means
	raw-text.
	(after-insert-file-set-buffer-file-coding-system): Set
	enable-multibyte-characters to nil if we read a file with
	no-conversion or raw-text-XXXX.

	* international/mule-conf.el (raw-text): New coding system.  Set
	coding-category-raw-text to raw-text.

	* language/english.el (setup-english-environment): Set
	coding-category-raw-text to raw-text.

	* language/viet-util.el (setup-vietnamese-environment): Set
	coding-category-raw-text to vietnamese-viscii.

	* language/cyril-util.el (setup-cyrillic-alternativnyj-environment):
	Set coding-category-raw-text to cyrillic-alternativnyj.

	* international/mule-cmds.el (update-leim-list-file): Make it
	handle multiple directories.
	(update-all-leim-list-files): Deleted.

	* international/quail.el (quail-update-leim-list-file): Make it
	handle multiple directories.

1997-08-28  Kenichi Handa  <handa@etl.go.jp>

	* earcon.el: Require cl at compile time before loading gnus, etc.

1997-08-28  Tomohiko Morioka  <tmorioka@mule.etl.go.jp>

	* nnfolder.el (nnfolder-request-list): Override
	'nnmail-file-coding-system' by 'nnmail-active-file-coding-system'.
	(nnfolder-request-list, nnfolder-possibly-change-group): Protect
	from conversion by `pathname-coding-system' for XEmacs/mule.
	(nnfolder-group-pathname): Encode pathname for Emacs 20.

	* nnmh.el (nnmh-request-list, nnmh-active-number): Protect from
	conversion by `pathname-coding-system' for XEmacs/mule.

	* nnml.el (nnml-possibly-change-directory): Likewise
	(nnml-retrieve-headers, nnml-request-article,
	nnml-request-group, nnml-request-list): Likewise

	* nnmail.el (nnmail-active-file-coding-system): New variable.
	(nnmail-insert-xref): Encode pathname for Emacs 20.
	(nnmail-write-region, nnmh-retrieve-headers, nnmh-request-article,
	nnmh-request-group, nnmh-possibly-change-directory): Protect from
	conversion by `pathname-coding-system' for XEmacs/mule.
	(nnmail-pathname-coding-system): New variable.
	(nnmail-group-pathname): Encode pathname for Emacs 20.
	nnmail-file-coding-system): New variable.
	(nnmail-find-file): Bind `coding-system-for-read' with
	`nnmail-file-coding-system' for Emacs/mule and XEmacs/mule.
	(nnmail-write-region): Bind `coding-system-for-write' with
	`nnmail-file-coding-system' for Emacs/mule and XEmacs/mule.

	* nnheader.el (nnheader-pathname-coding-system): New variable.
	(nnheader-file-coding-system): New variable.
	(nnheader-group-pathname): Encode pathname for Emacs 20.
	(nnheader-find-file-noselect): Bind `coding-system-for-read' with
	`nnheader-file-coding-system' for Emacs/mule and XEmacs/mule.
	(nnheader-insert-file-contents): Bind `coding-system-for-read'
	with `nnheader-file-coding-system' for Emacs/mule and XEmacs/mule.

	* nntp.el (nntp-coding-system-for-read): New variable.
	(nntp-open-connection): Bind `coding-system-for-read' with
	`nntp-coding-system-for-read' for Emacs/mule and XEmacs/mule.

	* nnspool.el (nnspool-file-coding-system): New variable.
	(nnspool-retrieve-headers, nnspool-retrieve-headers-with-nov,
	nnspool-find-file): Override `nnheader-file-coding-system' by
	`nnspool-file-coding-system' for gnspool on Windows 95/NT.

	* gnus-sum.el (gnus-structured-field-decoder): New variable.
	(gnus-unstructured-field-decoder): New variable.
	(gnus-get-newsgroup-headers, gnus-nov-parse-line): Use
	`gnus-structured-field-decoder' and
	`gnus-unstructured-field-decoder' for Subject field.

1997-08-28  Miyashita Hisashi  <himi@etl.go.jp>

	* pop3.el (pop3-movemail-file-coding-system): Append it for
	assigning a coding system to receive mail with pop3.
	(pop3-movemail): Modify for writing messages with
	pop3-movemail-file-coding-system.

1997-08-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/text-mode.el (text-mode-hook): New defvar.
	(text-mode-variant): New variable.
	(text-mode): Set that variable locally.
	(toggle-text-mode-auto-fill): New command.

	* timer.el (timer-event-handler): Reactivate timer first,
	then run the handler function.

	* isearch.el (isearch-printing-char): Handle nonascii-insert-offset.

	* emacs-lisp/cl.el (last*): Definition deleted.

	* subr.el (last): Accept optional second argument.

	* progmodes/sh-script.el (sh-indent-line): Delete debugging code.

1997-08-27  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el	(browse-url-mail): Use compose-mail[-other-window],
	not always `mail'.

1997-08-27  Eli Zaretskii  <eliz@is.elta.co.il>

	* ps-print.el (ps-print-region-with-faces): Don't call
	ps-generate.

	* term/pc-win.el (msdos-color-aliases): Add missing colors.
	(msdos-color-translate): Handle "deep" and "pale" color
	varieties.

1997-08-27  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el: Change the custom group to `hypermedia'.
	(browse-url-netscape-version): New variable.
	(browse-url-netscape-reload): Use it to account for reported
 	backwards incompatibility.

1997-08-27  Eli Zaretskii  <eliz@psilocin.gnu.ai.mit.edu>

	* term/internal.el: Add coding: emacs-mule tag, to prevent
	interpreting this as sjis-encoded file.

1997-08-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* forms.el (forms-read-only): Un-customize, and doc fix.

	* mail/rmailsum.el (rmail-summary-get-new-mail):
	Handle args like rmail-get-new-mail, and pass them to that function.

	* winner.el: Many changes by Ivar Rummelhoff.

1997-08-26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* language/european.el (setup-8-bit-environment): Load the latin-N
	file again each time.

	* files.el (find-file-literally): Doc fix.

	* help.el (help-with-tutorial): Doc fix.

1997-08-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/mail-utils.el (mail-strip-quoted-names): 

	* ps-print.el (ps-rmail-mode-hook): New function.
	(ps-print-message-from-summary): New function.
	(ps-vm-print-message-from-summary): Use that.
	(ps-gnus-print-article-from-summary): Likewise.
	(ps-rmail-print-message-from-summary): New function.

	* emacs-lisp/lisp-mode.el (emacs-lisp-mode-syntax-table):
	Give formfeed whitespace syntax.

	* international/mule-diag.el (mule-diag): Add save-excursion calls.

1997-08-26  Michael Ernst  <mernst@cs.washington.edu>

	* mail-utils.el (mail-strip-quoted-names): Retain one whitespace
	character between addresses.

1997-08-26  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* facemenu.el (facemenu-unlisted-faces): Expand variable
	definition to allow regexps; add regexps for some packages that
	define a lot of faces.
	(facemenu-add-new-face): Test new face against regexps.
	(list-colors-display): Rather than creating a zillion faces, use
	new (foreground-color . COLOR) and (background-color . COLOR)
	face properties.

1997-08-26  Kenichi Handa  <handa@etl.go.jp>

	* files.el (revert-buffer): Read a file without any code
	conversion if we are reverting from an auto-saved file.

	* language/japanese.el (set-language-info-alist): Change
	iso-2022-7bit to iso-2022-jp.

	* replace.el (query-replace-read-args): Locally bind
	minibuffer-inherit-input-method to t to make a minibuffer inherit
	the current input method.
	(map-query-replace-regexp, keep-lines, flush-lines): Likewise.
	(how-many, occur): Likewise.

	* international/mule-cmds.el
	(inactivate-current-input-method-function): Doc-string modified.
	(input-method-activate-hook): Likewise.
	(input-method-inactivate-hook): Likewise.
	(activate-input-method): Document it.
	(inactivate-input-method): Document it.

	* language/tibet-util.el (tibetan-composition): Add autoload
	cookies.

1997-08-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* gnus/gnus-nocem.el: Require cl at compile time.

	* gnus/gnus.el (gnus-select-method): Change the other ignore-errors.

	* gnus/gnus-group.el (gnus-group-make-useful-group):
	Don't use caddr in interactive.

	* gnus/gnus-art.el (gnus-emphasis-alist): Don't use caddr.

	* mail/rmail.el (rmail-mode-1):
	Update the value for mode-line-modified.

1997-08-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* custom.el (custom-declare-variable): Use custom-initialize-reset
	by default, rather than custom-initialize-set.
	(custom-initialize-reset, custom-initialize-set): Doc fixes.

	* gnus/gnus-int.el, gnus/gnus-msg.el, gnus/gnus-undo.el: 
	Require cl at compile time.

	* progmodes/cmacexp.el (c-macro-expand): Add autoload cookie.

	* cus-dep.el (custom-make-dependencies): Don't print each file name.

1997-08-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* custom.el (custom-declare-variable): Rename 2nd arg to DEFAULT.

	* emacs-lisp/easymenu.el (easy-menu-create-keymaps): If nil is
	given as the enable condition, always disable the command.

	* comint.el (comint-preoutput-filter-functions): New variable.
	(comint-output-filter): Call those functions.
	(comint-output-filter-functions, comint-mode): Doc fix.

	* faces.el (modify-face): Fix previous change.

	* add-log.el (change-log-font-lock-keywords):
	Match "Patches by".  Match all kinds of acks after `  '.

	* mail/rmail.el (rmail-view-buffer): Doc fix.
	(rmail-summary-buffer, rmail-summary-vector): Mark as permanent local.
	(rmail-buffer): Add defvar and mark as permanent local.

1997-08-24  Erik Naggum  <erik@naggum.no>

	* simple.el (eval-expression): Prefix arg means insert value in
	current buffer.

1997-08-23  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-terminate-translation): Doc-string
	fixed.  Set quail-prefix-arg to nil after handling it.
	(quail-self-insert-command): Set overriding-terminal-local-map to
	nil when thrown for `quail-tag' by value nil.

1997-08-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* tmm.el (tmm-get-keymap): Ignore any command now disabled for menus.

	* textmodes/texinfo.el (texinfo-mode): Turn off adaptive-fill-mode.

	* winner.el: Doc fixes.

	* gnus/messcompat.el (message-signature-file): Delete autoload cookie.

	* gnus/nnvirtual.el (nnvirtual-merge-sorted-lists):
	Use sort, not merge.
	(nnvirtual-partition-sequence): use mapcar, not mapc.
	(nnvirtual-create-mapping): Don't use delete-if-not.

	* gnus/nnfolder.el (nnfolder-generate-active-file): Don't use remove.

	* gnus/gnus-start.el: Require cl at compile time.
	(gnus-site-init-file): Use condition-case.

	* gnus/gnus-art.el: Require cl at compile time.
	* gnus/gnus-async.el: Likewise
	* gnus/gnus-cite.el, gnus/gnus-kill.el, gnus/gnus-logic.el: Likewise.
	* gnus/gnus-group.el, gnus/gnus-salt.el, gnus/gnus-score.el: Likewise.
	* gnus/gnus-spec.el, gnus/gnus-srvr.el, gnus/gnus-start.el: Likewise.
	* gnus/gnus-sum.el, gnus/gnus-topic.el, gnus/gnus-win.el: Likewise.
	* gnus/nnweb.el, gnus/gnus-bcklg.el: Likewise.
	* gnus/gnus-cache.el, gnus/gnus-demon.el, gnus/gnus-dup.el: Likewise.
	* gnus/gnus-range.el, gnus/nnheader.el: Likewise.

	* gnus/parse-time.el: Require cl only at compile time.
	* gnus/gnus-setup.el, gnus/nneething.el, gnus/nnmail.el: Likewise.
	* gnus/nnmh.el, gnus/nnml.el, gnus/nnoo.el: Likewise.
	
	* gnus/gnus-util.el: Require cl only at compile time.
	(gnus-parent-id): Don't use last with 2 args.

	* gnus/gnus.el: Require cl at compile time.
	(gnus-select-method): Use condition-case, not ignore-errors.
	(gnus-check-backend-function): Definition moved up.

	* gnus/message.el: Require cl only at compile time.
	(message-user-agent): Use condition-case, not ignore-errors.
	(message-talkative-question): Doc fix.
	
	* subr.el (caar, cadr, cdar, cddr): Definitions moved here
	and changed into defsubsts.
	(last): New function.

	* emacs-lisp/cl.el (caar, cadr, cdar, cddr): Moved to subr.el.
	(last): Function renmed to last*.
	* emacs-lisp/cl-macs.el (cl-loop-let): Use last*.

	* time.el (display-time-hook): Minor doc fix.

	* ps-print.el (ps-zebra-stripes): Renamed from ps-zebra-stripe.
	(ps-zebra-stripe-height): Renamed from ps-number-of-zebra.

	* vc.el (vc-version-diff): Mention that default file is visited file.

	* textmodes/sgml-mode.el (sgml-mode-common):
	Set paragraph-start like paragraph-separate.
	Do match a line which is just a <...> construct after whitespac.e
	Set adaptive-fill-regexp to match whitespace only.

	* emacs-lisp/autoload.el (update-file-autoloads):
	Be careful about which directory to find loaddefs.el in.

	* gnus/message.el (message-user-agent): Add autoload cookie.

	* progmodes/sh-script.el (sh-indent-line): Avoid infinite loop
	on indented line at start of buffer, when calculating PREVIOUS.

1997-08-22  Stephen Gildea  <gildea@intouchsys.com>

	* time-stamp.el (time-stamp-time-zone): New variable.
	(time-stamp-string): Use that time zone.
	(time-stamp-active, time-stamp-warn-inactive)
	(time-stamp-old-format-warn): Definitions moved.
	
1997-08-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* faces.el (modify-face): New arg INVERSE-P.
	Clear the inverse-video flag before installing new colors.
	(face-spec-set): Pass INVERSE-P arg, and use (nil) for colors
	when calling modify-face.

	* add-log.el (change-log-font-lock-keywords): Recognize "Patch by".

	* textmodes/paragraphs.el (use-hard-newlines): Un-customized.

	* menu-bar.el (menu-bar-make-toggle): New macro.
	(menu-bar-options-menu): New submenu of Help menu.
	Define several menu items for it.
	
	* shell.el (shell-snarf-envar, shell-copy-environment-variable): 
	New functions.

	* progmodes/hideif.el (hif-greater, hif-less, hif-greater-equal)
	(hif-less-equal): New functions.
	(hif-tokenize): Handle new tokens >, <, >=, <=.
	(hif-eq-expr): Handle parsing these new tokens.
	(hif-token-regexp): Match >, <. >=, <=

	* delsel.el (delete-selection-mode): Put back :initialize keyword.
	At the end of the file, test this variable, and turn on the mode
	if it is non-nil.

1997-08-22  Olivier Lecarme  <ol@aiguemarine.unice.fr>

	* textmodes/paragraphs.el: Customized.
	* textmodes/nroff-mode.el: Customized.
	
1997-08-22  Karl Fogel  <kfogel@floss.red-bean.com>

	* bookmark.el (bookmark-load): Use `bookmark-import-new-list' to
	load the new list carefully, renaming bookmarks as necessary.
	In docstring, mention new renaming behavior.
	Optional arg OVERWRITE replaces inaccurately-named REVERT.
	If file loaded was bookmark-default-file, then set
	bookmarks-already-loaded to t.
	(bookmark-import-new-list): New func.
	(bookmark-maybe-rename): New func, helper to above.
	(bookmark-set-name): Accept bookmark as either string (behaves
	same as before) or list (treat it as a bookmark record).

	(bookmark-set, bookmark-maybe-load-default-file)
	(bookmark-jump-noselect, bookmark-rename)
	(bookmark-show-annotation): Discard pointless `progn's.
	
	(bookmark-bmenu-mark, bookmark-bmenu-unmark)
	(bookmark-bmenu-backup-unmark, bookmark-bmenu-delete-backwards):
	Renormalize position after all else is done.
	
	(bookmark-edit-annotation-mode, bookmark-bmenu-list)
	(bookmark-show-annotation, bookmark-show-all-annotations):
	Use `x' instead of `(not (eq x nil))'.
	
	(bookmark-yank-word): Inner save-excursion changed to progn.
	(bookmark-send-annotation, bookmark-send-edited-annotation)
	(bookmark-insert): Use buffer-string instead of buffer-substring.
	(bookmark-make-cell): Make sure annotation and info-node strings
	contain no text properties.
	(bookmark-relocate): Remember to rebuild bmenu buffer after a
	bookmark has been relocated.
	(bookmark-bmenu-check-position): Return a meaningful value --
	callers have apparently been assuming this anyway.
	(bookmark-build-xemacs-menu): Unused function deleted.
	(bookmark-version): Removed this variable; the Emacs version suffices.
	
1997-08-22  Simon Marshall  <simon@gnu.ai.mit.edu>

	* shell.el (shell-mode): Make shell-last-dir buffer-local.

1997-08-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* indent.el (indent-relative, insert-tab):
	Don't call expand-abbrev unless preceding character is a word char.

1997-08-21  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el (viper-set-hooks): new advices and hooks for mule.
	(toggle-viper-mode): new function.
	* viper-util.el (viper-set-syntax-preference,
	viper-update-syntax-classes): new functions. 
	(viper-looking-*,viper-skip-*) revamped to work better with syntax 
	tables.
	* viper-cmd.el (viper-replace-char-subr,viper-word-*,
	viper-separator-skipback-special): made to work with mule and syntax 
	tables.
	(viper-change-state): moved iso-accents-mode handling here from
	viper-change-state-to-vi/insert/etc. Also now toggles MULE.
	
1997-08-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/bibtex.el: Many doc strings.

1997-08-21  Olivier Lecarme  <ol@aiguemarine.unice.fr>

	* textmodes/bibtex.el: Customized.

1997-08-21  Kenichi HANDA  <handa@etl.go.jp>

	* language/cyril-util.el (setup-cyrillic-environment): Deleted.
	(setup-cyrillic-iso-environment): New function.
	(setup-cyrillic-koi8-environment): New function.
	(setup-cyrillic-alternativnyj-environment): New function.

	* language/cyrillic.el: Make describe-cyrillic-environment-map and
	setup-cyrillic-environment-map prefix commands and bind [Cyrillic]
	to them in describe-environment-map and setup-environment-map
	respectively.  Divide language environemnt "Cyrillic" into three:
	"Cyrillic-ISO", "Cyrillic-KOI8", and "Cyrillic-ALTERNATIVNYJ".

	* international/mule.el (auto-file-coding-system): New function.
	(auto-file-coding-system-function): Set this variable to
	`auto-file-coding-system'.

	* international/quail.el (quail-terminate-translation): Run
	input-method-after-insert-chunk-hook only when the current input
	method doesn't require conversion.
	(quail-no-conversion): Run input-method-after-insert-chunk-hook.

	* international/mule-util.el (coding-system-unification-table):
	Deleted.
	(coding-system-unification-table-for-decode): New function.
	(coding-system-unification-table-for-encode): New function.

	* international/mule.el (make-coding-system): Doc-string fixed.

	* international/fontset.el (register-alternate-fontnames): New
	function.
	(x-complement-fontset-spec): Register alternate fontnames by
	calling register-alternate-fontnames.
	(instanciate-fontset): Likewise.

1997-08-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ps-print.el (ps-print-face-extension-alist): Doc fix.
	(ps-new-faces): Function deleted.

1997-08-20  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el: Minor doc fixes.
	(browse-url-temp-dir): New variable.
	(browse-url-of-buffer): Use browse-url-temp-dir.  Don't construct
 	a temporary file name which includes an arbitrary buffer name to
 	avoid losing on non-unixy systems.

1997-08-20 22:06:10 1997  Vinicius Jose Latorre  <vinicius@cpqd.br>

	* ps-print.el: A lot of comment and doc fixes.
	Replace: 'nil by nil, '() by nil, 't by t.
	(ps-print-version): New version number (3.05).
	(ps-zebra-stripe, ps-number-of-zebra, ps-line-number)
	(ps-print-background-image, ps-print-background-text): New variables
	to customize zebra stripes, line number, image background and text
	background features, respectively.
	(ps-adobe-tag): Tagged to PostScript level 3.
	(ps-print-buffer, ps-print-buffer-with-faces)
	(ps-print-region, ps-print-region-with-faces)
	(ps-spool-buffer, ps-spool-buffer-with-faces)
	(ps-spool-region, ps-spool-region-with-faces): Call more primitive
	functions for PostScript printing (functions below).
	(ps-print-with-faces, ps-print-without-faces)
	(ps-spool-with-faces, ps-spool-without-faces): More primitive
	functions for PostScript printing.
	(ps-line-lengths, ps-nb-pages-buffer, ps-nb-pages-region)
	(ps-line-lengths-internal, ps-nb-pages): Doc fixes.
	(ps-print-prologue-1): a lot of PostScript programming:
	/dobackgroundstring, /dounderline, /UL: Postscript functions deleted.
	/reencodeFontISO, /F, /BG, /HL, /W, /S, /BeginDSCPage, /BeginPage,
	/EndPage: adjusted for new effects (outline, shadow, etc).
	/PLN, /EF, /Hline, /doBox, /doRect, /doShadow, /doOutline,
	/FillBgColor, /doLineNumber, /printZebra, /doColumnZebra,
	/doZebra, /BeginBackImage, /EndBackImage, /ShowBackText: New procedures.
	(ps-current-underline-p, ps-set-underline): Var and fn deleted.
	(ps-showline-count, ps-background-pages, ps-background-all-pages)
	(ps-background-text-count, ps-background-image-count): New variables.
	(ps-header-font, ps-header-title-font)
	(ps-header-line-height, ps-header-title-line-height)
	(ps-landscape-page-height): Set initial value to nil.
	(ps-print-face-extension-alist, ps-print-face-map-alist): 
	New variables for face remapping.
	(ps-new-faces, ps-extend-face-list, ps-extend-face):
	New functions for face remapping.
	(ps-override-list, ps-extension-to-bit-face)
	(ps-extension-to-screen-face, ps-extension-bit)
	(ps-initialize-faces, ps-map-font-lock, ps-screen-to-bit-face):
	New internal functions for face remapping.
	(ps-get-page-dimensions): Fix error message.
	(ps-insert-file): Doc fix and programming enhancement.
	(ps-begin-file, ps-end-file, ps-get-buffer-name, ps-begin-page)
	(ps-next-line, ps-plot-region, ps-face-attributes)
	(ps-face-attribute-list, ps-plot-with-face)
	(ps-generate-postscript-with-faces): Handle new output features.
	(ps-generate): save-excursion inserted to return back point at
	position before calling ps-print.
	(ps-do-spool): Access dos-ps-printer variable through symbol-value.
	(ps-prsc, ps-c-prsc, ps-s-prsc): Use backquote.
	(ps-basic-plot-whitespace, ps-emacs-face-kind-p): Internal blank
	line eliminated.
	(ps-float-format, ps-current-effect): New internal variables.
	(ps-output-list, ps-count-lines, ps-background-pages)
	(ps-get-boundingbox, ps-float-format, ps-background-text)
	(ps-background-image, ps-background, ps-header-height)
	(ps-get-face): New internal functions.
	(ps-control-character): Handle control characters.
	(ps-gnus-print-article-from-summary): Updated for Gnus 5.
	(ps-jack-setup): Replace 'nil by nil, 't by t.

1997-08-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/sendmail.el (mail-yank-original): Bind mark-even-if-inactive 
	around the indentation and citation hooks code.

	* mail/sendmail.el (mail-send-nonascii): Make the default t.

	* calendar.el (calendar-julian-date-string): Mark not interactive.

1997-08-19  Kenichi Handa  <handa@etl.go.jp>

	* files.el (append-to-file): Doc-string fixed.

	* international/quail.el (quail-exit-from-minibuffer): Call
	inactivate-input-method instead of (quail-mode -1).
	(quail-kill-guidance-buf): New function.
	(quail-mode): Doc-string and comments modified.  Make this
	function non-interactive.  Add quail-kill-guidance-buf to
	kill-buffer-hook locally.
	(quail-start-translation): Check if the current Quail package
	requires keyboard tranlation feature.
	(quail-start-translation-in-conversion-mode): Likewise.
	(quail-terminate-translation): Run hooks in
	input-method-after-insert-chunk-hook.
	(quail-update-translation): Don't run hooks in
	input-method-after-insert-chunk-hook here.
	(quail-setup-completion-buf): New function.
	(quail-show-guidance-buf): Create completion buffer by calling
	quail-setup-completion-buf.
	(quail-completion): Create completion buffer if it is not alive.

	* international/encoded-kb.el (encoded-kbd-mode): Doc-string
	modified.  Make this a non-interactive function.
	(encoded-kbd-iso2022-designation): Do not enter recursive edit twice.
	(encoded-kbd-iso2022-non-ascii-map): Bind 8-bit keys to
	encoded-kbd-handle-8bit.

	* international/titdic-cnv.el (tit-process-body): Handle `\' used
	for quoting the following digits correctly.

	* international/isearch-x.el
	(isearch-process-search-multibyte-characters): If
	read-multilingual-string returns null string, just call isearch-update.

1997-08-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* language/china-util.el: Don't set primary-language.

	* language/ethio-util.el (setup-ethiopic-environment): 
	Don't set primary-language.

	* language/cyril-util.el (setup-cyrillic-environment):
	Don't set primary-language.

	* international/mule-cmds.el (primary-language): Variable deleted.
	* international/mule-diag.el (mule-diag): Don't print primary-language.

	* help.el (help-with-tutorial): Use current-language-environment.

1997-08-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* calendar.el: Add an autoload form for calendar-print-julian-date.

	* international/encoded-kb.el (encoded-kbd-iso2022-designations): 
	(encoded-kbd-iso2022-invocations): Don't make these vars buffer-local.
	(encoded-kbd-mode): Don't make encoded-kbd-iso2022-designations
	or encoded-kbd-iso2022-invocations buffer-local.

	* textmodes/fill.el (fill-individual-paragraphs): Fix handling
	of adaptive-fill.  Call fill-context-prefix, but bind
	adaptive-fill-first-line-regexp to a null string.

1997-08-18  Olivier Lecarme  <ol@aiguemarine.unice.fr>

	* forms.el, hscroll.el, indent.el, server.el, sort.el: Customized.

1997-08-18  Mark Mitchell  <mmitchell@usa.net>

	* font-lock.el (c++-font-lock-keywords-2):
	Ensure that public and private are not fontified as labels.

1997-08-18  Kenichi Handa  <handa@etl.go.jp>

	* international/kkc.el (kkc-region): New arg
	kkc-mode-exit-function.

	* international/quail.el (quail-inactivate): Turn Quail mode off
	by itself.
	(quail-translation-keymap): Don't bind thee key "C-\".
	(quail-conversion-keymap): Likewise.
	(quail-define-package): Indentation fixed.
	(quail-setup-overlays): New arg conversion-mode.  Pay attention to
	input-method-highlight-flag.
	(quail-mode-line-format): Deleted.
	(quail-generate-mode-line-format): Deleted.
	(quail-mode): Don't handle input-method-inactivate-hook and
	input-method-activate-hook here.  Delete code setting
	quail-mode-line-format.
	(quail-saved-current-map): Name changed from
	quail-saved-overriding-local-map.
	(quail-toggle-mode-temporarily): Completely re-written.
	(quail-execute-non-quail-command): Use
	quail-toggle-mode-temporarily.
	(quail-conv-overlay-modification-hook): Deleted.
	(quail-suppress-conversion): Deleted.
	(quail-start-translation): Completely re-written.
	(quail-start-translation-in-conversion-mode): Likewise.
	(quail-delete-region): Check if quail-overlay is active.
	(quail-get-current-str): Don't call throw.  Set
	overriding-terminal-local-map correctly.
	(quail-update-translation): Run hooks in
	input-method-after-insert-chunk-hook.
	(quail-self-insert-command): Catch 'quail-tag here.
	(quail-conversion-delete-char): Don't call throw.  Set
	overriding-terminal-local-map to nil.
	(quail-conversion-backward-delete-char): Likewise.
	(quail-no-conversion): Likewise.
	(quail-help-insert-keymap-description): Bind
	overriding-terminal-local-map instead of overriding-local-map.

	* international/mule-cmds.el (previous-input-method): This
	variable deleted.
	(input-method-history): New variable.
	(read-input-method-name): Bind minibuffer-history to
	input-method-history.
	(activate-input-method): Delete codes handling
	previous-input-method.  Run hooks in input-method-activate-hook.
	(inactivate-input-method): Update input-method-history.  Run hooks
	in input-method-inactivate-hook.
	(select-input-method): Doc-string modified.  Use
	input-method-history instead of previous-input-method.  Set
	default-input-method to input-method.
	(toggle-input-method): Doc-string modified.  Use
	input-method-history instead of previous-input-method.
	(read-multilingual-string): Bind minibuffer-setup-hook correctly.
	(input-method-exit-on-invalid-key): New variable.

	* isearch.el (isearch-multibyte-characters-flag): Deleted.
	(isearch-mode): Do not bind isearch-multibyte-characters-flag and
	isearch-input-method.
	(isearch-printing-char): Use current-input-method instead of
	isearch-input-method.
	(isearch-message-prefix): Likewise.

	* international/isearch-x.el (isearch-input-method): Deleted.
	(isearch-input-method-title): Deleted.
	(isearch-toggle-specified-input-method): Call toggle-input-method.
	(isearch-toggle-input-method): Likewise.
	(isearch-process-search-multibyte-characters): Use
	current-input-method instead of isearch-input-method.

1997-08-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* faces.el: Faces now have 2 more elements, bold-p and italic-p.
	(internal-facep, make-face, x-create-frame-with-faces): 
	Create frames with those elements.
	(face-bold-p, face-italic-p): Just fetch those elements.
	(set-face-italic-p, set-face-bold-p): Doc fixes.
	(make-face-bold, make-face-italic, make-face-bold-italic)
	(make-face-unbold, make-face-unitalic): Set those new elements.

Sat Aug 16 21:50:45 1997  Geoff Voelker  <voelker@cs.washington.edu>

	* dos-w32.el: Set default coding system to undecided-dos.
	(find-buffer-file-type-coding-system):
	For writing, use buffer-file-coding-system if set, otherwise
	buffer-file-type.
	(find-file-not-found-set-buffer-file-coding-system):
	Renamed from find-file-not-found-set-buffer-file-type.
	Set buffer-file-coding-system as well as buffer-file-type.

1997-08-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule.el (load-with-code-conversion):
	Bind enable-multibyte-characters to t.

	* international/mule-cmds.el (toggle-input-method)
	(select-input-method): Always set default-input-method.
	Show default in the prompt only if there is one.

	* language/european.el (setup-latin1-environment): Don't set
	special-microsoft-code-table here.

	* international/mule-cmds.el (activate-input-method):
	Handle the new rule that default-input-method is now global only.

	* international/isearch-x.el (isearch-process-search-multibyte-characters):
	Bind input-method-verbose-flag, not input-method-tersely-flag.

	* international/mule-cmds.el (input-method-verbose-flag): Renamed
	from input-method-tersely-flag and sense inverted.
	(input-method-highlight-flag): New variable.
	(toggle-input-method): Pass missing arg to read-input-method-name.
	
	* international/quail.el (quail-guidance-buf): Now a permanent local.
	(quail-update-guidance, quail-show-guidance-buf):
	Test input-method-verbose-flag.
	(quail-setup-overlays): Underline quail-conv-overlay
	only if input-method-highlight-flag is non-nil.

1997-08-16  Kenichi Handa  <handa@etl.go.jp>

	* language/china-util.el (setup-chinese-gb-environment): Delete
	a code setting default value of default-input-method.
	(setup-chinese-big5-environment): Likewise.
	(setup-chinese-cns-environment): Likewise.

	* language/ethio-util.el (setup-ethiopic-environment): Likewise.

	* language/european.el (setup-8-bit-environment): Likewise.

	* language/japan-util.el (setup-japanese-environment): Likewise.

	* language/korean.el (setup-korean-environment): Likewise.

	* language/tibet-util.el (setup-tibetan-environment): Likewise.

	* international/mule.el (make-coding-system): Add a new FLAGS
	element ACCEPT-LATIN-EXTRA-CODE.

	* international/mule-conf.el: Set 146th element of
	latin-extra-code-table to `t'.

1997-08-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/etags.el (tags-verify-table): Obey revert-without-query.

	* loadup.el (loaddefs.el): Load that file much later, almost last.
	Delete most calls to garbage-collect.

1997-08-15  Barry A. Warsaw  <cc-mode-help@python.org>

	* cc-styles.el (c-style-alist):
	"python" style requires c-comment-continuation-stars be "".

	* cc-engine.el (c-end-of-statement-1):
	Eliminate false hits on important characters
	inside literals (strings, comments).

	* cc-cmds.el (c-comment-line-break-function):
	In this function, and the defadvice,
	call indent-new-comment-line if not in a comment.

	* cc-cmds.el (c-fill-paragraph):
	Remove conditional on obsolete variable
	c-double-slash-is-comments-p.

	* cc-vars.el (c-buffer-is-cc-mode): Definition moved to cc-mode.el

	* cc-mode.el (c-buffer-is-cc-mode):
	Definition moved here from cc-vars.el.  Also,
	put permanent-local property on variable so it's value won't get
	killed by kill-all-local-variables.

	* cc-mode.el (c++-mode, java-mode, objc-mode, idl-mode):
	Remove obsolete variable c-double-slash-is-comments-p.

	* cc-langs.el (c-double-slash-is-comments-p): Remove obsolete variable.

1997-08-15  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* simple.el (shell-command-on-region): New argument ERROR-BUFFER.

	* format.el (format-alist): Typo fix.
	(format-encode-run-method, format-decode-run-method): Put error
	output from shell command in temp buffer, not data buffer.

1997-08-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* format.el (format-annotate-atomic-property-change): Fix prev change.

1997-08-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (do-auto-fill): Better handling of a very long word
	after a fill-prefix.  Don't break right after the prefix and
	don't break at the end of the line.

	* emacs-lisp/lucid.el (extent-properties, extent-at): New functions.

1997-08-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule-cmds.el (default-input-method):
	Variable no longer automatically local.

	* language/european.el (setup-8-bit-environment):
	Use `require' to load the latin-N file.

	* international/quail.el (quail-start-translation):
	Use an explicit loop, not recursive edit.
	(quail-suppress-conversion): Doc fix.

	* international/mule-cmds.el (read-input-method-name):
	Replace INITIAL-INPUT arg with DEFAULT arg.
	Substitute it into to the prompt, if it is non-nil.
	(select-input-method): Call read-input-method-name the new way.
	(toggle-input-method): Likewise.

	* simple.el (forward-visible-line): Handle nil value from
	next-single-property-change or previous-single-property-change.

	* diary-lib.el (diary-entry-time): Bind case-fold-search to nil.

1997-08-12  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (widget-before-change): Obey `inhibit-read-only'.

1997-08-12 +03  Eli Zaretskii  <eliz@is.elta.co.il>

	* add-log.el (change-log-font-lock-keywords): Don't consider
	a closeparen as part of a function or variable name.

1997-08-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/etags.el (verify-tags-table-function): Doc fix.

	* emacs-lisp/lucid.el (set-extent-property): Don't allow
	multiple extents with a mouse-face property to run together.

	* textmodes/fill.el (fill-region-as-paragraph):
	When justifying, cope if line ends in spaces and no newline.

1997-08-12  Eli Zaretskii  <eliz@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-file): Run ".emacs" through
	convert-standard-filename before using it.

1997-08-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emacs-lisp/shadow.el (list-load-path-shadows): Exclude, from the
	path we search, all but the first set of directories that include
	the standard Emacs Lisp files.

	* mail/sendmail.el (mail-send): Ask for confirmation if
	message contains non-ASCII characters.
	(mail-send-nonascii): New variable.

	* compile.el (compilation-error-regexp-alist): New regexp for Caml.

1997-08-11  Paul Eggert  <eggert@twinsun.com>

	* rmail.el (rmail-make-in-reply-to-field): Don't cause an
	error if the `From:' line has no valid email addresses.

1997-08-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cal-tex.el (cal-tex-latexify-list):
	Put the elements of RESULT in the proper order.
	(cal-tex-list-diary-entries): Bind diary-list-include-blanks to nil.

	* progmodes/cc-cmds.el (c-electric-brace): Make preserve-p nil at BOB.

	* files.el (insert-file-literally): New command.

	* progmodes/cc-styles.el (c-style-alist) <gnu>:
	Set c-comment-continuation-stars and c-hanging-comment-ender-p.

	* language/european.el (setup-latin1-environment):
	Set code 222 in special-microsoft-code-table.

1997-08-11 Dan Nicolaescu <done@ece.arizona.edu>

	* abbrev.el: Customized. 
	(only-global-abbrevs): Doc fix.

	* dabbrev.el (dabbrev-abbrev-skip-leading-regexp): Doc fix. 

1997-08-10  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-face.el (custom-face-attributes): Don't initialize fg/bg fields. 

1997-08-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* gnus/nnheaderxm.el: File deleted--not really needed.

	* avoid.el (mouse-avoidance-timer): New variable.
	(mouse-avoidance-mode): Create or cancel a time,
	instead of using post-command-idle-hook.

1997-08-10  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (msdos-color-aliases): Remove color names which
	end with a number.
	(msdos-color-translate): Handle color names which end with a
	number, like gray85 and purple3.
	(msdos-face-setup): Call `face-set-after-frame-default', so
	default faces are correctly set.
	Do not set background of the region face (it is set by
	`face-set-after-frame-default').

	* dos-fns.el (dos-print-region-function): Force EOL conversion to
	DOS CR-LF pairs.

1997-08-10  Barry A. Warsaw  <cc-mode-help@python.org>

	* Release 5.15

	* cc-align.el (c-lineup-java-throws):
	Change the `when' clause to an `if-progn'.

	* cc-cmds.el (indent-new-comment-line): On older Emacs versions,
	add advice, to work around lack of comment-line-break-function.

	* cc-cmds.el (c-electric-slash):
	Make this work as the final slash in a */ block
	oriented comment closing token.

	* cc-cmds.el (c-comment-line-break-function): New function.

	* cc-vars.el (c-buffer-is-cc-mode): New variable.

	* cc-vars.el (c-comment-continuation-stars): New variable.

	* cc-mode.el (c-initialize-cc-mode): Set c-buffer-is-cc-mode to t.

	* cc-mode.el (c-initialize-cc-mode): Require 'cc-mode-19
	if functionp is not bound.  Check cc-mode-19 interface requirements.

	* cc-mode.el (c-mode, c++-mode, objc-mode, java-mode, idl-mode):
	Don't set comment-multi-line here.

	* cc-mode.el (c-mode): c-comment-start-regexp uses
	c-C++-comment-start-regexp to support line oriented comments.

	* cc-langs.el (c-mode-base-map, c++-mode-map):
	Move `/' as an electric character
	from c++-mode-map to c-mode-base-map for all languages.

	* cc-langs.el (c-common-init): Set comment-multi-line and
	comment-line-break-function here for all modes.
	Make comment-line-break-function buffer local iff it's boundp.

	* cc-langs.el (c-C-comment-start-regexp): Obsolete.

	(c-comment-start-regexp): Initialize from c-C++-comment-start-regexp.

	(c-populate-syntax-table, c-setup-dual-comments): Merge both functions
	into c-populate-syntax-table.  With the new 9X draft C standard, both
	line and block oriented comments are supported in all modes, so always
	set up the syntax tables to support both comment styles.

	(c-enable-//-in-c-mode): Obsolete.

	* cc-langs.el (c++-mode-syntax-table, java-mode-syntax-table)
	(objc-mode-syntax-table, idl-mode-syntax-table): Added autoload
	cookies.  c-mode-syntax-table already has one.  Use the new syntax
	table initialization idioms.

	* cc-engine.el (c-guess-basic-syntax):
	CASE 5D.4: template argument continuation
	lines are now analyzed as template-args-cont.

	* cc-styles.el (c-offsets-alist):
	Added template-args-cont syntactic symbol.

	* cc-styles.el (c-styles-alist):
	In "java" style, set c-hanging-comment-starter-p to
	nil to preserve Javadoc starter lines.

1997-08-10 Dan Nicolaescu <done@ece.arizona.edu>

	* emulation/pc-select.el: Customized. 

1997-08-10  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* language/japanese.el: Make coding system iso-2022-jp instead of
	declaring it as an alias of iso-2022-7bit.

1997-08-10  Kenichi Handa  <handa@etl.go.jp>

	* international/mule.el (make-coding-system): Add a new FLAGS
	elements SAFE.  Use it for terminal coding system if some other
	coding system is specified explicitly.
	(ignore-relative-composition): Initialize
	ignore-relative-composition.

	* international/mule-util.el(prefer-coding-system): Moved to
	mule-util.el.

	* international/mule-cmds.el (set-default-coding-systems):
	Doc-string modified.
	(prefer-coding-system): Moved from mule-util.el.  Call
	set-default-coding-systems.

	* international/mule-conf.el (iso-safe): New coding system.

	* international/mule-diag.el (print-fontset): Don't hang even if a
	fontset name doesn't confirm to XLFD.
	(describe-current-coding-system): Do not show the same coding
	system twice in the list of priority order.

	* international/encoded-kb.el (saved-input-mod): New variable.
	(encoded-kbd-mode): Doc-string fixed.  Save current-input-mode
	when turning on Encoded-kbd mode, and recover it when turning off
	Encoded-kbd mode.  Set encoded-kbd-iso2022-designations correctly.
	(encoded-kbd-self-insert-iso2022-7bit): Call charset-dimension
	instead fo charset-bytes.
	(encoded-kbd-self-insert-iso2022-8bit): Likewise.

	* language/china-util.el (setup-chinese-gb-environment): Do not
	change sendmail-coding-system and rmail-file-coding-system.
	(setup-chinese-big5-environment): Likewise.
	(setup-chinese-cns-environment): Likewise.

	* language/english.el (setup-english-environment): Likewise.

	* language/european.el (setup-8-bit-environment): Likewise.

	* language/japan-util.el (setup-japanese-environment): Likewise.

	* language/tibet-util.el (setup-tibetan-environment): Likewise.

	* language/lao.el: Set t for Rao-SEMIVOWEL-SIGN-LO in
	ignore-relative-composition.

	* language/lao-util.el: Correct setting of char-code-property `name'.

1997-08-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dired.el (dired-font-lock-keywords): Don't specially highlight
	files that are writable by others.

	* cus-face.el (custom-declare-face):
	Call make-face-x-resource-internal.

	* progmodes/awk-mode.el (awk-mode): Require cc-mode, not cc-langs.

	* wid-edit.el (widget-single-line-display-table): Variable
	commented out; don't use it either.

	* case-table.el: Delete autoload cookies (file is preloaded).

	* format.el (format-alist): Doc fix.

	* help.el (describe-key): Don't put a colon after the command name.

1887-08-09  Barry A. Warsaw  <cc-mode-help@python.org>

	* progmodes/cc-engine.el (c-beginning-of-statement-1):
	When checking for bare semi, don't match
	on a semi following a close brace.

	* progmodes/cc-vars.el (idl-mode-hook): New variable.

	* progmodes/cc-vars.el (c-initialization-hook): New variable.

	* progmodes/cc-mode.el (idl-mode): Support for CORBA's IDL language.

	* progmodes/cc-mode.el (c-initialize-cc-mode): move the calling of
	c-make-styles-buffer-local into c-initialize-builtin-style.

	* progmodes/cc-mode.el (c-initialize-cc-mode): Run the
	c-initialization-hook, but only once per Emacs session.

	* progmodes/cc-styles.el (c-styles-alist): In "java" style, set
	c-hanging-comment-starter-p to nil to preserve Javadoc starter lines.

	* progmodes/cc-styles.el (c-set-style-2):
	Fixed broken implementation of inherited styles.

	* progmodes/cc-styles.el (c-set-style):
	Call c-initialize-builtin-style.
	(c-initialize-builtin-style): Handle c-style-variables-are-local-p.

	* progmodes/cc-engine.el (c-guess-basic-syntax):
	CASE 5I: When adding 'inclass syntax, use the
	relpos pointing to the class opening brace, unless that hangs on the
	right side, in which case, use the start of the class/struct keyword.

	* progmodes/cc-langs.el (c-symbol-key):
	First character must be a letter or underscore.
	(c-styles-are-initialized): Variable deleted.
	(c-common-init): Don't initialize styles here.

	* progmodes/cc-langs.el (idl-mode-abbrev-table): New variable.
	(idl-mode-map, idl-mode-syntax-table): New variables.
	(c-idl-menu): New menu.
	
1997-08-09  Erik Naggum  <erik@naggum.no>

	* telnet.el (telnet-host-properties): Initialize it properly.

1997-08-09  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-init.el: More defface work.
	* ediff-init.el: Converted to use defface instead of make-face.
	
1997-08-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/fill.el (enable-kinsoku): Doc fix.

	* emulation/viper-init.el (viper-replace-overlay-pixmap)
	(viper-search-face-pixmap): Variables deleted.
	(viper-replace-overlay-face, viper-search-face):
	Use "gray3" explicitly.

	* help.el (help-mode): Set view-no-disable-on-exit.

	* view.el (view-just-bury): New variable.
	(view-mode-exit): Obey it.

	* emacs-lisp/shadow.el: Renamed from shadow.el.

	* simple.el (completion-setup-function): Don't set completion-base-size
	when completing in a non-minibuffer.

	* shadow.el (find-emacs-lisp-shadows): Don't mention `subdirs.el'.
	(list-load-path-shadows): When noninteractive, if there are shadows,
	start with a message explaining what this is a problem.

	* files.el (find-file-noselect):
	Clear enable-multibyte-characters if RAWFILE.
	(find-file-literally): Don't do that here.
	(find-file-literally): New variable.  Mark it with permanent-local.
	(find-file-noselect): If RAWFILE, set find-file-literally locally.
	Warn if file was already visited and RAWFILE was different.

	* startup.el (command-line-1): Don't let type-ahead inhibit the
	initial contents of *scratch*.

1997-08-08  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* format.el (format-annotate-single-property-change,
	format-annotate-atomic-property-change): move code that interprets
	nil as 0 inside test that property is numeric.

1997-08-08  Valery Alexeev  <valery@math.uga.edu>

	* language/cyril-util.el (cyrillic-language-alist): Fix punctuation.

1997-08-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/fill.el (fill-region-as-paragraph): Don't do kinsoku
	if the region is all ASCII.

1997-08-08 Dan Nicolaescu <done@sydney.ece.arizona.edu>

	* progmodes/hideshow.el: Correct the autoload cookies. 

1997-08-07 Dan Nicolaescu <done@ece.arizona.edu>

	* term.el (term-default-fg-color): 
	(term-default-bg-color): Default to nil. 

1997-08-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/cc-styles.el (c-set-offset): Add autoload cookie.

	* term/pc-win.el (x-list-fonts): Return "default" when appropriate.
	(query-fontset): Add (alternative) alias definition.

1997-08-07  Roland McGrath  <roland@beet-chex.ai.mit.edu>

	* emacs-lisp/autoload.el (update-file-autoloads): Use anchored regexp
 	search instead of requiring leading newline before
 	generate-autoload-cookie, which gave false negative if sole cookie in
 	file was at bob.

1997-08-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emacs-lisp/elint.el: New file.

	* language/cyril-util.el (cyrillic-language-alist): Add one language.

1997-08-07  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-util.el: Moved faces to viper-init.el
	* viper-init.el: Converted faces to use defface.
	* viper.el (viper-set-hooks): Bug fixed.
	
1997-08-07  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* mail/sendmail.el (sendmail-send-it): Bind sendmail-coding-system
	to buffer-file-coding-system if it is non-nil.

1997-08-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* term/iris-ansi.el: New file.

	* calendar.el: Fix previous change.

	* files.el (insert-file-contents-literally): Doc fix.

	* international/quail.el (quail-update-leim-list-file):
	Use insert-file-contents instead of find-file-noselect
	and in the process avoid the RAWFILE feature.

	* ispell.el (ispell-dictionary-alist): Doc fix.

1997-08-05  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* compile.el (compilation-parse-errors): Fix previous change.

	* vc.el (vc-version-diff): Change the Newer version prompt.

	* subr.el (read-quoted-char): Fix handling of meta-chars.
	(functionp): Use byte-code-function-p, not compiled-function-p.

	* faces.el (set-face-doc-string): Define once again, as alias.

	* mail/sendmail.el (mail-mode): Allow TAB after prefix
	in previous change.

	* Makefile (updates): Add missing semicolons.

	* finder.el (finder-compile-keywords): Don't process file names
	that start with `.'.

	* emacs-lisp/autoload.el (update-autoloads-from-directories):
	Don't process file names that start with `.'.
	
	* gud.el (gud): Fix defgroup doc.

	* compile.el (compilation-error-regexp-alist): Make the
	MIPS/DEC pattern more specific at the start; accept warnings
	as well as errors.

	* term/x-win.el (x-cut-buffer-or-selection-value): Fix previous change.

	* mail/sendmail.el (mail-mode): Fix previous change.
	Treat a supercite prefix not followed by text
	as a paragraph separator.

	* term/lk201.el: Undo previous change.

	* simple.el (comment-line-break-function): New variable.
	(do-auto-fill): Use that variable.

	* files.el (cd-absolute): Add missing arg to `error'.

	* Makefile (dontcompilefiles): Delete cyril-util.el.

	* language/cyril-util.el (standard-display-cyrillic-translit):
	Set standard-display-table here, not when loading the file.
	Read argument properly with `interactive'.

	* format.el (format-annotate-atomic-property-change):
	Look thru all elements of PROP-ALIST for a number,
	if OLD and NEW are numbers.

	* international/mule.el: Doc fixes.
	
1997-08-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* time-stamp.el (time-stamp): Use insert-and-inherit for new stamp.

1997-08-04  Valery Alexeev  <valery@math.uga.edu>

	* language/cyril-util.el (cyrillic-language-alist): New variable.
	(standard-display-cyrillic-translit): Add autoload cookie.

1997-08-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* select.el (x-get-selection): Change default for data-type
	back to `STRING'.

1997-08-04  Espen Skoglund  <espensk@odslab5.cs.uit.no>

	* pascal.el (pascal-mode-syntax-table): _ is now a symbol constituent.
	(pascal-indent-case): Removed unnecessary calls to marker-position.
	(pascal-indent-declaration): Editing a parameterlist at the end of
 	a buffer does not hang.  Removed unnecessary call to marker-position.
	(pascal-get-lineup-indent): Removed unused variable.
	Indent parameterlist correctly.
	(pascal-completion-response): Removed unused variable.

1997-08-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* files.el (basic-save-buffer-1): Add missing argument for error.

	* isearch.el (isearch-quote-char): Fix handling of control
	characters, copied from quoted-insert.

	* emacs-lisp/pp.el (pp-to-string): Use
	emacs-lisp-mode-sytax-table.

	* international/quail.el (quail-update-leim-list-file): Go to the
	beginning of the package file, in case it was already visited.

1997-08-04  Kenichi Handa  <handa@etl.go.jp>

	* language/english.el (setup-english-environment): Call
	set-default-coding-systems.

	* language/china-util.el (setup-chinese-gb-environment): Do not
	call set-terminal-coding-system and set-keyboard-coding-system,
	instead call set-defualt-coding-systems.
	(setup-chinese-big5-environment): Likewise.
	(setup-chinese-cns-environment): Likewise.

	* language/european.el (setup-8-bit-environment): Likewise.

	* language/japan-util.el (setup-japanese-environment): Likewise.

	* language/korean.el (setup-korean-environment): Likewise.

	* international/mule-cmds.el (set-default-coding-systems): New
	function.

	* international/mule.el (default-terminal-coding-system): New var.
	(set-terminal-coding-system):
	Use default-terminal-coding-system as default.
	(default-keyboard-coding-system): New variable.
	(set-keyboard-coding-system):
	Use default-keyboard-coding-system as default.

1997-08-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* delsel.el (delete-selection-mode): Delete the :initialize keyword.
	Don't explicitly check the value and call delete-selection-mode.
	Don't put on a custom-loads property.

	* emacs-lisp/autoload.el (make-autoload): For a defcustom,
	generate custom-add-to-group and custom-add-load if needed.

	* progmodes/cpp.el (cpp-create-bg-face): Don't really make a face.
	Just make (background-color . COLOR).
	(cpp-highlight-buffer): Don't die if buffer-invisibility-spec is t.
	(cpp-face-default-list): Doc fix, fix custom type.
	(cpp-edit-reset): Add a close-quote after the file name.

	* isearch.el (isearch-other-meta-char): Don't switch windows to exit
	if that would switch to an inactive minibuffer.

	* progmodes/meta-mode.el: Moved from textmodes/meta-mode.el.
	
	* vc.el (vc-version-diff): Use defaults, not initial input,
	for reading the arguments.

	* faces.el (internal-face-interactive): Handle default in usual way,
	Provide completion for color reading.
	(set-face-foreground, set-face-background): Specify `color'
	when reading the color name interactively.

1997-08-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* help.el (describe-function): Use " is " instead of colon.

	* uniquify.el (delay-uniquify-rationalize-file-buffer-names):
	Don't delete this function from kill-buffer-hook, if it is disabled.

	* textmodes/fill.el (fill-context-prefix): Accept a whitespace
	prefix from the second line, regardless of the first line.

	* shell.el (shell): Doc fix.

	* faces.el: Alternative colors for standard faces if dark background.

	* hexl.el (hexlify-buffer, dehexlify-buffer):
	Pay attention to buffer-file-type.
	(hexl-save-buffer): Don't bind buffer-file-type around save-buffer.

	* term/x-win.el (x-cut-buffer-or-selection-value): Try both
	COMPOUND_TEXT and STRING as types for the selection.

	* simple.el (shell-command-on-region, shell-command): Doc fixes.
	(do-auto-fill): Don't break the line right after a comment starter.

	* emacs-lisp/copyright.el (copyright-regexp): Recognize the Latin-1
	copyright symbol.  Also @copyright{}.

	* mail/rmailsum.el (rmail-summary-mouse-goto-message): New function.
	(rmail-summary-mode-map): Bind it to Mouse-2.
	
	* files.el (insert-file-contents-literally):
	Bind coding-system-for-read and coding-system-for-write,
	and bind jka-compr-compression-info-list instead of
	file-name-handler-alist.
	(find-file-literally): Simplify and use insert-file-contents-literally.

1997-08-03  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el (vc-menu-map): Replace entries for "Check In" and
 	"Check Out" with new entry "Check In/Out" (calling
 	vc-next-action).

1997-08-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-face-value-create): Take account
	of changes in the frame made outside of customize.

1997-08-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* faces.el (face-attr-match-p): New function.
	(face-attr-match-1, face-spec-match-p, face-attr-construct): Likewise.
	(face-spec-choose): New function.
	(face-spec-set): Use face-spec-choose.

1997-08-03  Kenichi Handa  <handa@etl.go.jp>

	* term/x-win.el: Fix previous change.

	* international/quail.el (quail-next-translation): Call
	quail-execute-non-quail-command when no current translations.
	(quail-prev-translation): Likewise.
	(quail-next-translation-block): Likewise.
	(quail-prev-translation-block): Likewise.

	* language/china-util.el (setup-chinese-gb-environment): Set
	default value of default-input-method.
	(setup-chinese-big5-environment): Likewise.
	(setup-chinese-cns-environment): Likewise.  Correct input method
	name.

	* language/ethio-util.el (setup-ethiopic-environment): Bind
	correct commands in global-map, rmail-mode-map, and mail-mode-map.

	* language/ethiopic.el (ccl-encode-ethio-font): Fix typo in
	doc-string.  Set default value of default-input-method.

	* language/european.el (setup-8-bit-environment): Likewise.

	* language/japan-util.el (setup-japanese-environment): Likewise.

	* language/korean.el (setup-korean-environment): Likewise.

	* language/tibet-util.el (setup-tibetan-environment): Likewise.

1997-08-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule-cmds.el: Doc fixes; fix error message text.

	* timezone.el (timezone-parse-date): Handle additional style (9).

	* term.el (term-ignore-error): Fix foolish errors.

	* strokes.el (strokes): New file.

	* international/mule-diag.el (describe-current-coding-system):
	Clean up output format.

1997-08-02  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el (toggle-viper-mode): New function.
	* viper-mouse.el (viper-mouse-search-key,viper-mouse-insert-key): 
	New variables.
	(viper-bind-mouse-search-key,viper-bind-mouse-insert-key,
	viper-unbind-mouse-search-key,viper-unbind-mouse-insert-key):
	New functions.
	* viper*el: vip-style names changed to viper-style names.
	
1997-08-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/sendmail.el (mail-mode): Recognize foo> prefix
	even without leading space.

	* hexl.el (hexl-find-file): Use find-file-literally.
	(hexlify-buffer): Bind coding-system-for-write.
	(dehexlify-buffer): Bind coding-system-for-read.

	* isearch.el (isearch-hide-immediately): Doc fix.

1997-08-01  Valery Alexeev  <valery@math.uga.edu>

	* language/cyril-util.el (standard-display-cyrillic-translit):
	New function.

1997-07-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* startup.el (command-line): Pass t for AUTO arg to
	standard-display-european.

	* disp-table.el (standard-display-european): New arg AUTO.
	Normally, set enable-multibyte-characters to nil.

Thu Jul 31 16:26:05 1997  Geoff Voelker  <voelker@cs.washington.edu>

	* term/w32-win.el:  Set mode-line-frame-identification
	to remove frame name from mode-line instead of 
	mode-line-buffer-identification.

1997-07-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* calendar.el (diary-face, calendar-today-face, holiday-face):
	Use defface to define them.

	* term/lk201.el (function-key-map): Map to ASCII DEL, not to delete.

	* emacs-lisp/lisp-mode.el (eval-last-sexp): Ignore `...' around sexp.

1997-07-31  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/mule-util.el (prefer-coding-system): Change also
	default value of buffer-file-coding-system.

1997-07-31  Kenichi Handa  <handa@etl.go.jp>

	* faces.el (set-face-font-auto): Create a fontset if FONT is a
	fontset not instanciated fontset.

	* international/fontset.el (fontset-name-p): New function.
	(uninstanciated-fontset-alist): New variable.
	(create-fontset-from-fontset-spec): Delete arg STYLE.  Register
	style-variants of FONTSET in uninstanciated-fontset-alist.
	(create-fontset-from-x-resource): Call
	create-fontset-from-fontset-spec correctly.

	* international/mule-util.el (reference-point-alist): Doc-string
	modified.

	* term/x-win.el: Do not create style-variants of fontset.  They
	are just registered in uninstanciated-fontset-alist.

1997-07-31  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff*el: (ediff-eval-in-buffer): changed macro and renamed
	ediff-with-current-buffer.
	Eliminated inefficient calls to `intern'.
	* ediff-diff.el: (ediff-exec-process): changed to work with buffers
	whose names have spaces. 
	(ediff-wordify): use buffer-substring-no-properties.
	
1997-07-30  Andre Spiegel  <spiegel@inf.fu-berlin.de>

        * vc-hooks.el (vc-checkout-model): For CVS, look at
        permissions to see if a file is "watched".

        * vc.el (vc-backend-checkin): For CVS, forget the checkout model 
        after commit.
        (vc-backend-checkout): Use "cvs edit" for files with manual checkout.
        (vc-minor-part, vc-previous-version): New functions.
        (vc-diff): Don't ask or guess version numbers.
        (vc-version-diff): Suggest default versions based on the file state.

1997-07-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* uniquify.el (uniquify-buffer-name-style): Fix typo.

	* info.el (info-node, info-xref, info-menu-5):
	Define faces with defface.
	(Info-mode): Don't define faces here, and don't alter Info-fontify.
	Locally set line-move-ignore-invisible.
	(Info-fontify-node): Test type of frame here.

1997-07-30  Stephen Eglen  <stephene@cogs.susx.ac.uk>

	* mspools.el (mspools-using-vm): Better handling of VM initialization.
	(mspools-size-folder): Allow symbolic links to spool files.

1997-07-30  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (hook): Support hooks whose value is just a symbol.
	(custom-magic-value-create): Support `mismatch'	form. 
	(custom-variable-value-create): Ditto.
	(custom-variable-set): Ditto.
	(custom-variable-save): Ditto.
	(custom-variable-menu): Ditto.
	(custom-load-symbol): Check that `preloaded-file-list' is bound.
	(custom-group-value-create): Comment out `indent'.

1997-07-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bindings.el (mode-line-mule-info): Delete the conditional
	on enable-multibyte-characters.

	* international/mule-cmds.el (mule-menu-keymap): Fix menu item names.

1997-07-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/fill.el (adaptive-fill-first-line-regexp): Fix regexp.

1997-07-29  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* font-lock.el: Don't add indicator " Font" to minor-mode-alist entry.

1997-07-29 Oscar Figueiredo <<Oscar.Figueiredo@di.epfl.ch>

	* ph.el: Many doc strings and messages changed.

1997-07-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/rmail.el (rmail-resend): Use user-mail-address.

	* bindings.el (debug-ignored-errors): Delete ^Quit$ element.

1997-07-28  Olivier Lecarme  <ol@aiguemarine.unice.fr>

	* progmodes/make-mode.el (makefile-space-face): Add defface.
	(makefile-define-space-face): Function deleted.
	(makefile-mode): Don't call makefile-define-space-font.

1997-07-28 Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (customize-save-variable): New command.

	* wid-edit.el (widget-move): Use `previous-overlay-change' and
	`next-overlay-change'. 
	(widget-use-overlay-change): New option to control it.

	* cus-edit.el (custom-save-all): Inhibit read only.

	* wid-edit.el (regexp): Outcomment :value-face.
	(file): Ditto.

	* wid-edit.el (widget-add-change): Use local hooks.
	(widget-before-change): Ditto.

	* wid-edit.el (set-text-properties): Don't define.
	(widget-specify-none): Delete.
	(widget-specify-text): Delete.
	(widget-field-use-before-change): Don't enable for XEmacs.
	(widget-specify-field): Don't use text properties.
	(widget-specify-field): Ditto.
	(widget-specify-doc): Ditto.
	(widget-specify-insert): Ditto.
	(widget-insert): Ditto.
	(widget-convert-text): Ditto.
	(widget-leave-text): Ditto.
	(widget-setup): Ditto.
	(widget-before-change): Ditto.
	(widget-default-create): Ditto.
	(widget-default-delete): Ditto.
	(widget-editable-list-insert-before): Ditto.
	(widget-editable-list-entry-create): Ditto.
	(widget-add-change): New function.

	* cus-edit.el (custom-file): Use same logic as startup.el

	* wid-edit.el (widget-field-use-before-change): Doc fix.

	* cus-edit.el (custom-group-members): New function.
	(custom-group-value-create): Use it rather than get.

	* wid-edit.el (emacs-library-link): New widget.
	(widget-emacs-library-link-action): New function.

	* wid-edit.el (widget-beginning-of-line): Preserve zmacs region.
	(widget-end-of-line): Ditto.

	* wid-edit.el (widget-color-sample-face-get): Kludge to make it
	work before widget is fully created.
	(widget-color-action): Try to use same relative position of point
	in minibuffer as it had in the field.

	* cus-edit.el (custom-mode): Document `M-TAB'.

1997-07-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule-util.el (prefer-coding-system): Fix doc, prompt.

1997-07-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emacs-lisp/autoload.el (update-autoloads-from-directories):
	Always update loaddefs.el in the source-directory.

	* progmodes/make-mode.el: Doc fixes.

	* compile.el (compile-command): More doc fix.

1997-07-24  Olivier Lecarme  <ol@aiguemarine.unice.fr>
	
	* progmodes/make-mode.el, progmodes/cpp.el: Customized.
	* facemenu.el: Customized.
	
1997-07-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/mail-extr.el (mail-extr-voodoo): Handle unmatched quotes
	in the comment-deletion loop.

	* jka-compr.el (jka-compr-added-to-file-coding-system-alist): New var.
	(jka-compr-insert-file-contents): Set coding-system-for-read
	according to file name after removing compression suffix.
	(jka-compr-install): Add elemets to file-coding-system-alist.
	(jka-compr-uninstall): Remove elements from file-coding-system-alist.

	* international/mule-conf.el (file-coding-system-alist):
	Use no-conversion for tar files.

	* subr.el (read-quoted-char): Consistently downcase letter "digits".

	* mail/sendmail.el (mail-mode): Make adaptive-fill-regexp
	match more values.  Bind adaptive-fill-first-line-regexp too.

1997-07-26  Eric Raymond  <esr@snark.thyrsus.com>

	* telnet.el (telnet): Handle multiple telnet programs better.
	(telnet-host-properties): New variable.

1997-07-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/awk-mode.el (awk-mode): Call c-initialize-cc-mode.

1997-07-25  Stephen Eglen  <stephene@cogs.susx.ac.uk>

	* replace.el (occur): Local variable line-start redundant.
	`occur-marker' extends to the end of the line rather than one char
	before end.

1997-07-25  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/quail.el (quail-update-leim-list-file): Call
	find-file-noselect with t for arguments NOWARN and RAWFILE.

	* international/mule-cmds.el (leim-list-entry-regexp): Make this
	match only at beginning of line.

1997-07-25  Erik Naggum  <erik@naggum.no>

	* compile.el (compile-command): Doc fix.

1997-07-25  Jonathan I. Kamens  <jik@kamens.brookline.ma.us>

	* rmail.el (rmail-pop-password-error): New variable.
	(rmail-insert-inbox-text): If there's an error getting mail from
	the POP server, and the error matches rmail-pop-password-error or
	we prompted for the POP password, assume that the password is
	incorrect and erase it so that the user will be prompted again the
	next time he gets mail.

1997-07-25  Simon Marshall  <simon@frobnitz.gnu.ai.mit.edu>

	* complete.el: Customise; as subgroup of minibuffer.
	(partial-completion-mode): New option to toggle mode.
	(partial-completion-mode): New command to toggle mode.
	Add and remove hooks here, i.e., not at the top-level.
	(PC-bindings): New function to install/restore minibuffer bindings.
	This is called by partial-completion-mode, i.e., not at the top-level.
	(PC-temp-minibuffer-message): Use unread-command-events, as
	unread-command-char is obsolete.

	* font-lock.el: Add new C++ type specifiers.

	* lazy-lock.el (lazy-lock-fontify-after-idle): Wrap
	minibuffer-auto-raise to prevent stealth messages raising the frame.

1997-07-25  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/mule-cmds.el (read-input-method-name): Show more
	appropriate error message.

1997-07-25  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-cmds.el: Typo in comment fixed.

	* language/thai-util.el (setup-thai-environment): Add correct
	autoload cookie.

	* language/tibet-util.el (setup-tibetan-environment): Correct
	coding system names.  Set default-input-method to "tibetan-wylie".

	* language/viet-util.el (setup-vietnamese-environment):  Add
	autoload cookie.

1997-07-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/metamail.el (metamail-region): Don't bind kanji-fileio-code
	or file-coding-system.  Don't call define-program-kanji-code
	or define-program-coding-system.  Instead, bind coding-system-for-read.

1997-07-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/metamail.el (
	* Makefile (ETAGS): New variable.
	(TAGS): Use ${ETAGS}.

	* emacs-lisp/bytecomp.el (byte-compile-output-docform):
	Bind print-gensym-alist; bind print-gensym to a cons cell.

	* winner.el (custom-print-functions): Add defvar.

1997-07-24  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el (viper-non-vi-major-modes): New variable.
	(vip-set-hooks): Changed so it'll update viper-non-vi-major-modes.
	(viper-mode): Now checks viper-non-vi-major-modes.
	
1997-07-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ange-ftp.el: Doc fixes.

	* mail/sendmail.el (mail): Improve confirmation questions
	for file-visiting mail buffers.

	* simple.el (line-move): If intangibility moves us to a different line,
	adjust the hpos nicely in that line.

	* ediff-util.el (ediff-update-diffs): Change error message.

	* play/landmark.el (landmark-repeat, landmark): New aliases.
	Add autoload cookies.

	* play/handwrite.el: Many doc fixes.
	(handwrite): Add autoload cookie.
	(menu-bar-handwrite-map): Comment out the code to put this
	in the menu bar.

	* cus-face.el (custom-declare-face): Use [set-]face-documentation.

	* faces.el (face-documentation): Renamed from face-doc-string.
	(set-face-documentation): Renamed from set-face-doc-string.
	(face-doc-string): Make this an alias.

	* term/bg-mouse.el (bg-yank-or-pop): Changed eql to eq.

	* international/mule-cmds.el (read-input-method-name): Fix error msg.

	* terminal.el (te-newline): Change eql to eq.
	(te-insert-lines, te-delete-lines, te-process-output): Likewise.
	(te-parse-program-and-args, te-get-char): Likewise.

	* textmodes/tex-mode.el (tex-categorize-whitespace): Use eq, not eql.

	* bindings.el: Don't create C-x r and C-x n submaps here.

1997-07-23  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* rmail.el (rmail-mime-feature): Doc and custom fix.

1997-07-24  Dan Nicolaescu  <done@ece.arizona.edu>

	* bindings.el (debug-ignored-errors): Update the dabbrev.el errors. 
	Add errors generated by ediff*.el.
	
1997-07-24  Olivier Lecarme  <ol@aiguemarine.unice.fr>
	
	* apropos.el, ange-ftp.el: Customized.

1997-07-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* calendar.el (calendar-day-name): New optional args WIDTH, ABSOLUTE.
	(calendar-month-name): New optional arg WIDTH.
	(generate-calendar-month, calendar-date-string): Pass new args
	instead of using substring here.

	* emacs-lisp/bytecomp.el (eql): byte-defop-compiler definition deleted.

	* mail/mh-e.el: Change eql calls to = or equal.

	* mail/mh-utils.el: Change eql calls to eq.

	* compile.el (compilation-error-regexp-alist): Add elt for EPC F90.

	* diary-lib.el (diary-entry-time): Downcase the am/pm letter.

	* faces.el (set-face-font-explicit): Call internal-set-face-1 properly.

1997-07-23  Stephen Eglen  <stephene@cogs.susx.ac.uk>

	* iswitchb.el (iswitchb-get-bufname): Only add buffer of current
	window  if it is not already in list.

1997-07-23  Ulrik Vieth  <vieth@thphy.uni-duesseldorf.de>

	* textmodes/meta-mode.el (metafont-mode):  Add autoload cookie.
	(metapost-mode): Add autoload cookie.

	* files.el (auto-mode-alist): Add ".mf" and ".mp" for meta-mode.el.
	Add ".clo" for latex-mode.
	
1997-07-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ph.el: Various error messages fixed.
	(ph-cadr, ph-cadr): New functions.
	All calls to cdar and cadr changed.

	* ph.el: New file.
	
	* international/mule.el (modify-coding-system-alist): Doc fix.

1997-07-22  Geoff Voelker  <voelker@cs.washington.edu>

	* dos-w32.el (find-buffer-file-type-coding-system,
	find-buffer-process-coding-system): Remove second argument.

1997-07-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/texinfmt.el (dircategory): Delete obsolete mistaken `put'.
	(texinfo-end-direntry): Output extra newline.
	(texinfo-format-dircategory): Parse the arg and reinsert it by hand.
	
1997-07-22  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el: Further twidling with require viper-init.
	
1997-07-21  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* jka-compr.el (jka-compr-call-process): Fix previous change.
	(jka-compr-write-region): Likewise.
	(jka-compr-insert-file-contents): Likewise.
	(jka-compr-file-local-copy): Bind coding-system-for-read and
	coding-system-for-write.

1997-07-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/texinfmt.el (texinfo-end-direntry): Output two newlines. 

	* simple.el (yank, yank-pop): Bind inhibit-read-only
	just for remove-text-properties, not for insertion.

	* subr.el (read-quoted-char): Convert function keys like Return
	into ASCII equivalents.

	* mail/mh-utils.el (mh-make-folder-list-background):
	Don't call mh-find-path if we were called from there.
	(mh-find-path): Move mh-make-folder-list-background call to the end.

	* language/cyril-util.el (setup-cyrillic-environment): Fix paren error.

	* viper.el: Require viper-init.

1997-07-21  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* enriched.el (fixed, excerpt): Define with defface.  No longer
	queries X server to find a "fixed" font; that was too slow and
	didn't work for everyone.

1997-07-21  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* compile.el (compilation-mode-font-lock-keywords): Ensure that each
	regexp generated from compilation-error-regexp-alist begins with "^".

1997-07-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/fill.el (fill-context-prefix): Be stricter about
	whether first-line prefix is compatible with second-line prefix.

	* files.el (find-file-literally): Temporarily remove tar-mode and
	archive-mode from auto-mode-alist.

	* frame.el (frame-initialize): Don't alter vertical-scroll-bars
	parameter here.

	* scroll-bar.el (scroll-bar-mode-explicit): New variable.
	(set-scroll-bar-mode): Don't alter default-frame-alist
	when just loading this file.
	
	* mail/mh-utils.el (mh-find-path): Handle mh-auto-folder-collect here,
	not when this file is loaded.

1997-07-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/sendmail.el (mail-indent-citation): Undo previous change.
	Instead, convert region-end to a marker before the loop.
	(mail-yank-original, mail-yank-region): Undo previous change.

	* custom.el (custom-declare-variable-list): Process already-declared
	custom variables from this list.

	* cus-start.el (debug-on-quit): Define like debug-on-error.
	
	* dired-x.el (dired-omit-new-add-entry): Take new arg RELATIVE
	and pass it to dired-omit-old-add-entry (which is dired-add-entry).

	* jka-compr.el (jka-compr-insert-file-contents): 
	Bind coding-system-for-read.
	(jka-compr-write-region): Bind coding-system-for-write.
	Set buffer-file-type if dos or nt.
	(jka-compr-call-process): Bind coding-system-for-read
	and coding-system-for-write.

1997-07-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* shell.el (shell-mode): Do set list-files-directory locally.

	* uniquify.el (uniquify-buffer-file-name): Minor change.

1997-07-19  Geoff Voelker  <voelker@cs.washington.edu>

	* dos-w32.el (find-buffer-file-type-coding-system):
	Use undecided-dos for dos-text file names.
	Use undecided for non-existing untranslated file names.

	* international/mule.el (modify-coding-system-alist): Added.
	international/mule-util.el (modify-coding-system-alist): Removed.
	
	* loadup.el [windows-nt, ms-dos]: Undo loading 
	of international/mule-utils.
	
1997-07-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/sendmail.el (mail-mode): Set adaptive-fill-regexp specially
	to cater to supercite.
	(mail): Ask a different question, if buffer is visiting a file.

	* faces.el (internal-facep): Length is now 10.
	(make-face, x-create-frame-with-faces): Make a face 10 elements long.
	(internal-set-face-1): Don't call set-face-attribute-internal
	if NAME is nil.
	(set-face-font): Set the auto-flag to t or nil.
	(face-spec-set): Clear out the font at the start,
	if it was set automatically before.
	(face-font-explicit): New function.
	(set-face-font-auto): New function.
	(set-face-font-explicit): New function.
	(copy-face): Copy the face-font-external flag.
	(internal-try-face-font): Use set-face-font-auto.

	* files.el (auto-mode-alist): Recognize .emacs in MSDOG syntax.

1997-07-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dos-w32.el (find-buffer-file-type-coding-system):
	Use emacs-mule-dos for text file names; use undecided-dos
	for the last resort (instead of emacs-mule-dos).

	* vc.el (vc-diff): Turn off previous change.

	* cus-edit.el (custom-group-value-create) <tree>: Don't distinguish
	unloaded groups; use [+] for them.
	(customize-browse): Fix top-of-buffer doc text.

	* mail/sendmail.el (mail-indent-citation): Take region args.
	(mail-yank-original, mail-yank-region): Pass the args.

1997-07-18  Dan Nicolaescu  <done@sydney.ece.arizona.edu>

	* progmodes/hideshow.el (hs-special-modes-alist): Use a regexp
	generated by regexp-opt.
	(hs-life-goes-on): Nullify inhibit-point-motion-hooks as we have
	to move inside intangible overlays.  Enable edebug.

	* isearch.el (search-invisible): Fix typo.
	(isearch-search): Bind inhibit-point-motion-hooks because we might
	have to search inside invisible and intangible text.
	(isearch-open-overlay-temporary): Delete forgoten debug message.
	(isearch-range-invisible): Fix typo in doc-string.

1997-07-18  Stephen Eglen  <stephene@cogs.susx.ac.uk>

	* replace.el (occur): Use text property `occur' to store the
	marker for the occurrence in the source buffer.  This replaces the
	list `occur-pos-list', and fixes the bug for multi-line matches.
	Set up `occur-point' text property for occur-next and occur-prev.
	(occur): occur-num-matches stores the number of matches found.	
	(occur-mode-find-occurrence): Use `occur' text property to find
	marker for locus of the occurrence.
	(occur-next, occur-prev): New commands.
	(occur): Fixed bug preventing line number being displayed if line
	number is less than the number of lines of context.

1997-07-18  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc-hooks.el (vc-find-cvs-master): Corrected parsing of
	CVS/Entries, according to CVS docs.
	(vc-toggle-read-only): Also work in vc-dired buffers.

	* vc.el (vc-diff): If file is unchanged, ask for the version
	number to compare with.
	(vc-retrieve-snapshot): If no NAME is specified, check out
	latest versions of all unlocked files.
	(vc-next-action-on-file): For CVS files with implicit checkout: if
	unmodified, don't do anything.
	(vc-clear-headers): Regexp more restricted, so as not to destroy file
	contents by mistake.
	(vc-backend-merge-news): Better analysis of status reported by CVS.
	Set file properties accordingly.

1997-07-17  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper*.el: Adapted to use custom.el
	* ediff*.el: Improved customization.
	* ediff-ptch (ediff-default-backup-extension): New variable.
	(ediff-backup-extension,ediff-backup-specs): Change in initialization.
	
1997-07-17  Geoff Voelker  <voelker@cs.washington.edu>

	* loadup.el [windows-nt, ms-dos]: Load international/mule-utils.

	* dos-w32.el (find-buffer-file-type-coding-system)
	(find-binary-process-coding-system, find-buffer-file-type-match):
	New functions.
	(find-buffer-file-type): Use find-buffer-file-type-match.
	Add find-buffer-file-type-coding-system to file-coding-system-alist
	as the default entry.
	Add find-binary-process-coding-system to process-coding-system-alist
	as the default entry.

1997-07-17  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* subr.el (functionp): Doc fix.

1997-07-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/cc-styles.el (c-copy-tree): Function deleted.

	* textmodes/texinfmt.el (texinfo-no-refill-regexp): Add "direntry".
	(texinfo-format-direntry, texinfo-end-direntry): New functions.
	(texinfo-format-dircategory): New function.

	* delsel.el (delete-selection-mode): Add custom-loads property.

	* subr.el (custom-declare-variable-early): New function.
	(custom-declare-variable-list): New variable.
	(read-quoted-char-radix): Use defvar and custom-declare-variable-early.

	* paren.el (show-paren-match-face): Use gray on all non-color screens.

1997-07-17  Barry A. Warsaw  <cc-mode-help@python.org>

	* progmodes/cc-mode.el (c-initialize-cc-mode): New function.
	(c-mode, c++-mode, objc-mode, java-mode): Call it.

	* progmodes/cc-langs.el (c-symbol-key):
	First character must be a letter or underscore.

	* progmodes/cc-langs.el (c-make-inherited-keymap): Change to a defun.

	* progmodes/cc-langs.el: Require 'cc-defs for the definition of
	c-emacs-features.

	* progmodes/cc-langs.el (c-mode-menu): Added uncomment region and
	slight rearrangement of items.

	* progmodes/cc-cmds.el: Require cc-defs for the c-add-syntax macro.

	* progmodes/cc-cmds.el (c-electric-backspace): Must get 'supercede
	property values to work with delsel and pending-del.

	* progmodes/cc-cmds.el (c-electric-brace): Fix ebola eradication
	consequence in the preserve-p test.

	* progmodes/cc-engine.el (c-maybe-labelp): Add defvar.

	* progmodes/cc-styles.el (c-initialize-builtin-style): Use
	copy-sequence instead of c-copy-tree.

	* progmodes/cc-defs.el (c-load-all): Function deleted.
	
1997-07-17  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* dired-x.el (dired-omit-files): Add ".#foo" lock files to omissions.

1997-07-17  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/titdic-cnv.el (batch-titdic-convert): Add optional
	arg FORCE.

1997-07-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* subr.el (read-quoted-char): Handle non-character events. 

	* mail/emacsbug.el: Improve text of messages.

	* simple.el (quoted-insert): Doc fix.

	* subr.el (read-quoted-char): Use RET, not SPC, as special terminator.
	Use read-quoted-char-radix as radix for numbers.
	(read-quoted-char-radix): New variable.

1997-07-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dired.el (dired-find-file): Better error message
	for symlink to nonexistent target.

	* simple.el (quoted-insert): Doc fix.

	* subr.el (read-quoted-char): Read any number of octal digits,
	and ignore a space if that terminates the octal digits.

1997-07-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/texinfmt.el (texinfo-format-buffer-1): Insert, here,
	the info about what file this is and what it was made from,
	just before returning.
	(texinfo-format-setfilename): Generate no output.

	* apropos.el (apropos-print): Use customize-group-other-window,
	not customize-other-window.

	* mail/mail-extr.el (mail-extr-voodoo): Get rid of comments at an
	early stage.

	* files.el (set-auto-mode): If -*- line specifies a mode,
	then even if we don't use it because of just-from-file-name,
	still let it prevent taking the mode from a file name.

	* simple.el (yank, yank-pop): Clear out read-only prop.

	* mail/sendmail.el (mail-mode-auto-fill): Use insert-before-markers.

	* cus-edit.el (custom-unlispify-remove-prefixes): New variable.
	(custom-unlispify-menu-entry): Obey custom-unlispify-remove-prefixes.

	* progmodes/cc-styles.el (c-copy-tree): Fix bugs.

	* international/mule-cmds.el (global-map): Turn off the S-SPC binding.

1997-07-15  Kenichi Handa  <handa@etl.go.jp>

	* international/titdic-cnv.el (tit-process-body): Ignore vacant
	entries.

	* international/quail.el (quail-translate-key): Fix previous change.

	* international/mule.el (make-coding-system): Distinguish
	coding-category-iso-7-else and coding-category-iso-8-else.

	* international/mule-conf.el (coding-category-emacs-mule): Replace
	coding-category-iso-else with coding-category-iso-7-else and
	coding-category-iso-8-else.

	* international/mule-diag.el (describe-current-coding-system): Use
	coding-category-iso-7-else instead of coding-category-iso-else.

	* language/china-util.el (setup-chinese-gb-environment): Adjusted
	for the change of coding category names.  Set default-input-method
	to chinese-py-punct.
	(setup-chinese-big5-environment): Set default-input-method to
	chinese-py-punct-b5.
	(setup-chinese-cns-environment): Set default-input-method
	correctly.
	
	* language/english.el (setup-english-environment):  Adjusted for
	the change of coding category names.

	* language/japan-util.el (setup-japanese-environemnt): Adjusted
	for the change of coding category names.  Set default-input-method
	correctly.

	* language/ethio-util.el (setup-ethiopic-environment): Set
	default-input-method correctly.

	* language/korean.el (setup-korean-environment): Set
	default-input-method correctly.

	* language/tibet-util.el (setup-tibetan-environment: Set
	default-input-method correctly.

	* international/mule-diag.el (list-coding-systems): Fix previous
	change.

	* mail/sendmail.el (mail-setup): Kill the local binding of
	enable-multibyte-characters.  Turn off an input method.

	* mail/emacsbug.el (report-emacs-bug-run-tersely): New variable
	(report-emacs-bug): Insert warnings for novice
	usres in *mail* buffer.  Set enable-multibyte-characters to nil.
	(report-emacs-bug-hook): Check non-English letters.
	Confirm about sending a report to FSF.

	* international/mule-cmds.el (mule-keymap): Bind l to
	set-language-environment.
	(set-language-environment): Remove autoload cookie.  Accept null
	input for resetting to default.
	(select-input-method): Error if enable-multibyte-characters is nil.
	(toggle-input-method): Likewise.
	(global-map): Turn of the S-SPC binding.

1997-07-15  Simon Marshall  <simon@albert.gnu.ai.mit.edu>

	* mouse-sel.el: Customise; create mouse-sel as subgroup of mouse.
	(mouse-sel-mode): New option to toggle mode.
	(mouse-sel-mode): New command to toggle mode.
	(mouse-sel-set-selection-function): If mouse-sel-default-bindings is
	interprogram-cut-paste, default to x-set-selection as before.  Doc fix.
	(mouse-sel-bindings): New function to install/restore mouse bindings.
	This is called by mouse-sel-mode, i.e., not at the top-level.

	* delsel.el: Customise; as part of editing-basics group.
	(delete-selection-mode): Convert to autoloaded option.  Default to nil.
	(delete-selection-mode): Define before option.
	Modify pre-command-hook here, i.e., not at the top-level.
	If enabling Delete Selection mode, also enable Transient Mark mode.

1997-07-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/texnfo-upd.el (texinfo-all-menus-update)
	(texinfo-master-menu, texinfo-multiple-files-update):
	Search for texinfo-master-menu-header as a string, not a regexp.
	(texinfo-master-menu-header): Move defvar earlier.

	* isearch.el (isearch-char-to-string): Use char-to-string.
	(isearch-quote-char): Add nonascii-insert-offset.

	* files.el (basic-save-buffer-1): Clarify error message.
	(cd-absolute): Likewise.

1997-07-13  Stephen Eglen  <stephene@cogs.susx.ac.uk>

	* iswitchb.el: All user variables now converted to custom.
	(iswitchb): New variable for use by the custom package.
	(iswitchb-default-buffer): Variable deleted.
	(iswitchb-define-mode-map): Addition of keybindings
	for iswitchb-kill-buffer and iswitchb-find-file.
	(iswitchb): When no text typed in, show all buffers.
	(iswitchb-complete): Use equal rather than eq.
	(iswitchb-next-match, iswitchb-prev-match): Use
	iswitchb-chop to handle reordering the buffer list.
	(iswitchb-chop): New function.
	(iswitchb-make-buflist): Rewritten for efficiency.
	(iswitchb-to-end): Operate on a list of buffers, not just one.
	(iswitchb-set-matches): Always return list
	of matching buffers, even in absence of user input.
	(iswitchb-kill-buffer): New function.
	(iswitchb-default-keybindings): Use read-kbd-macro for keys to define.
	(iswitchb-exhibit): Always return list of matching buffers.
	(iswitchb-show-default-buffer): Function deleted.

1997-07-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/cc-langs.el: Require cc-defs.

	* progmodes/awk-mode.el (awk-mode): Require cc-langs, not cc-mode.

	* progmodes/cc-langs.el (c-make-inherited-keymap): Add autoload cookie.

	* tmm.el (tmm-prompt): Use save-excursion around completing-read code.
	(tmm-add-prompt): Clean up using save-selected-window
	and with-current-buffer.

1997-07-12  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (msdos-bg-mode): New function.
	(msdos-face-setup, make-msdos-frame): Set background-mode and
	display-type properties for created frames.

1997-07-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (forward-visible-line): Correctly handle arg 0
	so that it doesn't mess up handling of nonzero args.

1997-07-10  Rob Riepel  <riepel@Stanford.EDU>

	* emulations/tpu-edt.el (tpu-set-mode-line) Added
	mode-line-mule-info and mode-line-frame-identification.

1997-07-10  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* emacs-lisp/edebug.el (condition-case): Fix edebug-form-spec to
	allow a handler with a list of condition names.

1997-07-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-start.el: Make it clear that the warning is a warning.

1997-07-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* progmodes/cc-styles.el (c-copy-tree): New function.
	(c-initialize-builtin-style): Use c-copy-tree.

	* cc-align.el, cc-cmds.el, cc-compat.el, cc-defs.el, cc-engine.el:
	* cc-langs.el, cc-menus.el, cc-mode.el, cc-styles.el, cc-vars.el:
	New version of CC mode installed.
	Old files completely replaced.

1997-07-10  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* international/fontset.el (create-fontset-from-fontset-spec):
	Typo in doc-string fixed.

1997-07-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* hilit19.el (hilit-submit-feedback): Change mail address.

1997-07-10  Kenichi Handa  <handa@etl.go.jp>

	* international/fontset.el (create-fontset-from-fontset-spec): Add
	optional arg NOERROR.
	(create-fontset-from-x-resource): Give t as arg NOERROR to
	create-fontset-from-fontset-spec.

	* term/x-win.el: Give t as arg NOERROR to
	create-fontset-from-fontset-spec.

	* bindings.el (mode-line-mule-info): Remove tailing ">" from input
	method indicator.

	* international/isearch-x.el (isearch-input-method): New variable.
	(isearch-input-method-title): New variable.
	(isearch-toggle-specified-input-method): Set the above variables.
	(isearch-toggle-input-method): Likewise.
	(isearch-process-search-multibyte-characters): Give
	iseach-input-method as arg to read-multilingual-string.

	* international/mule-cmds.el (read-multilingual-string): Adjusted
	for the previous change of variables related to input methods.

	* isearch.el (isearch-message-prefix): Likewise.

1997-07-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail/sendmail.el (mail-mode): Make fill-paragraph-function local.

	* menu-bar.el (menu-bar-custom-menu): Add several more menu items.
	Rename some.  Delete "Update this menu". 

	* cus-edit.el (customize-browse): Don't take an argument.

1997-07-09  Noah Friedman  <friedman@prep.ai.mit.edu>

	* emacs-lisp/eldoc.el: Add `up-list' and `down-list' to
	eldoc-message-commands.

1997-07-09  Kenichi Handa  <handa@etl.go.jp>

	* international/mule-diag.el (print-fontset): Output format improved.
	(describe-fontset): Likewise.  Doc-string modified.
	(list-fontsets): Likewise.  

	* international/encoded-kb.el (encoded-kbd-mode): Call
	coding-system-XXX instead of coding-vector-XXX.

1997-07-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* Makefile (dontcompilefiles): Add cyril-util.el.

	* format.el (format-alist): Don't handle compression here.

1997-07-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (customize-browse): Improve start-of-buffer message.

	* mouse.el (mouse-undouble-last-event): Fix gross bugs:
	use modifiers, not old-modifiers.

	* cus-edit.el (custom-help-menu): Variable deleted.
	(custom-menu-reset): Function deleted.
	(Custom-menu-update): Likewise.

	* finder.el (finder-list-matches): Create *Finder Category* buffer.

	* mouse.el (mouse-show-mark): Handle switch-frame events in the loop.

1997-07-08  Dave Love  <d.love@dl.ac.uk>

	* thingatpt.el (url): Define end-op property again.  Wrap end-op
	and beginning-op lambdas with `function', not quote.

1997-07-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emacs-lisp/bytecomp.el (char-after): Allow 0 args.

	* progmodes/cc-*.el: New files, totally reorganized.
	
	* dunnet.el: Undo an earlier change:
	(dun-piss): Renamed from dunnet-urinate.
	(dun-verblist): Indecent word added back.
	(dunnet): Delete "censored" message.

	* textmodes/fill.el: Doc fixes.

	* international/mule-conf.el (undecided): Use `-' in mode line.

	* bookmark.el: Make global bindings only via loaddefs.el.

	* help-macro.el (make-help-screen): Clear the prompt
	when we get a real command.

1997-07-07  Kenichi Handa  <handa@etl.go.jp>

	* international/quail.el (quail-conversion-help): Source code
	indentation changed.

	* international/skkdic-utl.el (skkdic-okuri-ari): Doc-string
	modified.
	(skkdic-postfix, skkdic-prefix, skkdic-okuri-nasi): Likewise.
	(skkdic-lookup-key): Add 4th argument PREFER-NOUN.  Arrange order
	of returning list according to this value.

	* international/kkc.el (kkc-region): Call skkdic-lookup-key with
	t for arg PREFER-NOUN while looking up key sequences shorter than
	what a user requested.
	(kkc-next-phrace): Likewise.

	* international/mule-diag.el (print-fontset): Output format tuned.
	(describe-fontset): Likewise.
	(list-fontsets): Likewise.

1997-07-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* delsel.el (delete-selection-mode): Doc fix.

	* wid-edit.el (widget-field-use-before-change): Reenable for Emacs 20.

	* files.el (find-file-literally): New function.

1997-07-05  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* menu-bar.el (menu-bar-files-menu): Use make-frame-command
	as in C-x 5 2, rather than make-frame.

	* international/mule-cmds.el (help-map):
	Bind I to describe-input-method.
	(help-map): Bind L to describe-language-environment.

	* international/mule-cmds.el
	(set-language-environment): Do the real work here.
	(current-language-environment): New variable.
	(setup-specified-language-environment): Call set-language-environment.
	Set current-language-environment.
	(describe-language-environment):
	By default, use current-language-environment.

	* help.el (help-for-help): Update help text.

	* faces.el (face-set-after-frame-default): New ubroutine,
	taken from x-create-frame-with-faces.
	(x-create-frame-with-faces): Call it.
	(face-italic-p, face-bold-p): Use equal to compare fonts.
	(frame-update-faces): Function now a no-op.

1997-07-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (sendmail-user-agent-compose): New function;
	this has the code that was in sendmail-user-agent.
	(sendmail-user-agent): Use sendmail-user-agent-compose.

	* mail/reporter.el (reporter-compose-outgoing): Use functionp,
	not fboundp, to test validity of COMPOSE.

	* bindings.el (complete-symbol): Accept an argument.
	(debug-ignored-errors): Add ^ to "No tags table loaded".
	Make the etags.el strings correspond to latest etags.el.

	* progmodes/etags.el (next-file, tags-loop-scan): Fix error message.
	(visit-tags-table-buffer, complete-tag): Likewise.

	* language/european.el (latin-1, latin-2. latin-3, latin-4, latin-5):
	Define coding system aliases.

	* wid-edit.el (widget-choose): Using keyboard, if all choices are
	diabled, just report an error.

	* cus-edit.el (custom-load-symbol): Don't reload a preloaded file.

	* term/linux.el: New file.

1997-07-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* simple.el (forward-visible-line): Use forward-line, not
	vertical-motion, when moving backwards.

1997-07-04  Anders Lindgren  <andersl@csd.uu.se>

	* compile.el (compilation-error-regexp-alist):
	Support for IAR Systems C compiler added.

1997-07-04  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el: Require thingatpt when compiling.
	(browse-url-url-at-point): Use `thing-at-point' (with URL code
 	moved from here).
	(browse-url-looking-at): Moved to thingatpt.el, renamed and changed.

	* thingatpt.el (thing-at-point): Use `thing-at-point' property, if any.
	(bounds-of-thing-at-point): Use `bounds-of-thing-at-point' property.
	(thing-at-point-bounds-of-url-at-point): New function.
	(thing-at-point-looking-at): New function, adapted from old
 	browse-url-looking-at.
	(thing-at-point-url-at-point): New function, adapted from 
 	browse-url-url-at-point.
	(thing-at-point-url-chars): Variable deleted.
	(thing-at-point-url-path-regexp, thing-at-point-short-url-regexp,
 	thing-at-point-url-regexp, thing-at-point-markedup-url-regexp):
 	New variables.
	(url): `beginning-op' property function changed to use
 	`thing-at-point-bounds-of-url-at-point'.  `end-op' property no
 	longer set -- functionality no longer supported for the more
 	sophisticated treatment of URLs so `forward-thing' no longer works
 	in this case.

1997-07-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-mode-map): Bind n and p.

	* mail/emacsbug.el (report-emacs-bug): Don't include messages
	in *Messages* generated by report-emacs-bug itself.

	* mail/mailalias.el (mail-complete-alist): Don't use backquote.

1997-07-04  Per Abrahamsen  <abraham@dina.kvl.dk>

	* menu-bar.el (menu-bar-custom-menu): Some command names were 
	updated. 

	* widget.el (:sample-overlay): New keyword.
	* wid-edit.el (widget-leave-text): Use it.
	(widget-specify-sample): Use it.
	(widget-default-delete): Ditto.

	* wid-edit.el (color): Make it an editable field.
	(widget-color-value-create): Deleted.
	(widget-color-value-get): Deleted.
	(widget-color-value-set): Deleted.
	(color-item): Deleted.
	(widget-color-item-button-face-get): Renamed to
	`widget-color-sample-face-get'. 
	(color-sample): Delete.
	(editable-color): Delete.
	(widget-editable-color-value-create): Delete.
	* cus-face.el (custom-face-attributes): Use `color' instead of 
	`editable-color'.

	* wid-edit.el (widget-specify-field): Add newline in overlay for
	nil-:sized fields.
	(widget-field-end): Ditto.

	* wid-edit.el (emacs-library-link): New widget.
	(widget-emacs-library-link-action): New function.
	(widgets): Use it.
	(file-link): New widget.
	(widget-file-link-action): New function.

1997-07-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* loadup.el: Some files are in different directories.

	* emacs-lisp/lisp.el, emacs-lisp/lisp-mode.el:
	Moved from parent dir.

	* textmodes/fill.el, textmodes/page.el: Moved from parent dir.
	* textmodes/paragraphs.el, textmodes/text-mode.el: Likewise.
	
	* mail/sendmail.el (mail-do-fcc):
	Pass an arg to verify-visited-file-modtime.

	* textmodes/tex-mode.el (tex-common-initialization):
	Set search-whitespace-regexp locally.

	* simple.el (next-line, previous-line): Doc fixes.

1997-07-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* hippie-exp.el (he-dabbrev-skip-space): Fix previous change.
	(he-dabbrev-as-symbol): Likewise.

	* find-dired.el (find-grep-dired): Use -type f.

	* language/japanese.el ("Japanese"): List iso-2022-7bit coding system
	instead of japanese-iso-7bit.

	* delsel.el (delete-selection-mode): Doc fix.

	* gnus/gnus-group.el (gnus-group-set-mode-line):
	Update how mode-line-modified is set.

	* paren.el (show-paren-idle-timer): New defvar.
	(show-paren-mode): Add :initialize attr in the defcustom.
	Test the value at end of file, and turn on the mode if true.
	
	* cus-face.el (custom-face-attributes): Use editable-color widget.

	* wid-edit.el (color-sample, editable-color): New widget types.

	* cus-edit.el (custom-buffer-create-internal): New arg DESCRIPTION
	is inserted in the buffer to describe it.
	(custom-buffer-create-other-window, custom-buffer-create): 
	New arg DESCRIBE; pass it along.
	(customize-group): Pass DESCRIBE argument.
	(custom-face-menu): Improve Set and Save item strings.
	(custom-group-menu): Likewise.

1997-07-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom): Don't set :button-face.
	(custom-mode): Use custom-button-face here
	as buffer-local value of widget-button-face.

	* wid-edit.el (widget-button-face): Default value widget-button-face.
	(widget-default-button-face-get): Use variable widget-button-face.

	* mail/emacsbug.el (report-emacs-bug): Don't assume the exit command
	is mail-send-and-exit for all user agents.

	* autorevert.el: New file.

	* paren.el (show-paren-mode): Add a defvar before first use.

	* desktop.el (desktop-clear-preserve-buffers): New variable.
	(desktop-clear): Kill all buffers except internal ones
	and those listed in desktop-clear-preserve-buffers.

	* time.el (display-time-string-forms): Use %M, not %m.

	* compile.el (compilation-parse-errors): Skip 2 lines
	only for Compilation major mode.

	* international/mule.el (load-with-code-conversion): 
	Don't run kill-buffer-hook or kill-buffer-query-functions.

1997-07-02  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (customize-browse): Use glyphs in description, if
	possible. 

	* wid-edit.el (widget-menu-minibuffer-flag): Default to t on
	XEmacs. 

	* wid-edit.el (widget-field-value-create): Add comment explaining
	why `:field-overlay' contains two markers.

	* cus-edit.el (custom-browse-visibility,
	custom-browse-visibility-action, custom-browse-group-tag,
	custom-browse-group-tag-action, custom-browse-variable-tag-action,
	custom-browse-face-tag, custom-browse-face-tag-action,
	custom-browse-face-tag-action, custom-browse-alist): Changed
	prefix from `custom-tree' to `custom-browse'.
	(custom-variable-value-create, custom-face-value-create,
	custom-group-value-create): Updated caller.

	* cus-edit.el (custom-browse-only-groups): New option.
	(custom-group-value-create): Use it.  Omit non-groups if non-nil.

	* cus-edit.el (custom-help-menu): Renamed "Variable" to "Option".
	Remove "..." from non-prompting entries.

	* wid-edit.el (widget-single-line-field-face): New face.
	(widget-single-line-display-table): New variable.
	(regexp, file): Use `widget-single-line-field-face'.

	* cus-edit.el (custom-unloaded-symbol-p): New function.
	(custom-unloaded-widget-p): New function.
	(custom-group-value-create): Use it.
	(customize-browse): Mention [?].

	* cus-edit.el (custom-toggle-hide): Load dependencies here.

	* wid-edit.el (functionp): New function.

1997-07-02  Kenichi Handa  <handa@etl.go.jp>

	* language/indian.el: Change category 5 to 1.

	* language/european.el (setup-8-bit-environment): New argument
	LANGUAGE. 
	(setup-latin1-environment): Adjusted for the above change.
	(setup-latin2-environment): Likewise.
	(setup-latin3-environment): Likewise.
	(setup-latin4-environment): Likewise.
	(setup-latin5-environment): Likewise.

	* language/greek.el (setup-greek-environment): Likewise.

	* language/hebrew.el (setup-hebrew-environment): Likewise.

	* language/cyril-util.el (setup-cyrillic-environment): Adjusted
	for the change of an input method name.

	* language/devan-util.el (setup-devanagari-environment): Likewise.

	* language/ethio-util.el (setup-ethiopic-environment): Likewise.

	* language/korean.el (setup-korean-environment): Likewise.

	* language/lao-util.el (setup-lao-environment): Likewise.

	* language/thai-util.el (setup-thai-environment): Likewise.

	* language/viet-util.el (setup-vietnamese-environment): Likewise.

	* language/china-util.el: Use true coding system names instead of
	aliases.  Adjusted for the change of an input method name.
	(decode-hz-region): Fix comments. 
	(encode-hz-region): Fix a coding system name.

	* language/misc-lang.el: Call set-language-info-alist for IPA.
	(setup-ipa-environment): New function.

	* international/titdic-cnv.el: Add license note.
	(tit-encode-list): Fix typo (euc-kk -> euc-kr).
	(quail-cxterm-package-title-alist): New variable.
	(tit-make-quail-package-file-name): Name changed from
	tit-make-quail-package-name.
	(tit-process-header): Check quail-cxterm-package-title-alist to
	decide a package name.
	(titdic-convert): Call tit-make-quail-package-file-name.
	(batch-titdic-convert): Likewise.

	* international/skkdic-cnv.el: Coding system name changed to
	iso-2022-7bit-short.
	(skkdic-convert): Fix typo in a comment.
	(skkdic-convert): Save buffer in iso-2022-7bit-short.
	(skkdic-extract-conversion-data): Fix a bug in regular expression
	pattern.

	* international/quail.el (quail-guidance-buf): Make it buffer
	local.
	(quail-guidance-win): New variable.  Make it buffer local.
	(quail-current-translations): Doc-string modified.
	(quail-current-data): Make it buffer local.
	(quail-define-package): Update input-method-alist.
	(quail-defrule): Doc-string modified.
	(quail-defrule-internal): Document it.
	(quail-get-translation): Change the format of DEF part.
	(quail-lookup-key): Make the second argument LEN optional.  Reset
	quail-current-translations to nil.
	(quail-map-definition): New funtion.
	(quail-get-current-str): New function.
	(quail-guidance-translations-starting-column): New variable.
	(quail-update-current-translations): New function.
	(quail-translate-key): Adjusted for the change of DEF format.
	Call quail-update-current-translations
	(quail-next-translation): Call quail-update-current-translations.
	(quail-prev-translation): Likewise.
	(quail-next-translation-block): Likewise.
	(quail-prev-translation-block): Likewise.
	(quail-select-translation): Deleted.
	(quail-make-guidance-frame): New function.
	(quail-show-guidance-buf): Handle the case that minibuffer is in a
	separate frame.
	(quail-hide-guidance-buf): Likewise.
	(quail-show-translations): Call
	quail-update-current-translations.  Check width of a frame to be
	used.
	(quail-completion): Do not supply LEN argument to
	quail-lookup-key.
	(quail-help): Use with-output-to-temp-buffer.
	(quail-translation-help): Likewise.
	(quail-conversion-help): Likewise.
	(quail-update-leim-list-file): Save buffer without making a backup
	file.

	* international/mule.el (charset-bytes, charset-dimension,
	charset-chars, charset-width, charset-direction,
	charset-iso-final-char, charset-iso-graphic-plane,
	charset-reverse-charset, cahrset-short-name, charset-long-name,
	charset-description, charset-plit, set-charset-plist): Document
	them.
	(make-char, charset-list): Doc-string modified.
	(find-new-buffer-file-coding-system): Fix bug of handling the
	coding system undecided.

	* international/mule-diag.el (print-list): Use macro when.
	(sort-charset-list): New function.
	(charset-other-info-func): Delete this variable.
	(list-character-sets): Handle a prefix argument.  If it is nil,
	make the output format less cryptic.
	(print-designation): Use macro when.
	(describe-current-coding-system): Likewise.
	(describe-current-coding-system): Delete unnecessary progn.
	(list-coding-systems): Handle prefix a prefix argument instead of
	checking (interactive-p).  Do not print coding categories.
	(list-coding-categories): New function.
	(print-fontset): Name changed from describe-fontset-internal.
	(describe-fontset): Make the output less cryptic.
	(list-fontsets): New function.
	(list-input-methods): Use macro when.
	(insert-section): Change a name of first argument. 
	(mule-diag): Doc-string modified.  Use with-output-to-temp-buffer.
	 Use insert-buffer-substring instead of insert-buffer.
	 (dump-charsets): Make it callable interactively.
	 (dump-codings): Likewise.

	* international/mule-conf.el: Fix typo in doc-string of charset
	indian-1-column.  Adjust for the name change of
	standard-character-unification-table-for-decode and
	standard-character-unification-table-for-encode.

	* international/characters.el: Modify docstring of char category
	1.  Change char category 5 to symbol.  Adjust category definition
	of Tibetan characters and Thai characters for this change.

1997-07-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* international/mule-conf.el (binary): Define as coding system alias.

1997-07-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* desktop.el (desktop-clear): Don't kill buffers here.

	* bindings.el (mode-line-mule-info): Use `%Z' instead of `%z:'.

	* language/devanagari.el (in-is13194-devanagari): 
	Define this name rather than devanagari.
	(devanagari): Make this an alias.

	* international/mule-conf.el: Swap args to define-coding-system-alias.
	* language/vietnamese.el, language/thai.el, language/korean.el: 
	* language/japanese.el, language/hebrew.el, language/greek.el: 
	* language/european.el, language/chinese.el, language/cyrillic.el: 
	Likewise.

	* international/mule.el (define-coding-system-alias): Swap the args.

	* mouse.el (mouse-undouble-last-event): Use reverse, not nreverse.

1997-06-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bibtex.el (bibtex-kill-field, bibtex-find-text):
	Killing a field moves to the next line.

	* diary-lib.el (diary-float): Fix errors in previous change.

	* progmodes/cc-mode.el (c-Java-conditional-key): Put this in the
	right place--it was inside of a defun.
	(c-electric-brace): Eliminate junk mistakenly patched here.

	* simple.el (kill-line): Doc fix.

	* dired-aux.el (dired-do-shell-command): New arg FILE-LIST
	so that we don't recompute it after the user provides the input.

1997-06-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (forward-visible-line): Handle 0 arg correctly.

1997-06-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-start.el (enable-multibyte-characters): Customize.

1997-06-28  Michelangelo Grigni  <mic@mathcs.emory.edu>

	* ffap.el: XEmacs compatibility hacks cleaned up.
	(ffap-url-fetcher): If `browse-url' is bound, use that.
	(ffap-locate-file): New optional arg dir-ok.
	(ffap-at-mouse): Fix return value.

1997-06-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* window.el (shrink-window-if-larger-than-buffer):
	Use compute-motion, instead of inserting newlines.

1997-06-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* menu-bar.el (nonincremental-repeat-search-forward)
	(nonincremental-repeat-search-backward)
	(nonincremental-repeat-re-search-forward)
	(nonincremental-repeat-re-search-backward):
	Special error check for no previous search.

	* Makefile (lisptagsfiles): Look at subdirs only if name
	starts with a letter.
	(dontcompilefiles): Don't compile latin-5.el.
	(updates): Reject subdirs whose names start with =.
	(custom-deps, finder-data, autoloads, update-subdirs): Likewise.

	* scroll-bar.el (toggle-scroll-bar): Moved from frame.el.
	Use scroll-bar-mode to determine which side; if it's nil, use left.
	(set-scroll-bar-mode): New subroutine, taken from scroll-bar-mode.
	(scroll-bar-mode): Use the variable set-scroll-bar-mode.
	(scroll-bar-mode): New variable.  Extra defvar to avoid warning.
	(toggle-horizontal-scroll-bar): Moved from frame.el.

	* frame.el (scroll-bar-side): Variable deleted.
	(toggle-scroll-bar, toggle-horizontal-scroll-bar):
	Moved to scroll-bar.el.
	
	* files.el (file-chase-links): When handling .., make newname absolute.
	Simplify several places.
	(file-relative-name): Handle directory names as well as file names.
	Don't get fooled by empty directory names, etc.

	* word-help.el, term-nasty.el: Files deleted.

1997-06-27  Simon Marshall  <simon@gnu.ai.mit.edu>

	* font-lock.el (font-lock-extra-types-widget): Use regexp widget.
	(scheme-font-lock-keywords-1):
	(scheme-font-lock-keywords-2): New variables based on old variable.
	(scheme-font-lock-keywords): Default to the former.
	(tex-font-lock-keywords-1):
	(tex-font-lock-keywords-2): New variables based on old variable.
	(tex-font-lock-keywords): Default to the former.
	(font-lock-eval-keywords): Don't eval KEYWORDS if nil.
	(font-lock-after-change-function):
	(font-lock-fontify-block): Explicitly wrap inhibit-point-motion-hooks.

	* lazy-lock.el (lazy-lock-fontify-after-scroll):
	(lazy-lock-fontify-after-trigger):
	(lazy-lock-fontify-conservatively):
	(lazy-lock-fontify-chunk): Explicitly wrap inhibit-point-motion-hooks.
	
	* emacs-lisp/regexp-opt.el (regexp-opt-charset): Simplify range search.

1997-06-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-magic-alist):
	Update messages for `modified' and `set' states.

	* files.el (set-auto-mode): Undo previous change.

	* mouse.el (mouse-drag-region): For a click (not a drag),
	let the up-event run normally.

	* cus-edit.el (custom-mode-map):
	Bind Custom-move-and-invoke to mouse-1.
	(Custom-move-and-invoke): New command.
	(custom-buffer-create-internal): Update buffer help text.
	
1997-06-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-variable-menu): Clarify menu item names.
	(custom-buffer-create-internal): Clarify button names.

	* wid-edit.el (widget-choice-action): Use widget-edit-functions.
	(widget-toggle-action): Likewise.

	* wid-edit.el (widget-choose): Use only digits, except for C-g.
	Allocate digits to disabled commands too.
	Don't use a keyboard menu; instead, display a buffer
	listing all the alternatives.  Put cursor in echo area.
	
	* term-nasty.el: File deleted from the distribution.

	* doctor.el: Undo previous censorship changes.

	* paths.el (sendmail-program): Look first in /usr/sbin.

1997-06-25  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (customize-browse): Take a group argument.
	(custom-help-menu): Browse `emacs' group.

	* cus-edit.el (custom-add-parent-links): Simplify mapatoms lambda.
	(custom-browse): New group.
	(custom-buffer-groups-last):
	(custom-menu-groups-first): Options deleted.
	(custom-browse-sort-alphabetically):
	(custom-browse-order-groups):
	(custom-buffer-order-groups):
	(custom-menu-order-groups): New options.
	(custom-browse-sort-predicate):
	(custom-buffer-sort-predicate):
	(custom-menu-sort-predicate): Functions deleted.
	(custom-sort-items): New replacement function; simplification and
	extension of previous predicate functions.
	(customize-face):
	(customize-customized):
	(customize-saved):
	(customize-apropos):
	(custom-menu-create):
	(custom-group-value-create): Use it.

	* cus-edit.el (custom-tree-alist): Use "-\ " instead of "-+ ".
	(custom-group-value-create): Ditto.

	* wid-edit.el (widget-button-click): Steal up event if key is not
	bounbd in `widget-global-map'.

	* cus-edit.el (custom-tree-insert-prefix): Renamed from
	`custom-tree-insert'.
	(custom-group-value-create): Use it.

	* wid-edit.el (widget-field-use-before-change): New option.
	(widget-setup): Obey it.

	* cus-edit.el (custom-help-menu): Add entry for
	`customize-browse'. 

	* wid-edit.el (widget-push-button-value-create): Use :tag-glyph.
	(widget-glyph-insert-glyph): Accept nil widget.
	* cus-edit.el (custom-tree-group-tag): Specify :tag-glyph.
	(custom-tree-variable-tag): Ditto.
	(custom-tree-face-tag): Ditto.
	
1997-06-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* help-macro.el (make-help-screen): Clear buffer-read-only.

1997-06-24  Dan Nicolaescu  <done@ece.arizona.edu>

	* bindings.el (debug-ignored-errors): Correct the error messages
	that are supposed to match imenu.el.

1997-06-24  Inge Frick  <inge@nada.kth.se>

	* view.el: Changed some documentation.
	(view-exits-all-viewing-windows): Nev variable
 	replaces view-exit-all-windows-at-exit.
	(view-exit-all-windows-at-exit): Variable deleted.
	(view-mode-enter): Doesn't set view-exit-action	if
	argument exit-action is nil.
	(view-mode-exit): Only restored windows are removed
 	from view-return-to-alist.  Follow chains of old-windows.
	Do not call replace-buffer-in-windows.
	Call exit-action also when a window displays buffer.
	(View-exit-and-edit): Now sets read-only by binding
	view-old-buffer-read-only.
	
1997-06-25  Paul Eggert  <eggert@twinsun.com>

	* replace.el: (perform-replace): When matching lookahead, use
 	markers rather than integers, since a replacement may invalidate
 	integers.  This fixes a bug introduced in the previous change to
 	this file.

1997-06-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* facemenu.el (facemenu-add-new-face): Fix comma in backquote.

	* mail/rmail.el (rmail-get-new-mail): If conversion fails,
	delete the text that was inserted.

1997-06-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* isearch.el (isearch-search-and-update): When a reverse search
	need not actually search, update isearch-case-fold-search anyway.
	(isearch-mode-map): Define latin-iso8859-9 as self-searching.
	
	* thingatpt.el (buffer): Don't use beginning-of-buffer, end-of-buffer.

	* wid-edit.el (widget-menu-minibuffer-flag): New variable.
	(widget-choose): Alternative method to read one character
	from the keyboard.

	* cus-edit.el (custom-documentation-face): New face.
	(custom-mode): Use custom-documentation-face for doc strings.
	(custom-group-link): Fix the help string.
	(custom-magic-show): Doc fix.

	* wid-edit.el (widget-documentation-face): New variable.
	(widget-specify-doc): Use the variable.

	* cus-edit.el (custom-group-value-create): In links style,
	use Go to Group instead of Show.
	(Custom-goto-parent): New command.
	(custom-mode-map): Bind u to Custom-goto-parent.
	Bind SPC and DEL.
	(custom-buffer-create-internal): Improve help for buttons.
	(custom-button-face): New defface.
	(custom widget-type): Use custom-button-face for buttons.
	(custom-group-tag-faces): Initial value is nil.
	(custom-variable-tag-face): Renamed from custom-variable-sample-face.
	Initialize it like custom-group-tag-face.
	(custom-group-tag-faces): Initialize to nil.
	(custom-state-face): New defface.
	(custom-magic-value-create):
	Use custom-state-face for State descriptions.

	* wid-edit.el (widget-default-button-face-get):
	Try to get it from the parent.
	(widget-default-create): Use :tag-face for tags.

	* cus-edit.el (custom-state-buffer-message): Display the message
	only if the item is modified.  Take widget as arg.
	(custom-mode): Use widget-edit-functions.

	* wid-edit.el (widget-edit-functions): Renamed from widget-edit-hook.
	(widget-field-action): Pass the widget as an arg when running hook.

	* cus-edit.el (Custom-set): Renamed from custom-set.
	(Custom-save): Renamed from custom-save.
	(custom-browse-sort-predicate): Defalias deleted.
	(custom-group-value-create): Don't sort, in tree mode.
	(Custom-mode-menu): Renamed from custom-mode-menu.
	(Custom-reset-current): Renamed from custom-reset-current.
	(Custom-reset-saved): Renamed from custom-reset-saved.
	(Custom-reset-standard): Renamed from custom-reset-standard.
	(Custom-menu-update): Renamed from custom-menu-update.
	(customize-set-value): Renamed from custom-set-value.
	(customize-set-variable): Renamed from custom-set-variable.
	(customize-save-customized): Renamed from custom-save-customized.

	* cus-start.el (double-click-time): Use restricted-sexp.
	(load-path): Make [Current dir?] itself the active button.
	
	* wid-edit.el (character): Doc fix.
	(restricted-sexp): New widget type.
	(integer, number): Use restricted-sexp.

	* cus-start.el (track-mouse): Don't customize it.

1997-06-24  Paul Eggert  <eggert@twinsun.com>

	* replace.el (perform-replace): When matching regexps, if the next
 	match is adjacent to this one, record the next match before
 	replacing this one.  This fixes a bug where (replace-regexp
 	"\\ba " "c") replaced "a a a " with "ca c" instead of "ccc".

1997-06-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* thingatpt.el (beginning-of-sexp): New function.
	(bounds-of-thing-at-point): Fix typo in computing real-beg.

1997-06-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-group-visibility): Widget type
	moved from wid-edit.el and renamed from group-visibility.
	(custom-group-visibility-create): Function renamed
	and moved from wid-edit.el.
	(custom-state-buffer-message): New function.
	(custom-mode): Add custom-state-buffer-message to widget-edit-hook.

	* wid-edit.el (widget-edit-hook): New variable.
	(widget-field-action, widget-choice-action): Run that hook
	instead of displaying an echo area message.
	(widget-toggle-action): Likewise.
	(group-visibility, widget-group-visibility-create):
	Moved to cus-edit.el and renamed.

1997-06-23  Dan Nicolaescu  <done@ece.arizona.edu>

	* textmodes/outline.el (outline-discard-overlays):
	Don't use let inside a cycle. 

	* progmodes/hideshow.el (hs-discard-overlays): Use overlays-in to
	get all the overlays in a range.  Don't use let inside a cycle.

1997-06-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* textmodes/nroff-mode.el (nroff-electric-mode): New defvar.

	* emulation/vip.el (vip-mode-map): Add defvar; move earlier.
	(vip-c-string): Variable renamed and defvar added.
	(vip-save-minibuffer-local-map): Likewise.
	(vip-end-with-a-newline-p): Use STRING (the arg) instead of `text'.

	* emacs-lisp/profile.el (profile-million): Variable moved.

	* informat.el (Info-validate-allnodes): Variable renamed, defvar added.
	(Info-validate-thisnode, Info-validate-lossages): Likewise.
	Change all references.

	* dired-aux.el (dired-add-entry): New optional arg RELATIVE.
	(dired-update-file-line): Pass t for RELATIVE.

1997-06-22  Noah Friedman  <friedman@prep.ai.mit.edu>

	* type-break.el: Do not use defsubst anywhere; use defuns.
	Don't require timer; use autoloaded functions.
	(type-break-warning-message-mode): Variable deleted.
	(type-break-query-mode): New variable and function.
	(type-break-mode): Mention in docstring.
	(type-break-run-at-time): New function.
	All callers of run-at-time changed.
	(type-break-cancel-function-timers): New function.
	All callers of cancel-function-timers changed.
	(type-break-check-post-command-hook): New function.
	(type-break-mode, type-break-schedule, type-break-alarm,
	type-break-time-warning-alarm): Call it.
	(type-break-mode-line-countdown-or-break): New function.
	(type-break): Call it.
	(type-break-time-warning-schedule): Put type-break-time-warning
	on type-break-post-command-hook.
	(type-break-check): Call type-break-mode-line-countdown-or-break.
	(type-break-noninteractive-query): New function.
	(type-break-force-mode-line-update): New function.

1997-06-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* language/japan-util.el (read-hiragana-string):
	Call read-multilingual-string correctly.

1997-06-22  Howard Melman  <melman@absolut.osf.org>

	* picture.el (picture-draw-rectangle): New command.
	(picture-mode-map): Add binding for picture-draw-rectangle.
	(picture-mode): Doc fix.
	(picture-rectangle-ctl): New variable.
	(picture-rectangle-ctr): New variable.
	(picture-rectangle-cbr): New variable.
	(picture-rectangle-cbl): New variable.
	(picture-rectangle-v): New variable.
	(picture-rectangle-h): New variable.
	(move-to-column-force): Function deleted;
	calls changed to use move-to-column.
	(picture-insert): New function.
	(picture-self-insert): Use picture-insert.
	(picture-current-line): New function.
	
1997-06-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* decipher.el (decipher-copy-cons):
	Renamed from decipher-get-undo-copy.  Calls changed.

	* emacs-lisp/lmenu.el (popup-menu): Redefine as macro.
	(popup-menu-popup, popup-menu-internal): New function.

	* mail/reporter.el (reporter-version): Change value.

	* vc-hooks.el (vc-menu-map): Add bindings for 
	vc-retrieve-snapshot and vc-create-snapshot.

	* emacs-lisp/lisp-mnt.el (lm-version, lm-last-modified-date): 
	Clean up strings that looked like RCS headers.

	* ielm.el (ielm-header): Delete version and RCS header.

	* forms.el (forms-version): Deactivate RCS headers.

	* emacs-lisp/edebug.el (edebug-version): Use the Emacs version.

	* compile.el (compilation-error-regexp-alist):
	New item, for Oracle pro*c compiler.

	* startup.el (command-line-1): Don't display startup message
	if the buffer-is nonempty.  Don't make undo entries for it.

	* tex-mode.el (latex-imenu-create-index): Make it much smarter.
	(latex-imenu-indent-string): New variable.

	* bytecomp.el (byte-compile-file): Doc fix.
	(batch-byte-compile-file): Return what byte-compile-file returns.

	* files.el (set-auto-mode): Handle interpreter-mode-alist as regexps.

	* doctor.el (doctor-death): Give serious advice if suicide mentioned.

	* Move many files into new subdirs named play, mail,
	progmodes, textmodes, emulation, emacs-lisp, and international.
	
	* apropos.el, asm-mode.el, autoinsert.el: Add provide call.
	* blackbox.el, cdl.el, copyright.el cplus-md.el, debug.el, disass.el:
	* dissociate.el, doctor.el, dunnet.el, ebuff-menu.el, echistory.el:
	* find-gc.el, ielm.el, informat.el, kermit.el, ledit.el, levents.el:
	* lselect.el, macros.el, mailpost.el, makesum.el, misc.el, modula2.el:
	* mpuz.el, novice.el, nroff-mode.el, options.el, pascal.el:
	* pc-mode.el, profile.el, prolog.el, reposition.el, rlogin.el:
	* rnewspost.el, scribe.el, soundex.el, spell.el, spook.el, studly.el:
	* talk.el, time.el, underline.el, undigest.el, unrmail.el, vi.el:
	* vip.el, vms-pmail.el, vt-control.el, ws-mode.el, x-apollo.el:
	Add provide calls.

	* icon.el: Fix provide call.
	
	* simple.el (current-word): Ignore text properties.

	* edebug.el (edebug-sit-for-seconds): New variable.
	(edebug-display): Use that variable to control amt of time.

1997-06-22  Morten Welinder  <terra@diku.dk>

	* tex-mode.el (latex-imenu-create-index): Make it much smarter.
	(latex-imenu-indent-string): New variable.

1997-06-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* uniquify.el (delay-uniquify-rationalize-file-buffer-names): 
	Remove this hook here,
	if we won't call delayed-uniquify-rationalize-file-buffer-names.
	(uniquify-buffer-name-style): Default value is nil.

	* cus-edit.el (custom-buffer-create-internal):
	Insert an explanation of the [Set] [Save]... line.
	Rename Done to Bury Buffer.

	* wid-edit.el (widget-default-value-set): Preserve point here.
	(widget-choice-action, widget-toggle-action): Not here.
	(widget-choice-action, widget-toggle-action):
	Display a message about [State].
	(widget-field-action): Improve message.

	* simple.el (paren-blinking group): Doc fix.

	* cus-edit.el (custom-tree-group-tag): Capitalize the tag.
	(custom-tree-variable-tag, custom-tree-face-tag): Likewise.
	(customize-browse): Corresponding changes.

	* wid-edit.el (widget-file-complete): New function.
	(file): Use widget-file-complete for :completion.  Delete :action.
	(symbol): Use lisp-complete-symbol for :completion.
	(widget-file-action): Function deleted.
	(widget-field-action): Just move to next field.
	(widget-choice-action, widget-toggle-action): 
	Preserve point usefully if it is within the widget.

	* wid-edit.el (group-visibility): Inherit from visibility.

	* cus-edit.el (custom-add-parent-links): New arg INITIAL-STRING.
	(custom-group-value-create): Pass that arg.
	(custom-buffer-create-internal): Clarify initial documentation.

	* cus-edit.el (custom-group-value-create): Use group-visibility widget.
	(custom-add-parent-links): Don't insert anything if no parents.
	Return non-nil iff do have parents.

	* wid-edit.el (group-visibility): New widget type.
	(widget-group-visibility-create): New function.

	* cus-edit.el (custom-magic-value-create):
	In `links' style, don't indent the member groups.
	(custom-group-value-create): Likewise.

	* wid-edit.el (widget-documentation-link-action):
	Use describe-function or describe-variable in simple cases.

1997-06-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-buffer-indent): New option.
	(custom-magic-value-create): Use it.
	(custom-group-value-create): Ditto.
	(custom-buffer-create-internal): Don't create parent groups here.
	(custom-group-list): New variable.
	(custom-add-parent-links): New function.
	(custom-variable-value-create): Use it.
	(custom-face-value-create): Use it.
	(custom-group-value-create): Use it.
	(custom-buffer-groups-last): Changed default.

	* wid-edit.el (group-visibility): Deleted.
	(widget-group-visibility-create): Ditto.
	(group-link): Deleted.
	(widget-group-link-create): Ditto.
	(widget-group-link-action): Ditto.

	* cus-edit.el (custom-nest-groups): Delete option.
	(custom-buffer-style): Add `links' style instead.
	(custom-group-link): New widget.
	(custom-group-link-action): New function.
	(custom-group-value-create): Use `custom-group-link'.

	* wid-edit.el (widget-before-change): Fixed comment and debug string. 

	* cus-edit.el (custom-mode-customize-menu): Deleted.
	(custom-mode-menu): Define here.
	(custom-mode): Don't add here.
	(custom-format-handler): Deleted.
	(custom): Don't add here.

	* cus-edit.el (custom-browse-sort-predicate): New alias.
	(custom-group-value-create): Use it.
	(:custom-last): Replace :custom-extra-prefix.
	(customize-browse): Use it.
	(custom-group): Ditto.
	(custom-group-value-create): Ditto.

	* cus-edit.el (face): Fixed format.
	(custom-face-value-create): Browse face, not option.

	* cus-edit.el (custom-group-value-create): Rewrote to replace
	entire format string. 
	(custom-variable-value-create): Ditto.
	(custom-face-value-create): Ditto.
	(custom-group): Delete :format.
	(custom-variable): Ditto.
	(custom-face): Delete :format and :format-handler.
	(custom): Add :format.
	(custom-format-handler): Removed unnecessary code.
	(custom-face-format-handler): Deleted.
	(custom-add-see-also): New function.
	(custom-buffer-style): New option.
	(widget-face-value-create): Use it here instead of :format.
	(:custom-prefix, :custom-extra-prefix): New keywords.
	(custom): Initialize them.
	(custom-redraw-magic): Work with no magic button.
	(customize-browse): New command.
	(custom-tree-visibility): New widget.
	(custom-tree-visibility-action): New function.
	(custom-tree-group-tag): New widget.
	(custom-tree-group-tag-action): New function.
	(custom-tree-group-tag): New widget.
	(custom-tree-group-tag-action): New function.
	(custom-tree-variable-tag): New widget.
	(custom-tree-variable-tag-action): New function.
	(custom-tree-face-tag): New widget.
	(custom-tree-face-tag-action): New function.

	* cus-edit.el (custom-buffer-sort-alphabetically): New option.
	(custom-buffer-groups-last): New option.
	(custom-buffer-sort-predicate): Use them.
	(customize-apropos): Use it.
	(custom-group-value-create): Ditto.
	(custom-menu-sort-alphabetically): New option.
	(custom-menu-groups-first): New option.
	(custom-menu-sort-predicate): Use them.
	(custom-menu-create): Use it.
	(custom-buffer-sort-predicate, custom-buffer-order-predicate,
	custom-menu-sort-predicate, custom-menu-order-predicate): Deleted.

	* wid-edit.el (widget-leave-text): Don't delete nil overlays.

	* wid-edit.el (widget-get-indirect): New function.
	(widget-default-create): Use it.
	(widget-button-insert-indirect): Deleted.

	* wid-edit.el (widget-inactive-face): Use dim gray instead of dark
	gray.

1997-06-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-magic-alist) <hidden>: Don't refer to "dots".
	
	* cus-edit.el (customize-menu-create): Return nil if Emacs.
	(custom-mode): Handle custom-mode-customize-menu being nil.
	(custom-mode-customize-menu): Don't initialize if customize-menu-create
	returns nil.

	* wid-edit.el (boolean): Capitalize "toggle".
	(choice): Capitalize "value menu".
	(visibility): Capitalize "hide" and "show".
	(group-visibility): Likewise.
	(widget-documentation-string-value-create): Capitalize "more".

	* cus-edit.el (custom-nest-groups): New variable.
	(custom-group): Don't insert a space before the group name here.
	(customize-group): If buffer exists, use it unchanged.
	(custom-format-handler) <L>: Maybe make a group-link widget
	instead of a group-visibility widget.
	custom-nest-groups controls this.
	<l, i, e>: Indent differently if custom-nest-groups.
	
1997-06-20   Ryszard Kubiak <rysiek@ipipan.gda.pl>

	* ogonek.el: Doc fixes.
	(ogonek-jak, ogonek-how): Examples of customization fixed. 

1997-06-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* wid-edit.el (widget-specify-insert): Bind before-change-functions.
	(widget-insert, widget-setup): Likewise.
	(widget-editable-list-delete-at, widget-default-delete): Likewise.
	(widget-editable-list-insert-before): Likewise.
	(widget-setup): Set up before-change-functions.
	(widget-after-change): Don't apply :notify here.
	(widget-before-change): New function.  Apply :notify here.
	(group-link): New widget type.
	(widget-group-link-action): New function.
	(widget-group-link-create): New function.

	* wid-edit.el (group-visibility): New widget type.

	* cus-edit.el (custom-format-handler) <L>: Use group-visibility.
	<L, i, - cases>: Triple the indentation, use just 2 dashes.

1997-06-21  Kenichi Handa  <handa@etl.go.jp>

	* quail.el (quail-help): Use with-output-to-temp-buffer.
	(quail-translation-help): Likewise.
	(quail-conversion-help): Likewise.

	* fontset.el (x-charset-registries): Name changed for consistency:
	lao.mule -> MuleLao, Mule.Tibetan-X -> MuleTibetan-X.
	(x-complement-fontset-spec): Optimization for latin-iso8859-1.

	* mule-cmds.el: Define mouse-set-font in mule-menu-keymap agian.

1997-06-20  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* tabify.el (untabify): Handle consecutive tabs all at once.
	(tabify-regexp): New var.
	(tabify): Use it.

1997-06-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* wid-edit.el (boolean): Display "(nil)" or "(non-nil)".
	Add extra space before the value.
	(widget-documentation-string-value-create): Use [more] to show rest.
	(widget-visibility-value-create): Don't include `...'.

	* cus-edit.el (customize-group): Ignore case in completion.
	(custom-buffer-create-internal): Put parent groups near the top.

1997-06-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (require-final-newline): Fix custom :type.

1997-06-19  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (widget-leave-text): Don't delete nil overlays.

	* wid-edit.el (widget-inactive-face): Change color.

	* cus-edit.el (custom-reset-saved): Call :custom-reset-saved.
	(custom-reset-standard): Call :custom-reset-standard.

	* cus-edit.el (custom-file): Autoload, and use ~/.xemacs-custom
	for XEmacs.

	* cus-edit.el (custom-buffer-create-internal): Change parent tag.

	* cus-edit.el (custom-buffer-create-internal): Add links to parent
	groups when there is only a single item in the buffer.

	* cus-edit.el (customize-apropos): Extend ALL arg to restrict
	apropos to options, groups and faces.  Doc fix.
	(customize-apropos-options):
	(customize-apropos-faces):
	(customize-apropos-groups): New commands.  Call it.
	(custom-help-menu): Add commands to menu.

	* wid-edit.el (widget-documentation-link-add): Only highlight text
	inside link. 

	* wid-edit.el (widget-specify-field): Place unreadable
 	text-property correctly when `widget-field-add-space' is non-nil.

1997-06-19  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* view.el (view-mode): Add autoload cookie to this variable.
	(View-exit-and-edit): Add autoload cookie.

1997-06-19  Simon Marshall  <simon@gnu.ai.mit.edu>

	* simple.el: Create paren-blinking custom group (as a subgroup of
	paren-matching) and put all blink-matching-paren variables in the
	former (as opposed to the latter) group.

	* paren.el: Customise; paren-showing as a subgroup of paren-matching.
	(show-paren-style): New variable.
	(show-paren-match-face):
	(show-paren-mismatch-face): New faces.
	(show-paren-function): Use them.

	* font-lock.el: Rearrange custom options.
	(global-font-lock-mode): Change defvar to a defcustom, and move after
	global-font-lock-mode defun, so the mode can be enabled via customize.
	(tex-font-lock-keywords): Rewrite.
	
	* fast-lock.el: Rearrange custom options.

	* modula2.el (modula-2-mode): Set font-lock-defaults so that <* and *>
	have comment syntax during fontification.
	(m3-font-lock-keywords-1): Don't fontify <* and *> here.
	(m3-font-lock-keywords-2): Rearrange items and use regexp-opt.

1997-06-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* etags.el (esc-map): Delete M-TAB binding of complete-tag.

	* bindings.el (complete-symbol): New function.
	(complete-tag): Definition deleted.
	(esc-map): Bind M-TAB to compete-symbol.

	* info-look.el: Replaces libc.el.
	(info-complete-symbol): If MODE is nil, use the default value.

	* fill.el (fill-context-prefix): Fix previous change.

	* paren.el: Don't enable the mode just because file is loaded.

	* files.el (backup, find-file): Make `files' their parent.
	(ctl-x-map): Delete the C-x C-q binding for toggle-read-only.

	* cus-edit.el (files): New group `files'.
	(auto-save): Make `files' its parent.

	* mpuz.el (mpuz-congratulate): Don't say "1 errors".

1997-06-18  Carsten Dominik  <dominik@strw.LeidenUniv.nl>

	* reftex.el: Changed all doc strings to comply with conventions.
	(reftex-label-alist-builtin) New environment subfigure*.
	(reftex-toc) Introduced key g for revert-buffer.
	(reftex-extract-bib-entries) Allowed round parens as delimiter.
	(reftex-plug-into-AUCTeX) New variable and function.
	(reftex-make-master-buffer) Fixed bug with relative path names.
	
1997-06-18   Ryszard Kubiak <rysiek@ipipan.gda.pl>

	* ogonek.el: Doc Fix.
	(prefix-code): Change the name to `ogonek-prefix-code'. 

1997-06-18  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* mule-util.el (coding-system-parent): Moved to mule.el.

	* mule.el (coding-system-parent): Moved from mule-util.el.

1997-06-18  Kenichi Handa  <handa@etl.go.jp>

	* startup.el (command-line): Load "leim-list.el".

	* subdirs.el: Add "language" in the argument of
	normal-top-level-add-to-load-path.

	* rmail.el (rmail-enable-decoding-message): Deleted.
	(rmail-revert): Bind enable-multibyte-characters to nil before
	calling rmail-convert-file.
	(rmail-convert-to-babyl-format): If enable-multibyte-characters is
	nil, don't convert code.

	* quail.el (quail-current-data): New variable.
	(quail-use-package): Do not reload a package already loaded.
	(quail-define-package): Update TITLE field of input-method-alist.
	(quail-map-p): TRANSLATION may be a cons.
	(quail-define-rules): Add autoload cookie.
	(quail-defrule): Add autoload cookie.  Handle the case that TRANS
	is a cons.
	(quail-get-translation, quail-lookup-key, quail-translate-key,
	quail-show-translations, quail-completion-list-translations,
	quail-show-kbd-layout): Likewise.
	(quail-hide-guidance-buf): Check if window WIN exists before
	deleting it.
	(quail-directory-name): New variable.
	(quail-update-leim-list-file): New function.

	* mule.el (coding-system-type): Doc-string modified.
	(coding-system-category): New function.
	(make-subsidiary-coding-system): Argument BASE deleted.
	(make-coding-system): Put properties no-initial-designation and
	coding-category to a newly created coding system.
	(define-coding-system-alias): Put property 'parent-coding-system
	to a new alias, property 'alias-coding-systems to a parent.

	* mule-util.el (coding-system-parent): New function.
	(coding-system-lessp): New function.
	(coding-system-list): Sort coding systems by coding-system-lessp.
	An element of returned list is always coing system, never be a
	cons.
	(modify-coding-system-alist): Renamed from
	set-coding-system-alist.
	(prefer-coding-system): New function.
	(compose-chars-component): But fix for handling a composite
	character of no compositon rule.

	* mule-diag.el (list-character-sets): Set major mode of *Help*
	buffer to help-mode.
	(describe-coding-system): If user input null for coding system,
	call describe-current-coding-system.
	(describe-current-coding-system-briefly): Doc-string modified.
	(print-coding-system-briefly): Print parent and alises of coding
	system.
	(describe-current-coding-system): Show more information neatly.
	(list-coding-systems): If called interactively, dont' list up
	coding categories.
	(list-input-methods): New function.
	(mule-diag): Call list-input-methods for listing input methods.

	* mule-cmds.el: Define describe-coding-system instead of
	describe-current-coding-system in help-map and mule-menu-keymap.
	In mule-menu-keymap, enable set-buffer-process-coding-system only
	when the current buffer has been associated with some subprocess.
	(set-language-info): Doc-string modified because `input-method' is
	not a valid KEY argument now.
	(leim-list-file-name, leim-list-header, leim-list-entry-regexp):
	New variables.
	(update-leim-list-file, update-all-leim-list-files): New
	functions.
	(current-input-method): Doc-string modified because the value is
	now input method name.
	(defualt-input-method, previous-input-method): Likewise.
	(current-input-method-title): Doc-string modified because now each
	input method doesn't have to set this variable.
	(input-method-alist): New variable.
	(register-input-method): Register input method in
	input-method-alist.
	(read-language-and-input-method-name): Deleted.
	(read-input-method-name): New function.
	(activate-input-method, select-input-method, toggle-input-method):
	Modified for the above change.
	(read-multilingual-string): Likewise.
	(describe-current-input-method): Renamed from
	describe-input-method.
	(describe-input-method): New function.
	(describe-language-environment): Don't put a vacant line at the
	top of *Help* buffer.  Show a title string of each input method.

	* mule-conf.el: Change mnemonic letters for iso-2022-7bit-ss2 and
	iso-2022-7bit-lock.  Set coding-category-iso-8-2 to
	'japanese-iso-8bit.

	* bindings.el (mode-line-mule-info): Change style for showing
	an activated input method.

	* characters.el: Set syntaxes of Ethiopic characters.

	* gnus/gnus-mule.el: Adjusted for the coding system name change.
	Set cyrillic-koi8 for newsgroup "relcom".

	* language/china-util.el, language/cyril-util.el,
	language/devan-util.el, language/ethio-util.el,
	language/japan-util.el, language/lao-util.el,
	language/thai-util.el, language/tibet-util.el,
	language/viet-util.el: Provide XXX-util instead of
	language/XXX-util.  Delete local variable declartion.

	* language/ethio-util.el (ethio-fidel-to-tex-map): Correct several
	elements.

	* language/cyril-util.el (setup-cyrillic-iso-environment,
	setup-cyrillic-koi8-environment,
	setup-cyrillic-alternativnyj-environment): Deleted.
	(setup-cyrillic-environment): New function.

	* language/cyrillic.el: Don't make the keymap
	describe-cyrillic-environment-map and
	setup-cyrillic-environment-map.  Names of coding systems changed.
	Give them more informative doc-string. Make iso-8859-5 alias of
	cyrillic-iso-8bit, alternativnyj alias of
	cyrillic-alternativnyj.  For Cyrillic, provide single langauge
	environment "Cyrillic".

	* language: Delete the code of calling register-input-method form
	all files under this directory.

1997-06-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* startup.el: Customize.
	(command-line): Translate iso-8859-9 into latin-5.
	(command-line-1): Recognize setting inhibit-startup-echo-area-message
	with customization buffer.

1997-06-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* scheme.el (scheme): Add defgroup.
	Put defcustom's into this group.

	* finder.el (finder-list-keywords): Create *Finder* buffer if nec.

	* fill.el (fill-context-prefix): Fix criteria for first line,
	and for second line; always fetch prefixes from both lines.

	* buff-menu.el (Buffer-menu-mode): Doc fix.
	(Buffer-menu-bury): Move the line to the end.

1997-06-17  Dave Love  <d.love@dl.ac.uk>

	* scheme.el (scheme-mode-commands): Remove keybinding of \t to old
 	`scheme-indent-line'.  Bind \e\C-q to `indent-sexp', not
 	`scheme-indent-sexp'.
	(scheme-mit-dialect): Use defcustom.
	(dsssl-sgml-declaration):  Likewise.  Fix doc string.

1997-06-17  Inge Frick  <inge@nada.kth.se>

	* arc-mode.el (archive-extract): Use second argument of
 	view-buffer instead of setting view-exit-action.

	* tar-mode.el (tar-extract): Use second argument of
 	view-buffer instead of setting view-exit-action.

	* files.el (view-read-only): New option variable.  If
 	non-nil then buffers visiting files read-only, do it in view mode.
	(find-file-read-only, find-file-read-only-other-window)
	(find-file-read-only-other-frame): Call toggle-read-only
	instead of setting buffer-read-only explicitly.
	(toggle-read-only, after-find-file): Changed to be aware
 	of view-read-only.
	(save-some-buffers): Use second argument of view-buffer
	instead of setting view-exit-action.

	* window.el (split-window-save-restore-data): New function that
 	for view mode buffers saves information in view-return-to-alist.
 	(split-window-vertically, split-window-horizontally):
	Call split-window-save-restore-data.
	
1997-06-16  Dan Nicolaescu  <done@ece.arizona.edu>

	* icon.el (icon-indent-line): A comment ends at the end of the
 	line, delete call to inexistent function.

	* icon.el (icon-font-lock-keywords-1): 	Improved regexp.
	(icon-font-lock-keywords-2): Likewise.

1997-06-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* buff-menu.el (Buffer-menu-bury): New command.
	(Buffer-menu-mode-map): Put Buffer-menu-bury on `b'.

	* sendmail.el (mail-mode): mail-header-separator affects paragraphs
	only when there is nothing after it on the line.
	(mail-mode-auto-fill, mail-mode-fill-paragraph):
	Look for mail-header-separator only on a line by itself.

	* compile.el (grep-program): Comment out the use of zgrep.

	* help.el (help-map): Make C-i run info-lookup-symbol.

1997-06-16  Simon Marshall  <simon@gnu.ai.mit.edu>

	* icon.el (icon-imenu-generic-expression): Improved regexp.
	(icon-font-lock-keywords-1): Improved regexps.
	(icon-font-lock-keywords-2): Likewise.
	(icon-mode): Don't set font-lock-comment-start-regexp via
	font-lock-defaults; it is not needed anymore.

1996-06-16  Dan Nicolaescu  <done@ece.arizona.edu>

	* icon.el (icon-imenu-generic-expression): Improved regexp.
	(icon-mode): Don't use pushnew.

1997-06-16  Michelangelo Grigni  <mic@mathcs.emory.edu>

	* ffap.el (ffap-soft-value): Make this a function again; the macro
	version does intern-soft too early.  Deleted XEmacs-specific code.

	(ffap-string-at-point-mode-alist): added "=" and
	"&" to the url syntax, as suggested by SJE.
	(ffap-read-file-or-url): fixed the HIST argument to
	completing-read (only visible in XEmacs?), as reported by
	Christoph Wedler <wedler@fmi.uni-passau.de>.
	(ffap-kpathsea-expand-path) New func, replaces ffap-add-subdirs,
	a first attempt at kpathsea emulation.  Also convert "" to "." in
	path lists, for XEmacs. Suggestions from SJE.
	Added mouse-track support (but no binding), as
	suggested by MDB. Moved Emacs mouse bindings from
	"down-mouse" events to ordinary mouse events.
	(ffap-alist): added ffap-fortran-mode, as requested by MDB.
	Rewrote and merged XEmacs support, eliminating file
	ffap-xe.el.  Modified ffap-other-frame to work in dedicated
	frames, fixing a bug reported by JENS.
	(ffap-menu-rescan): avoid modifying the buffer.
	Two bugs reported by Christoph Wedler <wedler@fmi.uni-passau.de>:
	(ffap-fixup-url): avoid autoloading through url-normalize-url.
	(ffap-read-file-or-url): for XEmacs, give extra HACK-HOMEDIR arg
	to `abbreviate-file-name'.
	(ffap-file-at-point): suppress errors from `ffap-alist'.
	(ffap-url-at-point): modified regexp to accept
	mail hostnames ending with a digit.  Fixes bug report of SJE.
	(ffap-url-at-point): use higher level function
	(w3-view-this-url t) suggested by wmperry, instead of
	w3-zone-at/w3-zone-data or widget-at/widget-get.
	(ffap-url-at-point): modified to work with
	w3-version "WWW 2.3.64 1996/06/02 06:20:23" alpha, which
	uses the 'widget package rather than the old w3-zone-at.
	Bug was reported by JENS.
	Adopted comments and doc strings to Emacs coding
	conventions.  Reorganized.  Retired v18 support.
	(ffap-bindings): Offers a default installation.
	(ffap-string-at-point): Modified arguments.
	(ffap-gnus-hook): Updated for Gnus 5.
	(ffap-tex-init): Delayed initialization of `ffap-tex-path'.
	(ffap-dired): New entry in `ffap-alist'.
	(ffap-menu-rescan): May fontify the choices in buffer.
	(ffap-read-file-or-url): `PC-completion-as-file-name-predicate'
	used if available, to work with complete.el.

1997-06-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* view.el: Don't globally add to change-major-mode-hook.
	(view-mode-enable): Add to change-major-mode-hook locally here.
	(view-mode-disable): Remove from it locally here.

1997-06-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* vc.el (vc-steal-lock): Use yes-or-no-p for confirmation.

	* ogonek.el: New file.

	* texnfo-upd.el: Many doc fixes.
	(texinfo-all-menus-update): Check for @detailmenu.
	(texinfo-master-menu): Likewise.
	(texinfo-multiple-files-update): Likewise.
	(texinfo-insert-master-menu-list): Put in @detailmenu if appropriate.

1997-06-15  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-face.el (custom-face-attributes): Use booleans.

	* cus-edit.el (custom-variable-menu): Rearranged lisp support.
	(custom-face-menu): Ditto.

	* wid-edit.el (boolean): Add explicit toggle button.
	(choice): Add explicit value menu button.
	* cus-face.el (custom-face-attributes): Use booleans.

	* cus-edit.el (custom-format-handler): Handle %i escape.
	(custom-face): Use it.
	(custom-magic-value-create): Add spaces for groups.
	(custom-format-handler): Add spaces for groups.

	* widget.el (:documentation-indent): New keyword.
	* wid-edit.el (widget-default-format-handler): Obey it.
	(widget-documentation-link-add): Add indentation.
	(widget-documentation-string-value-create): Ditto.

	* cus-edit.el (widget-glyph-insert-glyph): Make the invisible
	extent open ended.

	* cus-edit.el (custom-format-handler): Added :echo-help to
	visibility widget.
	(custom-variable-value-create): Ditto, also for tag.
	* wid-edit.el (widget-documentation-string-value-create): Ditto.
	(widget-documentation-link-help-echo): New function.
	(documentation-link): Use it.  Make untabable.

	* wid-edit.el (widget-apply-action): Don't bind
	`after-change-functions' here.

	* cus-edit.el (custom-toggle-hide): Call `widget-setup'.

	* wid-edit.el (widget-setup): Cleanup.

	* wid-edit.el (widget-tabable-at): New function.
	(widget-move): Use it.
	* wid-edit.el (widget-after-change): Reimplemented :secret.

	* wid-edit.el (widget-field-add-space): New option.
	(widget-specify-field): Use it.
	(widget-field-end): Ditto.

	* wid-edit.el (widget-leave-text): New function.
	(widget-convert-text): Use it.
	(documentation-link): New widget.
	(widget-documentation-link-action): New function.
	(widget-documentation-links): New option.
	(widget-documentation-link-regexp): New option.
	(widget-documentation-link-p): New option.
	(widget-documentation-link-type): New option.
	(widget-documentation-link-add): New function.
	(widget-documentation-string-value-create): Use it.

1997-06-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* sendmail.el (mail-mode): Let all-white lines separate paragraphs.

	* text-mode.el (text-mode): Let all-white lines separate paragraphs.

	* generic.el: New file.

1997-06-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* icomplete.el: Don't call icomplete-mode; let the user do that.
	(icomplete-show-key-bindings): Doc fix.
	(icomplete-mode): Doc fix.
	(icomplete-get-keys): Make it actually work.
	(icomplete-mode): Doc fix.
	(icomplete-completions): Doc fix.

	* view.el: Many doc fixes.
	(view-mode-enable): New function, split from view-mode-enter.
	(view-mode-enter): Use view-mode-enable.
	(view-mode-disable): New function, split from view-mode-exit.
	(view-mode-exit): Use view-mode-disable.
	(view-mode): Use view-mode-enable and view-mode-disable;
	don't do all of what view-mode-enter and view-mode-exit do.
	(change-major-mode-hook): Use view-mode-disable, not view-mode-exit.

1997-06-14  Inge Frick  <inge@nada.kth.se>

	* view.el: Make view mode more similar to `less'.
	Changed documentation for most commands.
	(view-scroll-auto-exit): New variable, replaces view-mode-auto-exit.
	(view-mode-auto-exit): Variable deleted.
 	(view-mode): Doesn't only toggle `view-mode', it also calls
 	view-mode-enter or view-mode-exit.
	(view-buffer, view-buffer-other-window): New argument exit-action.
	(view-file, view-file-other-window, view-buffer-other-window)
 	(view-buffer, view-mode-enter): Changed method used to restore
 	windows when leaving view mode.
	(view-mode-exit): New function.
	(view-return-to-alist): New variable.	
 	(view-return-here, view-exit-position): Variables deleted.
 	(view-remove-frame-by-deleting, view-exit-all-windows-at-exit):
 	New option variables.
 	(view-page-size, view-half-page-size): New variables.
	(view-scroll-size): Var deleted; replaced by the previous two.
	(view-mode-map): Make the bindings inside defvar.
	Added new commands and new key bindings.
	Added view-mode-exit to `change-major-mode-hook' to always leave
	view mode when changing major mode.
 	(view-file-other-frame,	view-buffer-other-frame): New commands.
 	(View-leave, View-kill-and-leave, View-exit, View-exit-and-edit)
 	(View-quit, View-quit-all): new commands for leaving view mode.
	(view-exit): Function deleted.
	(View-goto-percent, View-scroll-to-buffer-end): New commands.
	(view-try-extend-at-buffer-end): New option variable.
		
	(View-scroll-page-forward, View-scroll-page-backward)
	(View-scroll-page-forward-set-page-size)
	(View-scroll-page-backward-set-page-size, View-scroll-line-forward)
	(View-scroll-line-backward, View-scroll-half-page-forward)
	(View-scroll-half-page-backward)
	(View-revert-buffer-scroll-page-forward): New commands.

	(View-scroll-lines-forward, View-scroll-lines-backward)
	(View-scroll-lines-forward-set-scroll-size)
 	(View-scroll-one-more-line): Commands deleted.
	
	(view-scroll-lines, view-end-message, view-page-size-default)
 	(view-set-half-page-size-default, view-really-at-end)
	(view-recenter): New functions.
 	(view-scroll-size): Function deleted.

	(View-search-regexp-forward, View-search-regexp-backward)
	(View-search-last-regexp-forward, View-search-last-regexp-backward)
	(view-search): ! and @ are special at beginning of regexp.
	(view-search-no-match-lines): New function.

1997-06-14  Per Abrahamsen  <abraham@dina.kvl.dk>

        * wid-edit.el: Add widget `coding-system' for mule.

	* wid-edit.el (widget-convert-text): New function.
	(widget-convert-button): Ditto.

	* wid-edit.el (widget-field-buffer): Don't assume an overlay
	exists. 
	(widget-field-start): Ditto.
	(widget-field-end): Ditto.

	* cus-face.el (custom-face-attributes-get): Protect against
	missing w3 font functions.

	* cus-edit.el (custom-magic-faces): New group.
	Added magic faces.
	
	* cus-edit.el (custom-buffer): New group.
	(custom-menu): New group
	Updated options.
	* wid-edit.el (widget-faces): New group.
	Updated all faces.

	* wid-edit.el (widget-map-buttons): New function.

	* cus-edit.el (custom-buffer-sort-predicate):
	(custom-menu-sort-predicate): Default to ignore.  Rewrite :type form.
	(custom-buffer-order-predicate):
	(custom-menu-order-predicate): New variables.
	(custom-buffer-sort-alphabetically):
	(custom-menu-sort-alphabetically): Functions deleted.
	(custom-sort-items-alphabetically): New function.  Like deleted
	functions, except that A and B must be the same custom type.
	(custom-sort-groups-first):
	(custom-sort-groups-last): New functions.  Like deleted functions,
	except that only A and B custom types are compared. 
	(custom-group-value-create):
	(custom-menu-create): Also sort members using custom-*-order-predicate.
	But sort the copy of the stored sequence to prevent changing the stored
	value, and don't store the sorted copy.

	* wid-edit.el (widget-specify-inactive): Don't set `mouse-face'.
	(widget-setup): Don't use markers.

	* wid-edit.el (widget-default-format-handler): Cleanup.
	(widget-documentation-string-value-create): Also use documentation
 	properties on single line documentation strings.

	* wid-browse.el (widget-minor-mode): Fixed mistake in
	widget-minor-mode - it had semantics of non-interactive calling
	reveresed.

1997-06-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* language/european.el (Latin-2):
	List Croatian as alternative name for Serbo-Croatian.

1997-06-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* add-log.el (add-log-time-format): New variable.
	(add-log-iso8601-time-string): New function.
	(add-change-log-entry): Use add-log-time-format.
	(add-log-iso8601-time-zone): Renamed from iso8601-time-zone.

1997-06-13  Dan Nicolaescu  <done@ece.arizona.edu>

	* isearch.el (isearch-hide-immediately): New variable.
	(isearch-close-unecessary-overlays): New function.
	(isearch-range-invisible): Use them.

	* isearch.el (search-invisible): Changed the semantics,
	the default value and updated the doc string. 
	(isearch-opened-overlays): New variable.
	(isearch-mode): Initialize it.
	(isearch-switch-frame-handler): Call isearch-clean-overlays.
	(isearch-exit, isearch-cancel, isearch-abort): Likewise. 
	(isearch-other-meta-char, isearch-search):
	Support the new meaning for search-invisible.
	(isearch-open-necessary-overlays, isearch-open-overlay-temporary)
	(isearch-clean-overlays): New functions.
	(isearch-range-invisible): If we are inside overlays that can be
	opened, open them, add them to isearch-opened-overlays and say
	that the range is visible.

	* hideshow.el (hideshow): Added a :prefix.
	(hs-isearch-open): New variable.
	(hs-flag-region): Use that variable.
	Changed the semantics of the FLAG parameter and updated the docs.
	(hs-isearch-open-invisible): New function to be set as a
	`isearch-pent-invisible' property for hidden overlays, so that
	isearch can use it.
	(hs-hide-block-at-point): Tell if we are hiding a comment or a block. 

1997-06-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* latin-5.el: Latin-5 is ISO-8859-9, not ISO-8859-5.

	* fill.el (fill-context-prefix): Don't crash if RESULT is nil
	when AT-SECOND is t.

	* bytecomp.el (byte-save-current-buffer): Change to code 114 (0162).

	* sendmail.el (mail-mode): Change paragraph-start and
	paragraph-separate not to match leading spaces.

	* vc.el (vc-annotate-mode-variables): Init vc-annotate-mode-menu
	and put it into vc-annotate-mode-map.
	(vc-annotate-add-menu): Don't init vc-annotate-mode-menu,
	just add the bindings to it.  Display progress messages.
	(vc-annotate-mode-menu): New defvar.
	(vc-annotate-ratio): Move defvar, add initial value.
	(vc-annotate-display-default): Display progress messages.
	(vc-annotate-display): Use vc-annotate-color-map.
	
1997-06-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* finder.el (finder-mode): Don't switch buffers or change text here.
	(finder-by-keyword): Don't call finder-mode here.
	(finder-list-matches): Call finder-mode here.
	Switch to a buffer called *Finder Category*.
	(finder-list-keywords): Call finder-mode here.
	Switch to the buffer *Finder*.
	If the buffer already exists, don't reinitialize it or move point.

	* bindings.el (esc-map): Delete spurious wrong binding for M-TAB.

	* forms.el (forms-mode, forms--process-format-list)
	(forms--make-parser-elt, forms-search-forward, forms-search-backward): 
	Fix error messages.
	
	* text-mode.el (paragraph-indent-text-mode):
	Renamed from spaced-text-mode.
	(text-mode-map): Bind TAB to indent-relative.
	(indented-text-mode-map): Variable deleted.
	(indented-text-mode): Now an alias for text-mode.

1997-06-11  Johan Vromans  <jvromans@squirrel.nl>

	* forms.el (forms-save-buffer):
	Do not run the `write-file-filter' hooks
	explicitly since they are run via `local-write-file-hooks'.
	(forms-search-forward, forms-search-backward): 
	Wrap the search.  Use `error' to signal failure.

1997-06-11  Stefan Schoef  <schoef@OFFIS.Uni-Oldenburg.DE>

	* bibtex.el (bibtex-delete-whitespace, bibtex-current-line)
	(bibtex-assoc-of-regexp, bibtex-skip-to-valid-entry)
	(bibtex-map-entries):
	Renamed from delete-whitespace, current-line, assoc-of-regexp,
	skip-to-valid-bibtex-entry, and map-bibtex-entries, respectively.

1997-06-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* fill.el (fill-context-prefix): If we get a prefix from the
	second line of the paragraph, verify the first line has it too.

	* reftex.el (tex-main-file, outline-minor-mode): Add defvars.

1997-06-10  Carsten Dominik  <dominik@strw.LeidenUniv.nl>

	* reftex.el: Updated documentation at several points in the file.
	(reftex-label-alist-builtin): New default environment subfigure.
	(reftex-find-duplicate-labels): Temporary buffer is now 
	"*Duplicate Labels*" instead of "*Help*".
	(reftex-bibtex-selection-callback): Renamed variable found-list.
	(reftex-found-list): Added defvar for this variable.
	(TeX-master): Added defvar for this variable.
	(reftex-reset-mode): Kill temporary buffers associated with RefTeX.
	
1997-06-10  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* mule-cmds.el (view-hello-file): Adjusted for the changes of
	coding system names.

1997-06-10  Terrence Brannon  <brannon@sand.usc.edu>

	* landmark.el (lm-display-statistics): Display stats in mode line.
	(lm-number-of-trials, lm-sum-of-moves): New vars.
	Various doc fixes.

1997-06-10  Michael Staats  <michael@thp.Uni-Duisburg.DE>

	* pc-select.el (pc-select-selection-keys-only): New variable.
	(pc-select-meta-moves-sexps): New variable.
	(exchange-point-and-mark-nomark): New function.
	(forward-sexp-mark, forward-sexp-nomark): New functions.
	(backward-sexp-mark, backward-sexp-nomark): New functions.
	(pc-selection-mode): Doc fix.
	Bind exchange-point-and-mark-nomark, C-escape.
	Honor pc-select-meta-moves-sexps, pc-select-selection-keys-only.
	Unset highlight-nonselected-windows.

1997-06-10  Johan Vromans  <jvromans@squirrel.nl>

	* forms.el: Use `error' where possible to signal errors.
	Remove (beep)s for warnings.
	Change comment about the iif hook to reflect the actual reason.
	Correct error in field numbering.

1997-06-10  Flemming Hoejstrup Hansen  <hovpfl@unidhp.uni-c.dk>

	* forms.el (forms-mode): Make `forms--elements' local before calling
	`forms--process-format-list'.

1997-06-10  Olivier Laurens  <laurens@tcc.bc.ca>

	* forms.el (forms-save-buffer): `forms-write-file-filter' and
	`forms-read-file-filter' were not called correctly.

1997-06-10  Torbjorn Einarsson  <T.Einarsson@clab.ericsson.se>

	* f90.el (f90-looking-at-where-or-forall): Recognize where/forall
	only if it's a block, not a one-line statement.

1997-06-10  Stefan Schoef  <schoef@OFFIS.Uni-Oldenburg.DE>

	* bibtex.el (bibtex-mode-map): Changed the binding of the C-TAB
	key, such that XEmacs will understand it, too.

	* bibtex.el (bibtex-format-entry, bibtex-end-of-entry): Give specific
	error message if not on valid BibTeX entry.

	* bibtex.el (bibtex-field-string-quoted): Small bug fix.  Allow
	backslash followed by newline.

	* bibtex.el (bibtex-reposition-window, bibtex-mark-entry): Two new
	functions, bound to M-C-l and M-C-h, respectively.

	* bibtex.el
	(bibtex-reformat-previous-options, bibtex-reformat-previous-labels):
	New internal variables used by bibtex-reformat.

	* bibtex.el (bibtex-clean-entry-hook): New hook to be called after
	entry has been cleaned.
	(bibtex-clean-entry): Run the hook bibtex-clean-entry-hook.

	* bibtex.el (bibtex-entry-field-alist): Small bug fix.
	(bibtex-autokey-title-terminators): Made -- a terminator instead
	of ---.
	(bibtex-font-lock-keywords): Don't treat ALT prefixed entries as
	comments.
	(bibtex-entry): Fixed parameter list.  This function is not
	intended to be called with required and optional fields as
	optional arguments anymore.

	* bibtex.el (bibtex-generate-autokey): Now split into various
	small functions.
	(bibtex-autokey-names-stretch, bibtex-autokey-additional-names):
	New variables used by bibtex-generate-autokey.
	(bibtex-autokey-get-namefield, bibtex-autokey-get-names)
	(bibtex-autokey-demangle-name, bibtex-autokey-get-namelist)
	(bibtex-autokey-get-yearfield, bibtex-autokey-get-titlestring)
	(bibtex-autokey-get-titles, bibtex-autokey-get-titlelist):
	New helper functions for bibtex-generate-autokey.

	* bibtex.el (bibtex-submit-bug-report): Report all variables.

	* bibtex.el (bibtex-contline-indentation): New user option.
	(bibtex-entry-offset): Renamed from bibtex-entry-indentation.

	* bibtex.el (bibtex-entry-field-alist): Used different order for
 	some fields (as documented in btxdoc.tex).  Changed one of the
 	comment strings.

	* bibtex.el (bibtex-mode-hook, bibtex-add-entry-hook): Add var doc.
	(bibtex-autokey-before-presentation-hook): New variable to be
	called before autokey presentation.
	(bibtex-generate-autokey):
	Call bibtex-autokey-before-presentation-hook.  Doc fix.

	* bibtex.el (bibtex-reference-key): Reincluded parentheses.
	Parentheses should be disallowed only in field constants.

	* bibtex.el (bibtex-autokey-transcriptions): Fixed bug (two
	entries for `\o' while `\oe' entry was missing).

	* bibtex.el (bibtex-entry-indentation): New variable to determine
	the indentation of all entries.
	(bibtex-move-outside-of-entry): Use `skip-chars-forward' instead
	of `re-search-forward'.
	(bibtex-beginning-of-first-entry, bibtex-beginning-of-last-entry):
	Renamed from beginning-of-first-bibtex-entry and
	beginning-of-last-bibtex-entry.  Go to beginning of line, return point.
	(bibtex-do-auto-fill, bibtex-make-field, bibtex-entry)
	(bibtex-String, bibtex-Preamble): Respect `bibtex-entry-indentation'.
	(bibtex-beginning-of-entry, bibtex-end-of-entry): Make it work
	with indented entries.
	(bibtex-count-entries, bibtex-sort-buffer, bibtex-validate,
	bibtex-kill-entry, bibtex-reformat): Use return value from
	bibtex-beginning-of-first-entry.
	(bibtex-clean-entry): Use `bibtex-reference-maybe-empty-head'
	instead of a fixed string.

	* bibtex.el (bibtex-beginning-of-entry, bibtex-end-of-entry): Now
	return point if called from a program.
	(bibtex-enclosing-field, bibtex-format-entry,
	bibtex-generate-autokey, bibtex-parse-keys, bibtex-mode,
	bibtex-ispell-entry, bibtex-narrow-to-entry, bibtex-sort-buffer,
	bibtex-find-entry-location, bibtex-validate, bibtex-clean-entry,
	bibtex-fill-entry): Use new return values of these functions.
	(bibtex-ispell-abstract): Bug fix (inherently by the change to
	bibtex-end-of-entry).

	* bibtex.el (bibtex-field-history): New variable for history
	buffer of field name reading.
	(bibtex-make-field): Use completion.  Object to completion are all
	standard fields defined for the current entry.  Bound to `C-c C-f'.
	(bibtex-mode): Set `comment-start' and `comment-start-skip' to
	"@Comment ", `comment-column' to 0.

	* bibtex.el (bibtex-autokey-transcriptions): New variable.
	(bibtex-autokey-name-change-strings)
	(bibtex-autokey-titleword-change-strings):
	Use bibtex-autokey-transcriptions as default value.

	* bibtex.el (bibtex-find-entry-location): Handle empty buffer.

	* bibtex.el (bibtex-entry-delimiters): New variable to determine
 	if entries shall be delimited by braces or parentheses.
	(bibtex-entry-left-delimiter, bibtex-entry-right-delimiter): New
	helper functions.
	(bibtex-entry, bibtex-String, bibtex-Preamble): Respect
	`bibtex-entry-delimiters'.
	(bibtex-entry-format): Doc fix.
	(bibtex-reference-key, bibtex-field-const): Removed parentheses
 	from allowed characters.
	(bibtex-end-of-entry): Better handling of incorrect preambles.

	* bibtex.el (bibtex-validate): Small change to avoid reparsing of
	errors, if you enter `compile-goto-error' in compilation buffer.

	* bibtex.el (bibtex-progress-message): New function to show
	progress of some long-lasting functions in BibTeX mode by
	indicating percentage of done work.
	(bibtex-progress-lastperc, bibtex-progress-lastmes)
	(bibtex-progress-interval):
	New internal variables for `bibtex-progress-message'.
	(bibtex-parse-keys, bibtex-reformat, bibtex-validate): Use new
	function `bibtex-progress-message'.
	(current-line): New helper function to calculate current
	linenumber.  Something like this should really be defined somewhere
	else in Emacs. 
	(bibtex-validate): Changed to show all errors in buffer in a
	`compilation mode' buffer.  If there are syntax errors, it aborts
	after the syntax check, since higher-level check functions rely on
	the syntactical correctness of buffer.  If called from another lisp
	function (as `bibtex-convert-alien') the return value shows
	whether validating has been successful.  Fixed bug which made
	checking for absent required fields work incorrectly.
	(bibtex-parse-keys-timeout): Set to a value reasonable higher
	(twice as high) than `lazy-lock-stealth-time'.
	(bibtex-member-of-regexp, assoc-of-regexp): Small cosmetic changes.

	* bibtex.el (bibtex-buffer-last-parsed-tick): Renamed from
 	bibtex-buffer-last-parsed-for-keys-tick and made it really
 	buffer-local (bug fix).
	(bibtex-parse-keys): Make it use bibtex-buffer-last-parsed-tick.
	(bibtex-parse-buffers-stealthily): New function which parses all
	BibTeX buffers if emacs has been idle an efficient amount of time.
	(bibtex-parse-idle-timer): New variable which stores whether idle
 	timer for parsing already is installed.
	(bibtex-parse-keys): Make it callable verbosely.  Returns now nil
	if it has been aborted.
	(bibtex-mode): Run the new function bibtex-parse-buffers-stealthily.

	* bibtex.el (bibtex-generate-autokey): Changed the name part
 	generation (bugfix).  This function handles now correctly all three
 	forms of BibTeX names, "First von Last", "von Last, First", "von
 	Last, Jr, First".  In every case the "Last" part is correctly
 	extracted.  If the "Last" part consists of more than one token only
 	the first is used.  Name fields spread over more than one line are
 	no problem anymore.

	* bibtex.el (bibtex-entry-format): Changed default value to
 	exclude 'page-dashes.  Modified documentation.
	(bibtex-autokey-name-change-strings)
 	(bibtex-autokey-titleword-abbrevs)
 	(bibtex-autokey-titleword-change-strings, bibtex-entry)
 	(bibtex-validate): Doc fixes.
	(bibtex-mode-map): Bound `C-c $' to bibtex-ispell-abstract.
	(bibtex-generate-autokey): Changed documentation.  Small
 	modification in calculating title field.
	(bibtex-mode): Included bibtex-ispell-entry into the list of
 	`interesting' functions.
	(bibtex-kill-field): Bug fix (killing of first field in entry
	yielded error).

	* bibtex.el (bibtex-string-file-path): New variable which defines
	the path to search for bibtex-string-files.  It defaults to
	contents of environment variable BIBINPUTS.
	(bibtex-mode): Use this variable.

	* bibtex.el (bibtex-next-field, bibtex-find-text): Will now work
	with string entries as well.

	* bibtex.el (bibtex-mode-map): bibtex-complete-key wasn't bound
	correctly.
	(bibtex-complete): Fixed bug (used string entries defined in
	buffer as object to completion).

	* bibtex.el (Menu): Use easymenu.  More menu items for
	`BibTeX-Edit' menu.  Use nested menus.

	* bibtex.el (bibtex-field-kill-ring-max)
	(bibtex-entry-kill-ring-max): Two new variables substituting
	bibtex-kill-ring-max.
	(bibtex-field-kill-ring, bibtex-entry-kill-ring): Two new
	variables substituting bibtex-kill-ring.
	(bibtex-field-kill-ring-yank-pointer)
	(bibtex-entry-kill-ring-yank-pointer): Two new variables
	substituting bibtex-kill-ring-yank-pointer.
	(bibtex-last-kill-command): New variable keeping the type of the
	last kill command.
	(bibtex-insert-current-kill): Clean distinction between the two
	BibTeX kill rings.
	(bibtex-kill-field): Use new variable bibtex-field-kill-ring.
	(bibtex-kill-entry): Use new variable bibtex-entry-kill-ring.

	* bibtex.el (bibtex-kill-ring, bibtex-kill-ring-yank-pointer): New
 	internal variables like kill-ring and kill-ring-yank-pointer, but
 	bibtex-kill-ring holds fields or complete reference entries
 	instead of raw strings.
	(bibtex-kill-ring-max): New user option similar to kill-ring-max.
	(bibtex-kill-field): Renamed from bibtex-delete-field again.  It
	now supports the new variable bibtex-kill-ring.
	(bibtex-copy-field-as-kill, bibtex-kill-entry)
	(bibtex-copy-entry-as-kill, bibtex-yank, bibtex-yank-pop): New
	interactive functions, which work on the bibtex-kill-ring
	variable.
	(bibtex-insert-current-kill): New helper function to insert
	contents of bibtex-kill-ring in an appropriate way.
	(bibtex-make-field): New optional argument to tell the function if
	it was called by bibtex-yank.  It operates slightly different then.
	(bibtex-find-text): New optional argument to tell the function if
	it was called by bibtex-make-field.  It moves in this case to the
	end of the key if it was called on the reference head line.  If it
	is called interactively on the head line, it works in an
	appropriate manner, too.
	(bibtex-enclosing-field): New optional argument to tell
 	bibtex-enclosing-field not to print an error message if enclosing
 	field isn't found, but to return nil in this case (t is returned
 	otherwise).  This is used by bibtex-find-text such that no error
 	message is given if bibtex-find-text is called interactively in
 	the key line of an entry.

	* bibtex.el (bibtex-autokey-year-use-crossref-entry): New variable
	to determine if crossreferenced entry should be used for autokey
	generation, if year field of current entry is absent.
	(bibtex-generate-autokey): Use this new variable.

	* bibtex.el (bibtex-include-OPTannote): Deleted (is set in
	bibtex-user-optional-fields).
	(bibtex-entry, bibtex-print-help-message): Removed support for
	bibtex-include-OPTannote.

	* bibtex.el (bibtex-entry-format): New constant
	`inherit-booktitle' allowed.

	* bibtex.el (bibtex-mode): Set value for
 	font-lock-mark-block-function.

	* bibtex.el (bibtex-font-lock-keywords): Changed to distinguish
	optional from ordinary fields.
	(bibtex-format-entry, bibtex-print-help-message)
	(bibtex-remove-OPT-or-ALT, bibtex-pop): Used simpler regexps.

	* bibtex.el (bibtex-delete-field): Changed from
	bibtex-delete-optional-or-alternative-field.  Deletes now mandatory
	fields as well.
	(bibtex-mode): Changed documentation.

	* bibtex.el (bibtex-entry-type-history, bibtex-key-history): New
	variables to use own histories in BibTeX buffers.
	(bibtex-entry, bibtex-clean-entry, bibtex-String): Use these new
	variables.

	* bibtex.el (bibtex-entry, bibtex-make-field): A function can now
	be used to generate a fields init string.
	(bibtex-include-OPTkey, bibtex-include-OPTannote)
	(bibtex-entry-field-alist): Changed documentation accordingly.

	* bibtex.el (bibtex-mode): bibtex-parse-keys on start of mode is
 	now abortable, too.
	(bibtex-entry, bibtex-complete-key, bibtex-String): If bibtex-keys
 	isn't set correctly due to abortion of bibtex-parse-keys, this
 	function is called now non-abortable.

	* bibtex.el (bibtex-entry-field-alist): Small change in comments.

	* bibtex.el (bibtex-find-entry-location): Bug fix: Insertion into
	completely empty buffer didn't work.

	* bibtex.el (bibtex-user-optional-fields): Renamed from
	bibtex-mode-user-optional-fields.
	(bibtex-submit-bug-report, bibtex-entry, bibtex-print-help-message):
	Use bibtex-user-optional-fields.

	* bibtex.el (bibtex-remove-delimiters): Bug fix: Only remove
	delimiting braces and not those inside fields.

	* bibtex.el (skip-to-valid-bibtex-entry, bibtex-parse-keys)
	(bibtex-end-of-entry, bibtex-validate, bibtex-reformat): Calculate
	complex regexps outside of loops.
	(bibtex-mode): Changed documentation on how to convert third party
	buffers.

	* bibtex.el (bibtex-convert-alien): New function to convert a
	buffer not created by BibTeX mode to a format, whichs enables all
	features of BibTeX mode.
	(bibtex-mode): Small bug fix for call to bibtex-parse-keys.

	* bibtex.el (bibtex-mode): Bug fix for using bibtex-parse-keys.

	* bibtex.el (bibtex-mode): Used other policy to initiate the first
	call of bibtex-parse-keys.  This avoids unnecessary double call if
	Font Lock mode is chosen for buffer at startup.

	* bibtex.el (bibtex-String, bibtex-Preamble): Renamed from
	bibtex-string and bibtex-preamble.
	(bibtex-String): If bibtex-maintain-sorted-entries and
	bibtex-sort-ignore-string-entries are both non-nil, read string
	key from minibuffer (with completion) and insert entry at correct
	location (as for normal entries).

	* bibtex.el (bibtex-autokey-titleword-first-ignore)
	(bibtex-autokey-titleword-abbrevs): Changed documentation: case of
	regexps doesn't matter anymore.
	(bibtex-field-const, bibtex-reference-key): Simplified to not
	contain uppercase letters.
	(member-of-regexp, assoc-of-regexp): Ignore case of regexp.
	(map-bibtex-entries): Call function not for every syntactical correct
	entry, but only for entries with known type.
	(map-bibtex-entries, skip-to-valid-bibtex-entry)
	(bibtex-flash-head, bibtex-enclosing-field)
	(bibtex-enclosing-reference-maybe-empty-head, bibtex-format-entry)
	(bibtex-autokey-change, bibtex-generate-autokey, bibtex-parse-keys)
	(bibtex-ispell-abstract, bibtex-sort-buffer)
	(bibtex-find-entry-location, bibtex-validate, bibtex-remove-delimiters)
	(bibtex-delete-optional-or-alternative-field, bibtex-pop)
	(bibtex-clean-entry, bibtex-print-help-message): Make them work
	regardless of user's value of case-fold-search.
	(bibtex-generate-autokey): Use bibtex-cfield for generating the
	year field regexp.
	(bibtex-parse-keys): Only gather keys of known (and not of
	syntactical correct) entries.
	(bibtex-end-of-entry): Only report an "unknown entry" message if
	called interactively.

	* bibtex.el (bibtex-sort-ignore-string-entries): Renamed back from
	bibtex-sort-ignore-string-and-preamble.  Of course, preambles are
	always ignored, since they have no key at all.
	(bibtex-string): Slightly less complex regexp.
	(skip-to-valid-bibtex-entry): New helper function to skip forward
	(or backward) to beginning of next syntactical correct known
	BibTeX entry, if not already there.  Respects
	bibtex-sort-ignore-string-entries.
	(map-bibtex-entries): Bug fix: It wasn't called for string entries
	even if bibtex-sort-ignore-string-entries was nil.
	(beginning-of-last-bibtex-entry): New helper function to go to
	last entry in buffer.
	(bibtex-end-of-entry): Bug fix: Now works with string and preamble
	entries as well.
	(bibtex-sort-buffer): Renamed from bibtex-sort-entries.  Simplified
	by using new function skip-to-valid-bibtex-entry.  Now only known
	entries are checked.
	(bibtex-find-entry-location): Simplified by using new functions
	skip-to-valid-bibtex-entry and beginning-of-last-bibtex-entry.
	Only known entries are used to determine location.
	(bibtex-validate): Now checks string entries, too.
	(bibtex-move-outside-of-entry): Don't use forward-paragraph, but
	bibtex-end-of-entry.

	* bibtex.el (bibtex-end-of-entry): Don't use forward-sexp anymore,
	since this fails on entries with non-escaped souble-quotes.  Use
	search-bibtex-reference instead (though it is slower, it is more
	reliable).
	(bibtex-ispell-abstract): Use normal regexps created by
	bibtex-cfield instead of special ones.

	* bibtex.el (beginning-of-first-bibtex-entry): No warning on
	empty buffer.

	* bibtex.el (bibtex-validate): Bug fix.  Syntactical check didn't
	work, since due to a bug all entries were simply skipped.

	* bibtex.el (bibtex-mode): Doc fix.
	(bibtex-delete-optional-or-alternative-field): Renamed from
	bibtex-kill-optional-or-alternative-field.
	(bibtex-delete-optional-or-alternative-field, bibtex-empty-field):
	Use delete-region, not kill-region.
	(bibtex-clean-entry): New second argument called-by-reformat
	indicates if bibtex-clean-entry was called by reformat.  Don't try
	to find correct buffer position for newly generated key and don't
	call bibtex-parse-keys in this case.

	* bibtex.el (map-bibtex-entries): Bugfix (missed first entry in
	buffer, died on entries with `@' in other than first column).
	(beginning-of-first-bibtex-entry, bibtex-format-entry)
	(bibtex-beginning-of-entry, bibtex-validate, bibtex-clean-entry):
	Changed to allow BibTeX entries to start in a column different
	from 1 (but still for speed reasons only whitespace is allowed
	prior to the `@' on the same line.

	* bibtex.el (map-bibtex-entries): Call it for known BibTeX entries
	only.  This allows entries as @Comment{...} which follow no
	specific structure without breaking the validation functions.
	(bibtex-validate): Check syntactical structure for known entries
	only.

	* bibtex.el (bibtex-autokey-abbrev): Sped up and changed to allow
	a length of zero.

	* bibtex.el (bibtex-entry-format): Remove option `month-strings'.
	(bibtex-validate): If given a prefix argument, check for
	questionable month fields.

	* bibtex.el (bibtex-generate-autokey): Use normal regexps created
	by bibtex-cfield instead of special ones.
	(bibtex-hide-entry-bodies): Sped up by using subst-char-in-region
	instead of using replace-regexp or replace-match.
	(bibtex-find-entry-location): A bug had been introduced by using
	search-bibtex-reference instead of re-search-forward (fixed).

	* bibtex.el (bibtex-field-delimiters): Renamed from
	bibtex-field-delimiter.
	(bibtex-entry-format): Constant empty-opts renamed to
	empty-opts-or-alts.
	(bibtex-remove-delimiters): Renamed from
	bibtex-remove-double-quotes-or-braces.
	(bibtex-reformat): New function.

	* bibtex.el (bibtex-fill-entry): New function to refill entry.
	(bibtex-mode-map): Defined key for bibtex-fill-entry.

	* bibtex.el (bibtex-field-delimiter): Substitutes variables
	bibtex-field-left-delimiter and bibtex-field-right-delimiter.
	(bibtex-field-left-delimiter, bibtex-field-right-delimiter): New
	helper functions.
	(bibtex-make-field, bibtex-pop): Use new variable
	bibtex-field-delimiter.
	(bibtex-empty-field, bibtex-string): Use new functions
	bibtex-field-left-delimiter and bibtex-field-right-delimiter.
	(bibtex-predefined-month-strings): New variable.
	(bibtex-predefined-strings): Use bibtex-predefined-month-strings.
	(bibtex-submit-bug-report): Use new variables
	bibtex-field-delimiter and bibtex-predefined-month-strings.

	* bibtex.el (bibtex-entry-format): Substitutes variable
	bibtex-clean-entry-zap-empty-opts-or-alts.  Various types of
	formatting options are available (see variable documentation).
	(bibtex-format-entry): New function doing the formatting of entries.
	Taken from bibtex-clean-entry and enhanced to support new variable
	bibtex-entry-format.
	(delete-whitespace): New helper function used by bibtex-format-entry.
	(bibtex-clean-entry): Call new function bibtex-format-entry.
	(bibtex-submit-bug-report): Use bibtex-entry-format instead of
	bibtex-clean-entry-zap-empty-opts-or-alts.
	(bibtex-do-auto-fill): New function to perform auto-filling in
	BibTeX mode.  In fact, this is the old function
	bibtex-auto-fill-function.
	(bibtex-mode): Don't set fill-prefix anymore, but use new function
	bibtex-do-auto-fill.

	* bibtex.el (bibtex-find-entry-location): Fixed bug (when
	bibtex-maintain-sorted-entries was non-nil, an entry with a key
	greater than all other keys wasn't inserted in the correct place).

	* bibtex.el (bibtex-mode): Don't use bibtex-auto-fill-function
	anymore, but use directly variable fill-prefix.

	* bibtex.el (bibtex-find-entry-location): Fixed bug (on duplicate
	keys, point must move to beginning of entry, so that bibtex-entry
	works correctly).

	* bibtex.el (bibtex-complete): Fixed bug (parameter string-list
	was mistakenly altered by the function itself).

	* bibtex.el (bibtex-mode-map): Bind bibtex-complete-key to C-TAB.

	* bibtex.el (bibtex-validate): Renamed from bibtex-validate-buffer
	since it can acts on region if active.  Use search-bibtex-reference.
	(search-bibtex-reference): New function to be used in places where
	prior a re-search-{forward|backward} for bibtex-reference or
	something alike was used.  This function is necessary due to the
	new limit of failure stack size in 19.32 and above.
	(bibtex-enclosing-reference-maybe-empty-head)
	(bibtex-sort-entries, bibtex-find-entry-location, bibtex-validate):
	Use new function search-bibtex-reference.
	(bibtex-pop, bibtex-clean-entry): Small change due to change in
	bibtex-enclosing-reference-maybe-empty-head.
	(bibtex-reference-infix, bibtex-reference-postfix): New constants
	necessary due to splitting bibtex-reference.
	(bibtex-reference): Deleted.
	(bibtex-type-in-reference, skip-whitespace-and-comments): Deleted.

	* bibtex.el (bibtex-mode): Don't turn auto-fill-mode on.  Use new
	variable normal-auto-fill-function.

	* bibtex.el (bibtex-field-string): Simplified.

	* bibtex.el (bibtex-mode-syntax-table): Changed syntax of
	double-quote back to quote syntax.

	* bibtex.el (bibtex-complete): New generic function for interface
	functions bibtex-complete-string and bibtex-complete-key.
	(bibtex-complete-key): New function.

	* bibtex.el (bibtex-sort-ignore-string-and-preamble): Renamed from
	bibtex-sort-ignore-string-entries.
	(map-bibtex-entries): Use bibtex-sort-ignore-string-and-preamble
	and ignore preamble entries as well.
	(bibtex-mode, bibtex-submit-bug-report, bibtex-sort-entries):
	Use bibtex-sort-ignore-string-and-preamble.
	(bibtex-count-entries): New function to count entries in buffer or
	region.

	* bibtex.el (bibtex-comma-after-last-field): New variable to
	decide if comma should be inserted at end of last field.
	(bibtex-entry): Support new variable bibtex-comma-after-last-field.

	* bibtex.el (bibtex-field-indentation, bibtex-text-indentation):
	Two new user options (replacing the former constants
	bibtex-field-alignment and bibtex-text-alignment).
	(bibtex-align-at-equal-sign): New user option.
	(bibtex-auto-fill-function, bibtex-make-field)
	(bibtex-remove-OPT-or-ALT, bibtex-clean-entry): Support new variables.

	* bibtex.el (bibtex-validate-buffer): Now only checks region if
	mark is active.  With optional argument checks if required fields
	are missing, too.

	* bibtex.el (bibtex-mode): Added support for imenu.

	* bibtex.el (bibtex-entry-field-alist)
	(bibtex-mode-user-optional-fields): Modified syntax to allow
	preinitialization of fields.
	(bibtex-make-field, bibtex-make-optional-field):
	Support preinitialization of fields.

	* bibtex.el (bibtex-autokey-prefix-string)
	(bibtex-autokey-preserve-case): New variables to support
	bibtex-generate-autokey.
	(bibtex-generate-autokey): Use new variables.

	* bibtex.el (bibtex-field-const, bibtex-reference-type)
	(bibtex-reference-key): Changed to match the (according to Oren
	Patashnik) allowed characters.

	* bibtex.el (bibtex-clean-entry-zap-empty-opts-or-alts): Renamed
	from bibtex-clean-entry-zap-empty-opts.
	(bibtex-entry-field-alist): Slightly modified syntax to support
	alternative fields needed for Book and InBook references.
	(bibtex-font-lock-keywords, bibtex-print-help-message)
	(bibtex-make-field, bibtex-pop, bibtex-clean-entry):
	Support ALT prefixed entries.
	(bibtex-mode): Documented new ALT prefixed fields.
	(bibtex-make-optional-field): Modified to give only field name as
	arg to bibtex-make-field.
	(bibtex-remove-OPT-or-ALT, bibtex-kill-optional-or-alternative-field):
	Renamed from bibtex-remove-OPT and bibtex-kill-optional-field,
	respectively.  Modified to support ALT prefixes.

	* bibtex.el (bibtex-enclosing-field, bibtex-print-help-message):
	Speed up things by not using bibtex-enclosing-regexp anymore.
	(bibtex-enclosing-regexp): Function deleted.

1997-06-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* loadup.el: Load latin-5.el.

1997-06-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* characters.el: Delete syntax stuff for Latin-1 and Latin-2.

	* mail-utils.el (mail-parse-comma-list):
	Use buffer-substring-no-properties.

	* debug.el (debug): Set overriding-terminal-local-map to nil,
	don't bind it, so it won't be restored on `q'.

1997-06-09 Thomas Wurgler <twurgler@goodyear.com>

        * emacs-lock.el: Added the string "emacs-lock" to all function
	and variable names, to make them unique to emacs-lock.

        * emacs-lock.el (check-was-buffer-locked): New function,
        on shell-mode-hook and telnet-mode-hook.
        (save-buffer-lock-setting): New permanent local variable.

        * emacs-lock.el (check-buffer-lock): New function, on kill-buffer-hook.
        (set-shell-sentinel): New function, on shell-mode-hook
	and telnet-mode-hook.
        
1997-06-09  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* simple.el (do-auto-fill): Typo in the previous change fixed.

1997-06-09  Kenichi Handa  <handa@etl.go.jp>

	* mule.el: Delete declaration for buffer-file-coding-system.  It
	is done in buffer.c now.  In the comment, change coding-system to
	coding system.  The name coding-vector is changed to coding-spec.
	(coding-vector-type, coding-vector-mnemonic,
	coding-vector-docstring, coding-vector-flags): Deleted.
	(coding-system-spec-ref): New function.
	(coding-system-type, coding-system-mnemonic, coding-system-flags):
	Use coding-system-spec-ref.
	(coding-system-doc-string): Renamed from coding-system-docstring.
	(coding-system-eol-type): Renamed from coding-system-eoltype.
	(coding-system-eol-type-mnemonic): Moved to mule-util.el.
	(coding-system-post-read-conversion): Likewise.
	(coding-system-pre-write-conversion): Likewise.
	(default-process-coding-system): Deleted.  Now declared in
	buffer.c.
	(make-subsidiary-coding-system): New function.
	(make-coding-system): Check arguments more strictly.  Do not make
	-unix, -dos, -mac variants for TYPE 4.
	(define-coding-system-alias): Call make-subsidiary-coding-system.
	(set-buffer-file-coding-system): Adjusted for the function name
	changes.
	(find-new-buffer-file-coding-system): Likewise.
	(default-process-coding-system): Deleted.  Now defined in coding.c.
	
	* mule-conf.el: Coding system names changed.

	* language: Most of files under this directory are modified
	because of changes of coding system names.

	* characters.el: Comment changed (iso-2022-7 -> iso-2022-7bit).

	* kkc.el (kkc-save-init-file): Coding system name changed from
	iso-2022-7 to iso-2022-7bit.

	* skkdic-conv.el: Likewise.

	* titdic-conv.el: Likewise.

	* mule-cmds.el: Define mouse-set-font in mule-menu-keymap.
	Disable menu set-buffer-process-coding-system if there's no
	process for the current buffer.
	(command-execute-with-coding-system): New function.
	(universal-coding-system-argument): Make it handle
	universal-arguement correctly.
	(describe-language-support): Call coding-system-doc-string instead
	of coding-system-docstring.

	* mule-diag.el (describe-coding-system): Change format of output.
	(describe-current-coding-system-briefly): Likewise.
	(describe-current-coding-system): Likewise.
	(print-coding-system-briefly): Likewise.
	(print-coding-system): Likewise.
	(list-coding-systems): Likewise.  Make it interactive.

	* mule-util.el (set-coding-system-alist): Deleted.
	(string-to-sequence): Doc string modified.
	(coding-system-list): Add optional arg BASE-ONLY.
	(coding-system-base): New function.
	(coding-system-plist): New function.
	(coding-system-equal): New function.
	(coding-system-unification-table): New function.

	* quail.el (quail-prefix-arg): New variable.
	(quail-start-translation): Make it handle a prefix argument.
	(quail-terminate-translation): Like wise.

	* simple.el (do-auto-fill): Bug fix for kinsoku processing.

1997-06-09  Erik Naggum  <erik@naggum.no>

	* latin-1.el: Normalized character names.
	* latin-2.el: Normalized character names.
	* latin-3.el: Normalized character names.
	* latin-4.el: Normalized character names.
	* latin-5.el: New file.

1997-06-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* webjump.el (webjump-sample-sites): Change the hot list.
	(webjump): Doc change.

	* mailalias.el (mail-directory-parser): Fix previous change.

1997-06-08  Stephen Gildea  <gildea@intouchsys.com>

	* time-stamp.el (time-stamp-string-preprocess, time-stamp-do-number):
	Avoid compiler warnings: pass all arguments to time-stamp-do-number
	explicitly, not dynamically.

1997-06-08  Dan Nicolaescu  <done@ece.arizona.edu>

	* icon.el (icon-font-lock-keywords-2): Use regexp-opt for the regexps. 

1997-06-08  Dave Love  <d.love@dl.ac.uk>

	* browse-url.el: Update keywords to show up in finder.
 	(browse-url-gnudoit-args, browse-url-generic-program)
 	(browse-url-gnudoit-program, browse-url-generic-args): New variables.
	(browse-url-w3-gnudoit): New procedure.
	(browse-url-mmm): New location of `remote' file for MMM 0.4.
	(browse-url-generic): New procedure.

	(browse-url-netscape): Test for w32.

	(browse-url-url-at-point): Assume mailto: if URL contains @.
	Don't use thingatpt; find the URL here to do it correctly.
	
	(browse-url-at-point, browse-url-of-file, browse-url-at-mouse):
	Call browse-url.
	(browse-url): Check for list browse-url-browser-function.
	(browse-url-choose-browser): New procedure.
	(browse-url-browser-function): Allow list value.

	(browse-url-process-environment): Call browse-url-emacs-display.
	(browse-url-emacs-display): New procedure.
	(browse-url-netscape-display): New variable.

	(browse-url-of-region): New procedure.
	(browse-url-of-buffer): Check for narrowed buffer.

	(browse-url-url-at-point): Rewrite to not use cl.el delete-if.
  	Fix multi-line URL matching.

	(browse-url-markedup-regexp): New variable.
	(browse-url-xterm-program): New variable.
	(browse-url-xterm-args): New variable.
	(browse-url-lynx-xterm): Use the above two vars.
	(browse-url-url-at-point): Use buffer-substring-no-properties.
	(browse-url-grail): Add missing optional arg.
	(browse-url-mmm): New procedure.

	(browse-url-netscape-startup-arguments): New variable.

1997-06-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* debug.el (debug, debugger-eval-expression):
	Treat overriding-terminal-local-map like overriding-local-map.
	(debugger-outer-overriding-terminal-local-map): New variable.

1997-06-07 Thomas Wurgler <twurgler@goodyear.com>

        * emacs-lock.el: Check for a lock when deleting a buffer.
        Turn off the lock on a shell or telnet buffer if its process
        is killed.  Reset the lock if the process is restarted.

1997-06-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (file-name-non-special): Handle
	file-name-completion and file-name-all-completions.

	* mailalias.el: Customize.  Doc fixes.
	Mark some risky local variables.

	* dired.el (dired-unmark-all-marks):
	Renamed from dired-unmark-all-files-no-query.

	* language/european.el (setup-8-bit-environment):
	Load the file with load, not require, so that we reload it if nec.

	* language/english.el ("English"): Improve doc string.

	* language/indian.el (describe-indian-environment-map): 
	Renamed from describe-indian-support-map.
	* language/devanagari.el: Corresponding changes.
	
	* language/european.el (describe-european-environment-map): 
	Renamed from describe-european-support-map.

	* language/cyrillic.el (describe-cyrillic-environment-map): 
	Renamed from describe-cyrillic-support-map.

	* language/chinese.el (describe-chinese-environment-map):
	Renamed from describe-chinese-support-map.

	* mule-cmds.el (describe-language-environment):
	Renamed from describe-language-support.
	Do the real work here; don't call describe-specified-language-support.
	Print the mnemonics when mentioning coding systems.
	Improve style of output.
	(describe-specified-language-environment):
	Renamed from describe-specified-language-support.
	Don't do the work here; call describe-language-environment.
	(describe-language-environment-map):
	Renamed from describe-language-support-map.

	* language/european.el (setup-8-bit-environment):
	Do not set set-case-syntax-offset.
	Subtract 128 when setting nonascii-insert-offset.
	Require latin-N if appropriate.

1997-06-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* startup.el (command-line): Don't call face-initialize.

	* diff.el (diff-command): Fix previous change.

	* startup.el (command-line): If environment specifies ISO 8859,
	always set up for both singe-byte and multibyte operation.
	But set-language-environment does most of the job now.

1997-06-06  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* regexp-opt.el (regexp-opt): Doc fix.
	(regexp-opt-group): When extracting character sets, emit them after
	the remaining strings so the regexp will find the longest match.

1997-06-05  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* follow.el (set-process-filter): Advice doc fix.

1997-06-04  Stephen Gildea  <gildea@intouchsys.com>

	* time-stamp.el (time-stamp-format): Doc fix.  Use %:y.
	(time-stamp-string-preprocess): Don't just call format-time-string;
	handle compatibility for some old constructs.  Handle padding
	the historical way, while giving a warning if people actually
	depend on it.
	(time-stamp-conv-warn, time-stamp-conversion-warn)
	(time-stamp-do-number): New functions.
	
1997-06-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* diff.el: Customize.
	(diff-switches, diff-command): Add autoload cookies.

	* vc.el (diff-switches): defvar deleted.

	* format.el (format-insert-file): Fix arg order to format-decode.

1997-06-04  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el (widget-kill-line): Fixed for overlays.

	* cus-edit.el (custom-buffer-create-internal): Show full
	documentation string in buffers with only a single item.

	* cus-edit.el (custom-mode-map): Suppress keymap.

	* wid-edit.el (widget-beginning-of-line): Work with overlays.
	(widget-end-of-line): Ditto.
	(widget-specify-inactive): Use inactive for mouse-face as well.
	(widget-read-event): New alias.
	(widget-button-click): Use it.
	Don't execute up events twice.
	(widget-field-end): Workaround for local-map at
	end of overlay.
	(widget-specify-field): Ditto.
	(widget-move): Fixed but with single button buffers.

	* cus-edit.el (custom-buffer-create-internal): Improved help
	strings for reset buttons.

	* wid-edit.el (widget-move): Restored support for
	`widget-echo-help' and `widget-move-hook'.
	(widget-documentation-string-value-create): Restore support for
	`widget-documentation--face'.

	* cus-edit.el (customize-variable-other-window): Added defalias.

	* widget.el (:complete): New keyword.
	(:complete-function): New keyword.
	* wid-edit.el (widget-complete): New command.
	(widget-keymap): Bind it.
	(widget-complete-field): New option.
	(widget-default-complete): New function.
	(default): Bind :complete.
	(string): Bind :complete-function.
	(sexp): Ditto.

	* wid-edit.el (widget-glyph-find): Would infloop when file not found.

	* wid-edit.el (widget-glyph-find): Try to avoid pure text glyphs.
	(widget-glyph-insert): Update doc string.

	* wid-edit.el (widget-button-click): Didn't restore `mouse-face'.

	* widget.el: Removed :hide-front-space and :hide-rear-space. 

1997-06-04 Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* informat.el (Info-tagify): Don't set Info-tag-table-marker
	if not in Info mode.

1997-06-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* sendmail.el (mail-setup): Don't set buffer-file-coding-system to nil.
	Instead, kill the local binding of it.

1997-06-03  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* mouse-drag.el (mouse-drag-safe-scroll): Doc fix.
	(mouse-drag-repeatedly-safe-scroll): Doc fix.
	(mouse-drag-events-are-point-events-p): Doc fix.
	(mouse-drag-should-do-col-scrolling): Doc fix.
	(mouse-throw-with-scroll-bar): Doc fix.

	* follow.el (follow-windows-aligned-p): Doc fix.
	(follow-post-command-hook, follow-recenter): Doc fix.
	(follow-end-of-buffer, follow-windows-aligned-p): Doc fix.
	(follow-post-command-hook, follow-maximize-region): Doc fix.
	(set-process-filter, process-filter, move-overlay): Advice doc fix.

1997-06-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* text-mode.el (spaced-text-mode): Renamed from text-mode.
	But change the mode name and hooks.
	(text-mode): Put the guts of indented-text-mode here.
	But don't define text-mode-abbrev-table, just use it.
	Don't set indent-line-function, and use text-mode-map.
	(indented-text-mode): Call text-mode.

	* cus-edit.el (custom-variable-prompt): Change prompt.

	* sendmail.el (mail-setup): Clear out buffer-file-coding-system.

1997-06-02  Martin Lorentzon  <emwson@emw.ericsson.se>

	* vc-hooks.el (vc-annotate): Entry "Annotate" added to menu and
	function `vc-annotate' to key-sequence `C-x v g'.
       
	* vc.el (vc-annotate-*): New functions and variables.

1997-06-02  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-util.el (ediff-toggle-multiframe): improved.
	(ediff-setup,ediff-inferior-compare-regions): modified.
	(ediff-setup): bug fixed.
	* ediff-init.el (ediff-file-attributes): use ediff-file-remote-p.
	* ediff-wind.el:
	(ediff-setup-windows-multiframe-merge,
	ediff-setup-windows-multiframe-compare): improved window placement.
	* ediff-diff.el (ediff-make-fine-diffs):
	fixed messages about whitespace regions.
	* ediff-wind.el, ediff-ptch.el, ediff-mult.el, ediff-merg.el:
	custom.el'ed
	
1997-06-02  Michael Kifer  <kifer@cs.sunysb.edu>
	
	* viper-init.el (vip-parse-sexp-ignore-comments): new variable.
	* viper-cmd.el (vip-paren-match): parsing comments is now controled
	with vip-parse-sexp-ignore-comments.
	* viper-cmd.el (vip-goto-col): fixed.
	* viper-cmd.el (vip-autoindent): now expands abbrevs.
	(vip-adjust-keys-for): unbinds vip-autoindent, if vip-auto-indent
	is nil.
	* viper-cmd.el (vip-prefix-arg-value): fixed computation of integer 
	prefix args.
	* viper-cmd.el, viper-init.el: new files.
	
1997-06-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* easy-mmode.el: New file.

	* reftex.el: Many doc fixes.
	(reftex-mode-menu): Change menu items.

	* language/cyrillic.el (koi8-r): Use R for mode line.

	* language/european.el (iso-8859-1): Use `1' for mode line.
	(Latin-1...Latin-4 coding systems): Add lists of languages
	which use these coding systems.

1997-06-01  Rolf Ebert  <ebert@waporo.muc.de>
        
	* ada-mode.el (ada-mode): Set up support for find-file.el.
	(ada-other-file-alist): New variable moved from find-file.el.
	(ada-search-directories): Likewise.

	* find-file.el:
	(ada-other-file-alist): Variable definition moved to ada-mode.el.
	(ada-search-directories, ada-procedure-start-regexp): Likewise.
	(ada-package-start-regexp): Likewise.

	* ada-mode.el: Customize.

1997-06-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* smtpmail.el: Include time-stamp.
	(smtpmail-queue-dir, smtpmail-queue-index-file): New variables.
	(smtpmail-queue-mail): New variable.
	(smtpmail-send-it): Handle those variables.
	(smtpmail-send-queued-mail): New command.

	* filecache.el: New file.
	* meta-mode.el: New file.
	* battery.el: New file.
	* easy-mmode.el: New file.
	
	* rmail.el (rmail-mmdf-delim1, rmail-mmdf-delim2):
	Variables renamed from mmdf-delim1 and mmdf-delim2.

1997-06-01  Roderick Schertler  <roderick@ibcinc.com>

	* gud.el (gud-dgux-p, gud-dguxdbx-marker-filter): New functions.
	(dbx): Use them.

1997-06-01  Dan Nicolaescu  <done@ece.arizona.edu>

	* hideshow.el (hs-show-hidden-short-form): Updated doc string.
	(hs-adjust-block-beginning): Likewise.
	(hs-special-modes-alist): C and C++ should also use
	hs-c-like-adjust-block-beginning.
	(hs-find-block-beginning): If hs-adjust-block-beginning is t and
	we apply hs-adjust-block-beginning and we reach the point means
	that we found the block beginning.
	(hs-c-like-adjust-block-beginning): Renamed from
	java-hs-adjust-block-beginning. 

1997-06-01  Simon Leinen  <simon@switch.ch>

	* smtpmail.el (smtpmail-via-smtp): Recognize XVRB as a synonym for
 	VERB and XONE as a synonym for ONEX.

	(smtpmail-read-response): Add "%s" to `message' calls to avoid
 	problems with percent signs in strings.

	* smtpmail.el (smtpmail-read-response): Return all lines of the
 	response text as a list of strings.  Formerly only the first line
 	was returned.  This is insufficient when one wants to parse
 	e.g. an EHLO response.

	Ignore responses starting with "0".  This is necessary to support
 	the VERB SMTP extension.

	(smtpmail-via-smtp): Try EHLO and find out which SMTP service
 	extensions the receiving mailer supports.

	Issue the ONEX and XUSR commands if the corresponding extensions
 	are supported.

	Issue VERB if supported and `smtpmail-debug-info' is non-nil.

	Add SIZE attribute to MAIL FROM: command if SIZE extension is
 	supported.

	Add code that could set the BODY= attribute to MAIL FROM: if the
 	receiving mailer supports 8BITMIME.  This is currently disabled,
 	since doing it right might involve adding MIME headers to, and in
 	some cases reencoding, the message.

1997-06-01  Per Abrahamsen  <abraham@dina.kvl.dk>

	* wid-edit.el: Changed to overlays.
	* cus-edit.el (custom-buffer-create-internal): Remove kludge for
	getting read-only bob and eob in XEmacs.
	* wid-browse.el (widget-browse-at): Use `get-char-property'
	instead of `get-text-property'.
	* widget.el (:value-from :value-to): Deleted.
	* widget.el (:button-overlay, :field-overlay): New keywords. 
	* wid-edit.el (widget-default-delete): Delete overlays.
	(widget-field-value-delete): Delete overlay.

	* wid-edit.el (widget-specify-field-update): Specify both
	`ballon-help' and `help-echo'. 

	* wid-edit.el (visibility): Change "more" to "show".

	* cus-edit.el (:custom-category): New keyword.
	(custom-variable): Add it.
	(custom-face): Ditto.
	(custom-group): Ditto.
	(custom-magic-value-create): Replace %c with category in state
	text. 
	(custom-magic-alist): Use it.
	(custom-magic-show-hidden): Allow control on each custom
	category. 
	(custom-magic-value-create): Ditto.
	(custom-reset-current): Ignore extra arguments.
	(custom-reset-saved): Ditto.
	(custom-reset-standard): Ditto.
	(custom-reset-button-menu): New option.
	(custom-buffer-create-internal): Use it.

	* cus-edit.el (customize-variable): Uncomment alias.

1997-06-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* sun-curs.el (sc::cursors): Add an eval-and-compile.

1997-06-01  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-format-handler): Changed look of group
	indicators.

	* wid-edit.el (widget-kill-line): Use forward-line instead of
	search-forward.  

	* cus-edit.el (custom-magic-value-create): Cleanup.

	* wid-edit.el (set-text-properties): Redefine for broken XEmacsen.
	(widget-field-value-get): Remove workaround.
	(widget-specify-button): Specify both `ballon-help' and `help-echo'.

1997-06-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-variable-prompt):
	Handle variable-at-point returning 0.
	(customize-option): Renamed from custom-variable.
	(customize-variable): Add it as an alias.
	(customize-option-other-window):
	Renamed from customize-variable-other-window.
	(custom-load-symbol): Search for both short and absolute
	names of the library, when avoiding duplicate loading.

1997-05-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail-utils.el (mail-strip-quoted-names): Don't delete angle brackets
	when there's a colon inside them.

	* iso-cvt.el: Require `format'.
	(iso-translate-conventions): Take bounds as args.
	(iso-spanish, iso-german): Take bounds as args.
	(iso-iso2tex, iso-tex2iso, iso-gtex2iso, iso-iso2gtex): Likewise.
	(iso-iso2duden-trans-tab): New variable.
	(iso-iso2duden): New command.
	(iso-cvt-read-only, iso-cvt-write-only): New commands.
	(is-german-tex-p): Function deleted.
	(iso-fix-iso2tex, iso-fix-tex2iso): Functions deleted.
	(iso-cvt-ffh, iso-cvt-wfh, iso-cvt-ash): Functions deleted.
	(iso-cvt-define-menu): New function.
	
	* format.el (format-encode-run-method): New function.
	(format-decode-run-method): New function.
	(format-alist): Add many new formats.
	(format-annotate-function): Use format-encode-run-method.
	(format-encode-region): Likewise.
	(format-decode): Use format-decode-run-method.

	* startup.el (command-line): Detect Latin-N character sets
	from envvars, both for multibyte mode and single-byte mode.

1997-05-31 Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-edit.el (custom-format-handler): Don't show links for hidden
	items. 

	* wid-edit.el (widget-button-prefix): Move to `widget-button' group.
	(widget-button-suffix): Ditto.

	* cus-edit.el (custom-format-handler): New %e and %- escapes.
	(custom-group): Use them.

	* widget.el (:widget-doc): Removed keyword.
	* wid-edit.el (widget-help): Removed widget.
	(widget-help-action): Removed function.

	* widget.el (:documentation-shown): New keyword.
	* wid-edit.el (documentation-string): New widget.
	(widget-documentation-string-value-create): New function.
	(widget-documentation-string-action): New function.
	(widget-default-format-handler): Use them.
	* cus-edit.el (custom-toggle-hide): Hide documentation.

	* cus-edit.el (custom-buffer-sort-predicate): Fix :type.
	(custom-menu-sort-predicate): Ditto.

	* wid-edit.el (visibility): New widget.
	(widget-visibility-value-create): New function.
	(widget-glyph-find): New function.
	(widget-glyph-insert): Use it.
	* cus-edit.el (custom-variable-menu, custom-face-menu,
	custom-group-menu): Remove `Hide' entry.
	(custom-magic-show-hidden): New option.
	(custom-magic-value-create): Use it.
	(custom-face): Show visibility.

	* wid-edit.el (widget-glyph-insert-glyph): Clean up.

1997-05-31  Dan Nicolaescu  <done@ece.arizona.edu>

	* cpp.el (cpp-highlight-buffer): Make sure
	buffer-invisibility-spec contains `cpp'.
	(cpp-make-overlay-hidden): Use `cpp' as an invisible property. 

	* hideshow.el (hs-hide-comments-when-hiding-all)
	(hs-show-hidden-short-form, hs-minor-mode-hook): Move definitions up.
	Use defcustom. 
	(hs-find-block-beginning): Bind buffer-size, don't call it in a cycle. 
	(hs-hide-all): Likewise.

1997-05-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* language/european.el: Rename language environments from
	LatinN to Latin-N.

	* mule-cmds.el (set-language-environment): Add autoload cookie.
	Renamed from setup-language-environment.

	* startup.el (iso-8859-n-locale-regexp): Renamed from
	iso-8859-1-locale-regexp.

	* loadup.el: Always load faces.el.

	* faces.el (make-face): Call make-face-internal only if defined.
	(internal-set-face-1): Call set-face-attribute-internal
	only if it is defined.

1997-05-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-load-symbol): Don't reload a file
	that is already loaded.
	(custom-load-symbol): Simplify previous change.

	* wid-edit.el (widget-sexp-value-to-internal):
	Don't bother with pp for a symbol.

	* wid-edit.el: Don't require cl.
	(widget-default-format-handler): Don't use push.
	(widget-push-button-value-create): 
	(widget-group-value-create): 
	(widget-sublist): New function.
	(widget-item-match-inline): Use widget-subllist.
	(widget-remove-if): New function.
	(widget-choose): Use widget-remove-if.

	* cus-edit.el (cus-start): Require cus-start.
	(mule): Make i18n the parent group.

	* cus-start.el: Arrange to load it once during dumping,
	and again if needed by cus-edit.el.
	(custom-start-quote): Don't define as separate function.
	(load-path): Improve the :type.
	(delete-exited-processes): Fix group to processes-basics.

	* subr.el (substitute-key-definition): Check vectorp, not arrayp.

	* files.el (file-name-non-special): Special handling for
	substitute-in-file-name operation.

	* hippie-exp.el (he-dabbrev-skip-space, he-dabbrev-as-symbol):
	Move definitions up.  Use defcustom.

1997-05-30  Ken Manheimer  <klm@python.org>

	* Integrated Emacs 19.34 and XEmacs 19.15 corrections (typos,
 	  style, command revisions, etc).

	* Integrated immediate keybindings display.  See
	  `icomplete-show-key-bindings', `icomplete-get-keys', and
	  `icomplete-completions'.

	* `icomplete-get-keys': Return keys bound in prior buffer to func name.

	* Added icomplete delay behavior, so completions don't intrude as
 	  quickly for short input, with customization variables:

	  `icomplete-max-delay-chars' - Maximum number of initial chars to
	  apply icomplete compute delay.
	
	  `icomplete-compute-delay' - Completions-computation stall, used
	  only with large-number completions

	  `icomplete-delay-completions-threshold' Pending-completions
	  number over which to apply icomplete-compute-delay

1997-05-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (line-move): If moving into intangible text,
	try to move to the end of the intangible segment if it's on that line.

	* simple.el (completion-setup-function): Do set completion-base-size.

1997-05-29  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-start.el: Use `standard-value' instead of `factory-value'. 

	* cus-edit.el (custom-variable-action): Clarified prompt.
	(custom-face-action): Ditto.
	(custom-group-action): Ditto.

	* cus-edit.el (custom-face-set): Call `face-spec-set' instead of
	`custom-face-display-set'. 
	(custom-face-save): Ditto.
	(custom-face-reset-saved): Ditto.
	(custom-face-reset-standard): Ditto.

	* cus-edit.el (custom-buffer-sort-predicate): New option.
	(custom-buffer-sort-alphabetically): New function.
	(custom-group-value-create): Use them.
	(custom-menu-sort-predicate): New option.
	(custom-menu-sort-alphabetically): New function.
	(custom-menu-create): Use them.

	* cus-edit.el (custom-magic-alist): Shortened message.

	* cus-edit.el: (custom-help-menu): Updated names.

	* cus-edit.el: Say `invoke' instead of `activate'.
	* wid-edit.el: Ditto.

	* wid-edit.el (widget-help): Fix format string.

	* cus-edit.el (custom-magic-value-create): Use push button
	brackets around state button.
	(custom-magic-value-create): Indent with three spaces.

	* cus-face.el (face-spec-set-match-display): Change error for
	unknown requirement to warning.

	* wid-edit.el (widget-link-prefix): Change to "[".
	(widget-link-suffix): Change to "]".

	* wid-edit.el (widget-color-item-button-face-get): Don't require
	facemenu for XEmacs.
	(widget-glyph-insert): Would bug out.

	* wid-edit.el (widget-glyph-directory): Fix doc. string.
	(widget-image-conversion): New option.
	(widget-glyph-insert): Use it.
	(widget-glyph-insert-glyph): No tag here.
	(widget-push-button-value-create): But here.

	* wid-edit.el (widget-field-face): Changed to dim gray.

	* wid-edit.el (widget-push-button-prefix): New option.
	(widget-push-button-suffix): New option.
	(widget-button): New group.

	* widget.el (:text-format): Removed.
	(:button-suffix): New keyword.
	(:button-prefix): New keyword.

	* wid-edit.el (widget-button-prefix): New variable.
	(widget-button-suffix): New variable.
	(widget-insert-indirect): New function.
	(widget-default-create): Use it.
	(default): Bind them.
	(widget-link-prefix): New option.
	(widget-link-suffix): New option.
	(link): Use them.
	(push-button): Don't use `:text-format'.
	(widget-push-button-value-create): Ditto.
	(widget-help): Update format.
	(checkbox): Ditto.
	(radio-button): Ditto.

	* cus-edit.el (custom-magic-alist): Use `invoke' instead of
	`push'. 

	* cus-edit.el (custom-magic-alist): Changed rogue state message.

	* custom.el (defface): Doc fix.

	* cus-edit.el (mule): New group for MULE merged emacsen.
	(auto-save): Spelling fix.

	* cus-edit.el, custom.el: Renamed `factory' to `standard'
	everywhere. 

	* cus-edit.el (custom-magic-show-button): Changed default to
	`nil'. 
	(custom): Removed `:format'.
	(custom-variable): Removed level button.
	(custom-face): Ditto.
	(custom-level): Deleted.
	(custom-level-action): Deleted.
	(custom-format-handler): Update caller.
	(custom-group-magic-alist): Merged into `custom-magic-alist'.
	(custom-magic-value-create): Use merged `custom-magic-alist'.
	(custom-group-state-update): Ditto.
	
1997-05-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-face-display-set): Define if not defined.
	(custom-buffer-create-internal): Refer to the Emacs manual.

1997-05-29  Anders Holst (aho@nada.kth.se)

	* hippie-exp.el (he-file-name-beg): Don't trigger on parts of
	words with non-file chars.
	(he-lisp-symbol-beg): Use symbol syntax classes.
	(he-dabbrev-as-symbol): New variable.
	(he-dabbrev-beg,he-dabbrev-search,he-dabbrev-kill-search): Use it.

1997-05-29  Ken Manheimer  <klm@python.org>

	* icomplete.el: Integrated Emacs 19.34 and XEmacs 19.15
	corrections (typos, style, command revisions, etc).
	Integrated hacked up XEmacs immediate keybindings display.  See
	`icomplete-show-key-bindings', `icomplete-get-keys', and
	`icomplete-completions'.  Doesn't work with mainline GNU 
	Emacs 19.34 (because the cmdloop doesn't set owindow, and the
	current-local-map doesn't take optional buffer arg), so feature
	is, by default, inhibited unless we're running in XEmacs.
	(icomplete-get-keys): Return keys bound to func name in buffer
	"owindow" - since "owindow" is calling-buffer history present
	only in XEmacs, this function is only useful in XEmacs.
	(icomplete-max-delay-chars, icomplete-compute-delay): New vars.
	(icomplete-delay-completions-threshold): New var.
	These customize the delay behavior, so that completions don't
	intrude as quickly for short input.

1997-05-29  Anders Lindgren  <andersl@csd.uu.se>

	* follow.el (follow-submit-feedback, follow-mode): Doc fix.
	(follow-generic-filter): Don't restore the original buffer if it's
	dead, or if the filter explicitly selected a new buffer.

1997-05-29  John Heidemann  <johnh@isi.edu>

	* mouse-drag.el (mouse-drag-electric-col-scrolling): New variable;
        auto-enables horizontal scrolling when clicks on wrapped
        lines occur.

1997-05-29  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* font-lock.el (font-lock-syntactic-keywords): New variable.
	(font-lock-fontify-syntactic-keywords-region): New function.  Use it.
	(font-lock-default-fontify-region): Call it first if variable non-nil.
	Wrap parse-sexp-lookup-properties to non-nil if called.
	(font-lock-default-unfontify-region): Remove syntax-table properties.
	(font-lock-apply-syntactic-highlight):
	(font-lock-fontify-syntactic-anchored-keywords): New functions.
	These syntactic keyword fontification functions place syntax-table text
 	properties in the buffer, in much the same way that keyword
 	fontification functions place face text properties.  The syntax-table
 	text properties are respected by syntactic and keyword fontification.
	(font-lock-eval-keywords): New function.
	(font-lock-set-defaults): Use it.
	(font-lock-keyword-depth): Function deleted.  Use regexp-opt-depth.

	* fast-lock.el (fast-lock-get-syntactic-properties): New function.
	(fast-lock-save-cache-1): Call it and save value.
	Save font-lock-syntactic-keywords.  Save 3 as version number.
	(fast-lock-cache-data): Take new args SYNTACTIC-KEYWORDS and
	SYNTACTIC-PROPERTIES.  Eval font-lock-syntactic-keywords with
	font-lock-eval-keywords.  Compile and compare all keywords.
	(fast-lock-get-syntactic-properties): New function.
	(fast-lock-add-properties): Renamed from fast-lock-set-face-properties.
	Take new arg SYNTACTIC-PROPERTIES and add syntax-table text properties.
	Now fast-lock.el saves a buffer's value of font-lock-syntactic-keywords
	and syntax-table text properties as added by font-lock.el.

	* sh-script.el (sh-font-lock-keywords*): Doc fixes.
	(sh-mode-syntax-table): Leave $ syntax alone.
	(sh-font-lock-syntactic-keywords): New variable.
	(sh-mode): Use it to set font-lock-defaults.

1997-05-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* edt.el (edt-emulation-on): Handle absence of TERM envvar.

	* iso-acc.el (iso-languages): For French and Portuguese,
	add comma as prefix.  For Latin-3, add period.
	Remove unnecessary backslashes before chars that don't need them.

	* edebug.el (edebug-signal): Avoid infinite recursion.

1997-05-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* regexp-opt.el: New file.

	* server.el (server-kill-buffer): Prevent infinite recursion.
	(server-kill-buffer-running): New variable.

1997-05-28  Hrvoje Niksic  <hniksic@srce.hr>

	* dired-aux.el: Customize.

1997-05-27  Dan Nicolaescu  <done@ece.arizona.edu>

	* hideshow.el (hs-special-modes-alist): Include also the
	comment regexp in the alist. This is needed for modes like C++
	where the comment beginning regexp is not easy to determine
	from the syntax table.
	Include ADJUST-BLOCK-BEGINNING in the alist.
	(hs-hide-comments-when-hiding-all): Add autoload cookie.
	(hs-show-hidden-short-form):
	(hs-adjust-block-beginning): New variables.

	Comment out `hs-menu-bar' as XEmacs support was removed.
	(hs-c-end-regexp): Remove variable, obsoleted by the rewrite of
	`hs-inside-comment-p'.
	
	(hs-discard-overlays): No need to test if we are inside the
	overlay, we surely are since we got the overlay using `overlays-at'.
	(hs-hide-block-at-point): Rewritten to use the new variables.
	Use only one parameter to specify the comment.
	(hs-show-block-at-point): No need for the COMMENT-REG parameter.
	(hs-safety-is-job-n): Correct typo.
	(hs-hide-initial-comment-block): Add ^L to the chars to skip.
	Take into account `hs-show-hidden-short-form' when testing.
	(hs-inside-single-line-comment-p): Function deleted, obsoleted by
	the rewrite of `hs-inside-comment-p'.
	(hs-inside-comment-p): Rewritten from scratch. Semantics changed
	when returning non-nil. We can be inside a comment, but that
	comment might not be hidable (the car of the return value should
	be non-nil to be hidable).
	(hs-grok-mode-type): Rewrite to be more understandable.
	`hs-c-end-regexp' does not exist any more.
	Initialize `hs-c-start-regexp' from the alist if specified there.
	Initialize `hs-adjust-block-beginning'.
	(hs-find-block-beginning): Rewritten to be able to deal with the
	situation when a block beginning spans multiple lines and the
	point is on one of those lines.
	(hs-already-hidden-p): Look first if we are inside a comment or a
	block, go to their end and look there for the overlays.
	(java-hs-adjust-block-beginning): New function.
	(hs-hide-all): Hide a comment block only if `hs-inside-comment-p'
	says is hidable.
	(hs-hide-block): Simplify.  Handle properly the result of
	`hs-inside-comment-p'.
	(hs-show-block): Likewise.
	(hs-minor-mode): Doc string fixes.
	Make `hs-adjust-block-beginning' buffer local.
	Delete making `hs-c-end-regexp' buffer local as it was deleted.

1997-05-27  Kenichi HANDA  <handa@nora.(none)>

	* mule.el (set-terminal-coding-system): New function.
	(set-keyboard-coding-system): New function.
	(set-buffer-process-coding-system): Name changed from
	set-current-process-coding-system.

	* encoded-kb.el (encoded-kbd-mode): Fix typo in doc-string.
	(encoded-kbd-set-coding-system): Deleted.

	* case-table.el (describe-buffer-case-table): Use aref instead of
	set-char-table-range.

	* loadup.el: Add comment for the code loading
	"language/devanagari".

	* mule-cmds.el: Delete defining "i" in mule-keymap.
	(mule-menu-keymap): New variable.  All menu items related to mule
	are defined in this keymap.
	(set-language-info): Change format of INFO for KEY documentation
	and setup-function.
	(setup-specified-language-environment): New function.
	(setup-language-environment): Call the above function.
	(describe-specified-language-support): New function.
	(describe-language-support): Call the above function.
	(universal-coding-system-argument): New function.
	(read-language-and-input-method-name): Doc-string fixed.  If
	default-input-method is nil, use previous-input-method as the
	default value.
	(set-default-input-method): Deleted.

	* language/*.el: Most of setup-LANGUAGE-environment functions are
	moved form LANGUAGE.el to LANG-util.el.  These functions now at
	first call setup-english-environment to reset various values to
	the defaults.

	* language/english.el (setup-english-environment): Set several
	default values more appropriately.

	* mule-conf.el: Set default value of coding-category-iso-else to
	iso-2022-lock.  Set priority of coding-category-emacs-mule higher.

	* files.el (find-file): Delete the facility of handling a prefix
	argument.
	(find-file-other-window, find-file-read-only): Likewise.
	(find-file-read-only-other-window): Likewise.
	(find-file-read-only-other-frame): Likewise.
	(find-alternate-file-other-window, find-alternate-file): Likewise.
	(write-file, insert-file, append-to-file): Likewise.

	* dired.el (dired-find-file): Likewise.

	* fontset.el (x-complement-fontset-spec): Add font names which are
	ignoring sizes in alternative-fontname-alist.

1997-05-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mouse.el (mouse-undouble-last-event): Return nil if the event
	is not double or triple to start with.
	(mouse-show-mark): Handle scroll-bar events here.

1997-05-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* batmode.el: File deleted from distribution.
	
	* vi.el (vi-join-lines): Locally bind count.
	(vi-search-forward, vi-search-backward): Use isearch-update-ring.
	(vi-repeat-last-search, vi-reverse-last-search):
	Get string from the ring.
	(vi-mode-old-major-mode, vi-mode-old-mode-name): New defvars.
	(vi-mode-old-local-map, vi-mode-old-case-fold): Likewise.
	(vi-tilde-map): Move the defvar and bindings to the front.
	
	* ielm.el (ielm-input): New defvar.

	* browse-url.el (browse-url-netscape, browse-url-netscape-sentinel)
	(browse-url-netscape-send): Use browse-url-netscape-program,
	renamed from browse-url-netscape-command.

	* icon.el (indent-icon-exp): Bind last-depth.
	Consistently use inner-loop-done, not innerloop-done.

	* webjump.el (webjump-adult-p): Function deleted.

	* gulp.el (gulp-send-requests): Sort maintainers alphabetically.
	(gulp-create-m-p-alist): Don't print message here.  Bind fl-tm.
	(gulp-request-header, gulp-request-end): Update the default text.
	
	* info.el (Info-exit): Use bury-buffer simply.

1997-05-27  Dan Nicolaescu  <done@ece.arizona.edu>

	* icon.el (icon-mode): Adapt to new hideshow and improve regexps.
	(icon-forward-sexp-function): Use beginning-of-icon-defun and
	end-of-icon-defun.

1997-05-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* isearch.el (search-highlight): Make it t by default.
	(search-invisible): Doc fix.

	* simple.el (do-auto-fill): Don't give fill-context-prefix third arg.

	* fill.el (adaptive-fill-regexp): Allow - and |;
	allow spaces within the prefix.  Allow numeric headings.
	(adaptive-fill-first-line-regexp): New variable.
	(fill-context-prefix): Use adaptive-fill-first-line-regexp.
	If prefix from first line seems unreasonable, use whitespace instead.
	Reject it entirely only if it is a paragraph-starter.
	
1997-05-26  Simon Marshall  <simon@diazepam.gnu.ai.mit.edu>

	* comint.el (comint-send-input): When calculating the history entry,
	use insert to restore the old input, and insert before deleting.

	* ispell.el (ispell-overlay-window): Use inhibit-frame-unsplittable,
	instead of its old name.

1997-05-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* faces.el: Unconditionally create the standard faces at load time.
	Move face setup here from cus-start.el, and add attribute info.
	(x-create-frame-with-faces): Don't call frame-set-background-mode
	until after handling the reverse-video parameter.

	* cus-start.el: Move face setup to faces.el.
	
	* faces.el (modify-face): Don't call make-face-unbold
	if face has no font; likewise for make-face-unitalic.
	(x-create-frame-with-faces): Use nil for SET-ANYWAY
	when calling make-face-x-resource-internal.
	(face-initialize): Don't initialize any face attributes here.
	(face-fill-in): Don't call set-face-underline-p if underlining off.

	* subr.el (substitute-key-definition): Fix previous change.

	* Makefile (dontcompilefiles): Add latin-1.el ... latin-4.el;
	remove iso-syntax.el and i3-syntax.el.

1997-05-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* info.el (Info-suffix-list): Accept -info as suffix;
	also accept a subdir with a file called `index'.

	* texinfmt.el (texinfo-extra-inter-column-width):
	Renamed from extra-inter-column-width.  Doc fix.
	(texinfo-multitable-buffer-name):
	Variable renamed from multitable-temp-buffer-name.
	(texinfo-multitable-rectangle-name):
	Variable renamed from multitable-temp-rectangle-name.
	(texinfo-format-key): Don't insert angle-brackets.

1997-05-24  Bob Chassell  <bob@gnu.ai.mit.edu>

	* texinfo.el (texinfo-version): New function and variable.
	(texinfo-update-node): New autoload call.
	(texinfo-every-node-update): Likewise.
	(texinfo-sequential-node-update): Likewise.
	(texinfo-mode-map): New binding for C-c ].
	(texinfo-environment-regexp): Use concat, for clarity.
	(texinfo-insert-@end): Fix paren error.

	* texinfmt.el (texinfmt-version): New function and variable.
	(texi2info): New function.
	(texinfo-accent-commands): New variable.
	(texinfo-no-refill-regexp): Use concat to make it clearer.
	Add some more elements.
	(texinfo-part-of-para-regexp): Likewise.
	(texinfo-append-refill): Extend criterion 3 for when not to refill.
	(texinfo-raisesections-alist): Add @centerchap.
	(texinfo-lowersections-alist): Add @centerchap.
	(texinfo-format-scan): Handle many more @-char commands.
	(detailmenu): Add texinfo-format and texinfo-end properties,
	(centerchap): Add texinfo-format property,
	(texinfo-format-buffer): Doc fix.
	(texinfo-parse-line-arg): Add doc string.
	(texinfo-parse-arg-discard): Likewise.
	(texinfo-multitable): New Texinfo cmd.
	(texinfo-end-multitable): New function.
	(texinfo-multitable-widths): New function.
	(texinfo-multitable-extract-row): New function.
	(texinfo-multitable-item): New function.
	(texinfo-format-timestamp): New Texinfo cmd.
	(texinfo-format-kbd-regexp): New variable.
	(texinfo-format-kbd-end-regexp): New variable.
	(texinfo-format-kbd): New function for @kbd.
	(texinfo-format-ifeq): New Texinfo cmd.
	(texinfo-format-pounds): Likewise.
	(texinfo-format-refill): Handle *'s specially at line start.
	* Add properties for new commands.
	* Move all the no-op commands to the end, and add some.
	* Add many commands for ligatures and for letters with diacritics
	and other non-English special characters..

	* latin-1.el, latin-2.el, latin-3.el, latin-4.el:
	If set-case-syntax-set-multibyte is non-nil, define syntax
	for multibyte characters, and don't do `provide'.
	* case-table.el (set-case-syntax-set-multibyte): New variable.

1997-05-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* case-table.el (set-case-syntax-1): New function.
	(set-case-syntax-delims): Use set-case-syntax-1.
	(set-case-syntax-pair, set-case-syntax): Likewise.

1997-05-22  Ralph Schleicher  <rs@purple.UL.BaWue.DE>

	* libc.el (libc-highlight-overlay): New variable.
	(libc-search-index): Use an overlay for highlighting.

	* libc.el: New file.
	
1997-05-22  Hrvoje Niksic  <hniksic@srce.hr>

	* terminal.el: Use defgroup and defcustom.
	* dired.el, dired-x.el: Likewise.
	
1997-05-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* faces.el (face-inverse-video-p): New function.
	(set-face-inverse-video-p): New function.
	(internal-set-face-1): Handle the inverse-video attribute.
	(face-spec-set): Handle :inverse-video.
	(make-face, x-create-frame-with-faces): Make vectors length 9.
	(internal-facep): Expect length 9.
	(face-try-color-list): Use set-face-inverse-video-p.

	* cus-face.el (custom-face-attributes): Add :inverse-video.

1997-05-22  Erik Naggum  <erik@naggum.no>

	* latin-4.el: New file.

1997-05-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* latin-1.el, latin-2.el, latin-3.el:
	Use punctuation syntax for section sign.

	* reftex.el: New file.

1997-05-21  Steven L Baur  <steve@altair.xemacs.org>

	* add-log.el (change-log-font-lock-keywords): Tweak font-lock-keywords.

1997-05-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* subr.el (substitute-key-definition): Handle chartables.

	* custom.el (defface): Doc fix.

1997-05-22  Per Abrahamsen  <abraham@dina.kvl.dk>

	* custom.el (defface): Doc fix.

1997-05-21  Noah Friedman  <friedman@prep.ai.mit.edu>

	* eldoc.el (eldoc-message-commands): Move docstring into comments,
	since this isn't a user variable.
	(eldoc-message-commands-table-size, eldoc-use-idle-timer-p,
	eldoc-function-argstring-from-docstring-method-table): Use defvar,
	not defconst.
	(eldoc-last-data): Use cons explicitly; don't rely on dotted pair
	read syntax.  I'm worried the latter might get compiled as
	read-only data someday.
	(eldoc-docstring-message): If truncating symbol name, show ending
	of name rather than beginning.  The former is generally more unique.
	(eldoc-function-argstring-from-docstring-method-table): Handle
	pathological `save-restriction' case.
	[top level]: Add `indent-for-tab-command' to eldoc-message-commands.

1997-05-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* swedish.el: iso-syntax.el renamed to latin-1.el.

	* startup.el (command-line): iso-syntax.el renamed to latin-1.el.

	* loadup.el: Always load case-table and latin-1...latin-4.

	* latin-1.el: Renamed from iso-syntax.el.
	* latin-2.el: Renamed from iso02-syn.el.
	* latin-3.el: Renamed from i3-syntax.el.

	* cc-mode.el (c-C++-friend-key): Missing definition added back.

	* pc-select.el (pc-selection-mode): Swap meanings of f16 and f18;
	they were backwards.

	* awk-mode.el (awk-mode): Set parse-sexp-ignore-comments.

1997-05-21  Rolf Ebert  <re@waporo.muc.de>

	* ada-mode.el (ada-krunch-args): Use gnatkr instead of gnatk8.
	(ada-make-filename-from-adaname): Ditto.
	(ada-adjust-case-region): Use format functionality of message.
	(ada-indent-region): Ditto.
	(ada-check-matching-start): Ditto.
	(ada-check-defun-name): Ditto.

	* ada-mode.el (ada-font-lock-keywords): Default to subdued.  Doc fix.
	(ada-font-lock-syntactic-keywords): New variable.
	(ada-mode): Use it to set font-lock-defaults.

	* ada-mode.el (ada-font-lock-keywords-2): Single "raise" will be
	highlighted. "in out" parameters get type face (depends on order
	in regexp).

	* ada-mode.el (ada-mode): Remove explicit setting of user option
	`blink-matching-paren', font-lock treats `.' as word char.
	(ada-in-string-or-comment-p): Call `parse-partial-sexp' only once.
	(ada-untabify-buffer): Force returning `nil'.
	(ada-font-lock-keywords-1): Move "task" before "task (body|type)" to
	correct highlighting (regexp depends on order).

	* ada-mode.el (ada-in-char-const-p): Renamed from `ada-after-char-p'.
	Also test following character.
	(ada-adjust-case): Use better function `ada-in-char-const-p'
	(ada-in-string-or-comment-p): Test for being in a char constant.
	(ada-clean-buffer-before-saving): Changed default to t.
	(ada-mode): Set `font-lock-defaults' for Emacs only, use properties
	for XEmacs.

	* ada-mode.el (ada-indent-newline-indent): Simplified by just calling
	`ada-indent-current'.

	* ada-mode.el (ada-end-stmt-re): Added word delimiters in regexp.
	Removed `interactive' statements which were needed only for debugging.

	* ada-mode.el:
	Put format commands back in for emacs 19.30/19.29 compatibility.

	* ada-mode.el (ada-get-indent-label): A named block can begin
	without a declare part.
	(ada-check-defun-name): First of all, check for correct name in a
	named block without `declare' part.
	(ada-goto-matching-start): Change regexp as there may be no
	semicolon between `end' and keyword.
	(ada-get-current-indent): Remove warning as `begin' can introduce
	a block without a `declare'.
	(ada-goto-matching-decl-start): When searching backward, skip
	generic default proc/func ("is <>").

	* ada-mode.el
	(ada-named-block-re): New regexp for the name of a named block or loop.
	(ada-get-current-indent): Handle loop names at the stmt start.
	(ada-get-indent-end): Handle loop names at the stmt start.
	(ada-get-indent-noindent): Handle loop names at the stmt start.
	(ada-get-indent-loop): Handle loop names at the stmt start.
	(ada-search-prev-end-stmt): Generic instances are not `stmt-ends'.
	(ada-goto-previous-word): Use new function `ada-goto-next-word'.
	(ada-goto-next-word): Generalized old `ada-goto-previous-word' for
	both directions.

	* ada-mode.el (ada-indent-function): Removed unnecessary `package'
	case.
	(ada-get-indent-case): Before testing for `=>', be sure there is
	an `is'.
	(ada-search-prev-end-stmt): Test for `separate' keyword on the
	same line, which is not an `end-stmt'.

	* ada-mode.el (ada-font-lock-keywords-2):
	Correct regexp for hilit of unfollowed `end'.
	(ada-in-open-paren-p): Start parsing definitely outside of strings.
	(ada-gnat-style): New function.

	* ada-mode.el: Doc fixes.
	(ada-mode): Support new font-lock-mode.
	(ada-format-paramlist): Changed all `accept' to `access'.
	(ada-insert-paramlist): Changed all `accept' to `access'.
	(ada-in-comment-p): Use standard emacs way `parse-partial-sexp'.
	(ada-font-lock-keywords-1): Regexps in not byte-compiled code bahave
	different than byte-compiled regexps.
	Change order of some ored entries.

1997-05-21  Erik Naggum  <erik@naggum.no>

	* add-log.el (add-log-lisp-like-modes, add-log-c-like-modes)
	(add-log-tex-like-modes): New variables.
	(add-log-current-defun): Use them instead of constant lists.

1997-05-21  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-backend-admin): If SCCS should be used, and there
	is no "SCCS" subdirectory, create it.

1997-05-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* webjump.el (webjump-to-javaapi): Function deleted.
	(webjump-sample-sites): Delete various pointers to non-free things.

	* bindings.el (mode-line-mule-info): Add a colon.
	(mode-line-modified): Delete the initial dash.

1997-05-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* word-help.el (set-word-help-file): Renamed from set-help-file.

	* crisp.el (crisp-mode): Add autoload cookie.

	* Makefile (dontcompilefiles): Add list of files that should not
	be byte-compiled.

	* dos-w32.el (add-untranslated-filesystem)
	(remove-untranslated-filesystem): Add interactive spec.

	* crisp.el (crisp-last-last-command): Renamed from last-last-command
	and defvar added.

	* levents.el (event-closest-point): Fix paren error.

1997-05-20  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-start.el (load-path): Change tag again.

1997-05-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mh-utils.el (mh-file-command-p): New function.
	(mh-path-search): Use that.
	(mh-find-progs): Don't check current directory
	unless explicitly requested.  Don't set mh-progs or mh-lib
	if the programs are not found.  Give an error message
	unless they are found.

1997-05-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* replace.el (perform-replace): Restore match data after read-event.

1997-05-19  Edward M Reingold  <emr@silver.wisdom.weizmann.ac.il>

	* holidays.el (holiday-float): Rewritten to fix bug when base date
	of holiday and holiday date are in different months.

	* diary-lib.el (diary-float): Rewritten to fix bug when base date
	of entry and entry date are in different months.  Added optional
	parameter DAY.
	(list-sexp-diary-entries): Revise description of diary-float.

1997-05-19  Drew Csillag  <drew@staff.prodigy.com>

	* m4-mode.el (m4-program): Guess which m4 binary to use.
	(m4-start-m4): New function.
	(m4-end-m4): New function.
	(m4-m4-buffer, m4-m4-region): Now use m4-start-m4.
	(m4-font-lock-keywords): Collaps 4 regex's into 1.

1997-05-19  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-start.el (load-path): Change a tag.

1997-05-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (path-separator, parse-colon-path): Doc fixes.

1997-05-18  Erik Naggum  <erik@naggum.no>

	* compile.el (compilation-parse-errors): Fix paren error.

	* dabbrev.el (dabbrev-expand, dabbrev--abbrev-at-point)
	(dabbrev--search): Use buffer-substring-no-properties.

	* lpr.el (lpr-page-header-switches): Remove extra paren.

	* rmailsum.el (rmail-summary-delete-forward): Force the
	argument to be a number, since we may be called with nil.

	* simple.el (set-fill-column): Make the C-u case work.

	* help.el (describe-key-briefly, where-is): Prefix arg means
	insert help text into current buffer.

1997-05-17  Ken'ichi Handa  <handa@psilocin.gnu.ai.mit.edu>

	* fill.el (enable-kinsoku): Name changed from do-kinsoku.
	(fill-region-as-paragraph): Do `kinsoku' processing only if both
	enable-kinsoku and enable-multibyte-characters are non-nil.

1997-05-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* compile.el (compilation-arguments): New local variable.
	(compile-internal): Set the variable compilation-arguments.
	(compilation-revert-buffer): New function.
	(compilation-mode): Set revert-buffer-function.

	* files.el (revert-without-query): Renamed from
	find-file-revert-without-query.
	(find-file-noselect): Use new option.
	(revert-buffer): Check the option here too.

	* cus-face.el (custom-facep): Defined (once again).

	* simple.el (do-auto-fill): Check enable-kinsoku and
	enable-multibyte-characters.

	* bindings.el (mode-line-modified): Delete one of the leading dashes.

1997-05-16  Dan Nicolaescu  <done@ece.arizona.edu>

	* outline.el (outline-mode): Use `add-to-invisibility-spec' and
	set the invisible property to `outline'.
	(outline-minor-mode): Likewise.
	Also, use `remove-from-invisibility-spec'.
	(outline-flag-region): Set `outline' as the invisible property.

1997-05-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* autoload.el (update-autoloads-from-directories): Renamed from
	update-autoloads-from-directory.  Take multiple directories as args.
	Use locate-library to find loaddefs.el and the top level Lisp dir.
	(batch-update-autoloads): Call update-autoloads-from-directories.

	* iso-acc.el (iso-accents-insert-offset): Use nonascii-insert-offset.

	* iso-transl.el (iso-transl-define-keys): Use nonascii-insert-offset.

	* simple.el (quoted-insert): Use nonascii-insert-offset.
	(quoted-insert-character-offset): Variable deleted.

1997-05-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* levents.el (event-closest-point): New function.
	(event-closest-point-1): New subroutine.

1997-05-16  Kenichi Handa  <handa@etl.go.jp>

	* mule.el (make-unification-table): Fix handling of a generic
	character.

	* term/x-win.el: Create bold, italic, bold-italic variants of
	startup fontset.

1997-05-15  Kenichi Handa  <handa@etl.go.jp>

	* mule-conf.el: Coding system names changed as follows:
	internal -> emacs-mule, automatic-conversion -> undecided.
	Coding category name changes as follows:
	coding-category-internal -> coding-category-emacs-mule.
	* mule.el: Likewise.
	* rmail.el: Likewise.
	* gnus/gnus-mule.el: Likewise.
	* language/chinese.el: Likewise
	* language/english.el: Likewise.
	* language/japanese.el: Likewise.
	
	* mule.el (charset-list): Bug fixed.

	* mule-cmds.el (set-language-info): Change the special treatment
	of key 'describe-function to 'documentation.
	(describe-specified-language-support): Renamed from
	describe-language-support-internal.  Get language name from
	last-command-event.
	(describe-language-support): Call
	describe-specified-language-support.

	* language/chinese.el: Delete functions describe-LANGUAGE-support.
	Delete 'describe-function entries and change 'documentation
	entries in each language specific information.
	* language/cyrillic.el: Likewise.
	* language/devanagari.el: Likewise.
	* language/english.el: Likewise.
	* language/ethiopic.el: Likewise.
	* language/european.el: Likewise.
	* language/greek.el: Likewise.
	* language/hebrew.el: Likewise.
	* language/indian.el: Likewise.
	* language/japanese.el: Likewise.
	* language/korean.el: Likewise.
	* language/lao.el: Likewise.
	* language/thai.el: Likewise.
	* language/tibetan.el: Likewise.
	* language/vietnamese.el: Likewise.

1997-05-15  Kenichi Handa  <handa@etl.go.jp>

	* fontset.el (standard-fontset-spec): Name changed from
	default-fontset-spec.
	* term/x-win.el: Likewise.

1997-05-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* browse-url.el (browse-url): Make `applicatations' the parent.

	* rmail.el (rmail-retry-failure):
	Rename local to rmail-this-buffer.

	* term.el: Don't create faces if make-face isn't defined.
	Catch errors in setting face attributes.
	(ansi-term-inv-fg-faces-vector): Define with defvar.
	(ansi-term-inv-bg-faces-vector): Likewise.
	(ansi-term-bg-faces-vector, ansi-term-fg-faces-vector): Likewise.
	(term-ignore-error): New mcro.

	* lpr.el (lpr-page-header-switches): Use -F, not -f.

1997-05-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bindings.el (mode-line-mule-info): Delete the colon.
	(mode-line-buffer-identification): Delete %F:.
	(mode-line-frame-identification): New variable.
	(mode-line-format): Use mode-line-frame-identification.
	Start with a dash.
	(mode-line-modified): Delete the final dash.

	* info.el (Info-set-mode-line): Add some spaces at the beginning.

	* term/x-win.el (mode-line-frame-identification):
	Set this, not mode-line-buffer-identification.

	* dired.el (dired-mode): Don't include `Dired:' in mode line.

	* term/x-win.el (mode-line-buffer-identification):
	Use a different value which omits `Emacs: '.

	* rmail.el (rmail-primary-inbox-list): Don't use backquote.

	* case-table.el (set-case-syntax-offset): New variable.
	(set-case-syntax-delims): Obey set-case-syntax-offset.
	(set-case-syntax-pair, set-case-syntax): Likewise.

	* iso-syntax.el: Handle multibyte characters
	using set-case-syntax-offset.
	
	* browse-url.el (browse-url-event-buffer):
	Function renamed from event-buffer.  Callers changed.
	(browse-url-event-point): Likewise.
	* browse-url.el: Don't include term.el.

1997-05-14  Erik Naggum  <erik@naggum.no>

	* server.el (server-kill-buffer): Only when there is a server process.

1997-05-14  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Synched customize with version 1.97.
	
	* cus-edit.el (windows): Move to environment.

	* wid-edit.el (widget-field-value-get): Add workaround for XEmacs
	bug with `buffer-substring-no-properties'.

	* wid-edit.el (widget-value-convert-widget): Don't convert :value
	here.

	* cus-edit.el (custom-buffer-create-internal): New kludge for
	making bib and eob read-only in XEmacs.

	* wid-edit.el: Also allow prompt when field value is invalid.

	* cus-edit.el (custom-redraw): Fix repositioning for when column
	is zero.

	* cus-edit.el (x): New group.

	* cus-edit.el (custom-variable-value-create): Remove unreferenced
	variable.
	* wid-edit.el (widget-field-action): Ditto.
	(widget-regexp-match): Ditto.

	* cus-edit.el (custom-variable-action): Don't update state if it
	is modified.

	* widget.el (:mouse-down-action): New keyword.
	* wid-edit.el (button-release-event-p): New function.
	(widget-keymap): Don't bind mouse up events.
	(widget-button-pressed-face): New face.
	(widget-button-click): Wait for up event, give feedback.
	(default): Use `:mouse-down-action'.
	(menu-choice): Ditto.
	(widget-choice-mouse-down-action): New function.
	(widget-info-link-action): Removed kludge to steal up event.
	* cus-edit.el (widget-magic-mouse-down-action): New function.
	(custom-magic-value-create): Use it.
	(custom-buffer-create-internal): Removed kludge to steal up event.

	* widget.el (:glyph-up, :glyph-down, :glyph-inactive): New
	keywords.
	* wid-edit.el (widget-glyph-insert-glyph): Support optional `down'
	and `inactive' glyphs.
	(widget-push-button-value-create): Ditto.
	(widget-glyph-click): New function.
	(widget-button1-click): Use it.
	(widget-button-click): Use it.

	* cus-edit.el (custom-buffer-create): Accept optional buffer NAME.
	(custom-buffer-create-other-window): ditto.
 	(customize, customize-other-window, customize-variable,
	customize-variable-other-window, customize-face,
	customize-face-other-window, customize-customized,
	customize-saved, customize-apropos, custom-face-menu-create,
	custom-variable-menu-create, boolean, custom-menu-create): Updated
	caller.

	* cus-edit.el (custom-variable-action): Reset magic state.
	(custom-variable-menu): Allow `Reset to Current' on `changed'
	items.

	* wid-edit.el (widget-choice-toggle): New option.
	(widget-choice-action): Use it.

	* cus-edit.el (custom-group-menu): Only test state to see if the
	item is enabled.

	* cus-face.el (custom-background-mode): Use `const', not
	`choice-item'.
	(custom-face-attributes): Use tags for toggling booleans, not the
	value.

	* wid-edit.el (character): Use `characterp' when available.

	* widget.el (:prompt-match): New keyword.
	(:prompt-history): New keyword.
	(:prompt-internal): New keyword.
	* wid-edit.el (widget-field-prompt-internal): New function.
	(widget-field-prompt-value): New function.
	(editable-field): Use them.
	(widget-field-action): Ditto.
	(widget-symbol-prompt-value-history): New variable.
	(widget-symbol-prompt-internal): New function.
	(symbol): Use them.
	(widget-variable-prompt-value-history): New variable.
	(variable): Use them.
	(widget-function-prompt-value-history): New variable.
	(function): Use them.

	* wid-edit.el (boolean): Use tag to toggle.
	(character, sexp, symbol, file, string): Inactive tag.

	* wid-edit.el (widget-choice-prompt-value): New function.
	(choice, radio): Use it.
	(widget-prompt-value): Prepend widget type to prompt.

	* wid-edit.el (widget-parent-action): Renamed from
	`widget-choice-item-action'.
	(choice-item): Updated widget.
	* cus-edit.el (custom-magic): Ditto.

	* wid-edit.el (widget-children-validate): Renamed from
	`widget-editable-list-validate'.
	(editable-list, group): Updated widgets.
	* cus-edit.el (custom, face): Ditto.

	* wid-edit.el (widget-value-value-get): Renamed from
	`widget-item-value-get'.
	(item): Updated widget.
	* cus-edit.el (face, custom): Ditto.

	* wid-edit.el (widget-value-convert-widget): Renamed from
	`widget-item-convert-widget'.
	(item, editable-field): Updated widgets.
	* cus-edit.el (face): Ditto.

1997-05-14  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* mailalias.el (expand-mail-aliases): Make interactive.  Doc fix.
	If interactive, beg to end is the region before mail-header-separator.
	Wrap body with save-excursion.  Add autoload cookie.

	* sendmail.el (mail-mode-map): Add separator to mail menu.
	Rearrange headers menu and add entry for expand-mail-aliases.

1997-05-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* levents.el (mouse-event-p, button-event-p): New functions.

1997-05-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* isearch.el (isearch-process-search-char): Use multibyte
	characters to represent themselves.

	* bindings.el: Make Latin-4 characters self-insert.
	Use aset to set up these char sets.

	* isearch.el (isearch-mode-map): Make Latin-4 characters
	something to search for.  Use aset to set up these char sets.

	* iso-transl.el (iso-transl-define-keys):
	Obey quoted-insert-character-offset.

1997-05-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bindings.el: Define Latin-1, Latin-2 and Latin-3
	chars as self-inserting.

	* loadup.el: Move bindings.el after mule-conf.el.

	* isearch.el (isearch-mode-map): Treat Latin-1, Latin-2 and Latin-3
	chars as printing characters.

	* iso-acc.el (iso-accents-compose): Return composed character
	directly for execution.

1997-05-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* autoload.el (defcustom): Add doc-string-elt property.
	(make-autoload): Convert defcustom into defvar.

	* Makefile (update-subdirs): New target.
	(updates): Do update-subdirs's job too.

	* finder.el (finder-compile-keywords-make-dist):
	Use the dirs specified on the command line.
	
	* cus-dep.el (custom-make-dependencies): Don't find the subdirs here;
	instead, use the dirs specified on the command line.

	* Makefile (autoloads, custom-deps, finder-data):
	Pass all "real" subdirs of lisp/ as args when rebuilding autoloads.
	(updates): New target, does all three of those.

1997-05-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* thingatpt.el (forward-whitespace, forward-symbol):
	Don't get error at end of buffer.
	(bounds-of-thing-at-point): Don't get confused when a motion
	function stops at end of buffer and there really isn't a thing.
	Avoid redundant repeated scans.

	* ange-ftp.el (ange-ftp-start-process): Create the buffer
	and set its mode, before starting the process.
	Set point in that buffer, and the process mark,
	(ange-ftp-gwp-start): Don't set the mode here.
	Move point to end of buffer.
	(internal-ange-ftp-mode): Don't move process-mark here.

	* loadup.el: Load mule and mule-conf before simple.

	* dired-aux.el (dired-collect-file-versions):
	Rename bv-length to backup-extract-version-start.

	* diff.el (diff-latest-backup-file):
	Rename bv-length to backup-extract-version-start.

	* files.el (backup-extract-version-start): New variable.
	(find-backup-file-namem, backup-extract-version):
	Rename bv-length to backup-extract-version-start.

	* files.el (auto-mode-alist): Shuffle a few elements,

	* files.el (file-relative-name): Bind the variable fname.

1997-05-10  Ken'ichi Handa  <handa@etl.go.jp>

	* characters.el: Set syntax and category for Devanagari, Thai, and
	Tibetan characters.  Add a category ?| to the category sets of
	characters of katakana-jisx0201 and japanese-jisx0212.

	* encoded-kb.el (encoded-kbd-mode): Doc-string modified.
	(encoded-kbd-select-terminal): The function deleted.
	(encoded-kbd-set-coding-system): New function.

	* faces.el (x-make-font-bold-italic): New function.

	* fontset.el (x-decompose-font-name): While seting each field of
	XLFD, set "*" instead of nil to a field which is omitted in the
	original font name.
	(generate-fontset-menu): Delete code for handling alias (or
	nickname). It is now handled in fontset-plain-name.
	(fontset-plain-name): Handle alias of fontset name, show more
	user-friendy names.
	(create-fontset-from-fontset-spec): Add an optional arg STYLE to
	create bold, italic, and bold-italic variants of a fonset.

	* gnus-mule.el: Moved to `gnus' subdirectory.

	* gnus/gnus-mule.el (gnus-mule-message-send-news-function): New
	function to encode text before sending by news.
	(gnus-mule-message-send-mail-function): New function to encode
	text before sending by mail.
	(gnus-mule-initialize): Add gnus-mule-message-send-news-function
	to the hook message-send-news-hook.  Add
	gnus-mule-message-send-mail-function to the hook
	message-send-mail-hook.

	* help.el (help-with-tutorial): Fix a bug of handling non-English
	tutorial file.

	* kinsoku.el: Set category of kinsoku-bol and kinsoku-eol for
	latin-jisx0201 and katakana-jisx0201 characters.

	* language/chinese.el: Make functions setup-LANGUAGE-environment
	interactive and add new functions describe-LANGUAGE-support for
	all LANGUAGEs supported.  Remove resisterations of input methods
	which use the function encoded-kbd-select-terminal.
	* language/cyrillic.el: Likewise.
	* language/devanagari.el: Likewise.
	* language/english.el: Likewise.
	* language/ethiopic.el: Likewise.
	* language/european.el: Likewise.
	* language/greek.el: Likewise.
	* language/hebrew.el: Likewise.
	* language/indian.el: Likewise.
	* language/japanese.el: Likewise.
	* language/korean.el: Likewise.
	* language/lao.el: Likewise.
	* language/thai.el: Likewise.
	* language/tibetan.el: Likewise.
	* language/vietnamese.el: Likewise.
	
	* language/chinese.el (pre-write-encode-hz): Make it work for the
	case the arg FROM is a string.
	(setup-chinese-cns-environemnt): Set default-input-method to
	quail-quich-cns.

	* language/devan-util.el (in-is13194-devanagari-post-read-conversion):
	New function.
	(in-is13194-devanagari-pre-write-conversion): New function.

	* language/devanagari.el: Change function of post-read-conversion
	and pre-write-conversion of coding system in-is13194-devanagari to
	in-is13194-devanagari-post-read-conversion and
	in-is13194-devanagari-pre-write-conversion respectively.
	Setting of syntax and category for Devanagari characters are moved
	to characters.el.

	* language/english (setup-english-environment): Set
	sendmail-coding-system and rmail-file-coding-system to nil.

	* language/ethio-util.el (fidel-to-tex-map): Name changed to
	ethio-fidel-to-tex-map.
	
	* language/european.el: Typo in comment fixed.

	* language/japanese.el (setup-japanese-environemnt): Set
	sendmail-coding-system and rmail-file-coding-system to
	'iso-2022-jp.

	* language/korean.el: Bug fixed in making coding system
	'iso-2022-kr.

	* language/thai-util.el (thai-pre-write-conversion): Make it work
	for the case the arg FROM is a string.

	* language/tibet-util.el (tibetan-pre-write-conversion): Likewise.

	* language/viet-util.el (viqr-pre-write-conversion): Likewize.

	* language/tibetan.el: Setting of syntax and category is moved to
	characters.el.

	* mule-cmds.el (build-describe-language-support-function,
	build-set-language-environment-function): The functions deleted.
	(set-language-info): Doc-string modified.  Chage handling of
	special keys describe-function and setup-function.
	(read-language-name): Return nil if a language specified doesn't
	have KEY.
	(current-input-method-title): Doc-string modified.
	(select-input-method): Set current-input-method to nil even if
	inactivation of the current input method failed.
	(set-language-environment): Doc-string modified.
	(describe-language-support): Doc-string modified.  Calls an
	appropriate function for each langauge.
	(describe-language-support-internal): New function.

	* mule-conf.el: Delete code for alternate-charset-table.
	Initialize standard-character-unification-table-for-read and
	standard-character-unification-table-for-write.
	Set coding-category-iso-8-2 and coding-category-iso-else to the
	coding system 'iso-8859-1 by default.

	* mule.el (make-char): Doc-string modified.
	(make-coding-system): Describe about INIT-BOL and DESIGNATION-BOL
	in doc-string.
	(find-new-buffer-file-coding-system): Doc-string modified.
	(make-unitication-table): New function.

	* quail.el (use-quail-package): Error message added.
	(quail-mode): Make sure to have quail-mode-map at the head of
	minor-mode-map-alist.

	* rmail.el (rmail-enable-decoding-message): New variable.
	(rmail-convert-file): Comment fixed.
	(rmail-revert): Don't decode RMAIL file again because the backup
	file is saved in Emacs' internal format.
	(rmail-convert-to-babyl-format): Check
	rmail-enable-decoding-message.

	* term/x-win.el: Create bold, italic, and bold-italic variants of
	default fontset.  Name a fontset created from user-specified ASCII
	font as "fontset-startup".

1997-05-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* iso-acc.el (iso-languages): For Latin-2, add ^I and ^i.  Fix ~a.

	* Makefile (custom-deps): Target renamed from cus-load.el.
	(finder-data): Target renamed from finder-inf.el
	(unlock, relock): Targets deleted.

	* simple.el (quoted-insert-character-offset): Initialize more cleanly.
	(quoted-insert): Don't offset codes above 377.

	* hexl.el: Add a `provide' call.
	Delete periods from many error messages.

	* subr.el (read-quoted-char): Don't mask down to 8 bits.

	* iso-acc.el (iso-languages): Add charset spec to some elements.
	(iso-accents-compose): Add iso-accents-insert-offset to the code.
	(iso-accents-insert-offset): New variable.
	(iso-accents-customize): Set iso-accents-insert-offset
	according to data from iso-languages.

1997-05-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* Makefile (lisptagsfiles): Look in all subdirs.

	* bytecomp.el (byte-compile-file-form-custom-declare-variable):
	New function.  Handle custom-declare-variables.
	* custom.el (defcustom): Get rid of eval-and-compile.
	The compiler should now handle custom-declare-variables on its own.

	* cus-edit.el (customize): Call customize-group.

	* simple.el (assoc-ignore-case): Downcase KEY as well as element cars.

	* bibtex.el (assoc-ignore-case): Function deleted.
	(bibtex-member-of-regexp): Renamed from member-of-regexp.
	Call changed.

	* timer.el (timer-event-handler): Take timer as arg directly.
	Don't bind a key in special-event-map.

1997-05-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* menu-bar.el (menu-bar-help-menu): Move "Customize" to the top.

	* lpr.el (printify-region): Doc fix.

	* dabbrev.el (dabbrev-case-replace, dabbrev-case-fold-search):
	Make these simple three-value choices.
	(dabbrev-completion): Handle dabbrev-case-fold-search
	and dabbrev-case-replace the new way.
	(dabbrev-expand, dabbrev--substitute-expansion): Likewise.

	* simple.el (forward-visible-line, end-of-visible-line):
	New functions.
	(kill-line): Use forward-visible-line and end-of-visible-line.

1997-05-07  Edward M Reingold  <emr@silver.wisdom.weizmann.ac.il>

	* cal-hebrew.el (holiday-passover-etc): Postpone date of Yom
	HaShoah to Monday if it falls on Sunday (as per ammendment passed
	by the Israeli Kenesset, May, 1997).

1997-05-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* outline.el (outline-mode): Autoload cookie added.
	(outline-minor-mode): Likewise.

	* ooutline.el (outline-mode): Autoload cookie deleted.
	(outline-minor-mode): Likewise.

	* outline.el: Use defgroup and defcustom.

	* ooutline.el: Renamed from outline.el.
	* outline.el: Renamed from noutline.el

	* server.el (server-buffer-done): New arg FOR-KILLING.
	(server-kill-buffer): New fn, to inform clients when buffer is killed.

	* cus-dep.el (custom-make-dependencies):
	Don't use NOSORT in directory-files.
	Don't actually visit the files.
	Use re-search to search contents fast.
	Search the subdirs of `lisp'.
	Bind kept-new-versions when saving.

1997-05-06  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* lazy-lock.el: Use sexp custom widget for non-nil non-t values.

	* ps-print.el (ps-left-header, ps-right-header): Quote :group name.

1997-05-05  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* byte-opt.el (byte-optimize-approx-equal): Use <=, not <.
	(byte-optimize-minus, byte-optimize-plus): Optimize adding
	or subtracting 1.

	* imenu.el (imenu-auto-rescan): Fix typo.

	* ffap.el (ffap-alist): Delete `math-mode'.
	Move all defvars and defuns out of this, to top level.
	Use a constant list as the initial value.
	(ffap-soft-value): Rewrite as a macro.
	And now it is used only at run time, not at load time.
	(ffap-ftp-default-user): Use just "anonymous" as default value.
	(ffap-what-domain): Don't set mail-extr-all-top-level-domains here.
	(ffap-newsgroup-regexp, ffap-newsgroup-heads): Move up past first use.
	(ffap-string-at-point-region): Likewise.

	* dunnet.el (dungeon-nil): Explicitly return nil.

	* mouse-sel.el (mouse-sel-get-selection-function):
	Look in x-last-selected-text if necessary.

	* vc.el: Doc fixes.

1997-05-05  Hrvoje Niksic  <hniksic@srce.hr>

	* time.el, gud.el, metamail.el, simple.el: Customize.
	* window.el, frame.el, menu-bar.el, lisp.el, fill.el: Customize.
	* files.el, replace.el, vc.el: Customize.

1997-05-05  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* term.el (term-mode): Add a mode-class property.

	* gud.el (gud-mode): Add a mode-class property.

	* ws-mode.el (wordstar-mode): Add a mode-class property.

	* hexl.el (hexl-mode): Add a mode-class property.

1997-05-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (set-auto-mode): New arg JUST-FROM-FILE-NAME.
	(hack-local-variables): New arg MODE-ONLY.
	(set-visited-file-name): Alter the major mode based on new file name.
	(change-major-mode-with-file-name): New variable.

	* replace.el (occur-mode): Add a mode-class property.

	* inf-lisp.el (inferior-lisp-mode): Add a mode-class property.

	* compile.el (compilation-mode): Add a mode-class property.

	* comint.el (comint-mode): Add a mode-class property.

	* ange-ftp.el (internal-ange-ftp-mode): Add a mode-class property.

	* edebug.el (edebug-eval-mode): Add a mode-class property.

	* ielm.el (inferior-emacs-lisp-mode): Add a mode-class property.

	* telnet.el (telnet-mode): Add a mode-class property.

	* rlogin.el (rlogin-mode): Add a mode-class property.

	* shell.el (shell-mode): Add a mode-class property.

	* simple.el (minibuffer-text-before-history): New variable.
	(minibuffer-history-initialize): New fn, on minibuffer-setup-hook.
	(next-history-element, previous-matching-history-element):
	Initialize minibuffer-text-before-history.
	(next-history-element): Use minibuffer-text-before-history
	as "position 0" of the history list.
	Use minibuffer-default as position -1, if it is non-nil.
	Simplify error logic for beginning and end of history.
	
	* simple.el (set-variable): Delete old definition (duplicate).

	* rmail.el (rmail-ignored-headers): Add References, Mime-Version,
	Lines, Content-Transfer-Encoding.

	* time.el (display-time-string-forms): Test display-time-day-and-date
	and display-time-24hr-format here.
	(display-time-format): Default value is now nil.

1997-05-04  Reingold Edward M  <emr@silver.wisdom.weizmann.ac.il>

	* list-holidays.el (list-holidays): Fix buffer title when list is
	nil.  Do save-excursion to keep from messing up calendar variables.
	Handle CHOICE = "" like CHOICE = "Ask".
	
	* cal-menu.el (cal-menu-list-holidays-following-year)
	(cal-menu-list-holidays-previous-year)
	(cal-menu-list-holidays-year): New commands.
	(calendar-mode-map): Put them in the holidays menu.

1997-05-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* vc-hooks.el (vc-find-cvs-master): Accept ...+ in a normal entry.

	* replace.el (occur): Doc fix.

1997-05-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-count-new-messages): Fix previous change.

	* replace.el (occur): If regexp has uppercase in it,
	match it case-sensitively.

	* ffap.el: Many doc fixes.
	(ffap-next): Fix message.

	* timezone.el (timezone-parse-date): Match forms 1 and 2 first.

1997-05-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* gnus/gnus-mule.el: Renamed from ./gnus-mule.el.

	* ispell.el (ispell-dictionary-alist-2): Specify syntax of ' in Danish.

1997-05-02  Hrvoje Niksic  <hniksic@srce.hr>

	* calendar.el: Customize.
	* appt.el, cal-china.el, cal-tex.el, diary-lib.el, solar.el: Likewise.
	* rmail.el, rmailout.el, rmailsum.el: Likewise.
	* compile.el, ffap.el, mouse.el, isearch.el: Likewise.
	* goto-addr.el, hippie-exp.el, icon.el, ielm.el, imenu.el: Likewise.
	
1997-05-02  Inge Frick  <inge@nada.kth.se>

	* compile.el:
	Support compilers that give a message each time the file being
 	compiled changes but don't include a file name each error message.
	Speed up by searching for regexps one by one instead of combining.
	(compile-internal): Takes more optional arguments.  All five regexp
 	alists can be given as argument.
  	Change name of variable regexp-alist to error-regexp-alist. Change
 	some local variables directly by setq instead of rebinding by let.
	(compilation-shell-minor-mode): New minor mode.
 	Similar to compilation-minor-mode, but key bindings don't
 	collide with shell mode.
  	(compilation-shell-minor-mode-map, compilation-shell-minor-mode):
 	New variables.
	(compile-auto-highlight): Doc fix.
 	(compilation-error-regexp-alist): Removed unnecessary line break
 	in first regexp.  Replaced \\(\\|.* on \\) by \\(.* on \\)? in
 	regexp for Absoft FORTRAN 77 Compiler 3.1.3.  Added regexp for
 	SPARCcompiler Pascal.  Divided long line in regexp for Cray C
 	compiler error messages.  Made comment fit in line at regexp for
 	Sun Ada (VADS, Solaris).  FILE-IDX may be nil, meaning an
 	error message with no file name, so the file name must be taken
 	from an earlier message.  LINE-IDX may be a function which is
 	called with two arguments the file name and column strings and
 	returns an error position descriptor.
	(compilation-enter-directory-regexp-alist)
	(compilation-leave-directory-regexp-alist): New variables.
	(compilation-file-regexp-alist)
	(compilation-nomessage-regexp-alist): New variables.
	(grep-regexp-alist): Removed unnecessary ^ at beginning of regexp.
	(compilation-enter-directory-regexp)
	(compilation-leave-directory-regexp): Variables deleted.
	Replaced by compilation-enter-directory-regexp-alist and
	compilation-leave-directory-regexp-alist.
  	(compilation-buffer-p): Return true also for buffer in
 	compilation-shell-minor-mode.
	(compilation-next-error-locus): Split a long line.
	(count-regexp-groupings): Comment about this function not being
	needed any more.
	(compilation-current-file, compilation-regexps); New variables.
	(compilation-parse-errors): Large parts rewritten.  Don't put the
 	regexps together in one large regexp, instead match them one by one.
	Support the generalized subexpression indices.
	(compile-collect-regexps, compile-buffer-substring): New functions
	supporting compilation-parse-errors.
	
1997-05-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* iswitchb.el (iswitchb-entryfn-p): Use memq, not member.

1997-05-01  Stephen Eglen  <stephene@cogs.susx.ac.uk>

	* iswitchb.el (iswitchb-visit-buffer): Handle `display' alternative.
	(iswitchb-default-keybindings): Define C-x 4 C-o.
	(iswitchb-display-buffer): New function.
	(iswitchb-entryfn-p): Include iswitchb-display-buffer.
	(iswitchb-method, iswitchb-default-method): Doc fixes.

1997-05-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* menu-bar.el (menu-bar-custom-menu):
	New item `Browse All Customization'.
	Rename and shuffle other items.
	`Specify Group...' is now customize-group.

	* cus-edit.el: Say "standard settings" instead of "factory settings".

	* cus-edit.el (custom-group-magic-alist): New variable.
	(custom-group-state-update): Use custom-group-magic-alist.
	(customize-group): Renamed from `customize',
	and rename argument to GROUP.
	(customize): New function.

	* simple.el (set-variable): Simplify previous change.

	* subr.el (make-syntax-table): Doc fix.

1997-04-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cc-mode.el (c-fill-paragraph): If fill-prefix is already non-nil,
	use it.

	* subr.el (shell-quote-argument): Quote null string usefully.

	* simple.el (set-variable): Check VALUE against type info if available.
	Don't evaluate VALUE.
	Use a separate history list for the values.
	
1997-04-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* time-stamp.el (time-stamp-old-format-warn): Fix a tag string.
	(time-stamp-format): Use %Y not %y in default value.

	* crisp.el (crisp-load-scroll-all): Renamed from ...-lock.
	(crisp-mode): Use scroll-all... not scroll-lock...

	* scroll-all.el: Renamed from scroll-lock.el.
	All functions renamed.
	(scroll-all-mode): Variable renamed from is-scroll-lock.

1997-04-29  Geoff Voelker  <voelker@cs.washington.edu>

	* edt.el (edt-emulation-on): Load edt-pc.el under Windows.

1997-04-29  Stephen Gildea  <gildea@intouchsys.com>

	* time-stamp.el (time-stamp): Verify time-stamp-line-limit is a number.
	(time-stamp-string-preprocess): Handle %F correctly.

1997-04-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-msgref-vector): New variable.
	Holds, for each message, a cons cell which contains the message number
	and which relocates if the message number changes.
	(rmail-forget-messages): Clear rmail-msgref-vector.
	(rmail-variables): Make rmail-msgref-vector buffer-local.
	(rmail-count-new-messages): Extend rmail-msgref-vector.
	(rmail-set-message-counters): Initialize rmail-msgref-vector.
	(rmail-only-expunge): Update rmail-msgref-vector.
	Don't look for mail-mode buffers specially.
	(rmail-reply): Use rmail-msgref-vector element as arg.
	(rmail-forward, rmail-retry-failure): Likewise.
	(rmail-mark-message): Accept an element of rmail-mark-message as arg.

	* mh-comp.el (mh-smail-batch): Accpt &rest arg `ignored'.

	* bindings.el: Bind C-x m, C-x 4 m, C-x 5 m to compose-mail...

	* simple.el (compose-mail): Make prefix arg mean "continue".
	(compose-mail-other-window, compose-mail-other-frame): New commands.

	* sendmail.el: Don't bind C-x m, C-x 4 m, C-x 5 m.

	* autoload.el (generated-autoload-file): Change defconst to defvar.

1997-04-28  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* font-lock.el: Respect font-lock-face-attributes if set.
	Define fast-lock and lazy-lock groups here to ensure group order.

	* fast-lock.el: Moved defgroup to font-lock.el.

	* lazy-lock.el: Moved defgroup to font-lock.el.

	* ps-print.el: Use buffer-substring-no-properties not buffer-substring.

1997-04-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ange-ftp.el (ange-ftp-file-entry-p): If ange-ftp-get-files returns
	nil, don't try ange-ftp-hash-entry-exists-p, just give up.

	* comint.el (comint-input-face): Deleted.

	* compile.el (compilation-error-regexp-alist): Add regexp for Perl -w.

	* vc-hooks.el (vc-master-templates): Doc fix.

1997-04-27  Dave Love  <d.love@dl.ac.uk>

	* scheme.el (dsssl-sgml-declaration): Doc fix.
	(dsssl-mode): Use stringp to check dsssl-sgml-declaration.
	(style, root): Put scheme-indent-function 1.
	(dsssl-font-lock-keywords): Use make-regexp version.

1997-04-27  Ron Schnell  <ronnie@twitch.mit.edu>

	* dunnet.el (dun-special-object):
	Floppy disk will melt in inventory or room, regardless
	of whether or not Stallman statuette is around.

	* dunnet.el (dun-examine):
	You can examine objects in the jar without taking them out.

	* dunnet.el (dun-take):
	You can take objects from the jar while you are on the bus.

	* dunnet.el (dun-dig):
	Message from digging on the bus is the same as when you dig and don't
	find anything.

	* dunnet.el (dun-climb):
	No longer errors out of the game when argument to "climb" is invalid.

	* dunnet.el (dun-put):
	You can now put things in the jar, even if you are on the bus.

	* dunnet.el (dun-special-move):
	"In" or "Out" command tells you if you are already on or off the bus.

	* dunnet.el (dun-sauna-heat):
	Changed "begin to sweat" to "are perspiring"
	so that it makes sense whether you are heating up or cooling down.

	* dunnet.el (dun-help):
	Changed author e-mail address, added web page.
	Added hint for batch mode.

	* dunnet.el (*global*):
	Fixed spelling of Presely in global object list.

	* dunnet.el (*global*):
	Added coconuts, tank, and lake as objects that are recognized.

	* dunnet.el (*global*):
	Added `slip' as another way of describing the paper,
	and `chip' as another way of describing the CPU.

	* dunnet.el (*global*):
	Upcase  abbreviations of directions in room descriptions.

	* dunnet.el (dun-login):
	Fixed erroneous login message to better-describe ftp limitations.

	* dunnet.el (dun-rlogin):
	Added error message if user tries to rlogin back to pokey.

	* dunnet.el (dun-load-d):
	Fixed so that if restore file isn't found which in non-batch mode,
	window will switch back to game.

1997-04-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* custom.el (custom-declare-variable): Don't use `push'.

1997-04-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* paragraphs.el (forward-paragraph): Fix editing error
	in the updating of paragraph-separate.

1997-04-26  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-face.el (custom-face-attributes): Made the tag a button
	on booleans.
	Changed version number.
	
1997-04-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (quoted-insert-character-offset): New variable.
	(quoted-insert): Convert characters 0200 - 0377 to 04200 - 04377,
	so that users get the same results they are used to.

1997-04-26  Edward M Reingold  <emr@silver.wisdom.weizmann.ac.il>

	* cal-french.el (calendar-print-french-date): Label
	French date in echo area.

	* cal-coptic.el (calendar-print-coptic-date): Label
	Coptic/Ethiopic date in echo area.

1997-04-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-reply): Pass Rmail buffer and msgnum
	as arguments within the mail-send action.
	(rmail-forward, rmail-retry-failure): Likewise.
	(rmail-mark-message): New function.
	(rmail-only-expunge): Update the new kind of action.
	(rmail-send-actions-rmail-msg-number)
	(rmail-send-actions-rmail-buffer): Variables no longer used.

1997-04-25  Per Abrahamsen  <abraham@dina.kvl.dk>

	* apropos.el (apropos): Add support for customization groups.
	(apropos-print): Ditto.

	* faces.el (describe-face): Add documentation.

1997-04-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* facemenu.el (facemenu-add-new-face): Rewrite to give each
	lambda expression a doc string.

1997-04-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* buff-menu.el (buffer-menu): Use pop-to-buffer.
	(same-window-buffer-names): Add "*Buffer List*".

	* cal-menu.el: Delete all menu-enable properties.
	They ran slowly and sometimes got errors.

1997-04-24  Francesco Potorti`  <F.Potorti@cnuce.cnr.it>

	* skeleton.el (skeleton-read): Doc fix.

1997-04-24  Per Abrahamsen <abraham@dina.kvl.dk>

	* widget.el (define-widget): Return name.

	* cus-edit.el: (custom-set-value): New command.
	(custom-set-variable): New command.
	(customize-saved): Renamed from `customize-customized'.
	(customize-customized): New command.
	(custom-save-customized): New command.

	* widget.el (:prompt-value): New keyword.

	* wid-edit.el (widget-prompt-value): New function.
	(default): Use it.
	(widget-default-prompt-value): New function.
	(const): Use it.
	(widget-const-prompt-value): New function.
	(string): Use it.
	(widget-string-prompt-value-history): New variable.
	(widget-string-prompt-value): New function.
	(file): Use it.
	(widget-file-prompt-value): New function.
	(sexp): Use it.
	(widget-sexp-prompt-value-history): New variable.
	(widget-sexp-prompt-value): New function.
	(boolean): Use it.
	(widget-boolean-prompt-value): New function.

	* cus-edit.el (custom-variable-prompt): Limit completion to user
	options.  Allow non-match input.

	* wid-edit.el (character): Give error if the length of the field
	isn't exactly 1.

	* wid-edit.el (widget-regexp-validate): New function.
	(regexp): Use it.
	(widget-regexp-match): New function.
	(regexp): Use it.
	
	* cus-edit.el (custom-variable-action): Use `custom-toggle-hide'.
	(custom-face-action): Ditto.
	(custom-group-action): Ditto.

	* cus-edit.el (custom-toggle-hide): New function.
	(custom-level-action): Use it.
	(custom-group-menu): Ditto.
	(custom-face-menu): Ditto.
	(custom-variable-menu): Ditto.

	* cus-edit.el (custom-redraw): Goto old line and column instead of
	old character position.  This is more tolerant for changes.

	* wid-edit.el (widget-choice-action): Only notify parent if
	something was chosen.

	* custom.el (custom-declare-group): Make sure initial members
	aren't duplicated even if the `defgroup' is evaluated twice.

	* wid-browse.el (widget-minor-mode): New variable and command.
	(widget-minor-mode-map): New variable.
	Add to `'minor-mode-alist' and `minor-mode-map-alist'.

	* wid-edit.el (widget-specify-inactive): Set priority.

	* wid-edit.el (widget-move): Skip inactive widgets.

	* cus-edit.el (custom-display-unselected-match): Matched too many
	displays.

	* wid-edit.el (widget-field-face): Changed default background
	color.

	* custom.el (custom-declare-variable): Set `custom-get' the right
	place.

	* cus-edit.el (custom-magic): Don't notify the parent.

	* custom.el (custom-initialize-set): New function.
	(custom-initialize-reset): New function.
	(custom-initialize-changed): New function.
	(custom-declare-variable): Use `custom-initialize-set' as
	default for `:initialize'.

	* cus-edit.el (custom-save-variables): Save :require symbols.

	* custom.el (:initialize, :set, :get, :request): New keywords.
	(custom-declare-variable): Support them.
	(custom-set-variables): Ditto.
	(defcustom): Document them.
	(custom-initialize-default): New function.
	* cus-edit.el (custom-variable-value-create): Support them.
	(custom-variable-set): Ditto.
	(custom-variable-save): Ditto.
	(custom-variable-reset-saved): Ditto.
	(custom-variable-reset-factory): Ditto.
	(custom-variable-state-set): Ditto.

	* cus-edit.el (custom-menu-filter): New function.
	(custom-variable-menu): New format.
	(custom-variable-action): Use it.
	(custom-face-menu): New format.
	(custom-face-action): Use it.
	(custom-group-menu): New format.
	(custom-group-action): Use it.

	* wid-edit.el (widget-choose): Accept unselectable items.

	* wid-edit.el (widget-default-create): Clear undo buffer.
	(widget-default-delete): Ditto.

	* cus-edit.el (customize-other-window): New function.

	* wid-edit.el (widget-info-link-action): Steal mouse up event.

	* wid-edit.el (widget-specify-insert): Use old style backquote.
	
1997-04-23  Geoff Voelker  <voelker@cs.washington.edu>

	* w32-fns.el (w32-using-nt, w32-shell-name, w32-using-system-shell-p,
	w32-startup): New functions.
	(w32-system-shells): New variable.

1997-04-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* find-file.el: Fix messages.

	* sgml-mode.el: Many doc fixes.
	
1997-04-23  Francesco Potorti`  <F.Potorti@cnuce.cnr.it>

	* sgml-mode.el (sgml-value): Use 'identity as default value.
	(sgml-mode): Doc fix.
	(sgml-name-8bit-mode): Tell the user if set or reset.
	(sgml-tag): Doc fix.
	(sgml-tag): Protect "&lt;" from skeleton-transformation.
	(sgml-attributes): Doc fix.
	(sgml-attributes): Square brackets removed from prompt.
	(sgml-attributes): Arg ALIST renamed to TAG.
	(sgml-attributes): Apply skeleton-transformation when necessary.
	(sgml-value): Doc added.
	(sgml-value): Square brackets removed from prompt.
	(html-tag-alist): New variable 1-7, variable `list' changed.
	(html-tag-alist)<dir>, <menu>: Use new value of `list'.
	(html-tag-alist)<font>: Fixed (doc of sgml-tag-alist needs fixing).
	(html-tag-alist)<ol>, <ul>: Fixed.
	(html-tag-alist)<fn>: Commented out.

	* skeleton.el (define-skeleton): Doc fix.

1997-04-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* compare-w.el (compare-windows): Allow windows on different frames.

1997-04-23  Ken'ichi Handa  <handa@etl.go.jp>

	* mule-conf.el: Re-arrange priorities of coding categories.

1997-04-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ispell.el (ispell-overlay-window): Bind frame-override-unsplittable.

	* rcompile.el (remote-compile): Make comint-file-name-prefix local
	in the compilation buffer.

	* bindings.el (debug-ignored-errors): Update the regexps for
	the dabbrev error messages

	* fast-lock.el: Delete setting of byte-compile-dynamic,
	byte-compile-dynamic-docstrings and byte-optimize.
	(fast-lock-save-facep, save-buffer-state): Move defmacros to top level.

	* lazy-lock.el: Delete setting of byte-compile-dynamic,
	byte-compile-dynamic-docstrings and byte-optimize.
	(with-current-buffer): Duplicate definition deleted.
	(save-buffer-state, do-while): Move defmacros to top level.

	* wid-edit.el: Use copy-sequence, not copy-list.
	Use cl only at compile time.

	* cus-edit.el (custom-variable-type): Use copy-sequence, not copy-list.

	* octave-mod.el (inferior-octave-output-list): Declare here
	to avoid compiler warnings.
	(inferior-octave-output-string): Likewise.
	(inferior-octave-receive-in-progress): Likewise.

	* modula2.el (m2-end-comment-column): New defvar.
	(modula-2-mode, m2-end-comment): Use m2-end-comment-column
	instead of end-comment-column.
	(m2-compile, m2-link): Don't set `modulename',

	* sh-script.el (sh-case): Make this a simple define-skeleton
	as it was originally.  Don't add a menu-enable property.
	(sh-assignment-regexp): Renamed from sh-assignment-prefix
	undoing a renaming made by mistake.

	* sgml-mode.el (sgml-transformation): Fix previous change.

1997-04-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* custom.el (custom-declare-variable):
	Use copy-sequence, not copy-list.

	* vc-hooks.el (vc-find-cvs-master): Handle a "New file!" entry.
	(vc-fetch-master-properties): Match "New file!".

	* elp.el (elp-report-limit): Change prompt string.
	(elp-version): Incremented.

	* mule-cmds.el (mule-keymap): Add C-x RET C-\ for select-input-method.

	* files.el (recover-file): Fix error message.

1997-04-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cus-edit.el (custom-face-set): Don't copy an empty face,
	just call custom-face-display-set.
	(custom-face-reset-saved, custom-face-save, custom-face-reset-factory):
	Likewise.
	(custom-face-display-set): Define this here.
	(custom-display-match-frame): Define here.

	* cus-face.el: Major simplification; most of file contents deleted.
	factory-face property renamed to face-defface-spec.
	
	* faces.el (frame-set-background-mode): New function.
	(frame-background-mode): New variable.
	(x-create-frame-with-faces): Rearrangement of order of font
	processing.  Handle custom-faces here.
	(face-doc-string, set-face-doc-string): New functions.
	(set-face-bold-p, set-face-italic-p): New functions.
	(face-bold-p, face-italic-p): New function.
	(face-spec-set, face-spec-set-1, face-spec-set-match-display):
	New functions.

	* frame.el (make-frame): Don't call custom-initialize-frame.

	* texnfo-upd.el (texinfo-master-menu-header): Delete newline at start.
	(texinfo-insert-master-menu-list): Add @detailmenu and
	@end detailmenu commands.

1997-04-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* skeleton.el (skeleton-read): Fix previous change.

	* simple.el (transient-mark-mode): Print message if used interactively.

	* sendmail.el (mail-attach-file): New function.
	(mail-mode-map): Add mail-attach-file on C-c C-i.

1997-04-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* facemenu.el (facemenu-update): Don't make global bindings here.
	Make them at top level.
	(facemenu-key): Variable deleted.
	(facemenu-keybindings, facemenu-new-faces-at-end)
	(facemenu-unlisted-faces, facemenu-remove-face-function): Doc fixes.

	* sh-script.el: Remove all menu-enable properties
	except for sh-case.

1997-04-17  Francesco Potorti`  <F.Potorti@cnuce.cnr.it>

	* sgml-mode.el (sgml-name-char): Ask user with a prompt.

1997-04-16  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* font-lock.el: Customise.
	(font-lock-defaults-alist): Leave ~ syntax alone in C++.
	(font-lock-match-c++-style-declaration-item-and-skip-to-next): Match ~
	characters here.
	(font-lock-fontify-syntactically-region): Clean code.
	(font-lock-defaults-alist): Don't set font-lock-comment-start-regexp,
	as font-lock-fontify-syntactically-region doesn't use it anymore.
	(font-lock-comment-start-regexp): Delete variable.
	(font-lock-set-defaults): Define variable if not bound.
	(font-lock-compile-keywords): Don't set font-lock-keywords.
	(font-lock-fontify-keywords-region): Set it here.

	* fast-lock.el: Customise.
	(fast-lock-cache-data): Simplify calls of font-lock-compile-keywords.

	* lazy-lock.el: Customise.
	(lazy-lock-fontify-conservatively): Fontify around WINDOW's point.

	* shell.el (shell-font-lock-keywords): Use EVAL form for prompt.

	* modula2.el (modula-2-mode): Set font-lock-defaults.
	(m2-font-lock-keywords):
	(m2-font-lock-keywords-1, m2-font-lock-keywords-2):
	(m3-font-lock-keywords):
	(m3-font-lock-keywords-1, m3-font-lock-keywords-2): New variables.

1997-04-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* skeleton.el (skeleton-insert): Rename the function's argument
	to `regions', and bind `skeleton-regions' with let.
	(skeleton-read): Rename arg STR to PROMPT.

	* sendmail.el (sendmail-send-it): Use quoted-printable encoding
	for the From field.

	* sgml-mode.el (sgml-value): Don't perform the skeleton-transformation
	on the value.

1997-04-15  Andrew Innes  <andrewi@harlequin.co.uk>

	* hilit19.el (hilit-rehighlight-message): Respect mail-mode
	header/body separation line.

1997-04-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmailsum.el (rmail-summary-delete-forward): Argument is now
	a repeat count.
	(rmail-summary-delete-backward): Corresponding changes.

	* sh-script.el (sh-while-getopts): Don't add menu-enable property.

1997-04-15  Hrvoje Niksic  <hniksic@srce.hr>

	* saveplace.el: Add defgroup; use defcustom for user vars.
	* pascal.el, supercite.el: Likewise.
	
1997-04-15  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-dep.el (custom-make-dependencies): Add `provide' to generated
	file.

1997-04-15  Eli Zaretskii  <eliz@wombat.gnu.ai.mit.edu>

	* term/pc-win.el (x-select-enable-clipboard): New variable.
	(x-select-text, x-get-selection-value): New functions, support for
	MS-Windows clipboard.

1997-04-15  Per Abrahamsen  <abraham@dina.kvl.dk>

	* cus-start.el: Add support for face documentation.

	* cus-dep.el (custom-make-dependencies): Fixed generation of
	parens.
	Fixed message.

1997-04-15  Noah Friedman  <friedman@prep.ai.mit.edu>

	* rlogin.el (rlogin-process-connection-type): Default to t
	for solaris 2.x.

1997-04-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (overwrite-mode-binary, overwrite-mode-textual):
	Use defvar.

	* pascal.el (pascal-mode): Set comment-start.

	* winner.el: New file.

1997-04-14  Francesco Potorti  <F.Potorti@cnuce.cnr.it>

	* sgml-mode.el (sgml-char-names): Change ensp to nbsp.

1997-04-14  Ilya Zakharevich  <ilya@math.ohio-state.edu>

	* font-lock.el (font-lock-fontify-syntactically-region): Use new
	features of parse-partial-sexp instead of doing regexp search.

1997-04-14  Steven L Baur  <steve@altair.xemacs.org>

	* edebug.el (edebug-read-and-maybe-wrap-form): Protect
	against pathological recursive calls.

1997-04-14  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* timer.el (timer-until): Fix syntax error.
	* browse-url.el (browse-url-browser-function): Fix syntax error.

1997-04-14  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* frame.el (frame-parameter): Doc fix.

1997-04-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* timer.el (timer-until): New function.
	(timer-max-repeats): New variable.
	(timer-event-handler): Avoid rerunning a timer many times
	if real time has "jumped" forward.

	* uce.el, vcursor.el: New files.

	* sgml-mode.el (sgml-tag): Use intangible here.
	(sgml-tags-invisible): Don't add intangible property
	separately here.  Just the category property is enough.
	Eliminate local variable `point'.
	Bind inhibit-point-motion-hooks.
	
1997-04-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* custom.el: Doc fixes.

	* jka-compr.el (jka-compr-temp-name-template): Fix editing error.

	* ps-print.el (ps-print-color-p): Fix minor error.

	* dired.el (dired-internal-noselect): When setting default-directory,
	don't check file-name-directory.

	* subr.el (kbd): New macro.

	* sgml-mode.el (sgml-mode-facemenu-add-face-function): New function.
	(sgml-mode-common): Use that function for the hook value.
	
	* dired.el (dired-noselect): Avoid calling file-directory-p
	when the initial argument was syntactically a directory name.

1997-04-13  Hrvoje Niksic  <hniksic@srce.hr>

	* time-stamp.el: Add defgroup; use defcustom for user vars.
	* eldoc.el: Likewise.

1997-04-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* loadup.el: Load cus-start.
	Don't insist that bindings.el not be compiled.

	* mail-utils.el (mail-quote-printable, mail-unquote-printable)
	(mail-unquote-printable-hexdigit): New functions.

	* elp.el (elp-functionp): Definitions deleted; use functionp.

	* subr.el (functionp): New function.

1997-04-12  Dave Love  <d.love@dl.ac.uk>

	* files.el (auto-mode-alist): Add .dsl and .dsssl for dsssl-mode.

1997-04-12  Barry A. Warsaw  <bwarsaw@cnri.reston.va.us>

	* Public release 2.39

	* elp.el (elp-functionp): New function.

	* elp.el (elp-instrument-package): Don't attempt to instrument autoload
	functions.

	(elp-elapsed-time): New function to calculate the different between
	two `current-time' lists.  This no longer throws away the top 16 bits
	of information.

	(elp-wrapper): Use elp-elapsed-time instead of elp-get-time.  Also,
	call `current-time' as close to the function entrance and exit as
	possible so more of the overhead is eliminated from the times.

	(elp-get-time): Obsolete, deleted.

	* elp.el (elp-restore-function):
	When restoring, do not check assq elp-wrapper
	if the symbol-function is a compiled lisp function (i.e. byte coded).
	If it is byte-coded, it could not have been instrumented.
	Don't do the symbol-function restoration if
	the symbol has no function definition.

	* elp.el (elp-instrument-function): Always `restore' the funsym before
	instrumenting.
	Fail if function is an autoload symbol.

	* elp.el (elp-instrument-list): Remove unnecessary condition-case.

	* elp.el (elp-results):
	Noninteractive as a function is non-portable, use the
	variable instead.  buffer-substring with 3 arguments is non-portable.

	* elp.el (elp-instrument-function, elp-instrument-list):
	Handle function symbols that have already been instrumented.  Do
	not instrument them twice.

	* elp.el (elp-recycle-buffers-p): New variable.

	* elp.el (elp-report-limit, elp-sort-by-function): New default values.

	* elp.el (elp-use-standard-output): New variable.

	(elp-results): Optionally dump results to standard-output.

1997-04-12  Per Abrahamsen  <abraham@dina.kvl.dk>

	* apropos.el (apropos): Add support for faces, widgets, and user
	options.
	(apropos-print): Ditto.

	* cus-edit.el (abbrev-mode, alloc, undo, modeline, fill,
	editing-basics, display, execute, installation, dired, limits,
	debug, minibuffer, keyboard, mouse, menu, auto-save,
	processes-basics, windows): New customization groups.

	* cus-start.el: New file.

	* cus-face.el (custom-face-font-size): Don't assume integral
	number.

	* cus-edit.el (custom-menu-create): Don't allow optional `NAME'.
	(customize-menu-create): Do allow optional name.

	* custom.el (custom-set-variables): Add warning for old format.

	* cus-edit.el (custom-variable-set): Use `set-default' instead of
	`set'.
	(custom-variable-save): Ditto.
	(custom-variable-reset-saved): Ditto.
	(custom-variable-reset-factory): Ditto.

	* cus-edit.el (customize-face-other-window): New function.

	* wid-browse.el (widget-browse-mode-customize-menu): New menu.
	(widget-browse-mode): Add it.
	(widget-browse-mode-map): Bind `q'.

	* wid-browse.el (widget-browse-other-window): New function.

	* cus-edit.el (customize-menu-create): New function.
	(custom-mode-customize-menu): Use it.

	* cus-edit.el (custom-make-dependencies): Deleted function.

	* cus-edit.el (customize-face): Sort faces.

	* cus-edit.el (custom-faces): New group.
	(custom-magic-alist): Added.
	(custom-variable-sample-face): Added.
	(custom-variable-button-face): Added.
	(custom-face-tag-face): Added.
	(custom-group-tag-faces): Added.
	(custom-group-tag-face): Added.
	(customize): Removed from faces group.

	* cus-edit.el (custom-load-recursion): New variable.
	(custom-load-symbol): Use it.
	(custom-mode-customize-menu): New menu.
	(custom-mode): Use it.
	Code moved to te end of the file.

	* cus-edit.el (custom-buffer-create-internal): Split out from
	`custom-buffer-create'.
	(custom-buffer-create-other-window): New function.

	* cus-edit.el (custom-guess-name-alist): Renamed from
	`custom-guess-type-alist'.
	(custom-guess-doc-alist): New option.
	(custom-guess-type): Use them.

	* cus-face.el (set-face-stipple): Removed Kyle Jones code.

	* cus-face.el (face-doc-string): Changed property name to
	`face-documentation'.
	(set-face-doc-string): Ditto.

	* cus-edit.el (custom-unlispify-menu-entry): Strip terminating
	`-p' off booleans.

	* cus-edit.el (custom-save-faces): Make sure `default' is saved first.

	* wid-edit.el (widget-vector-match): Pass arguments to
 	`widget-apply' in the correct order.

	* custom.el (custom-define-hook): Change to defvar.
	* cus-edit.el (custom-define-hook): Add customization support.

	* cus-edit.el (custom-menu-update): Don't autoload.
	(custom-menu-reset): Move here from `custom.el'.
	Remove XEmacs support.
	(custom-help-menu): Move here from `custom.el'.
	Remove XEmacs support.
	(custom-menu-create): Work even if `custom-menu-nesting' is
	unbound.
	(custom-menu-nesting): Don't define for XEmacs.

	* cus-face.el (after-make-frame-hook): Removed
 	`custom-initialize-frame', as this is now in `frame.el'.

	* cus-edit.el (custom-guess-type-alist): New option.
	(custom-guess-type): New function.
	(custom-variable-type): New function.
	(custom-variable-value-create): Use it.

	* cus-face.el (custom-face-attributes): Moved :family to the
	beginning of the list.
	(custom-face-attributes): Added :strikethru attribute.

	* custom.el (custom-set-variables): If variable is already set,
	overwrite it here.
	(custom-declare-variable): Do not set saved variables, if they
	already are bound.
	(custom-declare-variable): Clear the `force-value' flag if set.

	* widget.el (:text-format): New keyword.
	* wid-edit.el (push-button): Define it.
	(widget-push-button-value-create): Use it.
	* widget.texi (push-button): Documented it.

1997-04-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bookmark.el (bookmark, bookmark-use-annotations)
	(bookmark-save-flag, bookmark-save-flag): Doc fixes.
	
	* scheme.el (make): Add scheme-indent-function property.

	* Makefile (finder-inf.el, autoloads): New targets.
	(cus-load.el): Minor simplification.

1997-04-11  Hrvoje Niksic  <hniksic@srce.hr>

	* add-log.el, avoid.el, bookmark.el, cl-indent.el, cmacexp.el:
	* comint.el, completion.el, dabbrev.el, desktop.el, edebug.el:
	* enriched.el, executable.el, f90.el, fast-lock.el, fortran.el:
	* hexl.el, jka-compr.el, lpr.el, makeinfo.el, man.el:
	* mh-comp.el, mh-e.el, mh-utils.el, outline.el, page-ext.el:
	* prolog.el, ps-print.el, rcompile.el, rlogin.el, rsz-mini.el:
	* sgml-mode.el, sh-script.el, shell.el, smtpmail.el:
	* term.el, tex-mode.el, texinfo.el, two-column.el, uniquify.el:
	Add defgroup's; use defcustom for user vars.
	
1997-04-11  Dave Love  <d.love@dl.ac.uk>

	* vc.el (vc-update-change-log): Run `rcs2log' in the correct
	directory when ChangeLog is found elsewhere.  Display any error
	output from rcs2log.

1997-04-11  Per Abrahamsen  <abraham@dina.kvl.dk>

	* Makefile (cus-load.el): New target.

	* cus-dep.el: New file.

1997-04-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* server.el (server-done): If buffer visits no file, don't offer save.

	* holidays.el (list-holidays): Add autoload cookie.

	* cus-face.el: Don't add custom-initialize-frame to
	after-make-frame-hook.

	* frame.el (make-frame): Call custom-initialize-frame
	only if cus-face is loaded.

	* sendmail.el (mail-do-fcc): After appending to a buffer,
	offer to save it.  Or if the buffer matched the file,
	append to the file too.

1997-04-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (file-relative-name): Expand both args before
	checking for device mismatch.

	* scroll-lock.el: New file.

	* crisp.el: New file.

	* cus-face.el (custom-initialize-frame): Add autoload cookie.

	* faces.el (make-face): New arg no-resources.
	(make-empty-face): New function.

	* frame.el (frame-parameter): New function.

	* simple.el (keyboard-escape-quit): Exit recursive edits,
	and switch away from buffers whose names start with space.

1997-04-10  Ed Reingold  <emr@silver.wisdom.weizmann.ac.il>

	* holidays.el (list-holidays): New function.

	* cal-julian.el (diary-astro-day-number): Change format string.

	* cal-french.el (diary-french-date): Use `date'.
	Add  some additional text at the end.

	* cal-persia.el (diary-persian-date): Use `date'.
	Add  some additional text at the end.

	* cal-coptic.el (diary-coptic-date): Use `date'.
	If calendar-coptic-date-string gives nonempty string,
	add additional text to it.
	
	* cal-islam.el (diary-islamic-date): Use `date'.

1997-04-10  Hrvoje Niksic  <hniksic@srce.hr>

	* ispell.el: Use defcustom for user variables.

1997-04-10  Dave Love  <d.love@dl.ac.uk>

	* scheme.el: Add DSSSL mode and share code with newly required
	lisp-mode as much as possible.
  	(scheme-mode-variables): Copy filling stuff from lisp-mode.
	Add an outline-regexp.
  	(scheme-mode-map): Inherit shared-lisp-mode-map and provide a menu.
  	(dsssl-sgml-declaration): New variable.
  	(dsssl-mode): New command.
  	(dsssl-font-lock-keywords): New variable.
  	(scheme-indent-function): Near copy of lisp-indent-function.
  	(scheme-comment-indent, scheme-indent-offset,
 	scheme-indent-function, scheme-indent-line,
 	calculate-scheme-indent, scheme-indent-specform,
 	scheme-indent-defform, scheme-indent-sexp): Removed; use lisp-mode
 	equivalents.
	(scheme-imenu-generic-expression): New variable.
  	(dsssl-imenu-generic-expression): New variable.
  	(scheme-let-indent): Use lisp-indent-specform.

1997-04-09  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* sh-script.el (sh-mode): Set font-lock-comment-start-regexp via
	font-lock-defaults.
	(sh-set-shell): Don't set font-lock-keywords or font-lock-syntax-table,
	and don't toggle Font Lock mode if it is already on.

1997-04-09  Dave Love  <d.love@dl.ac.uk>

	* cmuscheme.el (scheme-mode-map): Add some menu items.

1997-04-09  Per Abrahamsen  <abraham@dina.kvl.dk>

	* lisp-mode.el (eval-defun): For defcustom, always set the value.

1997-04-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* complete.el (PC-try-load-many-files): Set truename.

1997-04-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* custom.el: Delete the explicit autoload calls.
	(custom-help-menu): Don't use easymenu; make the keymap explicitly.
	(custom-menu-reset): Function deleted.  Don't call it, either.
	(custom-help-menu): Variable deleted.

	* menu-bar.el (menu-bar-custom-menu): New variable;
	add it as a submenu of the Help menu.

	* loadup.el: Load widget and custom packages.

	* files.el (file-relative-name): Handle differing drive letters
	on Microsoft systems.

1997-04-08  Per Abrahamsen  <abraham@dina.kvl.dk>

	* frame.el (make-frame): Call `custom-initialize-frame'.

1997-04-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* fontset.el: When calling put-charset-property, ignore errors.
	(x-charset-registries): Turn Tibetan on again.

	* perl-mode.el (calculate-perl-indent): When indenting under a
	containing openparen, skip spaces after the openparen.

	* fontset.el (x-charset-registries): Turn off Tibetan.

1997-04-07  Per Abrahamsen  <abraham@dina.kvl.dk>

	* custom.el: Total rewrite.
	* cus-edit.el: New file.
	* cus-face.el: New file.
	* widget.el: New file.
	* wid-edit.el: New file.
	* wid-browse.el: New file.

1997-04-04  Kenichi HANDA  <handa@etl.jp.jp>

	* ccl.el: Comment fixed.

	* characters.el: Change a category of one Japanese character.

	* fontset.el (x-charset-registries): Add Tibetan entries.

	* lanugage/devanagari.el, language/devan-util.el,
	language/indian.el: Handle more Devanagari characters correctly.

	* language/english.el: New file.

	* language/ethiopic.el, language/ethio-util.el: Completely updated.

	* language/european.el: English related codes are moved to
	language/english.el.
	(setup-european-environment): Call setup-english-environment to
	reset to default setting at first.

	* language/tibetan.el, language/tibet-util.el: New files.

	* loadup.el: Load language/english and language/tibetan.

	* mule-cmds.el: Prefix for Mule related commands is changed.
	(view-hello-file): Allways does correct decoding of HELLO file.

	* mule-conf.el: Change descriptions for Arabic, Indian, and
	Vietnamese character sets.  Define Tibetan character sets.

	* sun-fns.el: Require 'term/sun-mouse instead of 'sun-mouse.

	* term/sun-mouse.el: Provide 'term/sun-mouse instead of
	'sun-mouse.

1997-04-03  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* case-table.el (set-case-syntax): Doc fix.

1997-04-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* compile.el (grep-null-device): Move before first use.

	* vc.el (vc-checkin-hook): Doc fix.

1997-04-01  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-before-checkin-hook): New hook.
	(vc-start-entry): Use it.

1997-04-01  Erik Naggum  <erik@naggum.no>

	* simple.el (set-variable): Suggest only valid user variable.

1997-03-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dired-aux.el (dired-copy-file): Handle file-date-error.

	* rmailout.el (rmail-output-body-to-file): Query if file exists.
	Renamed from rmail-output-body.
	* rmail.el (rmail-mode-map): Add menu item for
	rmail-output-body-to-file and put it on w.

	* imenu.el (imenu-default-goto-function): Simplify.

1997-03-31  Yann Dirson  <dirson@univ-mlv.fr>

	* imenu.el: Truncate imenu items.
	Make use of markers or integers an option.
	(imenu-use-markers, imenu-max-item-length): New variables.
	(imenu-max-items): Doc fix.
	(imenu-example--name-and-position): Handle imenu-use-markers.
	(imenu-default-create-index-function): Likewise.
	(imenu--generic-function): Likewise.
	(imenu--truncate-items): New function.
	(imenu--make-index-alist): Call imenu--truncate-items.

1997-03-31  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* hideshow.el (hs-hide-block-at-point): Doc fix.

	* comint.el (comint-delchar-or-maybe-eof): Check for null proc.

1997-03-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmailout.el (rmail-output-to-rmail-file):
	Use find-buffer-visiting instead of get-file-buffer.

	* dabbrev.el (dabbrev--substitute-expansion):
	Change criterion for copying expansion's case pattern.
	Do this now if expansion case varies after the first char.
	
	* rmailout.el (rmail-output-body): New command.

	* debug.el (debug): Use save-excursion inside the binding of
	buffer-read-only.

1997-03-30  Dan Nicolaescu  <done@ece.arizona.edu>

	* icon.el (icon-mode-map): Added menus.
	(icon-imenu-generic-expression): New variable to be used for imenu.
	(icon-mode): Added font-lock, imenu and hideshow support.
	(icon-font-lock-keywords-1, icon-font-lock-keywords-2):
	New constants for different level of font-lock fontification.
	(icon-font-lock-keywords): New variable.  Default expression to be
	assigned to font-lock-keywords in `icon-mode'.
	(icon-forward-sexp-function): New function used as `forward-sexp'
	by hideshow.

1997-03-30  Masatake YAMATO  <jet@airlab.cs.ritsumei.ac.jp>

	* bookmark.el: Added mouse-selection feature for bookmark list buffer.
	(bookmark-bmenu-other-window-with-mouse): New function.
	(bookmark-bmenu-mode-map): Bind mouse-2.
	(bookmark-bmenu-list, bookmark-insert-location,
	bookmark-bmenu-hide-filenames): Put text property on bookmarks.
	(bookmark-bmenu-show-filenames): Remove text property from
	white spaces generated by `move-to-column'.
	(bookmark-bmenu-bookmark): Use `buffer-substring-no-properties'
	instead of `buffer-substring'.

1997-03-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bruce.el: New file.

	* mspools.el: New file.

	* sh-script.el (sh-set-shell): If file has no #! line,
	set the syntax table based on the default shell.

1997-03-29  Barry A. Warsaw  <cc-mode-help@python.org>

	* Public Release 4.389.

	* cc-mode.el (c-guess-basic-syntax):
	CASE 5C: watch out for Java abstract method
	definitions.  These are distinguished from normal throws clauses since
	they cross statement boundaries.
	(c-guess-basic-syntax): CASE 5A.3: use boi instead of bol.

	* cc-mode.el (c-Java-comment-start-regexp):
	Recognize the three Java styles of comments: 1) traditional
 	C block; 2) javadoc style /** ...; 3) C++ style.
	(java-mode): Set buffer local variable c-comment-start-regexp to
	c-Java-comment-start-regexp.

	* cc-mode.el (c-fill-paragraph):
	Do not set fill-prefix to "*" when looking-at
	"*/", otherwise the following example does not fill properly (the last
	star gets deleted).

	/* this is a comment
	 */

	(c-fill-paragraph): Use c-comment-start-regexp derived regular
	expression when checking for c-hanging-comment-starter-p, so javadoc
	styles are handled correctly in Java mode.

	* cc-mode.el (c-lineup-C-comments):
	Handle more cases, especially when comment
	lines aren't prefixed with stars.
	Change the re-search-forward to a looking-at in
	the innermost test.  This catches GNU-style comments.

	* cc-mode.el (c-add-syntax):
	Move macro definition to before it's first use.

	* cc-mode.el (c-submit-bug-report):
	Capture buffer local variable values which are
	printed in the post-hook, while the current buffer is the CC Mode
	buffer we're interested in.  reporter-submit-bug-report leaves the
	current buffer as the mail buffer, so buffer local variables will not
	get the proper value.

	* cc-mode.el (c-inher-key):
	Require the regexp group that contains the `:'.
	Previously it was optional, but that broke other code.

1997-03-29  Marco Melgazzi  <marco@techie.com>

	* term.el: Added a lot of new faces, they all start with
	term- and follow a simple lexicographical convention.  Note that
	each change is commented: just search for -mm in the source.
	(term-char-mode): Added all the "grey-keys" to term-raw-map.
	(term-send-up):  Similar, decided to go for the more xterm-like
	\eOA bindings in place of the previous \e[A.
	(term-buffer-maximum-size): New variable.
	(term-mode): Added some make-local: now term-buffer-maximum-size,
	ange-ftp-default-user/password/an-pwd.
	(term-emulate-terminal): Quite some modifications to allow
	multiple outstanding ANSI style commands: notably all the
	-previous-parameter stuff.  Call term-handle-ansi-terminal-messages.
	(term-emulate-terminal): Added simple trimming function: at the
	end we simply check if the buffer is > term-buffer-maximum-size
	and cut it accordingly.
	(term-handle-colors-array): New function.
	(term-handle-ansi-terminal-messages): New function.
	(term-handle-ansi-escape): Modified to allow ANSI coloring
	(ansi-term): New function that creates multiple terminals. Put
	in the standard C-x map too: I'm quite used to C-x C-f and C-c C-f
	was too awkward.

1997-03-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* hideshow.el (hs-show-all, hs-safety-is-job-n): Fix messages.

1997-03-28  Dan Nicolaescu  <done@ece.arizona.edu>

	* hideshow.el: Use overlays for hiding instead of selective display.
	Commented out the support for XEmacs because it doesn't support
	overlays.
	(hs-special-modes-alist): Added support for java-mode.
	(hs-minor-mode-hook): New variable.
	(hs-c-start-regexp, hs-c-end-regexp, hs-forward-sexp-func)
	(hs-block-start-regexp, hs-block-end-regexp)
	(hs-find-block-beginning): Doc string fixes.
	(hs-hide-comments-when-hiding-all): New variable.
	(hs-safety-is-job-n, hs-minor-mode, hs-flag-region):
	Use overlays for hiding.
	(hs-inside-single-line-comment-p, hs-discard-overlays)
	(hs-already-hidden-p): New internal functions.
	(hs-hide-block-at-point, hs-hide-initial-comment-block)
	(java-hs-forward-sexp, hs-mouse-toggle-hiding): New functions.
	(hs-inside-comment-p, hs-hide-block)
	(hs-show-block): Added support for single line comments.
	(hs-hide-all): Added support for hiding comments.

1997-03-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail-utils.el (rmail-dont-reply-to): Let the regexp
	match after a <.

	* files.el (make-auto-save-file-name): Replace both / and \
	with sequences starting with %.

1997-03-28  Jeff Dwork  <jeff.dwork@amd.com>

	* ehelp.el (with-electric-help): Remove hook on exit.
	(electric-help-exit): Add doc string.  Remove hook before exit.

1997-03-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* sgml-mode.el (sgml-validate): Offer to save the buffer first.

1997-03-28  Erik Naggum  <erik@naggum.no>

	* simple.el (set-variable): Use user-variable-p.  Clean up.

1997-03-26  Michael Ernst  <mernst@cs.washington.edu>

	* simple.el (set-variable): Take default from `variable-at-point'.

1997-03-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* iswitchb.el: New file.

	* uncompress.el (uncompress-while-visiting): Handle .tgz files.

	* noutline.el (outline-discard-overlays): Fix the case
	where an overlay extends on both sides of the region.
	(outline-mark-subtree): New function.
	(outline-mode-prefix-map): Put outline-mark-subtree on C-c @.

1997-03-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* vms-patch.el (auto-mode-alist): Add .com element.

	* term/x-win.el (function-key-map): Define iso-lefttab.

1997-03-24  Vince Del Vecchio  <vdelvecc@spd.analog.com>

	* mh-utils.el (mh-find-progs): When looking for mh-lib, construct
 	likely paths based on mh-progs rather than using a static list.

1997-03-24  Kevin Rodgers <kevinr@ihs.com>

	* compile.el (grep-program): New variable.
	(grep-command): Use it, and test whether it supports the -e
	option; fix doc string (last command is stored in history variable).
	(grep-null-device): Declare before grep-program and grep-command.
	(grep-find-use-xargs, grep-find-command, grep-find-history):
	New variables.
	(grep-find): New command.
	(grep): Only concatenate grep-null-device to COMMAND when it's
	not nil (to support grep-find).

1997-03-24  Tom Tromey  <tromey@cygnus.com>

	* make-mode.el (makefile-backslash-align): New variable.
	(makefile-backslash-region): Re-imported from cc-mode; modified to
	handle makefile-backslash-align.
	(makefile-append-backslash, makefile-delete-backslash):
	Re-imported from cc-mode.
	(makefile-backslashify-current-line): Function deleted.
	(makefile-fill-paragraph): New function.
	(makefile-mode-map): Bind C-c C-c to comment-region.
	(makefile-mode): Set fill-paragraph to makefile-fill-paragraph.

1997-03-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* frame.el (set-screen-height): Doc fix.

1997-03-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dcl-mode.el: New file.

	* lisp-mode.el (indent-sexp): If calculate-lisp-indent returns nil,
	don't change the line's indentation.
	(lisp-indent-line): Likewise.
	(lisp-comment-indent): Likewise.
	(calculate-lisp-indent): Return nil if line starts inside a string.

1997-03-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* startup.el (command-line-1): Initialize *scratch* with
	text saying not to use it for creating a file.

	* mailalias.el (mail-complete-style): New variable.
	(mail-complete): Use that.
	(mail-get-names): Store full names in cdrs of mail-names elts.
	(mail-names): Doc fix.
	(mail-directory): Minor cleanup.
	
1997-03-21  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-next-action-on-file): With implicit checkout, make
	sure not to lose unsaved changes.

1997-03-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* help.el (help-map): Use apropos-command, not command-apropos.

1997-03-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-forward): Don't do dash-quoting on the signature.

1997-03-20  Dan Nicolaescu  <done@ece.arizona.edu>

	* imenu.el (imenu-scanning-message): Support for bigger numbers.
	(imenu--generic-function): Fixed probably a typo: named appeared
	twice in an item. Put function after name and beg in a special
	item because a normal item has name and beg (for orthogonality).
	(imenu-add-to-menubar): First test to see if the mode supports
	imenu.
	(imenu--menubar-select): Use the defined variable
	imenu-rescan-item.

	* imenu.el (imenu-default-goto-function): New subroutine,
	broken out of `imenu'.
	(imenu-default-goto-function): New variable.
	(imenu): Made it use the above function, via that variable.

1997-03-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-retry-failure): Special handling for mime.
	(mail-mime-unsent-header): New variable.

1997-03-20  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* dired.el (dired-no-confirm): Doc fix.
	(dired-mark-pop-up): If dired-no-confirm is t, don't confirm.

	* dired-aux.el (dired-mark-confirm): Likewise.

1997-03-19  Reingold Edward M  <emr@silver.wisdom.weizmann.ac.il>

	* cal-tex.el (cal-tex-preamble): Set \lineskip to 0pt.

1997-03-18  Kenichi Handa  <handa@etl.go.jp>

	* fontset.el (x-complement-fontset-spec): Setup
	alternative-fontname-alist while complementing fontnames.

1997-03-18  Naoto TAKAHASHI  <ntakahas@etl.go.jp>

	* mule-conf.el: Change short and long names for Ethipic character
	set.

	* fontset.el (x-charset-registries): Change entry for Ethiopic.

	* quail.el (quail-translation-keymap): Add entry for escape key.
	(quail-conversion-keymap): Likewise.
	(quail-keyboard-layout-standard): Add two lines for
	keyboard layout.
	(quail-keyboard-layout): Docstring changed to reflect the above
	change.
	(quail-keyboard-layout-len): Increased for the above change.
	(quail-keyboard-layout-alist): Modified for the above change.

1997-03-18  Kenichi Handa  <handa@etl.go.jp>

	* mule.el (make-char): Documented.
	(charset-plist): Return quoted list even if CHARSET is
	supplied by symbol.

	* fontset.el: Typo in comments fixed.
	(fontset-plain-name): Set correct size information.
	(x-reduce-font-name): New function.
	(x-compose-font-name): New optional argument REDUCE.
	(x-complement-fontset-spec): Call x-compose-font-name with t for
	the above argument.

	* faces.el (set-face-font): Allow specifing fontset for the arg FONT.

	* mule-conf.el (alternate-charset-table): Change each entry from
	list to dot pair.

	* language/viet-util.el (viet-decode-viqr-region): Supply correct
	argumnents to rassoc.
	(viqr-post-read-conversion, viqr-pre-write-conversion): New
	functions.

	* language/vietnamese.el: Set the above functions to the coding
	system viqr.

	* language/thai-util.el: (thai-post-read-conversion): Return the
 	correct length.

1997-03-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* term/x-win.el: Conditionalize the fontset code on
	whether new-fontset is bound.

1997-03-17  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* mailalias.el (mail-passwd-command): New variable.
	(mail-get-names): Implement that variable.

1997-03-17  Erik Naggum  <erik@naggum.no>

	* apropos.el (apropos): Print all property symbols.

1997-03-16  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* simple.el (newline): Be more conservative about when to use
	the optimization.

1997-03-15  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* ring.el: Many doc fixes.
	(ring-ref): Fix error message.

1997-03-15  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* comint.el (comint-delchar-or-maybe-eof): Send EOF iff point is at eob
	and there is no process input.
	(send-invisible): Do nothing if comint-read-noecho returns nil.
	(comint-exec-1): Set TERMCAP to the empty string if TERM is dumb.

	* faces.el (face-differs-from-default-p): When testing FACE's non-nil
	face-font with the default face font, use the frame's font parameter
	if the default face's face-font is nil.

	* frame.el (make-frame): Run after-make-frame-functions with frame.
	(before-make-frame-hook, after-make-frame-functions): defvar them.

	* font-lock.el (font-lock-keyword-depth): New function.
	Use it wherever extra types are used to calculate parenthesis depth.
	(c-font-lock-extra-types, c++-font-lock-extra-types):
	(objc-font-lock-extra-types, java-font-lock-extra-types):
	(font-lock-keywords): Doc fix.
	(font-lock-defaults, font-lock-defaults-alist): Doc switch.
	(font-lock-maximum-decoration): Default to t.

	* sendmail.el (mail-font-lock-keywords): Tweak citation regexp.

	* rmail.el (rmail-font-lock-keywords): Tweak citation regexp.

1997-03-14  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* cl.el (when, unless): Symbol props moved to subr.el.

	* subr.el (when, unless): Symbol props moved from cl.el.
	(add-to-invisibility-spec): Add to beginning, not end.

1997-03-14  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* indent.el (indent-line-to): Fix off-by-one bug when deciding
	whether to delete the existing spaces.

1997-03-13  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* mailalias.el (mail-passwd-files): New variable.
	(mail-get-names): Use mail-passwd-files instead of always /etc/passwd.

1997-03-12  Barry A. Warsaw  <cc-mode-help@python.org>

	* cc-mode.el (c-lineup-C-comments): Handle more cases, especially
	when comment lines aren't prefixed with stars.
	(c-Java-class-key): Optional space after protection key should be
	inside first paren group.
	(c-functionp, c-copy-tree): Better compatibility checks between
	XEmacs and Emacs.
	(c-guess-basic-syntax): CASE 5B.1: watch out for throw clauses
	which could follow a member init list in a constructor.
	(c-submit-bug-report): Display c-indentation-style, but not in the
	setq.
	(c-Java-special-key): New variable recognizes Java "implements",
	"extends", and "throws" keywords.
	(c-guess-basic-syntax): CASE 5C: recognize Java constructs
	"implements", "extends", and "throws"; CASE 5C.3: differentiate
	between "throws" == func-decl-cont, and "implements" or "extends" ==
	inher-intro or inher-cont; CASE 5D.3: removed; CASE 5D.4 => 5D.3;
	CASE 5D.5 => CASE 5D.4; CASE 5D.6 => CASE 5D.5; CASE 5K: don't need to
	look for Java keywords.
	(c-lineup-java-inher): Better indentation calculation for Java
	inheritance constructs.
	(c-Java-special-key, c-guess-basic-syntax, c-lineup-java-inher):
	Recognize Java "extends", "implements", and "throws" clauses and
	map them into inher-intro, inher-cont, and func-decl-cont
	syntactic symbols.  Do the indentation as of Java inheritance
	lines better.
	(c-offsets-alist): Changed the syntactic symbol ansi-funcdecl-cont
	to func-decl-cont.  This symbol is useful in Java throws
	declarations.
	(c-lineup-java-inher): New function for lining up "implements"
	continuations (i.e. inheritance in Java).
	(c-style-alist): In "java" style, set inher-cont to
	c-lineup-java-inher.
	(c-Java-class-key): Optional c-protection-key can appear before the
	"class" keyword.
	(c-beginning-of-statement-1): First, check for bare semi-colon,
	which is a legal statement but not caught by the more intense loop
	later on.
	(c-style-alist): Fixes to "ellemtel" style given by Colin Rafferty
	<craffert@spspme.ml.com>.
	(c-beginning-of-statement): Don't use forward-sentence when
	looking at a C block comment start.  c-beginning-of-statement-1
	will do the right thing.
	(c-guess-basic-syntax): CASE 5C: watch for scope operators
	(c-lineup-C-comments): Watch out for no leading stars.
	(c-set-style): Add initial contents (the value of
	c-indentation-style), and history on the style name.
	(c-mode-map): Bind c-set-style on `C-c .'
	(c-read-offset, c-read-offset-history): Use completing-read, with
	REQUIRE-MATCH nil, so that offsets can be completed when they are
	function names.  Also implement read history.
	(c-guess-basic-syntax): CASE 15D: fix infinite loop problem in
	while... clause looking for statement starting at boi, when using
	run-in statement styles.
	(cc-imenu-java-generic-expression): New variable for integration
	of java-mode with imenu.
	(java-mode): Use cc-imenu-java-generic-expression.
	(c-hanging-comment-starter-p): New variable, analogous to
	c-hanging-comment-ender-p.
	(c-fill-paragraph): Use c-hanging-comment-starter-p.
	(java-mode): Do not set defun-prompt-regexp to
	c-Java-defun-prompt-regexp.
	(c-guess-basic-syntax): CASE 2: relpos for c and c++ is now boi.

1997-03-11  Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>

	* octave-mod.el (octave-abbrev-table): Add abbrevs for switch,
	case, otherwise, and endswitch.
	(octave-begin-keywords): Add switch.
	(octave-else-keywords): Add case and otherwise.
	(octave-end-keywords): Add endswitch.
	(octave-block-match-alist): Add an entry for switch syntax.
	(calculate-octave-indent): Add support for switch syntax.
	(octave-block-end-offset): New function.
	(octave-comment-indent): Fix typo.

	* octave-hlp.el: Provide octave-hlp.

	* octave-inf.el: Provide octave-inf.

	* ielm.el (inferior-emacs-lisp-mode): Set comint-completion-addsuffix.

	* term.el (term-completion-addsuffix): Doc fix.
	(term-dynamic-complete-as-filename): Support the case where
	term-completion-addsuffix is a (DIRSUFFIX . FILESUFFIX) cons
	pair.

1997-03-11  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* subr.el (combine-after-change-calls): Doc fix.

	* uniquify.el (uniquify-buffer-file-name): Don't call
	expand-file-name on nil.  Check whether list-buffers-directory is
	bound.  Ignore non-file non-dired buffers.

	* lisp-mode.el (lisp-imenu-generic-expression): Accept `*', `|',
	and `:' in symbol names.

	* make-mode.el (makefile-dependency-regex): Disallow "=" in name,
	so that "flags=-o:1" is treated as an assignment, not a dependency.
	(makefile-dependency-regex, makefile-macroassign-regex): Disallow
	spaces in symbol name.

1997-03-11  Dan Nicolaescu <done@ece.arizona.edu>

	* subr.el (add-to-invisibility-spec, remove-from-invisibility-spec):
	New functions.

1997-03-12  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* dired-aux.el (dired-fun-in-all-buffers): New arg FILE.  Don't
 	operate on buffers whose wildcard pattern does not accept FILE.
	All callers changed.
	
	* dired.el (dired-glob-regexp): New function.
	(dired-buffers-for-dir): New arg FILE; if non-nil,
	check that it matches the wildcard pattern.

1997-03-11  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* ispell.el (ispell-command-loop): Disable message logging.
	(ispell-region): Ditto.

1997-03-10  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* files.el (recover-session): Add `t' to switches.

1997-03-09  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* simple.el (universal-argument-more): If previous arg is `-',
	change that to -4.

1997-03-08  Joel Ray Holveck  <joelh@gnu.ai.mit.edu>

	* info.el (Info-read-node-name): Caused completing-read to force
	the input read to match a valid entry

1997-03-08  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* isearch.el (isearch-yank): Handle case when CHUNK is `x-sel'.

1997-03-08  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* enriched.el (enriched-decode-foreground, enriched-decode-background):
	Make COLOR arg optional.  Fix error messages.

	* subr.el (substitute-key-definition):
	Compare with equal if definition is a key sequence.

	* desktop.el (desktop-missing-file-warning): Make the default nil.

1997-03-04  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el (vc-backend-diff): Handle RCS and SCCS separately.

1997-03-01  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* simple.el (eval-expression): No longer disabled, since M-: isn't
	as likely to be typed by mistake as the old ESC ESC binding was.
	Arg `expression' renamed to `eval-expression-arg' to avoid
	potential collision if its value mentions `expression'.

1997-03-01  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* man.el (man-mode-syntax-table): New variable.
	(Man-mode): Use it.
	(man-follow): New command and keystroke.
	(Man-default-man-entry): Ignore trailing dots and underscores.

1997-02-28  Kenichi HANDA  <handa@etl.go.jp>

	* characters.el, mule-conf.el, gnus-mule.el, kkc.el, rmail.el,
	sendmail.el, skkdic-conv.el, titdic-conv.el, language/thai.el,
	language/vietnamese.el, language/lao.el, language/korean.el,
	language/japanese.el, language/hebrew.el, language/greek.el,
	language/european.el, language/devanagari.el, language/chinese.el,
	language/cyrillic.el, language/china-util.el:
	Remove prefix "coding-system-" from coding system symbol names.

1997-02-28  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* copyright.el (copyright-regexp): Allow "Copyright" and the
	copyright symbol together.

1997-02-27  Kenichi HANDA  <handa@etl.go.jp>

	* mule.el: Initialize a global variable use-default-ascent.
	(make-coding-system): Set charset (symbol) instead of charset-id
	(integer) in FLAGS of ISO-2022 type coding systems.  For ISO-2022
	type conding systems, new flags INIT-BOL DESIGNATION-BOL are
	added.
	(define-coding-system-alias): Coding style changed.
	(charset-list): Incorrect macro definition changed to correct
	defsubst.

	* sendmail.el (sendmail-coding-system): Add autoload cookie.
	Default value is nil.

	* rmail.el (rmail-view-buffer, rmail-enable-mime,
	rmail-show-mime-function, rmail-mime-feature): New variables to
	control MIME feature.
	(rmail-file-coding-system): Default value is nil.
	(rmail, rmail-convert-file, rmail-insert-inbox-text): Check
	rmail-enable-mime.  Read a file without any code conversion.
	(rmail-variables): Setup local variables rmail-buffer and
	rmail-view-buffer.
	(rmail-decode-babyl-format, rmail-convert-babyl-format): Perform
	code conversion of RMAIL file if rmail-enable-mime is nil.
	(rmail-show-message): Make sure to be in rmail-buffer.  If
	rmail-enable-mime is t, call appropriate function to decode MIME
	format.
	(rmail-mail, rmail-reply): Call rmail-start-mail with argument
	rmail-view-buffer.

	* rmailsum.el (rmail-new-summary): Setup rmail-view-buffer.
	(rmail-summary-line-decoder): New variable.
	(rmail-make-summary-line-1): Use a function set in
	rmail-summary-line-decoder.
	(rmail-summary-next-msg): Display rmail-view-buffer.
	(rmail-summary-mode): Make rmail-view-buffer buffer local.
	(rmail-summary-rmail-update, rmail-summary-scroll-msg-up): Use
	rmail-view-buffer instead of rmail-buffer.

	* mule-cmds.el (mule-keymap): Re-arranged.
	(set-language-info): Typo fixed in docstring.
	(read-language-name): Use assoc-ignore-case to allow lose
	matching.
	(read-language-and-input-method-name): Likewise.

	* mule-util.el (truncate-string-to-width): Argument PADDING can be
	a padding character.

	* mule-conf.el: Change coding system names iso-2022-int to
	iso-2022-int-1, iso-2022-int-2 to iso-2022-cjk.  Add INIT-BOL to
	coding system iso-2022-cjk.  Define a character set for Lao.

	* quail.el: Add quail-mode to default value of
	minor-mode-map-alist if it is set to local variable.
	(quail-show-kbd-layout): Bug fixed for keys not translated.

	* encoded-kbd.el: Many changes to cope with the above change.
	(encoded-kbd-select-terminal): New function.

	* characters.el: Add a section for Lao.

	* loadup.el: Load "language/lao".

	* language/lao.el, language/lao-util.el: New files for Lao.

	* language/chinese.el: Add INIT-BOL to coding system iso-2022-cn.

	* language/cyrillic.el: Change coding system name koi8 to koi8-r.

	* language/japanese.el: Change coding system name shift-jis to
	shift_jis.

	* language/devanagari.el: Fix handling of several characters.

	* language/devan-util.el: Likewise.

	* bookmark.el (bookmark-jump-noselect): Use goto-char instead of
	forward-char/backward-char to pay attention to multibyte
	characters.

1997-02-26  Chung Jae-youn  <crisp@hugsvr.kaist.ac.kr>

	* gnus-mule.el (gnus-mule-decode-summary): The function
	implemented correctly.
	(gnus-mule-initialize): Setup gnus-summary-generate-hook.

1997-02-26  enami tsugutomo  <enami@ba2.so-net.or.jp>

	* bytecomp.el (byte-compile-file): Bind coding-system-for-write
	instead of coding-system-for-read to 'no-conversion to disable
	code conversion by write-region.

1997-02-26  Yutaka NIIBE  <gniibe@mri.co.jp>

	* dired.el (dired-find-file): Allow specifying coding system
	interactively.

1997-02-26  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* vc.el (vc-log-mode): New optional arg FILE.  Set vc-log-file here.
	(vc-start-entry): Not here.
	(vc-finish-logentry): Run vc-finish-logentry-hook.

1997-02-26  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* menu-bar.el (menu-bar-tools-menu): Fix typo in Send Mail item.

1997-02-25  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* sh-script.el (sh-case): Define with defun and defvar
	instead of define-skeleton.

1997-02-24  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* facemenu.el (facemenu-set-invisible, facemenu-set-intangible,
	facemenu-set-read-only): Change put-text-property with constant
	args to add-text-properties for efficiency.  Suggested by Stavros
	Macrakis <s.macrakis@opengroup.org>.

1997-02-23  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* sh-script.el (sh-mode-hook, sh-set-shell-hook): Add defvars.

	* avoid.el: Don't put "Avoid" in the mode line.

	* lisp-mode.el (eval-last-sexp): Allow let-bindings to terminate
	before doing the eval.
	Handle (interactive ...) form specially.

1997-02-23  Michael Ernst  <mernst@cs.washington.edu>

	* rmail.el (rmail-next-same-subject, rmail-reply): Ignore case, to
	match "RE:" as well as "Re:".

1997-02-22  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* tq.el (tq-process-buffer): Catch errors running tq-queue-head-fn.

1997-02-21  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* font-lock.el (font-lock-default-unfontify-buffer): If we have called
	font-lock-set-defaults first, call font-lock-unset-defaults last.
	(font-lock-fontify-anchored-keywords): Use the value of PRE-MATCH-FORM
	as the value of LIMIT if appropriate, otherwise use EOL.  Doc fix.
	(font-lock-keywords): Doc fix.
	(turn-on-font-lock): Test font-lock-mode.
	Added commented out menu code.

	* compile.el (compilation-mode-font-lock-keywords): Variable
	definition deleted.  New function.
	(compilation-mode-map): Add `...' to Compile menu entry.

1997-02-20  Yutaka NIIBE  <gniibe@mri.co.jp>

	* fill.el (do-kinsoku): New variable.
	(fill-region-as-paragraph): Handle `kinsoku' processing.

	* simple.el (do-auto-fill): Handle `kinsoku' processing.

1997-02-20  Tsugutomo ENAMI  <enami@sys.ptg.sony.co.jp>

	 * nnheader.el (nnheader-insert-head): Handle the case that the
	 length of header is changed because of code conversion.

1997-02-20  Kenichi HANDA  <handa@etl.go.jp>

	* ccl.el, characters.el, encoded-kb.el, fontset.el: New files.
	* gnus-mule.el, isearch-x.el, kinsoku.el, kkc.el: New files.
	* mule-cmds.el, mule-diag.el, mule-util.el, mule.el: New files.
	* quail.el, skkdic-cnv.el, skkdic-utl.el, titdic-cnv.el: New files.

	* autoload.el (update-file-autoloads): Read loaddefs.el without
	any code conversion.

	* bindings.el (mode-line-mule-info): New variable.
	(mode-line-format): Include it.

	* bytecomp.el (byte-compile-file): Write a compiled file without
	any code conversion.

	* debug.el (debugger-mode): Disable multibyte character handling
	in Debugger mode.

	* files.el (find-file): With a prefix argument, enable users to
	specify a coding system interactively.
	(find-file-other-window, find-file-read-only): Likewise.
	(find-file-read-only-other-window): Likewise.
	(find-file-read-only-other-frame): Likewise.
	(find-alternate-file-other-window, find-alternate-file): Likewise.
	(find-file-noselect): Describe optional arguments NOWARN and
	RAWFILE in the doc-string.
	(write-file, insert-file, append-to-file): Accept a prefix
	argument to enable users to specify a coding system interactively.
	(revert-buffer): Read an auto-saved file without any code
	conversion.

	* help.el (help-with-tutorial): Prefix argument to specify a
	language interactively.

	* isearch.el (isearch-mode-map): Define
	isearch-toggle-input-method and
	isearch-toggle-specified-input-method in the map.
	(isearch-multibyte-characters-flag): New variable.
	(isearch-mode): Initialize it to nil.
	(isearch-printing-char): Handle multibyte characters.
	(isearch-message-prefix): Include title of input method if
	necessary in the prefix of message.

	* language/: New directory containing Emacs Lisp files to setup
	environment and provide utilities for each language.

	* loadup.el: Load mule specific files.

	* mouse.el (mouse-set-font): Handle fontset.

	* paren.el (show-paren-function): Handle multibyte characters.

	* replace.el (occur): Pay attention to multibyte characters.

	* rmail.el (rmail-file-coding-system): New variable.
	(rmail-insert-inbox-text): Perform character code conversion
	according to rmail-file-coding-system.
	(rmail-only-expunge): Pay attention to multibyte characters.

	* select.el (x-get-selection): Set default data-type of selection
	to COMPOUND_TEXT.
	(selection-converter-alist): Add an entry for COMPOUND_TEXT.

	* sendmail.el (sendmail-coding-system): New variable.
	(sendmail-send-it): Perform code conversion on sending mail
	according to sendmail-coding-system.

	* simple.el (kill-forward-chars, kill-backward-chars): Pay
	attention to multibyte characters.
	(what-cursor-position): With a prefix argument, print detailed
	info of a character on cursor position.
	(transpose-subr-1): Pay attention to multibyte characters.

	* term/x-win.el: Require fontset.  Create fontsets from
	default-fontset-spec, X resources, and "-fn" command line
	argument.

1997-02-19  Noah Friedman  <friedman@prep.ai.mit.edu>

	* eldoc.el (eldoc-message-commands): Doc fixes.
	(eldoc-message): Make function, not macro.

	* eldoc.el (eldoc-last-message): New internal variable.
	(eldoc-mode): Initialize it to nil.
	(eldoc-message): Use it.
	(eldoc-print-current-symbol-info): Use it.

	* eldoc.el (eldoc-pre-command-refresh-echo-area): New function.
	(eldoc-mode): Put it on pre-command-hook if in XEmacs or using
	idle timers in Emacs.

	* eldoc.el (eldoc-message-commands-table-size): New constant.
	(eldoc-add-command): Use it to initialize eldoc-message-commands.

	* eldoc.el (eldoc-display-message-no-interference-p): New function.
	(eldoc-display-message-p): Use it.

	* eldoc.el (eldoc-print-fnsym-args, eldoc-print-var-docstring):
	Arg sym no longer optional.
	Do not initialize arg if nil.

	* eldoc.el (eldoc-forward-sexp-safe): Function deleted.
	(eldoc-beginning-of-sexp): New function.
	(eldoc-fnsym-in-current-sexp): Use eldoc-beginning-of-sexp.
	Use eldoc-current-symbol to get symbol at point.

	* eldoc.el (eldoc-function-argstring-from-docstring-method-table):
	Forge docstrings for `and', `or', `list', `+', and `-'.

	* eldoc.el (eldoc-add-command-completions): New function.
	(eldoc-add-command): Take list of args.
	No longer interactive.
	(eldoc-remove-command-completions): New function.
	(eldoc-remove-command): Take list of args.
	No longer interactive.

	* eldoc.el: Initialize eldoc-message-commands using
	eldoc-add-command-completions.

	* eldoc.el (eldoc-display-message-p): New function.
	Return nil if cursor-in-echo-area, or using idle timers and a
	command is still active.
	(eldoc-print-current-symbol-info): Use eldoc-display-message-p.

1997-02-17  Roland McGrath  <roland@galapas.ai.mit.edu>

	* autoload.el (update-autoloads-from-directory): Get absolute file
	names from directory-files, and expand generated-autoload-file.
	Subdirs happy now.

1997-02-17  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* mail-utils.el (rmail-dont-reply-to): Delete debugging code.
	Don't insist on whitespace after commas.

1997-02-16  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* replace.el (replace-string): Doc fix.

1997-02-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* vc.el (vc-do-command): If OKSTATUS is nil, ignore errors.
	(vc-backend-release): For RCS, pass nil for OKSTATUS.

1997-02-09  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* compare-w.el (compare-windows): Make more efficient use of
	result from compare-buffer-substrings.

1997-02-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* isearch.el (isearch-search): Refuse to match invisible text.
	(isearch-range-invisible): New function.
	(search-invisible): New user option.

1997-02-09  Eli Zaretskii  <eliz@wombat.gnu.ai.mit.edu>

	* compile.el (compilation-process-setup-function): New variable.
	(compile-internal): Call compilation-process-setup-function if
	it is non-nil.

	* diff.el (diff-process-setup): New function, sets up the
	compilation-exit-message-function so that it works with both
	asynchronous and synchronous sub-processes.
	(diff): Bind compilation-exit-message-function.  Run
	compilation-finish-function when compile-internal returns if async
	processes aren't supported.

1997-02-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mouse.el (mouse-buffer-menu): Group buffers by major modes if that
	seems to be useful.
	(mouse-buffer-menu-mode-groups): New variable.
	(mouse-buffer-menu-alist, mouse-buffer-menu-split): New subroutines
	broken out of mouse-buffer-menu.

	* derived.el (define-derived-mode): Add derived-mode-parent
	property to the defived mode command name.

1997-02-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmailsort.el (rmail-sort-messages): Preserve point
	with respect to the the current message.

1997-02-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* auto-show.el (auto-show-mode): Doc fix.

1997-02-04  Erik Naggum  <erik@naggum.no>

	* files.el (file-relative-name): Protect the match-data.

	* edmacro.el (edmacro-parse-keys): Remove redundant test for ?.

1997-02-04  Noah Friedman  <friedman@prep.ai.mit.edu>

	* eldoc.el (eldoc-display-message-p): New function.
	Return nil if cursor-in-echo-area, or using idle timers and a
	command is still active.
	(eldoc-print-current-symbol-info): Use eldoc-display-message-p.

1997-02-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* man.el (Man-init-defvars): Fix case in a char set range.

1997-02-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cc-mode.el (c-Java-defun-prompt-regexp): Default is now nil.

	* dired-aux.el (dired-rename-file):
	Pass new arg to set-visited-file-name.
	* files.el (set-visited-file-name): New arg ALONG-WITH-FILE.

	* cc-mode.el (c-ObjC-method-key, c-Java-defun-prompt-regexp):
	Fix patch screwup in last change.

	* rmail.el (rmail-ignored-headers): Add Delivered-to: header.

1997-02-02  Noah Friedman  <friedman@prep.ai.mit.edu>

	* eldoc.el: New file.

1997-02-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* iso-acc.el (iso-accents-compose):
	Handle case where unread-command-events is already nonempty.

	* frame.el (set-frame-font): Renamed from set-default-font,

1997-02-01  Tom Tromey  <tromey@cygnus.com>

	* info.el: Handle multiple Info buffers.
	(Info-tag-table-marker): Initialize to nil.
	(Info-tag-table-buffer): New variable.
	(Info-find-node): Don't switch buffers if already in Info mode.
	Use Info-tag-table-buffer to support multiple Info buffers.
	(Info-read-subfile): Don't switch to *info* buffer.
	(Info-build-node-completions): Handle buffer local bindings for
	Info-tag-table-marker.
	(Info-search): Add a save-excursion.
	(Info-mode): Make Info-tag-table-buffer buffer-local.
	Make a different marker in Info-tag-table-marker for each buffer.
	(Info-kill-buffer): New function, on kill-buffer-hook.

1997-02-01  Peter Breton  <peter@CLONE.mindspring.com>

	* dirtrack.el (dirtrack-debug-message): Put output at end of buffer.
	(dirtrack): Check that directory exists before trying to cd to it.
	Go to point-max (not comint-last-output-start) before looking for
	the prompt.

1997-02-01  Michael Ernst  <mernst@cs.washington.edu>

	* dired-x.el (dired-guess-shell-alist-default): Make .eps
	extension act like .ps extension.

1997-02-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-reply): Concatenate all the References headers.

1997-01-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (set-fill-column): Print the old value too.

	* cc-mode.el (java-mode): Fix typo installing previous change.

	* rmail.el (rmail-reply): Copy all the References: headers
	from the original message.

	* simple.el (sendmail-user-agent): Insert all the OTHER-HEADERS.

	* mail-utils.el (mail-fetch-field): New arg LIST.

	* edmacro.el (edmacro-parse-keys): Don't treat C-. or C-?
	as ASCII control char.

	* compile.el (compilation-enter-directory-regexp)
	(compilation-leave-directory-regexp): Add .* at beginning.

1997-01-30  Barry A. Warsaw  <cc-mode-help@python.org>

	* cc-mode.el: Public Release 4.353.

	* cc-mode.el (c-guess-basic-syntax):
	CASE 15D: do not assume that boi of previous
	statement is the beginning of a statement.

	* cc-mode.el: Removed the require of imenu.

	* cc-mode.el (c-cleanup-list, c-electric-brace):
	New clean-up option: brace-elseif-brace.

	* cc-mode.el (c-style-variables-are-local-p): New variable which
	controls whether indentation style variable are buffer local are
	not.  By default, for backwards compatibility, this variable is t.

	* cc-mode.el (c-Java-access-key): Set to nil since Java doesn't
	have C++-like access labels.

	* cc-mode.el (c-style-alist): Added "python" style.

	* cc-mode.el (c-mode-menu): New function
	(c-popup-menu, c-common-init): Use c-mode-menu.

	* cc-mode.el (c-lineup-C-comments):
	A much better implementation that handles all
	common star-prefixed block comment styles (see below).

	(c-block-comments-indent-p): Obsolete function removed.

	* cc-mode.el (c-indentation-style):
	Take default value from c-site-default-style.

	* cc-mode.el (adaptive-fill-regexp):
	For all but XEmacs 19.13, the default should
	be nil.

	* cc-mode.el (c-emacs-features): Detect Infodock.
	(c-common-init, c-mode-map): Don't install menus for Infodock.

	* cc-mode.el (c-indent-exp): Fixed infinite loop when multi-line C
	comment is last thing in buffer.
	(c-guess-basic-offset): Fixed error when K&R C-like macro is first
	non-syntactic whitespace in file.

	* cc-mode.el (c-C++-comment-start-regexp):
	Use a more efficient representation.

	* cc-mode.el (c-buffer-style): New variable.

1997-01-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ps-print.el (ps-print-header): Doc fix.

1997-01-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* texnfo-upd.el (texinfo-make-menu): Accept args BEGINNING and END.
	(texinfo-update-node): Accept args BEGINNING and END.
	(texinfo-all-menus-update): Pass region explicitly.
	(texinfo-master-menu, texinfo-every-node-update): Likewise.

1997-01-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* saveplace.el (load-save-place-alist-from-file):
	Delete spurious t's.

1997-01-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* comint.el (comint-exec-1): Use file-accessible-directory-p.

	* timezone.el (timezone-parse-date): Treat unknown month name
	like any other unrecognized format.

1997-01-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* jka-compr.el (jka-compr-error): Use with-current-buffer.
	(jka-compr-call-process, jka-compr-file-local-copy)
	(jka-compr-write-region): Use with-current-buffer.

	* byte-opt.el (byte-compile-inline-expand): Recalculate fn
	after loading a file to define the function.

	* ange-ftp.el (ange-ftp-get-process): Call delete-process.

1997-01-25  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* rmail.el (rmail-get-new-mail): Fix return value to match doc.

1997-01-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (completion-no-auto-exit): New variable.
	(choose-completion-string): Obey compilation-error-regexp-alist.

	* compile.el (compilation-error-regexp-alist): Undo 1/21 change.
	In the GNU message with program name alternative,
	allow digits in the program name after the first character.

	* rnewspost.el (news-post-news): New arg NOQUERY.

	* compile.el (compilation-parse-errors):
	Use looking-at on each line.
	(compilation-error-regexp-alist): Change these regexps
	so that they assume matching only at start of line.
	Delete \n at beginning; otherwise add `.*'.

	* tmm.el (tmm-get-keymap): Recognize explicit lambda expressions
	as valid.

1997-01-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* compile.el (compilation-error-regexp-alist):
	In MIPS lint and Sun Ada regexps, reject newline in some
	[^...] constructs.  Require newline at start in MIPS lint.

1997-01-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (choose-completion-string):

	* ange-ftp.el (ange-ftp-load): If fail, return nil.

	* compile.el (compilation-error-regexp-alist):
	Recognize nsgmls error messages.

1997-01-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* smtpmail.el (smtpmail-read-response):
	Don't get confused by %'s in response-string.

	* octave-mod.el: Delete explicit autoload calls.
	Provide octave-mod.
	Move the variables formerly in octave.el
	to the top of the file.

	* octave-hlp.el: Require octave-mod, not octave.
	* octave-inf.el: Require octave-mod, not octave.

	* octave.el: File deleted (contents merged into octave-mod.el).

	* octave-mod.el: Merge in octave.el; don't require octave.el.
	Don't require octave-inf.el.
	(octave-mode): Delete the startup message.
	(octave-maintainer-address): Add bug-gnu-emacs.
	(octave-version): Variable deleted.
	(octave-submit-bug-report): Use emacs-version.

	* octave-mod.el, octave.el: New files.
	* octave-inf.el, octave-hlp.el: New files.

1997-01-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* timezone.el (timezone-parse-date): Handle 1-digit year.

1997-01-19  Jonathan I. Kamens  <jik@kamens.brookline.ma.us>

	* rmail.el (rmail-preserve-inbox): New variable.
	(rmail-get-new-mail): If rmail-preserve-inbox is non-nil, then
	don't truncate the inboxes after retrieving mail from them.

1997-01-19  Geoff Voelker  <voelker@cs.washington.edu>

	* dos-w32.el, term/w32-win.el: Change uses of win32 to w32.

1997-01-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mantemp.el (mantemp-insert-cxx-syntax): Recognize non-class templates.
	(mantemp-make-mantemps-buffer): Simplify message.
	(mantemp-make-mantemps-region): Simplify message.

	* ange-ftp.el (ange-ftp-waiting-flag): New variable.
	(ange-ftp-load): Bind that to t, and catch ftp-error.
	(ange-ftp-cf2, ange-ftp-cf1): If ange-ftp-waiting-flag is t,
	throw instead of signaling an error.

	* shell.el (shell-mode): Don't set list-buffers-directory.

1997-01-15  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	With Jacques Duthen.
	* ps-print.el (ps-print-version): Fix value.
	(cl lisp-float-type): Require them.
	(ps-number-of-columns ps-*-font-size): Try to select defaults
	better suited when `ps-landscape-mode' is non-nil.
	(ps-*-faces): Change default for Font Lock mode faces when
	`ps-print-color-p' is nil.
	(ps-right-header): Replace `time-stamp-yy/mm/dd'
	by `time-stamp-mon-dd-yyyy'.
	(ps-end-file ps-begin-page): Fix bug in page count for Ghostview.
	(ps-generate-postscript-with-faces): Replace `ps-sorter' by
	`car-less-than-car'.
	(ps-plot ps-generate): Replace `%d' by `%3d'.

1997-01-14  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* compile.el (first-error): Doc fix.

1997-01-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* replace.el (occur-mode-map): Bind g to revert-buffer.
	(occur-mode): Locally bind revert-buffer-function.
	(occur-command-arguments): New variable.
	(occur-revert-function): New function.
	(occur): Set occur-command-arguments.

1997-01-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mh-mime.el: Rename args PATHNAME to FILENAME in various functions.
	(mh-mhn-compose-insertion): New arg ATTRIBUTES
	and change the interactive spec to read it.

1997-01-12  Geoff Voelker  <voelker@cs.washington.edu>

	* w32-fns.el (make-auto-save-file-name): Replace occurrences of
	all invalid filename characters.

1997-01-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* texnfo-upd.el (texinfo-incorporate-descriptions): Call regexp-quote.

1997-01-09  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* font-lock.el (font-lock-unique): Deleted.
	(font-lock-prepend-text-property, font-lock-append-text-property):
	Don't call it; behave as to-be-written builtins.  Declare as defuns.
	(font-lock-fillin-text-property): Declare as a defun.
	(font-lock-after-change-function): Undo 1996-10-23 change.

1997-01-08  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* telnet.el (telnet-initial-filter): Fix error message.
	Bind case-fold-search to t.

	* cl.el (when, unless): Definitions moved to subr.el.

	* subr.el (when, unless): Definitions moved from cl.el.

1997-01-07  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* faces.el (invert-face): Handle inverting the default face better.

	* expand.el: No longer a minor mode.
	(expand-submit-bug-report): Function deleted.
	(expand-mode-version, expand-mode-help-address): Variables deleted.
	(expand-mode): Variable and function deleted.
	(expand-mode-hook, expand-mode-name): Variables deleted.
	(expand-load-hook): Variable renamed from expand-mode-load-hook.
	(expand-map): Variable deleted.
	(expand-jump-to-next-slot): Renamed from expand-jump-to-next-mark.
	Add autoload.
	(expand-jump-to-previous-slot): Add autoload.
	Renamed from expand-jump-to-previous-mark.

1997-01-06  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* simple.el (delete-completion-window): Handle special display frames.

	* term/x-win.el (x-handle-args): Stop arg processing
	if we encounter "--", and preserve all remaining args.

	* startup.el (command-line-1): Don't run buffer-menu
	if in batch mode.

1997-01-05  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* gud.el (gud-gdb-marker-regexp): Use colon always, not path-separator.

	* sgml-mode.el (html-mode): Locally set sentence-end.

	* translate.el: New file.

1997-01-04  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* msb.el (frame-or-buffer-changed-p): Definition deleted.
	(the end): Use mapc, to force loading of cl-extra.

	* files.el (switch-to-buffer-other-frame)
	(switch-to-buffer-other-window): New arg NORECORD.

1997-01-04  Geoff Voelker  <voelker@cs.washington.edu>

	* sh-script.el (sh-shell-file): Downcase and remove extension
	on shells in NT.

1997-01-03  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* dired.el (dired-string-replace-match):
	Delete redundant autoload.
	(dired-garbage-files-regexp): New variable.
	(dired-flag-garbage-files): New command.
	(dired-mode-map): Put dired-flag-garbage-files on & and in menu.

	* find-dired.el (find-dired): Doc fix.

1997-01-03  Andre Spiegel  <spiegel@inf.fu-berlin.de>

	* vc.el, vc-hooks.el: Changed my e-mail address in the header.

1997-01-02  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* replace.el (list-matching-lines-face): New variable.
	(occur): Highlight the actual matching characters.

	* dirtrack.el: New file.

1997-01-02  Inge Frick  <inge@nada.kth.se>

	* easymenu.el (easy-menu-create-keymaps): Menu item STYLE toggle
	(checkbox) and radio (radio button) are prefixed by "[X] " or
	"(*) " respectively, when selected and "[ ] " or "( ) ", when not
	selected. In a menu that contain these prefixes, "    " is used
	as prefix for items that have no other prefix.
	(easy-menu-update-button): New function used as `menu-enable'
	property for checkboxes and radio buttons to update the prefixes.
	(easy-menu-define): Change documentation string to describe the
	new prefixes.

1997-01-02  Jens Toivo Berger Thielemann  <jensthi@ifi.uio.no>

	* word-help.el (word-help-mode-alist, reset-word-help)
	(word-help-switch-help-file): Added support for completion.
	(word-help-complete, word-help-complete-list)
	(word-help-complete-index, word-help-extract-matches)
	(word-help-make-complete): New functions/variables for completion.
	(word-help-mode-alist): Enhanced search regexps.
	(word-help-index-mapper): Defaults now to extracting the first word.
	(word-help-mode-alist, word-help-index-mapper)
	(word-help-main-index, word-help-main-obarray)
	(reset-word-help, set-help-file, word-help-process-indexes)
	(word-help-goto-index-node): Doc fixes.
	(word-help-goto-index-node): Requires passing the keyword.
	Uses this in the a new and enhanced magic indexing routine.
	(set-help-file, word-help): Handle `completion-ignore-case' better.
	(word-help-extract-index): `case-fold-search' better handled.
	(word-help): Magic guessing of relevant help file put in new
	function word-help-find-help-file.
	(word-help-guess-all): New subroutine.
	(word-help-guess): Use word-help-guess-all.
	May optionally copy only upto the cursor,
	instead of the entire keyword.

1997-01-01  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* sh-script.el (sh-mode): Always pass nil as 3rd arg to sh-set-shell.

	* dired-aux.el (dired-do-chxxx): Use -- only on GNU systems.

	* tex-mode.el (tex-region): Correctly handle possible
	overlap between first line, header, and region.
	New local var ALREADY-OUTPUT makes this general.
	Write tex-trailer directly as a string; get rid of temp-buffer.
	Make tex-out-file include the .tex suffix.

	* texinfo.el (texinfo-mode): Locally set tex-first-line-header-regexp.
	Locally set tex-trailer.

	* server.el (server-process-filter): Let-bind `pos'.

1997-01-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* sh-script.el (sh-shell-file): On MSDOS, collapse $SHELL to lower
	case and remove the executable extension, if any.
	(sh-other-keywords): Define an entry for `sh' and make `bourne'
	inherit from that.

1996-12-31  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* simple.el (repeat-complex-command): Bind
	minibuffer-history-position and minibuffer-history-sexp-flag
	only for the read-from-minibuffer call.

1996-12-30  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* files.el (insert-directory): Use -- as arg
	so that a file name or pattern is never taken as an option.

	* dired-aux.el (dired-do-chxxx): Use -- as arg
	so that the file name is never taken as an option.

	* dired.el (dired-make-relative): Ignore the third argument;
	never signal an error just because FILE is not in DIR's tree.

	* info.el (Info-find-node): Don't clear Info-index-alternatives.
	(Info-index-next): Fix error message.

	* server.el (server-start): Don't delete ~/.emacs-server.
	Instead, delete the names emacsserver really uses
	if compiled with SERVER_HOME_DIR.

	* bytecomp.el (byte-compile-file): Set default-directory in
	compiler input buffer.

1996-12-29  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* dired.el (dired-permission-flags-regexp): New variable.
	(dired-move-to-end-of-filename): Use it instead of a constant.

	* locate.el (locate-mode): Locally set dired-move-to-filename-regexp,
	dired-permission-flags-regexp, and dired-actual-switches.
	(locate-set-indentation): Function deleted.
	(locate-insert-header): Don't indent the header line.
	(locate-indentation-string): Variable deleted.
	(locate-do-setup): Rewrite the loop that adds indentation.

	* locate.el: New file.

	* tex-mode.el (tex-first-line-header-regexp): New variable.
	(tex-region): Sometimes include the file's first line.

	* texinfo.el (texinfo-mode): Use regexps for
	tex-start-of-header and tex-end-of-header.
	(texinfo-tex-region, texinfo-tex-buffer):
	Use tex-region and tex-buffer.
	(texinfo-tex-print): Use tex-print.
	(texinfo-tex-view): New command, on C-x C-t C-v.

	* bindings.el (completion-ignored-extensions):
	Separate out the system-independent elements.
	Add Texinfo index files.

	* emacsbug.el (report-emacs-bug): Use compose-mail.

	* hideshow.el (hs-emacs-type): Doc fix.

	* dired.el (dired-insert-directory): Don't override the user's locale.
	(dired-standard-move-to-filename-regexp): Var deleted.

1996-12-28  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* iso-acc.el (iso-languages): For Catalan, delete 'C and 'c;
	delete `i, `I, `u, `U.  Add "i, "I.  Delete ~t.
	For Spanish, delete ~t, 'c and 'C.

	* help.el (help-map): Define C-h C-i to run word-help.

	* word-help.el: New file.

	* expand.el (expand-map): Don't define SPC.
	(expand-template-abbreviation): Function deleted.
	(expand-try-to-expand): Function deleted.
	(expand-abbrev-hook): Add a no-self-insert property.
	(expand-skeleton-end-hook): Use skeleton-position.
	(expand-add-abbrevs): Doc fix.

	* expand.el: New file.

	* skeleton.el (skeleton-positions): Renamed from skeleton-marks.

	* skeleton.el (skeleton-marks): New variable.
	(skeleton-insert, skeleton-internal-1): Set skeleton-marks.

1996-12-28  Jonathan I. Kamens  <jik@cam.ov.com>

	* rmail.el (rmail-msg-is-pruned): New function.
	(rmail-toggle-header): Add an optional argument to specify explicitly
	whether the header should be pruned or displayed in full.

1996-12-27  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el (vip-adjust-window-after-search): new variable.
	(vip-adjust-window): new function.
	(vip-insert-state-cursor-color,vip-saved-cursor-color): new variables.
	(vip-set-vi-search-style-macros,vip-set-emacs-search-style-macros):
	new functions.
	(vip-autoindent): no longert moves insert point.
	(vip-paren-match): now pays no attention to comments, leaves
	region active.
	* viper-util.el:
	(vip-restore-cursor-color-after-replace,
	vip-restore-cursor-color-after-insert): new functions.
	(vip-window-display-p): treat PC as a non-window display.
	(vip-convert-standard-file-name): new function.

	* ediff-util.el (ediff-file-under-version-control): new function.
	(ediff-inferior-compare-regions): improved interface.
	(ediff-maybe-checkout): new function.
	(ediff-maybe-save-and-delete-merge): new function.
	(ediff-setup): now uses convert-standard-filename.
	(ediff-make-temp-file): now returns expanded file name.
	* ediff-init.el (ediff-in-control-buffer-p): new function.
	(ediff-quit-merge-hook,ediff-autostore-merges): new variables.
	(ediff-convert-standard-file-name): new function.
	* ediff-mult.el (ediff-meta-buffer-keymap-setup-hook): new variable.
	(ediff-quit-session-group-hook): new hook.
	(ediff-filegroup-action): now passes ediff-merge-store-file to
	subordinate Ediff sessions.
	* ediff-ptch.el (ediff-patch-file-internal):
	now calls ediff-maybe-checkout.
	(ediff-context-diff-label-regexp): fixed regexp.
	(ediff-map-patch-buffer): fixed beg/end patch boundaries.
	* ediff.el: Now supports autostore for merge jobs.

1996-12-27  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* sort.el: Many doc fixes.
	(sort-regexp-fields): Don't test for buffer-substring-lessp;
	always return a pair of bounds.

1996-12-26  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* ispell.el (ispell-message-text-end): Handle `- ' before
	the "cut here" or "start of..." line.  Handle `Forward message'
	without `Start of'.

	* sendmail.el (mail-indentation-spaces): Doc fix.
	(mail-yank-clear-headers): Handle case of end < start.
	(mail-indent-citation): Handle case of end < start.
	(mail-yank-region): New command (on C-c C-r).

	* menu-bar.el (menu-bar-tools-menu): Add a "send mail" entry.

	* replace.el (perform-replace): Request integers from match-data,
	instead of asking for markers and converting them.

	* paragraphs.el (forward-paragraph, backward-paragraph): Doc fixes.

1996-12-25  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* mouse.el (mouse-start-end): Put values in proper order,
	in the doublequote case.

1996-12-22  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* startup.el (command-line-1): Handle --visit and --find.
	Handle -- as an option; treat what follows as a file name.

1996-12-21  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* edebug.el (edebug-read-symbol, edebug-read-string):
	Don't back up after reading.
	(edebug-read-sexp): Likewise.

1996-12-26  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-user-login-name): New function.
	(vc-fetch-master-properties, vc-lock-from-permissions, vc-file-owner,
	vc-fetch-properties, vc-after-save, vc-mode-line, vc-status):  Use
	`vc-user-login-name' instead of `user-login-name'.

	* vc.el (vc-next-action-on-file, vc-update-change-log,
	vc-backend-checkout, vc-backend-steal): Use `vc-user-login-name'
	instead of `user-login-name'.
	(vc-update-change-log): If `user-full-name' is nil, try
	`user-login-name'.  Failing that, use uid as a string.
	(vc-make-buffer-writable-hook): Removed (was unused).

1996-12-20  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* isearch.el (isearch-edit-string): When we try the search
	at the end, do that outside of the let which binds all the
	search state.

1996-12-18  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* mail-extr.el (mail-extract-address-components): Clear text props
	after inserting ADDRESS.

1996-12-18  Paul Eggert  <eggert@twinsun.com>

	* cal-dst.el (calendar-time-zone-daylight-rules):
	Add support for daylight saving rules in Iran.
	(require 'cal-persia) now needed.

1996-12-18  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* simple.el (sendmail-user-agent): Avoid error for CONTINUE non-nil.

	* replace.el (perform-replace): Undo previous change.
	Instead, use the new match-data features to avoid consing.

	* iso-acc.el (iso-languages): Add "german" entry.

1996-12-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* time.el (display-time-event-handler): Use let*.

	* time-stamp.el (time-stamp-mail-host-name): Get rid of
	time-stamp-mail-host.

	* replace.el (perform-replace): Delete the code that checked
	whether the regexp could match again right after this match.
	It made the loop too slow.

	* isearch.el (isearch-ring-adjust): Don't pop the state at the start.
	Push the state at the end, not in the middle.

	* ange-ftp.el (ange-ftp-date-regexp): Recognize various languages.

	* dired.el (dired-move-to-filename-regexp):
	Recognize various languages.

1996-12-17  Jonathan I. Kamens  <jik@cam.ov.com>

	* rnewspost.el (news-mail-reply, news-reply): Include the message
	ID in the In-reply-to line.

1996-12-16  Erik Naggum  <erik@naggum.no>

	* sendmail.el (sendmail-send-it): Explicitly pass interactive
	delivery options to sendmail.

1996-12-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* time-stamp.el (time-stamp-month-dd-yyyy): Use format-time-string.
	(time-stamp-dd/mm/yyyy, time-stamp-mon-dd-yyyy, time-stamp-dd-mon-yy)
	(time-stamp-yy/mm/dd, time-stamp-yyyy/mm/dd, time-stamp-yyyy-mm-dd)
	(time-stamp-yymmdd, time-stamp-hh:mm:ss, time-stamp-hhmm): Likewise.
	(time-stamp-month-numbers, time-stamp-month-full-names): Vars deleted.

	* landmark.el: New file.

	* time.el (display-time-event-handler): Fix previous change.

	* simple.el (compose-mail): Doc fix.

	* sendmail.el (sendmail-send-it): If no recipients, don't run
	the mailer program.  If there was also no fcc file, signal error.

1996-12-15  Ake Stenhoff <etxaksf@aom.ericsson.se>

	* imenu.el (imenu-generic-expression): Doc fix.
	(imenu--make-index-alist): Do `widen' and save-restriction here.
	(imenu): Not here.

1996-12-15  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* mail-extr.el (mail-extract-address-components): Don't downcase
	the domain part of the address.

1996-12-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dos-fns.el (register-name-alist): Use defvar.

	* abbrev.el (only-global-abbrevs): Use defvar.

	* replace.el: Change some defconsts to defvars.

	* fill.el: Change defconsts to defvars.

	* lisp-mode.el: Change defconsts to defvars.

	* paragraphs.el: Change defconsts to defvars.

	* startup.el: Change some defconsts to defvars.

	* faces.el: Change some defconsts to defvars.

	* isearch.el: Change defconsts to defvars.

	* format.el (format-alist): Change defconst to defvar.

	* files.el: Change defconsts to defvars.

	* simple.el: Change most defconsts to defvars.

	* bindings.el: Change defconsts to defvars.

	* files.el (find-file-revert-without-query): New variable.
	(find-file-noselect): Revert certain files without query
	if the file has changed and the buffer has not.

	* cpp.el (cpp-edit-load): Don't load anything if
	init-file-user is nil.
	(cpp-edit-save): Doc fix.

	* startup.el (init-file-user): Doc fix.

1996-12-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* noutline.el (outline-discard-overlays):
	Use overlays-in, to ensure we get rid of empty overlays.

1996-12-13  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* rmailsum.el (rmail-summary-beginning-of-message):
	Obey rmail-summary-size, and make sure summary is on top
	if we split a single large window.

	* rmailsum.el (rmail-summary-scroll-msg-down): If message is
	not visible at all, use rmail-summary-beginning-of-message.
	(rmail-summary-scroll-msg-up): Likewise.

	* time-stamp.el (time-stamp-no-file): Reintroduced.
	(time-stamp-string-preprocess): New function.
	(time-stamp-string): Use time-stamp-string-preprocess.
	(time-stamp-format): Doc fix.

1996-12-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* help.el (describe-mode): Include minor modes that aren't
	buffer local.

1996-12-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* time-stamp.el (time-stamp-am-pm): Variable deleted.
	(time-stamp-weekday-full-names): Likewise.
	(time-stamp-weekday-numbers): Likewise.
	(time-stamp-old-format-warn): Doc fix.

1996-12-12  Karl Eichwalder  <ke@ke.Central.DE>

	* info.el (Info-mode): Default for `tab-width'.

1996-12-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* menu-bar.el (menu-bar-tools-menu): Add items
	Debugger, Compile and Search Files.

	* time-stamp.el (time-stamp-strftime): Function deleted.
	(time-stamp-string): Use format-time-string.
	(time-stamp-format): Change default value
	to work with format-time-string.

	* browse-url.el (browse-url-url-at-point): Use thing-at-point.
	(browse-url-looking-at): Function deleted.

	* thingatpt.el (bounds-of-thing-at-point): Allow the end
	to be at the same place as ORIG.
	Try harder to find a thing that ends at ORIG.

	* novice.el (disabled-command-hook): Correctly keep the first
	paragraph of the command's documentation.

1996-12-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cc-mode.el (c-mode-fsf-menu): Add one dashed separator.

	* thingatpt.el (url): Move forward over colons.
	Move back over colons at the end.
	(thing-at-point-file-name-chars): Include @.

	* sort.el (sort-columns): Don't use `sort' utility
	if the text has text properties.

	* time.el (display-time-event-handler): Don't run the timer
	for successive times that are already in the past.

	* thingatpt.el (thing-at-point-url-chars): Allow comma, = and &.
	(url): Move back over commas at the end.

	* timer.el (timer-next-integral-multiple-of-time): Doc fix.

1996-12-10  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* bytecomp.el (byte-compile-insert-header): Fix previous change.

1996-12-09  Erik Naggum  <erik@naggum.no>

	* novice.el (disabled-command-hook): Use `defvar' and add
	documentation string.
	(disabled-command-hook): New option ! turns off disabled commands.

1996-12-08  Dave Love  <d.love@dl.ac.uk>

	* gnus-vis.el (gnus-button-alist): Allow whitespace in `<URL:...'
	markup (rfc1738), done last, after possible partial matches.
	(gnus-button-url): Zap any whitespace from a <URL:...> match.

1996-12-08  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* custom.el: Don't load .custom if -q was used.

	* gnus.el (gnus-read-init-file): Don't load anything
	if init-file-user is nil.

1996-12-06  Dave Love  <d.love@dl.ac.uk>

	* texinfo.el (texinfo-font-lock-keywords): Add `url', `email'.

1996-12-06  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (iconify-or-deiconify-frame): Define to be a
	no-op, so commands that call it (like viper.el) work.

1996-12-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* hscroll.el (hscroll-global-mode): Save and set
	truncate-lines globally, not locally.

1996-12-06  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* files.el (backup-buffer): Doc fix.

1996-12-06  Ake Stenhoff <etxaksf@aom.ericsson.se>

	* imenu.el (imenu): Support integers used as positions.

1996-12-05  Michael Ernst  <mernst@cs.washington.edu>

	* complete.el (PC-do-completion): Remove text properties from
	completions; also use string-equal instead of equal.

	* info.el (Info-follow-reference): Add each cross-reference to
	completions list just once, case-insensitively.

1996-12-03  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* thingatpt.el (thing-at-point-url-chars): Allow period.
	(url): Move back over periods at the end.

1996-12-02  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* jka-compr.el (jka-compr-temp-name-template): Initialize using TMPDIR.

1996-11-30  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* replace.el (perform-replace): Obey minibuffer-auto-raise.

1996-11-28  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* thingatpt.el: Downcase arguments as Lisp symbols.
	Fix many doc strings.
	(thing-at-point-file-name-chars): Renamed from file-name-chars.
	Allow a colon.
	(thing-at-point-url-chars): New variable.
	(url): Define new kind of "thing".

	* simple.el (compose-mail): Handle several more args:
	other-headers continue switch-function yank-action send-action.
	(sendmail-user-agent): Rewrite to handle new args.
	(assoc-ignore-case): New function.
	(define-mail-user-agent): Doc fix.

	* rmail.el (rmail-start-mail): Rewrite to use compose-mail.
	Two new arguments.
	(rmail-forward): Always call rmail-start-mail, never `mail'.

	* sendmail.el (mail-reply-action): Renamed from mail-reply-buffer.
	(mail-yank-original): Handle either an action or a buffer
	in mail-reply-action.
	(mail): Doc fix.

1996-11-27  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* mouse.el (mouse-drag-mode-line): Don't get error
	about sole window, if we don't actually try to change the size.

1996-11-26  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* isearch.el (isearch-no-upper-case-p): Use downcase
	so that we handle arbitrary kinds of casification.

	* sendmail.el (mail-mode-fill-paragraph): New function.
	(mail-mode): Set fill-paragraph-function.

	* info.el (Info-get-token): Find tokens where START matches
	around POS.

1996-11-25  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* ange-ftp.el (ange-ftp-normal-login): If using a smart gateway,
	but ange-ftp-gateway-host is nil, generate the login name
	in the usual simple way.

1996-11-23  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* menu-bar.el: In enable predicates for Files menu,
	use menu-updating-frame.

	* mouse.el (mouse-major-mode-menu): Propagate prefix arg
	to the command that is run.

	* pascal.el (pascal-mode): Make comment-indent-function buffer local.

	* bytecomp.el (byte-compile-insert-header): If emacs-version
	ends with a letter, don't check the version number.

	* simple.el (sendmail-user-agent): Support 2 optional args.
	(define-mail-user-agent): Doc fix.

	* isearch.el (isearch-mode):
	Maybe make minibuffer frame visible and/or raise it.

	* etags.el (etags-file-of-tag): Expand the file name
	using the truename of default-directory.

1996-11-22  Drew Csillag  <drew@staff.prodigy.com>

	* m4-mode.el: fixed syntax table for quotes since they messed up
	highlighting in comments and other constructions.

1996-11-22  Peter S Galbraith  <rhogee@mixing.qc.dfo.ca>

	* goto-addr.el (goto-address-fontify): Use overlay, not text props.

1996-11-22  Michael Ernst  <mernst@cs.washington.edu>

	* dired-x.el (dired-omit-size-limit): New variable.
	(dired-omit-toggle, dired-omit-expunge): Respect it.

1996-11-21  Geoff Voelker  <voelker@cs.washington.edu>

	* startup.el (normal-top-level, command-line, command-line-1):
	User w32 instead of ms-windows for window-system symbol.

1996-11-19  Geoff Voelker  <voelker@cs.washington.edu>

	* term/w32-win.el (x-defined-colors): Use color names from
	w32-color-map.

	* facemenu.el, faces.el, hippie-exp.el, info.el, mouse.el, vc.el:
	Use w32 instead of ms-windows for window-system symbol.

	* loadup.el: Use new names for w32 files.

	* dos-w32.el: Renamed from dos-nt.el.
	* w32-fns.el: Renamed from winnt.el.
	* term/w32-win.el: Renamed from term/win32-win.el.

1996-11-18  Geoff Voelker  <voelker@cs.washington.edu>

	* term/win32-win.el: Change identifiers of the form win32* to w32*.

1996-11-17  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* files.el (write-contents-hooks): Doc fix.

	* comint.el (comint-password-prompt-regexp): Recognize AIX format.

1996-11-16  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* font-lock.el (font-lock-keywords-alist): New variable.
	(font-lock-add-keywords): New function.  Set it.
	(font-lock-set-defaults): Use it.
	(font-lock-mode): Doc fix.
	(font-lock-compile-keyword): Cope with (MATCHER . 'FACE) forms.
	(font-lock-make-faces): Add attributes to font-lock-face-attributes if
	there are none for that face.
	(font-lock-face-attributes): Doc fix.
	(font-lock-match-c-style-declaration-item-and-skip-to-next): New
	function.  Match just identifiers.  Use it for C, Objective-C and Java.
	(font-lock-match-c++-style-declaration-item-and-skip-to-next): Match
	templates too.
	(c-font-lock-extra-types, c++-font-lock-extra-types):
	(objc-font-lock-extra-types, java-font-lock-extra-types): Use these
	variables in EVAL forms, i.e., do not eval when font-lock.el is loaded.

	* fortran.el (fortran-font-lock-keywords-3): Use simpler
	font-lock-match-c-style-declaration-item-and-skip-to-next.

	* simula.el (simula-font-lock-keywords-3): Use simpler
	font-lock-match-c-style-declaration-item-and-skip-to-next.

	* fast-lock.el (fast-lock-submit-bug-report): Function deleted.
	(fast-lock-verbose): New variable.
	(fast-lock-save-cache-1, fast-lock-cache-data): Use it.
	(fast-lock-save-facep): New macro when compiling.
	(fast-lock-get-face-properties): Rewrite for face lists.  Use it.

	* lazy-lock.el (lazy-lock-submit-bug-report): Function deleted.
	(lazy-lock-defer-on-scrolling): Renamed from lazy-lock-defer-driven.
	(lazy-lock-defer-on-the-fly): New variable from lazy-lock-defer-time.
	(lazy-lock-install): Use it.
	(lazy-lock-defer-time): Doc fix.  Add top-level code to detect use of
	old forms of lazy-lock-defer-time and lazy-lock-defer-driven, and popup
	temp buffer describing new forms.
	(lazy-lock-stealth-load): New variable.
	(lazy-lock-fontify-after-idle): Use it.
	(lazy-lock-mode): Doc fix.
	(lazy-lock-defer-line-after-change): Renamed from
	lazy-lock-defer-after-change.
	(lazy-lock-defer-rest-after-change):
	(lazy-lock-fontify-line-after-change):
	(lazy-lock-fontify-rest-after-change): New functions.
	(lazy-lock-install-hooks): Add one depending on deferral variables.
	(lazy-lock-unstall): Remove them.  Fontify if Font Lock mode still on.
	(lazy-lock-fontify-window, lazy-lock-fontify-conservatively): Use
	with-current-buffer rather than save-excursion.
	(lazy-lock-percent-fontified): Cast size to float before multiplying.

1996-11-14  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* rsz-mini.el (resize-minibuffer-frame-restore): Don't assume
	minibuffer frame is selected.
	(resize-minibuffer-frame): Likewise.

1996-11-13  Erik Naggum  <erik@naggum.no>

	* message.el (message-mode): Doc fix.

	* emacsbug.el (report-emacs-bug): New argument recent-keys read
	before bug subject to capture more relevant recent input.

1996-11-11  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* isearch.el (isearch-complete1): If no completion,
	don't clobber isearch-string, and return nil.

1996-11-11  Erik Naggum  <erik@naggum.no>

	* lisp-mode.el (combine-after-change-calls): The first form is not
	special.

1996-11-10  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* dired-x.el (dired-jump): Never turn omitting *on*.
	Refresh the line *before* turning omitting off.

	* help.el (describe-variable): Pretty-print the values.
	Put doc string first, if the value is long.

	* subr.el (define-key-after): If AFTER is t, always put new binding
	at the end.

1996-11-09  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* find-dired.el (find-grep-options): Treat solaris, irix like BSD.

	* edebug.el (combine-after-change-calls): New def-edebug-spec.
	* lisp-mode.el (combine-after-change-calls):
	Add lisp-indent-function property.

	* diary-lib.el (list-diary-entries): Reread the diary file
	if it has changed.

	* files.el (revert-buffer): Doc fix.

	* map-ynp.el (map-y-or-n-p): Handle minibuffer-auto-raise here.

	* sh-script.el (sh-mode): Parse the interpreter from the file text.

1996-11-08  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* files.el (wildcard-to-regexp): Don't treat [] as special.

1996-11-07  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* subr.el (combine-after-change-calls): New macro.

	* sh-script.el (sh-set-shell): Pass args no-query-flag
	and insert-flag to executable-set-magic.
	Don't call executable-set-magic if insert-flag is nil.
	(sh-mode): Always call sh-set-shell, but use insert-flag arg
	to control whether to call executable-set-magic.
	No need to set comment-start-skip directly here.

	* sh-script.el (sh-mode-syntax-table): Turn on comment syntax for #,
	comment-end for newline, string for `, and excape for $.
	rc can use the same as sh.  Move csh after sh.
	(sh-comment-prefix, sh-font-lock-keywords-only): Variables deleted.
	(sh-mode): Adjust setting of font-lock-defaults.
	(sh-font-lock-keywords): No need for anything special for comments.
	(sh-set-shell, sh-mode): Set comment-start-skip to a simple constant.

1996-11-06  Dave Love  <d.love@dl.ac.uk>

	* sh-script.el (sh-mode): Set `comment-start-skip'; otherwise
	only set if `sh-set-shell' gets called.

1996-11-06  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* time.el (display-time-format): New variable.
	(display-time-string-forms): Use display-time-format.

1996-11-06  Jim Blandy  <jimb@totoro.cyclic.com>

	* vc.el (vc-backend-print-log): Use "cvs log" to get log entries,
	not "cvs rlog".

1996-11-06  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* page.el (narrow-to-page): With negative arg, move back one extra
	page unless we start right after a page delimiter.

	* bindings.el (minor-mode-alist): Don't use purecopy.

1996-11-05  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* comint.el (comint-output-filter): Run comint-output-filter-functions
	directly, not via comint-output-filter.

	* compile.el (compile-auto-highlight): Renamed from
	compile-highlight-display-limit.

	* time-stamp.el (time-stamp-dd/mm/yyyy): New function.

1996-11-04  Kevin Rodgers  <evinr@ihs.com>

	* compile.el (compile-highlight-display-limit): New variable.
	(compilation-handle-exit): Parse error messages here
	as specified by compile-highlight-display-limit.
	(compile-reinitialize-errors): Add highlighting to error messages
	once they are parsed.
	(compilation-forget-errors): Remove highlighting properties here.

1996-11-04  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* frame.el (initial-frame-alist): Make default value nil--
	don't specify `minibuffer' parameter.

	* dired.el (dired-mode-map): Put dired-mark-subdir-files on *s.

1996-11-03  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* man.el (Man-bgproc-sentinel): Move the buffer creation
	outside of the binding of case-fold-search.

1996-11-03  Paul D. Smith  <psmith@BayNetworks.com>

	* make-mode.el (makefile-font-lock-keywords): Handle dependencies
	first and variable references after.
	(makefile-dependency-regex, makefile-macroassign-regex):
	Accept spaces at the beginning of the line.

1996-11-02  Henry Guillaume  <henry@qbd.com.au>

	* find-file.el (general): Enabled commentary for Finder;
	(ff-search-directories): Changed /usr/include/* to /usr/include;
	(ff-get-file-name): Improve behaviour when file is found in a buffer.

1996-11-02  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* handwrite.el: New file.
	(handwrite-version): Variable deleted.
	(handwrite): Use emacs-version instead of handwrite-version.

	* dired-x.el (dired-mode-map): Put dired-mark-extension on *.
	Add *( as new binding for dired-mark-sexp, *t for dired-do-toggle.

	* dired.el (dired-mode-map): Make * a prefix for mark commands.
	Delete the old *, / and @ keybindings.

	* info.el (Info-scroll-up): Doc fix.

	* batmode.el: New file.

1996-11-02  Erik Naggum  <erik@naggum.no>

	* add-log.el (change-log-fill-paragraph): Return non-nil so
	fill-paragraph doesn't continue filling.  Don't skip backwards
	over a paragraph if we at a paragraph start.

1996-11-01  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* isearch.el (isearch-forward): Doc fix.

1996-11-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* lisp.el (lisp-complete-symbol): Sort the list.

1996-10-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (comment-region): With just C-u as arg,
	delete any number of comment-end delimiters from end of line.

	* tex-mode.el (tex-file): Fix paren error in last change.
	(tex-recenter-output-buffer): Switch windows in a more controlled
	fashion, using save-selected-window.

	* dired.el (dired-find-file): Error if line's file does not exist.

1996-10-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* m4-mode.el: New file.

1996-10-28  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* sh-script.el (sh-font-lock-keywords-1): Use font-lock-builtin-face.

	* files.el (auto-mode-alist): Objective-C is `.m' and SIMULA is `.sim'.

1996-10-27  Paul Eggert  <eggert@twinsun.com>

	* timezone.el (timezone-time-from-absolute): Fix off-by-one
	error in current-time-origin.

1996-10-25  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* window.el (kill-buffer-and-window): New command.
	Bind it to C-x 4 0.

1996-10-24  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* sh-script.el (sh-mode): Don't make font-lock-keywords buffer-local.

	* rmail.el (rmail-reply): Merge resent-to and resent-cc into to and cc.
	Ignore the resent- fields aside from that.

	* pascal.el (pascal-indent-declaration): Avoid infinite loop
	if edpos is at end of buffer.

1996-10-24  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* info.el (Info-insert-dir): Ensure directory ends with slash.

	* make-mode.el (makefile-font-lock-keywords): Accept - and . in
	variable names.

	* imenu.el (imenu-scanning-message): Use ellipsis.

	* iso-acc.el (iso-langauges): Alphabetize list.
	Add Catalan, Spanish, and Esperanto.

	* dired.el (dired-insert-directory): Check for non-US LANG.

1996-10-24  Dave Gillespie <daveg@synaptics.com>

	* cl-macs.el (lexical-let): Fixed a bug involving nested
	lexical contexts and macros.

1996-10-23  Simon Marshall  <simon@wombat.gnu.ai.mit.edu>

	* font-lock.el (save-buffer-state): New macro when compiling.
	(font-lock-default-fontify-region, font-lock-default-unfontify-region):
	Use it rather than doing everything by hand.
	(font-lock-default-fontify-region): Always unfontify first.
	(font-lock-fontify-syntactically-region): Never unfontify here.
	Loop back to find comment start, if forward-comment fails to advance.
	Use scan-sexps to skip a string when found, not re-search-forward loop.
	Use marker-position of font-lock-cache-position, not buffer position.
	(font-lock-set-defaults): Make font-lock-cache-state and
	font-lock-cache-position buffer-local here, not at top-level.
	Make font-lock-cache-position be a marker pointing nowhere.
	Test and set font-lock-set-defaults, not font-lock-keywords.
	(font-lock-unset-defaults): Unset font-lock-set-defaults here.
	(font-lock-set-defaults): New variable.
	(font-lock-after-change-function): Rescan to end plus old-len.
	(font-lock-match-c++-style-declaration-item-and-skip-to-next): Doc it.
	(font-lock-mode): Undo Jul 27 change.
	(font-lock-builtin-face, font-lock-warning-face): New variables.
	(font-lock-make-faces): Specify defaults for these faces.
	(java-font-lock-keywords, java-font-lock-keywords-1):
	(java-font-lock-keywords-2, java-font-lock-keywords-3):
	(objc-font-lock-keywords, objc-font-lock-keywords-1):
	(objc-font-lock-keywords-2, objc-font-lock-keywords-3): New variables.
	(font-lock-defaults-alist): New entry for Java and Objective-C modes.
	(c++-font-lock-extra-types, objc-font-lock-extra-types):
	(c-font-lock-extra-types, java-font-lock-extra-types): New variables.
	Use them when building the respective relevant regexps.

	* add-log.el (change-log-font-lock-keywords): Rewrite.

	* awk-mode.el (awk-font-lock-keywords): New variable.
	(awk-mode): Set font-lock-defaults to support Font Lock mode.
	Provide when loaded.

	* dired.el (dired-font-lock-keywords): Rewrite.  Use dired.el regexps.

	* sendmail.el (mail-font-lock-keywords): Tweak.

	* rmail.el (rmail-font-lock-keywords): Tweak.

	* simula-font-lock-keywords.el (simula-mode-syntax-table): Give `_'
	symbol syntax; see Table of Syntax Classes in the Emacs Lisp manual.
	(simula-font-lock-keywords, simula-font-lock-keywords-1):
	(simula-font-lock-keywords-2, simula-font-lock-keywords-3):
	New variables for Font Lock support.
	(simula-match-string-or-comment): New function for likewise.
	(simula-find-next-comment-region): Function deleted.
	(simula-mode): Set font-lock-defaults.  Add autoload cookie.

1996-10-20  Ake Stenhoff <etxaksf@aom.ericsson.se>

	* cc-mode.el (cc-imenu-java-generic-expression): New variable.
	(java-mode): Set imenu-generic-expression.

1996-10-20  Kevin Rodgers  <kevinr@ihs.com>

	* compile.el (compilation-skip-to-next-location): Defined.
	(compilation-next-error-locus, compilation-parse-errors): Respect it.

1996-10-17  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-file-owner): Always return user name, using the
	optional argument of user-login-name.
	(vc-locking-user, vc-status): Discard checks for numerical value of
	vc-locking-user.

	* vc.el (vc-dired-reformat-line): Discard check for numerical value
	of vc-locking-user.

1996-10-14  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* mouse-sel.el (mouse-sel-set-selection-function): Doc fix.
	Use x-select-text, for the primary selection.
	(mouse-sel-get-selection-function):
	Use x-cut-buffer-or-selection-value, for the primary selection.

	* simple.el (universal-argument): Doc fix.

	* files.el (set-visited-file-name): Doc fix.
	(write-file): Use CONFIRM when calling set-visited-file-name.

1996-10-14  Torbjorn Einarsson  <T.Einarsson@clab.ericsson.se>

	* f90.el (f90-no-block-limit): Fixed bug for indentation of
	elsewhere and elseif.
	(f90-looking-at-where-or-forall): Now allows for labelled forall
	and where statements.
	(f90-font-lock-keywords-2): New highlighting for labelled where
	and forall. Fixed small bug with else highlighting.
	(f90-fill-region): Moved indentation to f90-break-line.
	(f90-break-line): Will now always indent the second line.
	(f90-indent-line): Simpler test for auto-fill.
	(f90-auto-fill-mode): Removed.
	(f90-electric-insert): Added for possibility of auto-filling of
	lines without spaces, as well as early updating of line.
	(f90-mode-map): Added bindings of operators to f90-electric-insert.
	(f90-do-auto-fill): Now also updates line (changes case).

1996-10-12  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* files.el (enable-local-variables): Doc fix.

1996-10-12  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* subr.el (define-function): Define as alias for defalias.

	* simple.el: Use defalias not define-function.

	* bytecomp.el (define-function): Mark it as obsolete.

1996-10-12  Gernot Heiser  <gernot@jungfrau.disy.cse.unsw.EDU.AU>

	* refer.el (refer-bib-directory): New variable, list of
	directories where to look for bib files.  Special values `texinputs'
	and `bibinputs' mean take directory list from corresponding
	environment variable.

	(refer-bib-files): New special value `auto', for looking up all
	files in directories pointed to by refer-bib-directory.
	I have the feeling that this isn't really my code but came from
	the net (copylefted). However, I cannot trace this down any
	more. If it isn't mine, it's probably Ashwin's.
	(refer-get-bib-files): Support `auto' value of refer-bib-files.
	Support `texinputs', `bibinputs' value of refer-bib-directory.

	(refer-saved-state, refer-previous-keywords, refer-saved-pos,
	refer-same-file): Properly declared (defvar) these variables.

	(refer-yank-key): New function.

	(refer-find-entry-internal): Find bibliography entries in other
	window, with minimal reconfiguration of windows.

	(refer-expand-files): New function.

1996-10-12  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* files.el (file-name-extension): New function.

1996-10-11  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* msb.el (msb--toggle-menu-type): Call menu-bar-update-buffers with t.

	* edt.el (edt-load-xkeys): Doc fix.

	* follow.el (set-process-filter): Doc fix.

	* vip.el: Doc fixes on most variables.

	* tpu-edt.el (tpu-load-xkeys): Doc fix.

	* nnfolder.el (nnfolder-ignore-active-file): Doc fix.

	* two-column.el (2C-two-columns): Doc fix.

	* refbib.el (r2b-proceedings-list, r2b-help-message): Doc fixes.

	* solitaire.el (solitaire): Doc fix.

1996-10-10  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* simple.el (newline): Use buffer-has-markers-at.

	* browse-url.el (browse-url-at-point): Add autoload cookie.
	(browse-url-at-mouse, browse-url-of-buffer, browse-url-of-file)
	(browse-url-of-dired-file): Likewise.

	* files.el (hack-local-variables-prop-line):
	Ignore case when checking for `mode'.

	* help.el (describe-function): If no fn specified, say so.
	(variable-at-point): Return 0 if no variable there.
	(describe-variable): If no variable specified, say so.
	Don't use nil as the variable.

	* files.el (auto-mode-alist): .hpp files get C++ mode.

1996-10-10  Denis Howe  <dbh@doc.ic.ac.uk>

	* browse-url.el (browse-url): New function.
	(browse-url-CCI-host): New variable.
	(browse-url-at-mouse): Added event-buffer and event-point
	functions for XEmacs compatibility.
	(browse-url-file-url): Check for EFS after alist, URL-encode
	special chars.
	(browse-url-grail): New function.
	(browse-url-interactive-arg): Add new-window logic.
	(browse-url-looking-at): Fixed.
	(browse-url-lynx-xterm): New function.
	(browse-url-lynx-emacs): Use term.el instead of terminal.el.
	(browse-url-netscape): Contact/start Netscape in the
	background.  Multi-display support.  Renamed
	browse-url-netscape-send.  URL-encode comma.
	(browse-url-netscape-command): New variable.
	(browse-url-netscape-startup-arguments): New variable.
	(browse-url-url-at-point): Improved matching to supply missing
	"http://".
	Other fixes for byte-compilation.

1996-10-09  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* rmail.el (rmail): Run rmail-mail-hook last.

1996-10-08  Erik Naggum  <erik@naggum.no>

	* lisp.el (narrow-to-defun): Narrow to the same defun that
	`mark-defun' would make the region.
	(insert-parentheses): Let a negative argument enclose preceding
	sexps.

1996-10-08  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* comint.el (comint-read-noecho): Clear out the intermediate strings.

	* timer.el (cancel-function-timers): Add autoload.

	* rmail.el (rmail-mode-2): Don't run rmail-mode-hook here.
	(rmail-mode, rmail): Run it here.

1996-10-08  Barry A. Warsaw  <cc-mode-help@python.org>

	* cc-mode.el (c-mode-map):
	Install FSF mode menu into menubar using the name
	"CC-Mode" for all supported modes.
	(c++-mode-map, objc-mode-map, java-mode-map): Don't install an
	additional FSF menu.

	* cc-mode.el:
	Removed the following variables from the built-in "cc-mode" style:
	    c-echo-syntactic-information-p
	    c-string-syntax-p
	    c-tab-always-indent
	    c-inhibit-startup-warnings-p
	These control how the mode acts, not how code looks.

	* cc-mode.el (c-indent-command): Doc fix.

	* cc-mode.el (c-style-alist): Added "linux" style.

	* cc-mode.el (c-lineup-comment): Preserve comment-column.

	* cc-mode.el (c-gnu-impose-minimum):
	Don't impose minimum on comment-only lines.
	(c-show-syntactic-information): Optional universal argument inserts
	analysis as a comment on the line.

	* cc-mode.el (c-insert-tab-function):
	New variable allowing tab-to-tab-stop to be
	used instead of insert-tab.
	(c-indent-command): Use c-insert-tab-function variable.

	* cc-mode.el (java-mode): Use (c-set-style "java"); i.e. lowercase.

	* cc-mode.el (c-functionp): New function.
	(c-electric-brace, c-read-offset, c-set-offset, c-get-offset):
	Use it.

	* cc-mode.el (c-offsets-alist): New syntactic symbols:
	extern-lang-open, extern-lang-close, inextern-lang

	(c-hanging-braces-alist): Hang extern-lang-open by default.

	(c-electric-brace): Add extern-lang-open and extern-lang-close to
	list of symbols that can hang.

	(c-guess-basic-syntax): CASE 5A.4 => 5A.5; New CASE 5A.4 added to
	recognize extern-lang-open; CASE 14C => 14D; New CASE 14C added to
	recognize extern-lang-close

	(c-search-uplist-for-classkey): When searching for c-class-key,
	concat "\\|extern[^_]".  The logic for determining whether we are
	inclass-p and inextern-p is essentially the same so this seems to
	work very well in all test cases.

	(c-guess-basic-syntax): If inclass-p, do an additional check to
	see whether this is really inside an external language definition
	block or a class definition and set inextern-p accordingly (a
	boolean only).

	(c-guess-basic-syntax): CASE 5A.4 => 5A.1; 5A.1-5A.3 => 5A.2-5A.4;
	New CASE 5F to check for extern-lang-close; CASE 5F-5J => 5G-5K;
	CASE 5I: modifier could either be 'inclass or inextern-lang; CASE
	14A: closing brace isn't an inline-close if we're inside an extern
	language block; CASE 14B: watch out for same.

	(c-guess-basic-syntax): CASE 5A.3: an inline-open
	brace should also be given inclass syntax.  The problem is that
	this breaks indentation for brace that start inline-inclass
	functions inside a nested class since they will twice add the
	indentation of the inner class to the running total.

	The solution is to not give one of the two symbols a relpos.  The
	decision was made to omit the relpos of the 'inline-open symbol.

	(c-mode-help-address): Added cc-mode-help@python.org.

	(c-recognize-knr-p): No longer a user variable.
	(c++-mode, java-mode): Set c-recognize-knr-p to nil.

	(c-guess-basic-syntax): CASE 5G: Although we still test on
	c-recognize-knr-p, this is no longer user configurable, and no
	longer imposes potentially disasterous impact on performance.
	Adopt c-mode.el assumption that argdecls are indented at least one
	space and that function headers are not indented.  This prevents
	us from potentially searching back to the top of the file when
	looking at a large number of top-level delarations.

	(c-gnu-impose-minimum): New function

	(c-label-minimum-indentation): New buffer-local variable.

	(c-style-alist): In "gnu" style, add c-gnu-impose-minimum to
	c-special-indent-hook so case-label and label syntaxes will have a
	minimum indentation.

	(c-submit-bug-report): report on c-label-minimum-indentation

	(c-set-style-1): special case c-special-indent-hook

	(c-special-indent-hook): Make it buffer local.

	* cc-mode.el (c-skip-conditional): `try' clauses in C++ skip only
	1 sexp.  Also take care of finally and synchronized statements.

	* cc-mode.el (c-lineup-arglist-close-under-parent): New function.

	* cc-mode.el (c-C-conditionals): New constant.
	(c-C-conditional-key, c-C++-conditional-key, c-Java-conditional-key):
	Use c-C-conditionals.

	* cc-mode.el (c-Java-conditional-key): New variable.
	(java-mode): Use c-Java-conditional-key.

	* cc-mode.el (c-C++-access-key): Allow for whitespace between the
	protection key and the colon.

	* cc-mode.el (c-set-style): as a last resort, match exact case for
	stylename.

1996-10-08  Erik Naggum  <erik@naggum.no>

	* simple.el (line-move): Ignore invisibility in `move-to-column'.

	* lisp-mode.el (with-current-buffer): Correct indentation
	property.

1996-10-08  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* gud.el: Move two function definitions.

1996-10-07  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* perl-mode.el (electric-perl-terminator, perl-indent-command):
	(perl-backward-to-noncomment, indent-perl-exp): Avoid error if
	comment-start-skip is nil.

	* timer.el (cancel-timer): Add autoload cookie.

1996-10-06  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* simple.el (universal-argument): Doc fix.

1996-10-06  Erik Naggum  <erik@naggum.no>

	* help.el (print-help-return-message): Use new functions
	`special-display-p' and `same-window-p' to determine which help
	message to print.

1996-10-04  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* sgml-mode.el (sgml-specials): Delete `-' from the list.
	(sgml-font-lock-keywords): Add an element for comments.

	* rmailsum.el (rmail-summary-line-count-flag):
	Renamed from rmail-summary-line-count-p.

	* rmailsum.el (rmail-summary-line-count-p): New variable.
	(rmail-make-basic-summary-line): Optionally exclude the line count.

	* buff-menu.el (Buffer-menu-revert): New function.
	(Buffer-menu-mode-map): Use Buffer-menu-revert for g.
	(Buffer-menu-mode): Doc fix.

1996-10-03  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* imenu.el (imenu-default-create-index-function): Fix error message.

	* info.el (Info-read-subfile): Allow a file name as arg.
	(Info-search): Restore previous subfile correctly.

	* lisp-mode.el (eval-after-load): Add lisp-indent-function for it.

1996-10-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (file-name-non-special): New function.
	Add it to file-name-handler-alist.

1996-10-03  Erik Naggum  <erik@naggum.no>

	* lisp-mode.el (with-temp-buffer): Add indentation property.

	* subr.el (with-current-buffer): Minor cleanup.
	(with-temp-file): Support for arguments nil and t removed.
	(with-temp-buffer): Use this new macro instead.
	(with-output-to-string): Rewrite.

1996-10-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (recover-session): Error if session files turned off.

1996-09-30  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* imenu.el (imenu--make-index-alist): Add doc string.

1996-09-29  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* edebug.el (save-selected-window, save-current-buffer)
	(save-match-data, with-output-to-string, with-current-buffer)
	(with-temp-file, with-temp-buffer): Add def-edebug-spec calls.

1996-09-28  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* profile.el: Delete several \n\'s.
	(profile-fix-fun): Delete an if whose test is never true.
	Handle doc strings that are also the function value.

1996-09-27  Jacques Duthen  <duthen@cegelec-red.fr>

	* ps-print.el:
	(ps-print-prologue-1): Fix bug in postscript comment lines.
	(ps-nb-pages): Call ps-setup _before_ switching to the other
	buffer, because of buffer variables.

	* ps-print.el: Major rewrite.
	(ps-page-dimensions-database, ps-paper-type): Replace the
	following global variables:
	(ps-a4-page-height, ps-a4-page-width, ps-legal-page-height,
	ps-legal-page-width, ps-letter-page-height, ps-letter-page-width,
	ps-pages-alist, ps-page-dimensions): Variables deleted.
	(ps-page-height-i, ps-page-width-i): Variables deleted.
	(ps-print-prologue): Variable deleted.
	(ps-print-prologue-1, ps-print-prologue-2): New variables.
	Major rewrite of the postscript code to handle landscape mode,
	multiple columns and new font management.
	(ps-landscape-mode, ps-number-of-columns, ps-inter-column): New
	variables.
	Add landscape mode and multiple columns with interspacing.
	(ps-font-info-database, ps-font-family, ps-font-size,
	ps-header-font-family, ps-header-font-size, ps-header-title-font,
	ps-header-title-font-size): New variables.
	New font management interface.
	(ps-header-line-pad, ps-header-offset): New variables.
	(ps-header-font, ps-landscape-page-height): New internal variables.
	(ps-top-margin): Change its semantics.  It is now really the top
	margin, not anymore twice the top margin.
	(/ReportAllFontInfo):  New postscript function to get all the font
	families of the printer.
	(ps-setup): New function.
	(ps-line-lengths, ps-nb-pages-buffer, ps-nb-pages-region): New
	utility functions.
	(ps-page-dimensions-get-width, ps-page-dimensions-get-height): New
	macros.
	(/HeaderOffset): Fix bug with /PrintStartY.
	(/SetHeaderLines): Fix bug.

1996-09-28  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* lisp-mode.el (with-temp-file): Add lisp-indent-function property.

	* subr.el (with-temp-file): New macro.

1996-09-27  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* perl-mode.el: Add `provide' call.

	* ange-ftp.el (ange-ftp-skip-msgs): Recognize `passive'.

1996-09-26  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* etags.el (etags-file-of-tag): Fix looking-at regexp.

	* rmail.el: Delete all the autoload calls.

	* undigest.el, rmailsort.el: Add many autoload cookies.

	* rmailedit.el (rmail-edit-current-message): Add autoload.

	* rmailmsc.el (set-rmail-inbox-list): Add autoload cookie.

	* rmailkwd.el (rmail-read-label, rmail-add-label, rmail-kill-label)
	(rmail-previous-labeled-message, rmail-next-labeled-message):
	Add autoloads.

	* rmailsum.el (rmail-summary-by-senders, rmail-summary): Add autoload.
	(rmail-summary-by-topic, rmail-summary-by-regexp): Likewise.
	(rmail-summary-by-recipients, rmail-summary-by-labels): Likewise.

	* rmailout.el (rmail-fields-not-to-output): Add autoload cookie.
	(rmail-output-to-rmail-file, rmail-output): Likewise.

	* lucid.el (exec-to-string): New alias.

	* gud.el (perldb): Supply visited file name, or -e 0, as default args.

1996-09-25  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* subr.el (split-string): Fix minor bug.

	* gud.el (gud-perldb-massage-args): Handle -e in ARGS.
	(gud-perldb-marker-filter): Handle drive letters in file name.
	(perldb): Update comint-prompt-regexp for latest Perl.

	* gud.el (gud-mode): Locally set comint-input-ignoredups to t.

	* paragraphs.el (forward-paragraph): Don't ever move forward
	again across a line if we stopped there because it doesn't start
	with the fill prefix.

1996-09-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* files.el (auto-mode-alist): Add lower-case varieties of
	ChangeLog filenames, for case-insensitive MSDOS and MS-Windows.

	* viper-util.el (vip-window-display-p): Don't treat MS-DOS as a
	windowed display.

1996-09-24  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* mouse-copy.el: New file.

	* mouse-drag.el: New file.
	(mouse-drag-throw): Bind adjusted-mouse-delta.

	* mouse.el (mouse-drag-secondary): Make sure to return nil
	if we don't make a selection.

	* simple.el (shell-command-to-string): Make the buffer current
	since output goes in current buffer.  Use shell-command-switch.

	* lisp-mode.el (save-current-buffer, with-current-buffer)
	(with-output-to-string): Specify how to indent.

	* imenu.el (imenu--cleanup): Handle shared structure in alist.

	* subr.el (split-string): New function.

	* simple.el (shell-command-to-string): New function.

	* subr.el (with-output-to-string): New macro.

	* tex-mode.el (tex-main-file): Add missing initial value.
	(tex-file): Set tex-print-file to source-file always.
	(tex-last-file-texed): Renamed from tex-last-buffer-texed
	and now holds a file name.
	(tex-region): Test and set tex-last-file-texed.

	* edebug.el (edebug-original-signal): Don't define it.
	(edebug-signal): Call signal, not edebug-original-signal.
	(edebug-enter): Bind signal-hook-function instead of fsetting signal.
	(edebug-recursive-edit): Clear or clear signal-hook-function.

1996-09-23  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* files.el (insert-file-contents-literally): Doc fix.

	* iso-acc.el (iso-languages): Add element for latin-3.

1996-09-22  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* subr.el (run-hooks): defconst deleted.
	The initialization is now in eval.c.

	* arc-mode.el: Doc fixes.
	(archive-mode, archive-extract, archive-check-dos)
	(archive-write-file-member): Set buffer-file-type only if
	default-buffer-file-type is bound.
	(buffer-file-type): Don't make this buffer-local or permanent.
	Just don't mess with it.

	* rmailkwd.el (rmail-keywords): Don't initialize.

1996-09-22  Stephen Gildea  <gildea@intouchsys.com>

	* time-stamp.el (time-stamp-old-format-warn): New variable.
	(time-stamp-format): Use ISO 8601 format for date.

1996-09-22  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* isearch.el (unread-command-event, unread-command-events)
	(last-command-event): defvars deleted.

	* edebug.el (pre-command-hook, post-command-hook): Defvars deleted.
	(post-command-idle-hook): Defvar deleted.
	(edebug-outside-post-command-idle-hook): Defvar deleted.
	(edebug-enter): Don't look at or set post-command-idle-hook.
	(edebug-outside-excursion): Likewise.
	(edebug-emacs-19-specific): Don't define read-expression-history
	and read-expression-map.

	* ffap.el (path-separator): Duplicate definition deleted.
	(ffap-what-domain): Don't define mail-extr-all-top-level-domains here.

	* refbib.el (r2b-capitalize-title-stop-words): Renamed from capit...
	(r2b-capitalize-title-stop-regexp): Renamed from capit...
	(r2b-capitalize-title-region): Renamed from capitalize...
	(r2b-capitalize-title): Renamed from capitalize...

	* bib-mode.el (bib-capitalize-title-stop-words): Renamed from capit...
	(bib-capitalize-title-stop-regexp): Renamed from capit...
	(bib-capitalize-title-region): Renamed from capitalize...
	(bib-capitalize-title): Renamed from capitalize...

	* edmacro.el (insert-kbd-macro): Duplicate definition deleted.

	* subr.el (eql): Incorrect definition deleted.
	Now it is only in cl.el.

	* lucid.el (add-timeout): Duplicate definition deleted.
	(screenw-width, screen-height): Likewise.
	(disable-timeout, keymap-parent, set-keymap-parent): Likewise.

	* frame.el (ctl-x-5-map, ctl-x-5-prefix): Duplicate defs deleted.

	* register.el: New kind of register value is a file name and position.
	(jump-to-register): Handle file-query.
	(register-swap-out): New function.  Add it to kill-buffer-hook.
	(register-alist): Doc fix.

	* subr.el (with-current-buffer): New macro.

	* byte-opt.el (byte-optimize-form-code-walker):
	Treat save-current-buffer like save-excursion.

1996-09-21  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* bytecomp.el (save-current-buffer): Compile it like save-excursion.
	(byte-compile-save-current-buffer): New function.

	* help.el (locate-library): Print no messages if called from Lisp.

	* imenu.el (imenu--split-menu): Keep the rescan item at top level.
	Keep subalists at top level too.
	Name the split-off submenus from the first item in them.
	(imenu--generic-function): Avoid adding nil as elt of the result.

	* imenu.el (imenu--generic-function): Create a special entry
	if the element of imenu-generic-function asks for it.
	(imenu): Handle special entries.
	(imenu--subalist-p): New function.  Use in various places.

1996-09-20  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* frame.el (scroll-bar-side): New variable.
	(toggle-scroll-bar): Use scroll-bar-side.

1996-09-19  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-mult.el (ediff-quit-session-group-hook): new hook.
	(ediff-filegroup-action): now passes ediff-merge-store-file to
	subordinate Ediff sessions.
	* ediff.el: Now supports autostore for merge jobs.
	* ediff-util.el (ediff-maybe-save-and-delete-merge): new function.
	(ediff-setup): now uses convert-standard-filename.
	(ediff-make-temp-file): now returns expanded file name.
	(ediff-really-quit): now warps pointer into a working frame
	* ediff-init.el (ediff-quit-merge-hook,ediff-autostore-merges):
	new variables.
	(ediff-convert-standard-file-name): new function.
	Added on-line help, moved some functions to and from ediff-util.el
	(ediff-file-remote-p): modified.
	(ediff-set-face-pixmap): new function
	(ediff-odd-diff-pixmap,ediff-even-diff-pixmap,ediff-fine-diff-pixmap):
	new variables.
	* ediff-ptch.el (ediff-context-diff-label-regexp): fixed regexp.
	(ediff-map-patch-buffer): fixed beg/end patch boundaries.
	Now checks for the return code from the patch program.
	Fixed ediff-patch-options, ediff-backup-extension, ediff-backup-specs
	* ediff-merg.el, ediff-diff.el, ediff-init.el:
	* ediff-hook.el: Changed ediff-meta to ediff-mult.
	* ediff-ptch.el (ediff-backup-specs): new variable.
	* ediff.el (ediff-documentation): modified.
	* ediff-help.el: New file.
	* ediff-mult.el
	(ediff-intersect-directories,ediff-meta-insert-file-info): functions
	modified.
	* ediff-vers.el, ediff.el:
	Changed vc/rcs/etc-ediff-internal to ediff-vc/rcs/etc-internal
	* ediff-diff.el (ediff-setup-fine-diff-regions):
	allow diff options to be passed to the diff
	program.

1996-09-19  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el (vip-autoindent): no longert moves insert point.
	(vip-paren-match): now pays no attention to comments and
	leaves region active.
	* viper-util.el (vip-convert-standard-file-name): new function.

1996-09-19  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* mouse.el (mouse-drag-region): Ignore event end-point if it
	is not a number.

	* imenu.el (imenu--generic-function): Use markers for positions.

1996-09-18  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* imenu.el (imenu--mouse-menu): Add special handling for
	rescan item.

	* tq.el (tq-filter): No need for save-match-data.

	* gud.el (gud-display-line): Don't call display-buffer
	if buffer already has a window.

1996-09-17  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* rmailsum.el (rmail-summary-next-same-subject): Don't set
	search-regexp until after adjusting subject string.

1996-09-16  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* ispell.el (ispell-dictionary-alist-1): Add `american' to list.

1996-09-16  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc.el (vc-print-log): Set the display window so that it shows
	the current log entry completely.

	* vc-hooks.el (vc-find-cvs-master): Fixed handling of "locally
	added" files.

1996-09-16  Erik Naggum  <erik@naggum.no>

	* files.el (file-locked-p): Alias to `ignore' if no file locking.

1996-09-15  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* rmail.el (rmail-insert-inbox-text): Detect locked
	RMAIL files at the outset, before copying any files.

1996-09-15  Lennart Staflin  <lenst@lysator.liu.se>

	* tq.el (tq-filter): Add unwind-protect and save-match-data.

1996-09-14  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* info.el (Info-mode): Do fontify, if ms-windows.

	* startup.el (normal-top-level, command-line-1, command-line):
	Test for ms-windows instead of win32, and use memq.

	* mouse.el (mouse-set-region):
	Test for ms-windows instead of win32, and use memq.

	* faces.el (make-face, make-face-x-resource-internal):
	Test for ms-windows instead of win32.  Use memq.
	(initialization at end of file): Likewise.

	* facemenu.el (facemenu-color-equal): Change win32 to ms-windows.

	* bytecomp.el (byte-compile-lambda): If the doc string is also the
	return value, use it for both.

	* rmailout.el (rmail-output-file-alist): Add autoload cookie.
	(rmail-delete-after-output): Duplicate defvar deleted.

	* files.el (find-file-existing-other-name): Default value now t.

	* ps-print.el (ps-print-prologue): Get rid of backslash-digits
	control characters in comments.

1996-09-13  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* files.el (inhibit-first-line-modes-regexps): Add .tgz.

1996-09-13  Lars Magne Ingebrigtsen  <larsi@hrym.ifi.uio.no>

	* mail-extr.el (mail-extr-safe-move-sexp): Make sure this doesn't
	signal errors even for pathological From headers.

1996-09-12  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* iso-transl.el (iso-transl-char-map): Add ACCENT SPACE sequences.

	* hideif.el (hif-token-regexp): Move ! after !=.

	* loadup.el: Load frame.elc unconditionally.

1996-09-12  Kevin Rodgers <kevinr@ihs.com>

	* loadhist.el (read-feature): New function.
	(unload-feature): Read FEATURE interactively with read-feature.

1996-09-11  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* ediff-init.el (ediff-eval-in-buffer): Add properties
	such lisp-indent-function, lisp-indent-hook, edebug-form-spec.

	* ediff-ptch.el (ediff-context-diff-label-regexp):
	Recognize -u format better.
	(ediff-map-patch-buffer): Recognize -u format better.

	* bindings.el: New file, split out from loaddefs.el.
	* loadup.el: Load bindings.el.

	* gud.el (gud-find-c-expr): Renamed from find-c-expr.
	Don't get fooled by if and while statements.
	(gud-expr-compound): Renamed from expr-compound.
	(gud-expr-compound-sep): Renamed from expr-compound-sep.
	(gud-next-expr): Renamed from expr-next.
	(gud-prev-expr): Renamed from expr-prev.
	(gud-forward-sexp): Renamed from expr-forward-sexp.
	(gud-backward-sexp): Renamed from expr-backward-sexp.
	(gud-innermost-expr): Renamed from expr-cur.

1996-09-10  Per Abrahamsen  <abraham@dina.kvl.dk>

	* easymenu.el (easy-menu-do-define): Use `x-popup-menu' instead of
	non-existing `easy-popup-menu'.

1996-09-10  Erik Naggum  <erik@psilocin.gnu.ai.mit.edu>

	* bytecomp.el (byte-compile-output-file-form): Bind print-quoted
	and print-gensym to t when writing compiled byte-code objects.
	(byte-compile-output-docform): Likewise.

1996-09-10  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* autoload.el (update-file-autoloads): Don't barf if autoloads
	file file is completely empty.

	* bytecomp.el (byte-compile-out-toplevel): Undo previous change.
	(byte-compile-byte-code-maker): Undo previous change.

	* rmail.el (rmail-find-all-files): Rely on directory-files
	to do the filtering.

	* imenu.el (imenu): Tests for when to widen were backwards.
	(imenu--split-menu): Handle imenu-sort-function here.
	(imenu--mouse-menu, imenu-update-menubar): Not here.
	(imenu--mouse-menu): Rewrite second half--handle
	nested menus reliably.
	(imenu--create-keymap-2): Include ITEM in the leaf menu-item.

1996-09-09  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* outline.el (outline-font-lock-keywords):
	Treat carriage return like newline.

	* pp.el (pp-eval-expression): Set font-lock-default locally to nil.

1996-09-08  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-file-owner): If the file is owned by somebody
	else, return the UID as a string, so that the rest of VC can use
	it like a username.

	* vc.el (vc-print-log): Move point to the log entry of the current
	version.

1996-09-05  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-keym.el, viper.el (vip-scroll):
	changed to vip-scroll-screen, other modifications.
	(vip-alternate-ESC): changed to vip-alternate-Meta-key.
	* viper.el
	(vip-escape-to-vi,vip-prefix-arg-value,vip-prefix-arg-value): now work
	with prefix arguments and also will work with 2dw and d2d style
	commands.
	(vip-prefix-arg-value,vip-prefix-arg-com): now work in any Vi state.
	(vip-message-folder-hook,vip-dired-hook): new hooks.
	(vip-paren-match): go to closing paren first.
	(vip-find-char-forward,vip-find-char-backward,vip-goto-char-forward,
	vip-goto-char-backward): functions modified.
	(vip-set-hooks): added viper to fortran-mode.
	(viper-mode): don't delete the startup message.
	* viper-keym.el: C-\ is now the meta key.
	C-z in insert mode now escapes to Vi.
	(vip-slash-and-colon-map,vip-comint-mode-modifier-map,
	vip-dired-modifier-map): new modifying keymaps.
	* viper-util.el, viper.el: Added pixmaps to replace-region and
	search faces.
	(vip-get-filenames-from-buffer): the argument is now optional.
	(vip-ex-nontrivial-find-file-unix): added the -d option to ls command.
	(vip-read-key): inhibit quit added.
	(vip-get-cursor-color): fixed to work with XEmacs.
	* viper-ex.el (ex-edit): don't change to vi in dired mode.

1996-09-04  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* apropos.el (apropos-print): Don't say `Type ' before M-x cmd.

	* replace.el (perform-replace): Increment replace-count
	in the places where we do the replacement.

	* executable.el (executable-insert): Doc fix.
	(executable-query): Doc fix.

1996-09-03  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* startup.el (command-line, command-line-1):
	Stop processing options if we encounter "--".

	* dired.el (dired-mode-map): Add revert-buffer to Immediate menu.

	* frame.el (other-frame): Don't call unfocus-frame.

	* mouse.el (mouse-select-window): Don't call unfocus-frame.

	* rmail.el (rmail-convert-to-babyl-format):
	Increase sit-for timeout to 3 seconds.

1996-09-03  Paul Eggert  <eggert@twinsun.com>

	* calendar.el (calendar-current-date):
	Simplify by using decode-time instead
	of parsing current-time-string.

	* ls-lisp.el (insert-directory): Use same value of `now' for all files.
	(ls-lisp-format): New argument NOW.  Arguments are no longer optional.
	(ls-lisp-format-time): New argument NOW.  Use same method as `ls'
	to decide whether to show time-of-day or year.

	* timer.el (timer-next-integral-multiple-of-time): New function.
	(run-at-time): If TIME is t, do the action at the next
	integral multiple of REPEAT.
	* time.el (display-time): Use new run-at-time functionality to
	fix display glitches when display-time-interval != 60.

1996-09-03  Eli Zaretskii  <eliz@is.elta.co.il>

	* paren.el (show-paren-function): Handle unbalanced parens as
	mismatched.  When the unbalanced paren is an opening paren,
	highlight it as mismatched.

1996-09-03  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* iso-transl.el (iso-transl-dead-key-alist): Add dead-...
	and S-dead-... key names to this list.
	(key-translation-map): Don't define dead-... and S-dead... here.
	(iso-transl-define-keys): Handle multiple matches
	in iso-transl-dead-key-alist for one accent character.

1996-09-02  Paul Eggert  <eggert@twinsun.com>

	* timer.el (run-at-time): Doc fix.

1996-09-02  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* rmail.el (rmail-find-all-files): Eliminate recursive scan.

	* server.el (server-process-filter): Quote with &, not \.

	* simula.el (save-match-data): Definition deleted.

1996-09-01  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* ffap.el (ffap-locate-file): Function deleted.
	(ffap-locate-jka-suffixes): Variable deleted.
	(ffap-alist): Use locate-library.

	* help.el (locate-library): Doc fix.
	(locate-library): New arg PATH.  Handle autocompression mode.

	* mail-utils.el (rmail-dont-reply-to): Recognize the names to delete
	when they appear within <...>.

	* server.el (server-process-filter): Undo the quoting with
	backslashes that emacsclient now does for special characters.
	Delete some debugging code accidentally left in.

	* cl-seq.el, cl-extra.el, cl.el, cl-macs.el:
	Turn on byte-compile-dynamic.

	* files.el (insert-directory): If ls fails, get an error.

1996-09-01  Per Abrahamsen  <abraham@dina.kvl.dk>

	* info.el: Add menu items and xrefs to the menu bar menu.
	(Info-check-pointer): New function.
	(Info-mode-menu): New menu.
	(Info-menu-last-node): New variable.
	(Info-menu-update): New function.
	(Info-mode): Add `Info-menu-update' to `activate-menubar-hook'.

1996-09-01  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* compile.el (compilation-finish-functions): New variable.
	(compilation-handle-exit): Run compilation-finish-functions.

	* viper.el (vip-custom-file-name): Use convert-standard-filename.

	* desktop.el (desktop-basefilename): Use convert-standard-filename.

	* bookmark.el (bookmark-default-file): Use convert-standard-filename.

	* add-log.el (change-log-name): Don't treat MSDOS, NT specially.

	* vc.el (vc-register-switches): New variable.
	(vc-backend-admin): Use vc-register-switches.

1996-09-01  Vladimir Alexiev <vladimir@cs.ualberta.ca>

	* tmm.el (tmm-add-one-shortcut): New subroutine.
	(tmm-add-shortcuts): Code moved to tmm-add-one-shortcut.
	Handle tmm-shortcut-style and tmm-shortcut-words.
	(tmm-define-keys): Use suppress-keymap.
	Moved use-local-map from the caller here.
	tmm-short-cuts is now a list of chars, not of one-char strings.
	(tmm-completion-delete-prompt): New function, used in
	completion-setup-hook.
	(tmm-shortcut-style): New variable.
	(tmm-shortcut-words): New variable.
	(tmm-shortcut): Handle tmm-shortcut-style.
	The shortcut searched in tmm-short-cuts is now a char, not a string.

1996-08-31  Geoff Voelker  <voelker@cs.washington.edu>

	* dos-nt.el: New file.

	* dos-fns.el, winnt.el (path-separator, grep-null-device,
	grep-regexp-alist, file-name-buffer-file-type-alist,
	find-buffer-file-type, find-file-not-found-set-buffer-file-type,
	find-file-binary, find-file-text, mode-line-format):
	Moved to dos-nt.el.

	* winnt.el (save-to-unix-hook, revert-from-unix-hook,
	using-unix-filesystems): Functions removed.

	* loadup.el [windows-nt, ms-dos]: Load dos-nt.

1996-08-31  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* cc-mode.el (c-backslash-region): If a line ends at the end of
	the region, always delete backslash from it.

1996-08-31  Paul Eggert  <eggert@twinsun.com>

	* gnus.el, paths.el (gnus-local-domain): Remove.

1996-08-31  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* simple.el (set-hard-newline-properties): New fn.
	(newline): Use it.

	* paragraphs.el (use-hard-newlines): New minor mode function.
	Existing variable gets doc fix.

	* format.el (format-alist): Doc fix.
	(format-annotate-function): New argument ORIG-BUF, passed on to TO-FN.
	(format-encode-region): Let TO-FN know that our current buffer is
	its ORIG-BUF.

	* enriched.el: Don't fill based on window width.
	Don't require facemenu; it's preloaded if applicable.
	(enriched-default-right-margin, enriched-fill-after-visiting)
	(enriched-text-width): Variables deleted.
	(enriched-text-width): Function deleted.
	(enriched-initial-annotation): Use `fill-column' rather than
	enriched-text-width.
	(enriched-mode): Use `add-to-list'.  Turn use-hard-newlines on by
	calling function, not setting variable.
	(enriched-encode): New argument ORIG-BUF; evaluate
	enriched-initial-annotation in that buffer.
	(enriched-decode): Turn on use-hard-newlines with function.  Use
	new `set-hard-newline-properties' function.  Set fill-column from
	File-Width header; re-fill paragraphs only if there is no
	File-Width header.

1996-08-31  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* mouse.el (mouse-show-mark): Detect loss of selection
	while we are showing it highlighted.

	* isearch.el (isearch-*-char): Use the isearch-other-end as new
	starting point in both directions.

	* files.el (make-auto-save-file-name): Try a few directories
	to get one we can write in.

	* doctor.el (make-doctor-variables): Eliminate unused variables `elist'
	and `monosyllables'.  `observation-list' also.

	* frame.el: Doc fixes.

	* faces.el (internal-set-face-1): When calling x-list-fonts,
	ask for just one match.

	* startup.el (command-line-1): Rearrange initial screen.

	* rmail.el (rmail-get-new-mail): Handle files in multiple batches,
	in case two inboxes have the same last name component.

1996-08-30  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* webjump.el (webjump-sample-sites): Define with defvar.
	(webjump-state-to-postal-alist): Likewise.

	* vc.el (vc-update-change-log): Doc fix.

	* simple.el (do-auto-fill): Do break after one word as last resort
	even if there is a fill prefix.

	* webjump.el: New file.
	(webjump-submit-bug-report): Function deleted.
	(webjump-maintainer-address, webjump-author): Variable deleted.
	(webjump-vc-id, webjump-version): Variables deleted.

1996-08-29  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* texinfmt.el (texinfo-format-printindex):
	Treat windows-nt and ms-dos like vax-vms.

	* foldout.el (foldout-hide-flag, foldout-show-flag):
	New variables.
	(foldout-exit-fold): Use those variables.

	* subr.el (save-match-data): Fix typo in previous change.

1996-08-29  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nndoc.el (nndoc-mbox-article-begin): New function.
	(nndoc-type-alist): Enter it into definition.
	(nndoc-dissect-buffer): Use new definition.

1996-08-29  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* reporter.el (reporter-compose-outgoing): Fix error syntax.
	(reporter-bug-hook): Fix error message.

	* simple.el (mail-user-agent, define-mail-user-agent):
	Definitions moved here from reporter.el.
	(sendmail-user-agent, mh-e-user-agent): Definitions moved here

	* reporter.el (mail-user-agent): Variable moved to simple.el.
	(define-mail-user-agent): Function moved to simple.el.
	(sendmail-user-agent, mh-e-user-agent): Defs moved to simple.el.
	(reporter-mail): Function deleted.

1996-08-29  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* message.el (message-do-fcc): Supply the FROM-GNUS parameter to
	`rmail-output'.

1996-08-29  Dave Love  <d.love@dl.ac.uk>

	* vc.el (vc-update-change-log): Remove code which found RCS files
	only in RCS directory; leave this to rcs2log, which will find
	entries for CVS or RCS/*,v and *,v.  Lose sub-process' stderr
	output.  Doc fix.

1996-08-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bytecomp.el (byte-compile-associative):
	Treat one arg case like (+ x 0).

	* lisp.el (narrow-to-defun): New function.
	* loaddefs.el (ctl-x-map): Put narrow-to-defun on C-x n d.

1996-08-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* subr.el (save-match-data): Fix previous change.

	* time.el (display-time): Call display-time-mode.
	(display-time-mode): Take arg or toggle, as a minor mode.

	* files.el (kill-some-buffers): New arg LIST says buffs to maybe kill.

	* sendmail.el (mail-mode-auto-fill): New function.
	(mail-mode): Put it into normal-auto-fill-function.

	* menu-bar.el (menu-bar-update-buffers): Make the Frames menu
	a submenu of the Buffers menu.

1996-08-28  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus.el (gnus-group-read-group): Use range functions instead of
	list functions for the tick and marks ranges.

1996-08-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ange-ftp.el (ange-ftp-ls): Run ange-ftp-before-parse-ls-hook.
	(ange-ftp-before-parse-ls-hook): Add defvar.

	* server.el (server-visit-files): New argument NOWAIT.
	Don't record on server-buffer-clienjts if NOWAIT.
	(server-process-filter): Pass NOWAIT arg based on data from server.
	Don't record in server-clients if NOWAIT.

	* subr.el (save-match-data): Use save-match-data-internal
	as the local variable, instead of an uninterned symbol.

	* bytecomp.el (byte-compile-funarg-2): New function,
	(sort): Use byte-compile-funarg-2.
	(byte-compile-out-toplevel): Always compile to byte code
	if an uninterned symbol appears.
	(byte-compile-byte-code-maker): Handle uninterned symbols
	in the constant vector.

	* sendmail.el (mail-self-blind, mail-interactive)
	(mail-yank-ignored-headers): Make them user options.

	* sh-script.el (sh-alias-alist): Use gnu/linux, not lignux.

1996-08-27  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus.el (gnus-decode-rfc1522): Didn't put point at point-min
	before starting to decode.

1996-08-27  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* dired.el (dired-chown-program): Replace lignux with gnu/linux.

	* ediff-ptch.el: Require ediff-init.

1996-08-26  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* mouse.el (mouse-region-delete-keys): New variable.
	(mouse-show-mark): If one of those keys is next, delete the region.

	* apropos.el (apropos-mode-map): Don't use view-mode;
	instead, bind SPC and DEL directly.

	* shell.el (shell-mode): Don't assume /dev/null is its own truename.

1996-08-26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* diff.el (diff): Don't pop to *diff* buffer.  Change bogus
	unwind-protect to save-excursion.

1996-08-26  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* pc-select.el (ensure-mark): Minor rewrite.
	(scroll-down-mark): Handle pc-select-override-scroll-error,
	(scroll-down-nomark): Likewise.
	(scroll-up-mark, scroll-up-nomark): Likewise.
	(pc-selection-mode): Get rid of the advice on scroll-up, scroll-down.

	* bytecomp.el (byte-compile-insert-header): Fix previous change.

1996-08-25  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* imenu.el (imenu--in-alist): Accept only bottom-level matches.

	* bytecomp.el (byte-compile-insert-header): Clean up syntax
	of messages.  Mention setting of byte-compile-dynamic.
	Edit byte-compile-version to extract just the version number.
	(byte-compile-version): Use the RCS version number.

	* tar-mode.el (tar-mode-write-file): Clear buffer's own modified flag
	after clearing the ones listed within it.

1996-08-25  Erik Naggum  <erik@naggum.no>

	* rmail.el (rmail-show-message): Bind `end' after clearing the
	"unseen" attribute.

1996-08-24  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* rmailsum.el (rmail-summary-rmail-update): Bind rmail-not-really-seen
	non-nil if in isearch mode.

	* rmail.el (rmail-show-message): Clear `unseen' even if header
	is already reformatted--but don't do it if rmail-not-really-seen.
	(rmail-not-really-seen): New variable.

	* iso-acc.el (minibuffer-setup-hook): Fix misspelling of hook name.

	* tex-mode.el (tex-main-file): New variable.
	(tex-file): Use that.  Rename local var to source-file
	so it is obviously local.

1996-08-24  Lars Magne Ingebrigtsen  <larsi@ylfing.ifi.uio.no>

	* gnus.el (gnus-group-enter-directory): Would temporarily bind
	`nneething-read-only', shadowing the proper `defvar'.

1996-08-24  Paul Eggert  <eggert@twinsun.com>

	* add-log.el (change-log-time-zone-rule): New variable.
	(iso8601-time-zone): New function.
	(add-change-log-entry): If change-log-time-zone-rule is non-nil,
	calculate date according to that rule, and indicate resulting
	time zone.

1996-08-24  Erik Naggum  <erik@naggum.no>

	* add-log.el: Change to ISO 8601 date formats, without time of day.
	(change-log-font-lock-keywords): Adjust accordingly.
	(add-change-log-entry): Compare and insert with new date format.
	(change-log-mode): Make `paragraph-start' and `paragraph-separate'
	use \< like `page-delimiter' for consistency.

1996-08-23  Richard Stallman  <rms@ethanol.gnu.ai.mit.edu>

	* cc-mode.el (c-mode-base-map): New variable.
	(c-mode-map, c++-mode-map, objc-mode-map, java-mode-map):
	Inherit from c-mode-base-map, not c-mode-map.

1996-08-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* apropos.el (apropos-mode): Turn on View mode.

	* isearch.el (isearch-edit-string): When starting nonincremental
	search, after peeking ahead one char, call cancel-kbd-macro-events.

1996-08-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* subr.el (keyboard-translate): Use a char-table.
	(keyboard-translate-table): Add char-table-extra-slots property.

	* pc-select.el: Replace \n in doc strings.
	(pc-selection-mode): Big doc fix.  Don't bind f1.

Wed Aug 21 14:59:03 MESZ 1996  Michael Staats <michael@thp.Uni-Duisburg.DE>

	* pc-select.el (forward-line-mark): New function.
	(forward-line-nomark): New function.
	(backward-line-mark): New function.
	(backward-line-nomark): New function.
	(pc-selection-mode): Add keybindings for those functions.
	(pc-select-override-scroll-error): New variable.
	(pc-selection-mode): Get rid of the advice on scroll-up, scroll-down.

1996-08-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (kill-region): inhibit-read-only overrides text props too.

1996-08-20  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (revert-buffer): Doc fix.

1996-08-20  Mike Long  <mike.long@analog.com>

	* make-mode.el (makefile-font-lock-keywords): Catch variable
	references that use substitutions.

1996-08-20  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* ielm.el (ielm-map): Don't bind M-q.
	(inferior-emacs-lisp-mode): Set fill-paragraph-function instead.
	* add-log.el (change-log-mode-map): Don't bind M-q.
	(change-log-mode): Set fill-paragraph-function instead.

1996-08-17  Paul Eggert  <eggert@twinsun.com>

	* rfc822.el (rfc822-bad-address): Don't put a newline into the
	error message; this confuses rmail.

1996-08-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-ignored-headers): Hide X-char* and X-face,
	but not Sender.

1996-08-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* decipher.el (decipher-get-undo-copy): New function.
	(decipher-get-undo): Use it.

	* simple.el (shell-command): Really use output-buffer in synchronous
	case, when it is a buffer.

	* faces.el (modify-face): Handle nil as stipple value.
	(internal-face-interactive-stipple): New function.
	(set-face-stipple): Use internal-face-interactive-stipple.

	* rmail.el (rmail-ignored-headers): Ignore Path:, Sender:, X-mailer:.

	* faces.el (modify-face): Handle stipple values
	of the form (WIDTH HEIGHT DATA).

1996-08-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mouse.el (mouse-drag-region): Don't call mouse-set-region-1
	if mark is gone or no longer active or if we changed buffers.

1996-08-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* paths.el (news-inews-program): Look for /usr/contrib/lib/news/inews.

	* sgml-mode.el (html-tag-alist): Fix the entry for "font".

	* ange-ftp.el (ange-ftp-process-filter): Discard nulls.

1996-08-13  Erik Naggum  <erik@naggum.no>

	* message.el (message-mode): Delete abbrev mode initialization.
	(message-mode-hook): Move it here, instead, so the user can
	override it.
	(message-y-or-n-p, message-talkative-question,
	message-flatten-list, message-flatten-list-1): Move utility
	functions up so macro is defined before first invocation.

	* f90.el (f90-auto-fill-mode): Function deleted, all references
	replaced with `auto-fill-mode'.
	(f90-mode): Make `normal-auto-fill-function' local to this buffer
	and bind to `f90-do-auto-fill'.

1996-08-13  Torbjorn Einarsson  <etxeina@etxdn.ericsson.se>

	* f90.el: (f90-do-auto-fill): Fixed bug which made program hang for
	space in fill-column.
	(f90-font-lock-keywords-1): Now we have common font-lock
	exps for Emacs and XEmacs
	(f90-font-lock-keywords-2): Changed reg-exp for line number.  A
	number must be followed by a letter to be highlighted.  Fixed
	highlighting of declarations with trailing comments.
	(f90-match-end): Fixed bug due to new message syntax.
	(f90-mode): Fixed setup of variable font-lock-defaults.
	(f90-looking-at-program-block-start): Small error in detecting of
	function start. Made the detection of subroutine start more flexible.
	(f90-mode-map): Much nicer menu with sections and added submenus
	for highlighting and keyword case change.
	Also added 'menu-enable' properties for region-based commands.
	(f90-imenu-generic-expression): Fixed expression to find
	procedures, modules and types.
	(f90-add-imenu-menu): New function for adding imenu menu to the
	menubar.

1996-08-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ange-ftp.el (ange-ftp-kill-ftp-process): Handle buffer name as arg.

1996-08-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* Version 19.33 released.

	* cc-mode.el (c-fill-paragraph): Fix regexp for finding C++ comment
	paragraphs.

1996-08-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* isearch.el (isearch-whitespace-chars): If isearch-invalid-regexp,
	insert just a space.

1996-08-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* iso-acc.el (iso-languages, french): Remove non-French combinations.
	Add ~c, "e, "i, `u.

	* simple.el (normal-auto-fill-function): New variable.
	(auto-fill-mode): Use that instead of constant 'do-auto-fill.

	* bibtex.el (bibtex-mode): Set normal-auto-fill-function locally;
	don't set auto-fill-function.  Don't turn on Auto Fill mode.

1996-08-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-reply-regexp, rmail-message-filter): Doc fix.
	(rmail-reply-regexp): Match Re[2].

1996-08-05  Simon Marshall  <simon@spiff.gnu.ai.mit.edu>

	* help.el (help-font-lock-keywords): Fully undo rms July 26 change.

1996-08-05  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dabbrev.el (dabbrev--last-case-pattern): New variable.
	(dabbrev-expand): Set it for ordinary expansions;
	use it when copying successive words.

1996-08-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* imenu.el (imenu-update-menubar): Fix code to install the new menu.

	* info.el (Info-find-node): Use pop-to-buffer.

1996-08-02  Paul Eggert  <eggert@twinsun.com>

	* rmail.el (rmail-unix-mail-delimiter): Allow space or tab as
	first character in mailbox part of `From ' line.

1996-08-01  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* Version 19.32 released.

	* gud.el (gdb): Undo previous change.

1996-08-01  Simon Marshall  <simon@spiff.gnu.ai.mit.edu>

	* comint.el (comint-file-name-chars): Was comint-file-name-regexp.
	Give it a non-nil default value.

	* shell.el (shell-file-name-chars): Was shell-file-name-regexp.
	(shell-mode): Set comint-file-name-chars to this variable.

1996-07-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dabbrev.el (dabbrev-expand): When snarfing consecutive words,
	if previous one was upcased, upcase this one too.
	(dabbrev--substitute-expansion): When snarfing consecutive words,
	don't case convert here.

	* help.el (help-font-lock-keywords): Undo July 26 change.

	* term/x-win.el: Delete code to disable f10 if motif.

	* gud.el (gdb): Bind comint-file-name-regexp.

1996-07-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* emerge.el (emerge-files-with-ancestor, emerge-files):
	Use add-hook to add to QUIT-HOOKS.

1996-07-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* help.el (help-fontify-buffer-function): Function deleted.
	(help-mode): Set font-lock-defaults in simple way again.

1996-07-29  Erik Naggum  <erik@naggum.no>

	* ange-ftp.el (ange-ftp-read-passwd): Let first input override
	default, and let RET use the default value.
	(ange-ftp-get-passwd): Make prompt clearer.

1996-07-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* complete.el (PC-complete): When command is repeated,
	scroll the completion buffer.

	* gud.el (gud-display-line): Don't crash if BUFFER is nil.

	* font-lock.el (font-lock-mode): Don't add to after-change-functions
	if font-lock-fontify-region-function is `ignore'.

1996-07-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* help.el (help-font-lock-keywords): Use font-lock-function-name-face
	for variables, too.

	* dabbrev.el (dabbrev--substitute-expansion): Use just ABBREV, not OLD,
	in previous change.

	* vc.el (vc-do-command): Bind win32-quote-process-args.

1996-07-26  Simon Marshall  <simon@spiff.gnu.ai.mit.edu>

	* help.el (help-mode): Set font-lock-defaults to provide bindings for
	local fontification functions.
	(help-fontify-buffer-function): New function.

1996-07-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* edebug.el (edebug-trace-display): Save and restore current buffer.

1996-07-23  Erik Naggum  <erik@psilocin.gnu.ai.mit.edu>

	* etags.el (tag-exact-file-name-match-p): Fix previous change.

1996-07-23  Andrew Innes  <andrewi@harlequin.co.uk>

	* winnt.el (file-name-buffer-file-type-alist): Load TAGS files as
	text, not binary.

1996-07-23  Paul Eggert  <eggert@twinsun.com>

	* completion.el (cmpl-hours-since-origin): Fix bug:
	microseconds count was being used instead of seconds count.

1996-07-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* loaddefs.el (ctl-x-map): Bind C-x M-:.

1996-07-23  Roland McGrath  <roland@delasyd.gnu.ai.mit.edu>

	Fixes from Robert Praetorius <robert@aspenres.com>:
	* etags.el (etags-goto-tag-location): New local variable LINE; use it.
	Fix typo in direct-file-tag case: position -> startpos.
	(tag-word-match-p, tag-exact-file-name-match-p): Fix off-by-one errors.

1996-07-23  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* shadow.el (list-load-path-shadows): Doc fix.

1996-07-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* gud.el (perldb-command-name): New variable.
	(perldb): Use it.

1996-07-21  Ralf Fassel  <ralf@natlab.research.philips.com>

	* files.el (dabbrev-case-fold-search, dabbrev-case-replace): Set
	`risky-local-variable' property, since these get eval'ed.

	* dabbrev.el (dabbrev-case-fold-search, dabbrev-case-replace):
	Undo previous change.

1996-07-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dabbrev.el (dabbrev--search): Don't downcase the result here.
	(dabbrev-completion): Bind completion-ignore-case.
	(dabbrev--substitute-expansion): Downcase the expansion here,
	but not if case pattern matches start of original expansion.

	* executable.el (executable-find): Doc fix.

	* time.el (display-time): Fix prev change: use display-time-update.

1996-07-21  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* viper-util.el (vip-ms-style-os-p, vip-vms-os-p): Moved here from
	viper.el.

	* rmail.el (rmail-next-same-subject): Don't set search-regexp
	until after adjusting subject string.

1996-07-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* browse-url.el (browse-url-choose-browser): New function.
	(browse-url-browser-function): Use browse-url-choose-browser
	as the initial value.

	* time.el (display-time): Call display-time-event-handler directly
	to make the time appear right away.

1996-07-21  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* executable.el (executable-find): Doc fix.

1996-07-20  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* viper.el (vip-ms-style-os-p): Doc fix.

1996-07-20  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* view.el (view-mode-auto-exit): Doc fix.

1996-07-20  Simon Marshall  <simon@spiff.gnu.ai.mit.edu>

	* shadow.el (list-load-path-shadows): Fix ambiguous wording.

1996-07-20  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* gnus-cus.el: Don't test X colors unless using X.

1996-07-19  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* gnus-cus.el: If no dark magenta, use maroon.
	(gnus-face-dark-name-list): If no dark blue, use royal blue.

1996-07-17  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* viper-util.el (vip-get-filenames-from-buffer): Add &optional.

	* time.el (display-time): Starting time should be future, not past.

1996-07-16  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* message.el (message-send): Don't use mail-hist by default.

1996-07-15  Paul Eggert  <eggert@twinsun.com>

	* appt.el (appt-check, appt-make-list): Avoid race condition
	by getting current time only once.
	* texinfmt.el (texinfo-format-today): Likewise.

1996-07-15  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* sh-script.el (sh-mode): Call sh-set-shell only for a writable
	empty buffer.

	* executable.el (executable-set-magic): Don't put a space at end
	if user says no.

1996-07-15  Andrew Innes  <andrewi@harlequin.co.uk>

	* smtpmail.el (smtpmail-send-data-1): Escape "." at the start of
	any line of data, not just lines containing nothing else.

1996-07-14  Lars Magne Ingebrigtsen  <larsi@wombat.gnu.ai.mit.edu>

	* gnus-cache.el: Make sure byte-compilation doesn't trip on
	the undefined `gnus-add-shutdown'.

	* gnus.el: Make sure `gnus-directory' is defined
	when byte-compiling.

1996-07-13  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* allout.el (outline-auto-activation, outline-layout)
	(outline-primary-bullet, outline-plain-bullets-string)
	(outline-distinctive-bullets-string, outline-old-style-prefixes)
	(outline-stylish-prefixes, outline-file-xref-bullet)
	(outline-use-hanging-indents, outline-bullets-string)
	(outline-write-file-hook, outline-mode, outline-prefix-data)
	(outline-before-change-protect, outline-make-topic-prefix)
	(outline-rebullet-current-heading, outline-rebullet-heading)
	(outline-listify-exposed, outline-expose-topic)
	(outline-old-expose-topic, outline-exposure)
	(outline-latex-verbatim-quote-curr-line)
	(outline-show-current-subtree, outline-hide-current-subtree)
	(outline-hide-current-leaves, outline-new-exposure): Doc fix.

1996-07-13  Francois Pinard  <pinard@iro.umontreal.ca>

	* allout.el (outline-resolve-xref): Do not mistake a blank line
	following an xref (@) bullet as part of the rerefenced file name.

1996-07-13  Christopher J. Madsen  <ac608@yfn.ysu.edu>

	* time.el (display-time): Fix start time for run-at-time.

1996-07-12  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* rmailsum.el (rmail-summary-next-labeled-message)
	(rmail-summary-previous-labeled-message):
	Call rmail-summary-goto-msg to move point in the summary.

	* mouse.el (mouse-major-mode-menu-1): No need to copy the top
	levels of structure.

	* browse-url.el (browse-url-netscape-program): New variable.
	(browse-url-mosaic-program): New variable.
	(browse-url-mosaic, browse-url-netscape): Use them.

1996-07-12  Simon Marshall  <simon@spiff.gnu.ai.mit.edu>

	* font-lock.el (font-lock-comment-start-regexp): New variable.
	(font-lock-fontify-syntactically-region): Use it.
	When matching comments, use (match-end 1) as the start, if non-nil.
	(font-lock-defaults-alist): Provide value for Lisp/C/C++ modes.
	Remove obsolete entry for bibtex-mode.  Doc fix.
	(font-lock-match-c++-style-declaration-item-and-skip-to-next): Don't
	treat a ; character as a declaration item separator.

	* comint.el (comint-truncate-buffer): Count lines from process-mark,
	not point-max, as the input may span lines.
	(comint-postoutput-scroll-to-bottom): Don't subtract from process-mark,
	use comint-last-output-start, since the buffer string may have changed.
	(comint-dynamic-complete-as-filename): Don't bind
	file-name-handler-alist to nil, it interferes with directory tracking.
	(comint-dynamic-list-filename-completions): Likewise.
	(comint-replace-by-expanded-history): Only match leading ^ in input.
	(comint-file-name-regexp): New variable.
	(comint-mode): Make it buffer-local.
	(comint-match-partial-filename): Use it.

	* shell.el (shell-file-name-quote-list): Default to nil on MSDOS/NT.
	(shell-file-name-regexp): New variable.
	(shell-mode): Set comint-file-name-regexp to its value.

1996-07-11  Ralf Fassel  <ralf@natlab.research.philips.com>

	* dabbrev.el (dabbrev-case-fold-search, dabbrev-case-replace): Set
	`risky-local-variable' property, since these get eval'ed.

1996-07-11  Ronan Waide  <waider@autodealing.com>

	* smtpmail.el (smtpmail-deduce-address-list): Handle RESENT-* fields.

1996-07-11  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* startup.el (normal-top-level-add-to-load-path):
	Use directory-file-name since load-path elements don't end in /.

	* rmailsum.el (rmail-make-basic-summary-line):
	If user-mail-address is nil, use alternative.

	* tex-mode.el (tex-validate-region): Skip fwd over whitespace
	and punctuation, to find point of mismatch.
	(validate-tex-buffer): Don't include the blank lines
	before a paragraph in the paragraph being checked.

	* mouse.el (mouse-drag-region): Cope if stop-point is nil.

	* mouse.el (mouse-major-mode-menu-compute-equiv-keys): Deleted.
	(mouse-major-mode-menu-1): Copy the top levels of structure,
	if we use all of MENUBAR.
	Set mouse-major-mode-menu-prefix.
	(mouse-major-mode-menu): Total rewrite.

1996-07-11  Stefan Schoef  <schoef@OFFIS.Uni-Oldenburg.DE>

	* bibtex.el (bibtex-reference-head): Allow spaces and tabs between
	opening brace or paren and key.  Simplify regexp.
	(bibtex-type-in-head, bibtex-key-in-head): Decrement.
	(bibtex-mode): Use new function run-with-idle-timer instead of
	auto-save-hook for periodically parsing keys.
	(bibtex-mode-syntax-table, bibtex-autokey-name-change-strings,
	bibtex-autokey-titleword-change-strings): Support non-escaped
	double-quoted characters (as with german styles).
	(bibtex-field-string-quoted): Disallow lines like
	author = "Stefan Sch"of"
	until BibTeX supports them.

1996-07-07  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* mouse.el (mouse-major-mode-menu-1): Always return just a keymap;
	never (STRING . KEYMAP).
	(mouse-major-mode-menu): Discard the `keymap' from the front of
	the keymap we get from mouse-major-mode-menu-1.
	Construct the menu name string from major-mode.

1996-07-07  Dave Love  <d.love@dl.ac.uk>

	* gud.el (gud-irix-p): Exclude Irix6.1 up.
	(gud-dbx-use-stopformat-p): New variable.
	(dbx): Use it to send $stopformat for Irix6.
	(gud-irixdbx-marker-filter): Cast $curline to int, not long (see
	added comments).
	(dbx): Likewise.

1996-07-07  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* ps-print.el (ps-article-subject): Don't die if header is missing.
	(ps-article-author, ps-info-file, ps-info-node): Likewise.

1996-07-07  Francois Pinard  <pinard@iro.umontreal.ca>

	* timezone.el (timezone-parse-date): Handle ISO 8601 dates, so
	rmailsort does the right thing with them.

1996-07-06  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* mouse.el (mouse-show-mark): In transient mark mode,
	delete mouse-drag-overlay.
	(mouse-undouble-last-event): New function.
	(mouse-show-mark): Call mouse-undouble-last-event.

1996-07-06  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* tar-mode.el (tar-mode-map): Bind up and down like C-p, C-n.

1996-07-06  Erik Naggum  <erik@psilocin.gnu.ai.mit.edu>

	* files.el (insert-directory): Fix previous change.

1996-07-05  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-cus.el: Make sure that calling `gnus-visual-p' during
	byte-compilation doesn't bug out.

1996-07-05  Simon Marshall  <simon@spiff.gnu.ai.mit.edu>

	* mail-utils.el (mail-strip-quoted-names): Removed debugging code.

1996-07-04  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* simple.el (newline): Don't do the optimization if the newline before
	point is intangible or read-only or invisible.

1996-07-03  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* subr.el (unfocus-frame, focus-frame): Define as no-ops.

1996-07-03  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* scheme.el (scheme-mode-variables): Set comment-start-skip
	to ignore backslash-quoted semicolons.

	* lisp-mode.el (lisp-mode-variables): Set comment-start-skip
	to ignore backslash-quoted semicolons.

1996-07-03  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* files.el (insert-directory): When converting SWITCHES
	string to a list, put back in original order.

1996-07-04  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus.el (gnus-summary-prepare-threads): Would infloop under
	certain obscure conditions.

1996-07-03  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* smtpmail.el (smtpmail-send-it): Ignore `To:' if there is a
	`Resent-to':.

1996-07-01  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* winnt.el (using-unix-filesystems): Doc fix.

1996-07-02  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* reporter.el (mail-user-agent): Add autoload cookie.

1996-07-02  Barry A. Warsaw  <reporter@python.org>

	* reporter.el: Major rewrite.
	The variable `reporter-prompt-for-summary-p' can take a string value.

	The variable `mail-user-agent' provides configuration to the end
	user.  This variable contains a symbol indicating which Emacs mail
	package the user would like for composing outgoing mail.

	Mail package authors now use `define-mail-user-agent' to define
	symbols appropriate for use with `mail-user-agent'.  Three such
	symbols are predefined: `sendmail-user-agent' (for Emacs
	sendmail.el), `vm-user-agent' (for Kyle Jones' VM package), and
	`mh-e-user-agent' (for the MH-E package).

1996-07-02  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-cache.el (gnus-cache-possibly-alter-active): Check for
	gnus-cache-active-hashtb before using it.

1996-07-01  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* tcl-mode.el (tcl-imenu-generic-expression): Add nil as 1st elt.

	* mail-hist.el (mail-hist-current-header-name):
	Use buffer-substring-no-properties.

1996-07-01  Francois Pinard  <pinard@iro.umontreal.ca>

	* rmailsum.el (rmail-make-basic-summary-line): Accept ISO 8601
	dates as well.

1996-06-30  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-util.el (vip-read-key): inhibit quit added.

1996-06-30  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* score-mode.el: Renamed from "gnus-scomo.el".

1996-06-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* info.el (Info-next-preorder): After we move up, move forward again.
	(Info-last-preorder): After we move down or to the prev,
	move down again.

1996-06-29  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* userlock.el (ask-user-about-supersession-help): Change help text.
	(ask-user-about-supersession-threat): Add new `r' alternative.

	* files.el (set-visited-file-name): New optional arg NO-QUERY.

1996-06-29  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nnheaderems.el: Deleted.

1996-06-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* view.el (view-mode): Doc fix.

1996-06-28  Ethan Bradford  <ethanb@phys.washington.edu>

	* ispell.el (ispell-message): Support message-mode.

1996-06-28  Per Abrahamsen  <abraham@dina.kvl.dk>

	* mouse.el (mouse-start-end): Support selecting strings by double
	clicking on a character with quote syntax.

1996-06-28  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* cal-french.el (french-calendar-accents): New variable.
	(french-calendar-month-name-array): Check that variable.
	(french-calendar-special-days-array): Likewise.
	(calendar-french-date-string): Likewise.
	(calendar-goto-french-date): Likewise.

	* rmail.el (rmail-get-new-mail): Run rmail-before-get-new-mail-hook.

	* files.el (abbreviate-file-name): Ignore automount-dir-prefix if nil.

	* rmail.el (rmail-send-actions-rmail-buffer): Mark as permanent-local.
	(rmail-send-actions-rmail-msg-number): Likewise.

	* sendmail.el (mail-reply-buffer, mail-send-actions):
	Mark them as permanent-local.
	(mail-mode): Don't set mail-reply-buffer to nil.

	* files.el (auto-mode-alist): Treat .pm like .pl.

	* term/x-win.el (x-handle-name-switch): Renamed from
	x-handle-name-rn-switch.

	* startup.el (command-line-x-option-alist): Don't handle -rn.
	x-handle-name-rn-switch renamed to x-handle-name-switch.

	* tmm.el (tmm-add-prompt): If tmm-completion-prompt is nil,
	don't insert it; instead delete the usual completion helptext.
	(tmm-completion-prompt): Doc fix.

	* mh-utils.el (mail-user-agent): Replaces mua-paradigm.
	(mh-find-path): Set mail-user-agent.

1996-06-27  Francesco Potorti`  <F.Potorti@cnuce.cnr.it>

	* profile.el (profile-functions): No need to assume that the
	current buffer is writable.
	(profile-print, profile-results): Changed to display number of
	calls and average time per call.
	(profile-update-function): Update the number of calls.
	(profile-a-function): Init the number of calls.

1996-06-27  Paul Eggert  <eggert@twinsun.com>

	* rmail.el (rmail-unix-mail-delimiter):
	Accept more user names, since they can be
	mangled badly by modern Unix mailers (e.g. Solaris 2.5 mail.local).
	Be a little more picky about dates to compensate.
	Match all the digits of a year, as per RFC 1123 section 5.2.14.
	(rmail-nuke-pinhead-header): Adjust to regexp renumbering in
	rmail-unix-mail-delimiter.

1996-06-27  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* bibtex.el (bibtex-reference-head): Allow whitespace after the open
	paren.

	* make-mode.el (makefile-gnumake-functions-alist): Add `addprefix'.

	* comint.el (comint-send-input): Use insert-before-markers
	for all the insertions.

1996-06-26  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail-extr.el (mail-extract-address-components): Rename ,-pos
	to comma-pos.

	* noutline.el (outline-minor-mode): No longer permanent local.

1996-06-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* tex-mode.el (tex-common-initialization):
	Set skeleton-further-elements.
	(tex-latex-block): Define as a skeleton.

1996-06-25  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nnvirtual.el, nntp.el, nnspool.el, nnml.el, nnmh.el, nnmbox.el,
	* nnmail.el, nnkiboze.el, nnheader.el, nnfolder.el, nneething.el,
	* nndoc.el, nndir.el, nnbabyl.el, gnus.el, gnus-vm.el,
	* gnus-vis.el, gnus-uu.el, gnus-score.el, gnus-msg.el, gnus-mh.el,
	* gnus-kill.el, gnus-ems.el, gnus-edit.el, gnus-cite.el,
	* gnus-cache.el, custom.el: New versions installed.

	* nnsoup.el, nnoo.el, nnheaderems.el, nndb.el, message.el,
	* mailheader.el, gnus-topic.el, gnus-srvr.el, gnus-soup.el,
	* gnus-setup.el, gnus-scomo.el, gnus-salt.el, gnus-nocem.el,
	* gnus-gl.el, gnus-demon.el: New files.

1996-06-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* executable.el (executable-set-magic): Add space at end of line
	if user says no to adding the shell's usual arguments.
	Don't clear the buffer's modified-flag.

	* skeleton.el (skeleton-proxy-new): New function.
	(define-skeleton): Define the skeleton as a defun
	using skeleton-proxy-new.

1996-06-25  Simon Marshall  <simon@spiff.gnu.ai.mit.edu>

	* rmailsum.el (rmail-summary-mode-map): Add rmail-summary-by-senders.

1996-06-25  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* noutline.el (outline-minor-mode): Using change-major-mode-hook,
	turn this mode off if we change major modes.

1996-06-24  <Daniel.Pfeiffer@Informatik.START.db.de>

	* skeleton.el (local-variables-section): Adapted comment to outline
	minor mode.
	(skeleton-pair-insert-maybe): Rewritten to support autowrapping.
	(mirror-mode): Fixed change of pair-* to skeleton-pair-*.  Also pairs
	8 bit characters.

1996-06-24  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mail-extr.el (mail-extract-address-components): Quote the comma
	in ,-pos.

	* rmail.el (rmail-summary-by-senders): FIx typo in fn name.

	* goto-addr.el (goto-address-url-face, goto-address-mail-face)
	(goto-address-url-mouse-face): New variables.
	(goto-address-fontify): Use them.

	* files.el (set-auto-mode): Run multiple mode: specs
	in left-to-right order.

1996-06-24  Simon Marshall  <simon@spiff.gnu.ai.mit.edu>

	* font-lock.el (font-lock-verbose): Default to 0.  Doc fix.
	(font-lock-default-fontify-buffer): Interpret numeric value.
	(font-lock-fontified): Don't make it permanent-local.
	(font-lock-mode): Remove before-revert-hook and after-revert-hook code.
	Call font-lock-turn-on-thing-lock before font-lock-mode-hook.  Doc fix.
	(font-lock-revert-setup, font-lock-revert-cleanup): Deleted.
	(turn-on-font-lock): Don't test font-lock-defaults et. al here again.
	(turn-on-font-lock-if-enabled): Do it here again.
	(font-lock-support-mode): New variable.
	(font-lock-turn-on-thing-lock): New function.  Use it.
	(font-lock-turn-off-thing-lock): Renamed font-lock-thing-lock-cleanup.
	(font-lock-change-major-mode): Turn off Font Lock mode if it is on.
	Add font-lock-change-major-mode to change-major-mode-hook at top level.

	* fast-lock.el: New version.  Barf if loaded on 8+3 filename pseudo-OS.
	(fast-lock-mode): Wrap font-lock-support-mode not font-lock-mode-hook.
	(fast-lock-save-cache): Use font-lock-value-in-major-mode.
	(fast-lock-set-face-properties): Wrap with save-buffer-state.

	* lazy-lock.el: New file.

	* rmail.el (rmail-variables): Include font-lock-maximum-size in
	font-lock-defaults.

	* mailalias.el (mail-complete): Reread mail aliases if necessary.

1996-06-23  Erik Naggum  <erik@naggum.no>

	* term.el (term-exec-1): Run process on pty if possible.

1996-06-23  Noah Friedman  <friedman@prep.ai.mit.edu>

	* rlogin.el (rlogin): make comint-output-filter-functions local
	before adding hooks.

1996-06-22  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* gnus-ems.el (gnus-background-mode): Set threshold for "light color"
	at .6 of the total for white.

	* font-lock.el (font-lock-make-faces):  Set threshold for "light color"
	at .6 of the total for white.

	* faces.el (x-create-frame-with-faces): Set threshold for "light color"
	at .6 of the total for white.

	* simple.el (choose-completion-string): Don't exit the minibuffer
	when a directory name is chosen.

1996-06-22  <Daniel.Pfeiffer@Informatik.START.db.de>

	* skeleton.el (skeleton-autowrap): New variable.
	(skeleton-abbrev-cleanup): Added variable documentation.
	(skeleton-proxy): Added optional autowrappping feature.
	(skeleton-proxy, skeleton-abbrev-cleanup): Use `post-command-hook'
	instead of someday to be obsolete defer.

1996-06-21  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-diff.el (ediff-setup-fine-diff-regions):
	allow diff options to be passed to the diff program.
	(ediff-make-diff2-buffer): Don't run Posix diff on remote files.
	(ediff-make-diff2-buffer): Refuses to diff remote files.
	(ediff-make-diff2-buffer,ediff-setup-diff-regions): Changed functions.
	(ediff-make-diff2-buffer): New function.
	Added ^\C-m$ to ok-lines regexps

	* ediff-ptch.el: New file.

	* ediff-util.el (ediff-verify-file-buffer): No longer reverts
	buffers that have file name handlers.

	* ediff-mult.el (ediff-meta-insert-file-info): Write `remote file'
	in the file size/modtime positions, if a file is remote.

	* ediff-wind.el (ediff-make-base-title): New function.
	(ediff-refresh-control-frame): Modified.

1996-06-21  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-ex.el: Fixed the :e command for NT

	* viper.el: replaced all checks for (or (numberp ...)
	(characterp ...)) with vip-characterp
	(vip-change): Now hides replace overlay even for multiline changes.
	(vip-paren-match): Goes to closing paren first.

	* viper.el (vip-find-char-forward,vip-find-char-backward,
	vip-goto-char-forward,vip-goto-char-backward):
	(viper-mode): Don't delete the startup message.
	(vip-set-hooks): Added fortran-mode to viper.

	* viper-util.el (vip-ex-nontrivial-find-file-unix)
	(vip-ex-nontrivial-find-file-ms,vip-get-filenames-from-buffer)
	(vip-wildcard-to-regexp,vip-glob-ms-windows-files): New functions.

1996-06-21  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* asm-mode.el (asm-mode-map): Bind C-c ; to comment-region.

	* mouse.el (mouse-drag-region): Be smart about which end
	gets point and which end gets the mark.

	* hilit19.el (LaTeX-mode): Change handling of escaped $.

	* mouse.el (mouse-buffer-menu): Use aref rather than string-match.

1996-06-19  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmailsum.el (rmail-summary-bury): New function.
	(rmail-summary-mode-map): Put rmail-summary-bury on b.

	* paths.el (Info-default-directory-list): Doc fix.

1996-06-19  Dave Love  <d.love@dl.ac.uk>

	* gud.el (gud-irixdbx-marker-filter): Use %1ld, not %1d,
	when printing $curline.
	(dbx, irix case): Likewise in arg of gud-down.

1996-06-18  Brian D. Carlstrom  <bdc@ai.mit.edu>

	* smtpmail.el (smtpmail-send-it): Don't handle FCC fields until after
	determining FROM field.
	Delete code that converted "S:" to "Subject:".
	Insert FROM field unless it already exists (code from sendmail.el).

1996-06-18  Andrew Innes  <andrewi@harlequin.co.uk>

	* smtpmail.el (smtpmail-smtp-service): Use port 25 as default.
	(smtpmail-send-it): Require mail-utils upon entry.
	Don't invoke sendmail-synch-aliases.
	(smtpmail-deduce-address-list): Only use text matched in regexp group,
	not the whole regexp.

	* smtpmail.el (smtpmail-read-response): Goto smtpmail-read-point
	on every iteration to deal with multiple line banners.

	* smptmail.el (smtpmail-via-smtp): Bracket names in FROM
	and RCPT TO commands.

1996-06-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ange-ftp.el (ange-ftp-kill-ftp-process): Really use the BUFFER arg.
	Make it optional.

	* vc-hooks.el (vc-mode-line): If user is root,
	verify file really has user-writable bit.

1996-06-18  Kim F. Storm  <storm@olicom.dk>

	* hippie.el (he-concat-directory-file-name): Directory part may be nil.
	(he-file-name-nondirectory): Referenced external variable.

1996-06-18  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* pp.el (pp-to-string): Treat #( like (.

1996-06-18  Francesco Potorti`  <F.Potorti@cnuce.cnr.it>

	* files.el (auto-mode-alist): Add uppercase version of archive
	mode file name extensions ARC, ZIP, LXH, ZOO.

1996-06-17  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* noutline.el (outline-up-heading): Fix error message.
	(outline-backward-same-level, outline-forward-same-level): Likewise.

1996-06-16  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* font-lock.el (global-font-lock-mode): Set up find-file-hooks.
	(font-lock-default-fontify-buffer, font-lock-fontify-block)
	(font-lock-mode): Fix syntax of msgs such as Fontifying...done.

	* skeleton.el (local-variables-section): Deleted.

	* undigest.el (unforward-rmail-message): In summary buffer,
	switch temporarily to Rmail buffer.

1996-06-15  Paul Eggert  <eggert@twinsun.com>

	* mail-utils.el (mail-strip-quoted-names):
	`"' is not special inside an RFC 822 comment.

1996-06-15  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* sgml-mode.el (html-list): Definition deleted.
	(html-headline): Definition deleted.
	(html-ordered-list, html-unordered-list): New definitions.
	(html-headline-1 ... html-headline-6): New definitions.
	(html-mode-map): Use new commands.

1996-06-14  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rlogin.el (rlogin): Doc fix.

1996-06-14  Ed Reingold  <reingold@albert.gnu.ai.mit.edu>

	* cal-tex.el (cal-tex-mini-calendar): Add optional paramter COLSEP.
	(cal-tex-cursor-filofax-year): Use it.  Also, adjust other sizes.

1996-06-13  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* simple.el (set-fill-column): Error if no argument.

	* easymenu.el (easy-menu-create-keymaps): Add menu-alias property.

	* lmenu.el (make-lucid-menu-keymap): Add menu-alias property.

1996-06-11  Andrew Innes  <andrewi@harlequin.co.uk>

	* nnmail.el (nnmail-move-inbox): Prompt for POP3 password if
	required, and include on the movemail command line.

1996-06-12  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* imenu.el (imenu--mouse-menu): Don't check imenu-use-keymap-menu.

	* files.el (find-alternate-file): Don't clear buffer-file-truename
	and friends until after calling unlock-buffer.

1996-06-12  enami tsugutomo  <enami@ba2.so-net.or.jp>

	* rmailsum.el (rmail-new-summary): Fix typo; (concat ": "
	description) should be eval'ed.

1996-06-11  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* tar-mode.el (tar-mode-revert): Cope if user cancels the revert.

1996-06-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* term.el (term-terminal-menu): Don't make a self-recursive keymap.

	* rmail.el (rmail-retry-failure): Nicer error message
	if can't find mail-unsent-separator.

	* hexl.el (hexl-mode): Run hexl-mode-hook.

1996-06-09  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (msdos-face-setup): Use `terminal-frame' for
	initial frame setup.
	(make-msdos-frame): New MSDOS-specific frame creation function.
	(focus-frame, unfocus-frame): Don't set to 'ignore.
	(auto-raise-mode, auto-lower-mode): Likewise.
	(set-background-color, set-foreground-color): Definitions deleted.

	* loadup.el: On MSDOS, don't assume that `make-frame'
	is only bound under an X emulator; use `x-create-frame' instead.

	* frame.el (frame-initialize): Don't count MSDOS neither as
	window-system nor as a terminal frame here.

	* dos-fns.el: No need to require 'faces and set menu-bar-mode.
	(window-frame): Remove; it is now on `frame.c'.
	(raise-frame, select-frame): Likewise.

1996-06-10  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* hexl.el (hexl-mode): Set hexl-max-address early on
	and call hexl-goto-address afterward.
	And call hexlify-buffer even earlier.

1996-06-08  Geoff Voelker  <voelker@joker.cs.washington.edu>

	* comint.el (comint-substitute-in-file-name): New function.
	(comint-match-partial-filename): Use comint-substitute-in-file-name
	to handle system-specific syntax.

	* shell.el (shell-directory-tracker): Use
	comint-substitute-in-file-name to handle system-specific syntax.

	* comint.el (comint-dynamic-complete-as-filename)
	(comint-dynamic-simple-complete) [ms-dos, windows-nt]:
	(comint-dynamic-list-filename-completions) [ms-dos, windows-nt]:
	Set completion-ignore-case to t for these systems.

	* shell.el (shell-chdrive-regexp): New variable.
	(shell-mode): Update doc string.
	(shell-directory-tracker): Update doc string.
	Detect drive changes.

1996-06-09  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* frame.el (make-frame-command): Treat msdos like no window system.

1996-06-09  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* comint.el (comint-file-name-quote-list): Doc fix.
	* texnfo-upd.el (texinfo-find-pointer): Doc fix.
	(texinfo-sequentially-find-pointer): Doc fix.
	(texinfo-copy-menu): Use double backslash to quote regexp.

1996-06-08  Roland McGrath  <roland@delasyd.gnu.ai.mit.edu>

	* etags.el (etags-list-tags): When there is an explicit tag name, skip
	the \177 before it.

1996-06-07  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* facemenu.el (facemenu-complete-face-list): Doc fix.

1996-06-07  Roland McGrath  <roland@delasyd.gnu.ai.mit.edu>

	* etags.el (tag-lines-already-matched): Remove defvar.
	(initialize-new-tags-table): Don't make that var local.
	(tag-lines-already-matched): Add docless defvar near find-tag-in-order
	defun; this is a global state variable for that one function.
	(find-tag-in-order): Move clearing of tag-lines-already-matched out of
	loop.  Make it a list of markers and search it with member; it is now
	global, not buffer-local in the tags table, and records all matches in
	any tags table during a single find-tag loop.  When we run out of
	matches, clear it and null out the markers.

1996-06-07  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* imenu.el (imenu--mouse-menu): Always use nested keymaps.
	(imenu-use-keymap-menu): Variable deleted.

	* cmacexp.el (c-macro-preprocessor): New clause for Solaris.

	* winnt.el (x-set-selection, x-get-selection): Define them
	to really use TYPE.

	* smtpmail.el: New file.
	(smtpmail-send-it): Fix error messages.
	(smtpmail-deduce-address-list): Bind recipient-address-list with let.
	(smtpmail-via-smtp): Bind greeting, n, process-buffer.

1996-06-06  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* files.el (hack-local-variables-prop-line): Bind enable-local-eval.

	* hexl.el (hexl-mode-map): Bind prior, home, deletechar, deleteline,
	insertline, S-delete, and DEL.  Don't bind prev.

1996-06-03  Geoff Voelker  <voelker@joker.cs.washington.edu>

	* comint.el (comint-dynamic-complete-filename) [ms-dos, windows-nt]:
	Always use backslash as a directory separator when completing
	in shell mode on these systems.

	* winnt.el (shell-mode-hook): Set comint-completion-addsuffix
	so that the directory suffix is backslash and the file suffix is space.

1996-06-05  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* comint.el (comint-unquote-filename): Handle quoted backslashes.

	* vc.el (vc-cancel-version): Fix paren error.

	* imenu.el (imenu): In interactive spec, pass the entire
	index item, not just the string.

1996-06-04  Per Abrahamsen  <abraham@dina.kvl.dk>

	* xt-mouse.el (xterm-mouse-event): Adjust for minibuffer prompt
	width.

1996-06-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* dired.el (dired-chown-program): Try /usr/sbin/chown.

	* frame.el (make-frame-command): New function.
	(ctl-x-5-map): Change C-x 5 2 to make-frame-command.

	* hippie-exp.el (he-file-name-chars): Check windows-nt, not ms-windows.

1996-06-04  Kim F. Storm  <storm@olicom.dk>

	* files.el (buffer-file-numbers-unique): New variable;
	initialize to nil for windows-nt.
	(find-buffer-visiting): Skip search for buffer based
	on buffer-file-number if these are not unique.

1996-06-04  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* replace.el (occur): Avoid "1 lines" in echo area.

	* shell.el (shell-match-partial-variable): Doc fix.

1996-06-03  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* mouse.el (mouse-show-mark): Use temporary highlighting if possible
	instead of a pause.
	(mouse-drag-region): Use mouse-show-mark to do temp highlighting.
	(mouse-save-then-kill): Call mouse-show-mark for a new selection
	if we have a window system.

	* reporter.el (reporter-submit-bug-report):
	Bind same-window-regexps, same-window-buffer-names, to nil.

1996-06-02  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* rmail.el (rmail-get-new-mail): If conversion to BABYL fails
	for the default inboxes, rename them so they won't be tried again.

1996-06-02  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (msdos-color-aliases): Define more colors.
	(msdos-color-translate): Fix `substring' arguments.  Recognize
	``medium'' prefix.

1996-05-31  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* loaddefs.el (debug-ignored-errors): Don't use concat inside
	quoted list.

1996-05-31  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ehelp.el (electric-helpify): Allow NAME to be given as arg.
	(electric-command-apropos): Specify *Apropos* as buffer name.

	* fill.el (fill-individual-paragraphs): Don't get stuck
	if no newline at the end of the region.

1996-05-30  Richard Stallman  <rms@psilocin.gnu.ai.mit.edu>

	* ispell.el (ispell-region): Handle ispell-skip-sgml properly
	with an re-search.

	* reporter.el (reporter-submit-bug-report):
	Use display-buffer to re-show the original buffer.

1996-05-30  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* simple.el (shell-command-on-region): In output buffer, display
	first page by setting point, not window-start (which can leave
	point in an unexpected place).

	* info.el (Info-insert-dir): Fix default directory.

1996-05-30  Per Abrahamsen  <abraham@dina.kvl.dk>

	* custom.el (event-point): Fix fboundp test surrounding this.

1996-05-29  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* debug.el, edebug.el, icomplete.el, macros.el, simple.el:
	Use executing-kbd-macro, not executing-macro.

1996-05-28  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* add-log.el (change-log-font-lock-keywords): Require colon after
	parenthesized function name.

1996-05-28  Paul Eggert  <eggert@twinsun.com>

	* gnus.el (gnus-article-date-ut): Avoid race condition.
	* gnus-msg.el (gnus-inews-date): Likewise.

	* gnus.el (gnus-gmt-to-local): When rewriting a date to local time,
	use the UTC offset in effect then, not the current UTC offset.

1996-05-26  Roland McGrath  <roland@delasyd.gnu.ai.mit.edu>

	* mailabbrev.el (mail-abbrev-expand-hook): Disable abbrev mode
	temporarily while working, to avoid recursion in indent-relative
	expanding part of the abbrev expansion as an abbrev itself.

1996-05-25  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* Version 19.31 released.

1996-05-21  Marc Fleischeuers  <marc@mpi.nl>

	* files.el (make-backup-file-name): Check msdos-long-file-names.
	(basic-save-buffer-1, make-auto-save-file-name): Likewise.

1996-05-21  Scott M. Meyers  <spirit2@shellus.com>

	* cmacexp.el (c-macro-expansion): Delete ??! trigraph in uniquestring.
	Use same syntax table in outbuf as in inbuf.
	Insert newline instead of space at end, for proprocessors which
	don't like truncated lines.

1996-05-21  Francesco Potorti`  <F.Potorti@cnuce.cnr.it>

	* cmacexp.el (c-macro-expansion): Correct bug in creating tempname.

1996-05-21  Andrew Innes  <andrewi@harlequin.co.uk>

	* scroll-bar.el (scroll-bar-maybe-set-window-start): Always set
	window start, to ensure scroll bar position is updated.

	* term/win32-win.el (win32-handle-scroll-bar-event): Restore
	original window selection after scrolling.

1996-05-21  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* mh-e.el (mh-version): Use mh-e-RCS-id rather than mh-e-version
	and mh-e-time-stamp.

	* simple.el (do-auto-fill): Return t if real work was done.

1996-05-20  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* cal-persia.el: Renamed from cal-persian.el to avoid 14-character
	limitation.
	* calendar.el, diary-lib.el: Fix autoload references.

1996-05-18  Erik Naggum  <erik@naggum.no>

	* sun-curs.el (sc::menu): Fix typo.

1996-05-17  Per Bothner  <bothner@deneb.cygnus.com>

	* term.el (term-send-raw-string):  send-string -> process-send-string.
	(term-arguments):  Remove unused local `values'.
	(term-handle-deferred-scroll):  Fix off-by-one bug.

1996-05-17  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* f90.el: Delete the hilit19 support--it doesn't work.
	(f90-face-*, f90-auto-hilit19, f90-hilit-patterns): Vars deleted.
	(f90-mode, f90-update-line): Delete the hilit19 support code.

1996-05-15  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* tex-mode.el (latex-imenu-create-index):
	Change the regexp to match the * versions of commands.
	(latex-mode): Make imenu-create-index-function buffer-local.

	* enriched.el: Several doc fixes.
	(enriched-mode-hook): Renamed from enriched-mode-hooks.

	* cc-mode.el (c++-mode): Set c-recognize-knr-p locally to nil.

1996-05-13  Espen Skoglund  <espensk@tklab3.cs.uit.no>

	* pascal.el (pascal-end-of-statement, pascal-calculate-indent):
	Set parse-sexp-ignore-comments to t before parsing.
	(pascal-indent-case): Save position of cursor, and restores it
	after reindenting the code.

1996-05-11  Geoff Voelker  <voelker@cs.washington.edu>

	* winnt.el (using-unix-filesystems): Update doc string.

1996-05-11  Andrew Innes <andrewi@harlequin.co.uk>

	* scroll-bar.el (scroll-bar-drag-position): New function.
	(scroll-bar-maybe-set-window-start): New function.

	* term/win32-win.el (win32-handle-scroll-bar-event):
	Use scroll-bar-maybe-set-window-start.

1996-05-11  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* tex-mode.el (latex-imenu-create-index): New function.
	(latex-mode): Use latex-imenu-create-index.
	(latex-imenu-generic-expression): Variable deleted.

1995-05-10  Per Bothner  <bothner@kalessin.cygnus.com>

	* term.el (term-emulate-terminal):  On CR, set term-current-column
	to term-start-line-column, not 0.

1996-05-10  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* f90.el (f90-hilit-patterns): Avoid using undefined variables.

	* vc.el (vc-rename-file): After renaming, update VC info and modeline.
	Preserve buffer-read-only.

1996-05-09  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* gud.el (gud-filter): Cal gud-display-frame even
	if process-window is nil.

	* vc-hooks.el (vc-find-file-hook): Follow multiple links all the way.

	* ispell.el (ispell-check-comments): Default is now t.

1996-05-08  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* bookmark.el (bookmark-bmenu-delete-backwards)
	(bookmark-write, bookmark-relocate, bookmark-insert-buffer-name)
	(bookmark-insert-current-bookmark, bookmark-send-edited-annotation)
	(bookmark-read-annotation, bookmark-read-annotation-text-func)
	(bookmark-send-annotation, bookmark-insert-file-format-version-stamp):
	Doc fix.

1996-05-08  Karl Fogel  <kfogel@floss.red-bean.com>

	* bookmark.el (bookmark-locate): ;;;###autoload this alias.
	(bookmark-bmenu-mode-map): Bind C-c C-c to
	bookmark-bmenu-this-window, analogously to other Emacs listing
	modes such as *grep* and *occur*.
	(bookmark-version): Upped to 2.6.4.

1996-05-08  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* gud.el (gud-filter): Move the call to gud-display-frame
	outside of the save-excursion.

1996-05-07  Karl Fogel  <kfogel@floss.red-bean.com>

	* bookmark.el (bookmark-make): take optional arg `info-node', pass
	it on to bookmark-make-cell.
	(bookmark-make-cell): if new optional arg `info-node' is non-nil,
	make it be the bookmark's info-node.
	(bookmark-info-current-node): new func.
	(bookmark-set): call bookmark-make, passing result from above
	bookmark-info-current-node.
	(bookmark-send-annotation): same as above.
	(bookmark-locate): defalias to bookmark-insert-location for
	backward compatibility.
	(bookmark-version): upped to 2.6.3.

1996-05-07  Noah Friedman  <friedman@prep.ai.mit.edu>

	* rlogin.el (rlogin): Call rlogin-mode after adding
	rlogin-carriage-filter to output filter functions, so user can
	remove it if desired.

1996-05-06  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* gulp.el: New file.

	* info.el (Info-enable-active-nodes): Default to nil.  Mark it risky.

	* ediff-diff.el (ediff-setup-fine-diff-regions):
	Use ediff-diff3-options or ediff-diff-options.

1996-05-05  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* mouse.el (mouse-drag-region): Set the region before reading a
	character, so the selection exists while we wait.

	* dos-fns.el (convert-standard-filename): Test msdos-long-file-names.
	Return "." or ".." unchanged.

	* iso-acc.el (iso-accents-compose): Don't insert in the buffer
	if this is not the start of the key sequence.

	* hideif.el (hide-ifdef-mode): Doc fix.

	* term/win32-win.el (win32-handle-scroll-bar-event):
	Look for `up' and `down' instead of `up-arrow' and `down-arrow'.

1996-05-04  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* ps-print.el (ps-print-preprint): Special handling if
	file entered in the minibuffer is a directory.

	* sendmail.el (mail-mode): Line starting with ---- is par separator.

	* vc-hooks.el (vc-follow-link, vc-find-file-hook):
	Use file-chase-links instead of file-truename.
	(vc-find-file-hook): Follow a link without asking
	if the target is already visited.

1996-05-03  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* apropos.el (apropos-print): If command has no key bindings,
	say how to run it with M-x.

1996-05-03  Andrew Innes <andrewi@harlequin.co.uk>

	* winnt.el (original-make-auto-save-file-name): New symbol bound
	to old value of make-auto-save-file-name.
	(make-auto-save-file-name): New function overriding old.

	* term/win32-win.el (win32-handle-scroll-bar-event): New function.

1996-05-02  Erik Naggum  <erik@naggum.no>

	* dired-aux.el (dired-handle-overwrite): `find-backup-file-name'
	may return nil, so handle that.

1996-05-02  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* gud.el (gud-display-line): Switch to gud buffer before
	calling gud-find-file.

	* info.el (Info-find-node): Don't treat file name `dir' specially
	if it comes with a directory name.

1996-05-01  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* ps-print.el (ps-print-preprint): If user enters a directory name,
	use a suitable file in that directory.

1996-04-30  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* mouse.el (mouse-drag-region): Doc fix.

1996-04-29  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* simple.el (shell-command-on-region): Start of region to keep is
	min of endpoints, not max.

1996-04-29  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* cal-x.el (diary-frame-parameters, calendar-frame-parameters)
	(calendar-and-diary-frame-parameters): Take out font, auto-lower
	and auto-raise.

1996-04-28  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* indent.el (indent-for-tab-command): Pass prefix arg to indent-tab.
	(insert-tab): Handle prefix arg.

1996-04-26  Ed Reingold  <reingold@spiff.gnu.ai.mit.edu>

	* solar.el (diary-sabbath-candles): Don't correct for DST a second
	time.

1996-04-26  Andrew Innes <andrewi@harlequin.co.uk>

	* compile.el (compilation-error-regexp-alist): Add regexp
	for Microsoft VC++ error messages containing drive letters.

	* loadup.el [windows-nt]: Load disp-table.

	* rmail.el (rmail-insert-inbox-text): When required, prompt for
	pop password and pass on to movemail.
	(rmail-pop-password, rmail-pop-password-required): New variables.
	(rmail-read-password): New function.

1996-04-26  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* mouse.el (mouse-drag-region): Leave region highlighted
	until the next input event.

1996-04-25  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* window.el (walk-windows): Doc fix.

1996-04-24  Ed Reingold  <reingold@spiff.gnu.ai.mit.edu>

	* cal-persian.el: Doc fix.

	* cal-julian.el (calendar-print-astro-day-number): Doc fix.

	* cal-menu.el (calendar-mouse-print-dates): Doc fix.

1996-04-23  Richard Stallman  <rms@delasyd.gnu.ai.mit.edu>

	* doctor.el (doctor-doc): Add period.

1996-04-20  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (auto-mode-alist): .F gets fortran mode.

	* simula.el (simula-submit-bug-report): Use emacs-version.
	(simula-version): Function and variable deleted.

	* window.el (walk-windows): Doc fix.

1996-04-19  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* info.el (Info-next-reference, Info-prev-reference): Add optional
	argument RECUR to avoid infinite recursion on malformed nodes.

1996-04-19  Hans Henrik Eriksen  <hhe@ifi.uio.no>

	* simula.el (simula-tab-always-indent, simula-indent-level)
	(simula-substatement-offset, simula-continued-statement-offset)
	(simula-label-offset, simula-if-indent, simula-inspect-indent)
	(simula-electric-indent, simula-abbrev-keyword, simula-abbrev-stdproc):
	Added default constants.
	(simula-emacs-features): new constant to hold information
	on which flavor if emacs is running (from cc-mode.el).
	(simula-mode-menu): Menu definition for Lucid Emacs
	(simula-mode-map): Bound new command simula-indent-exp to C-M-q
	and added lots of commands to [menu-bar].
	(simula-popup-menu): New function for Lucid menus.
	(simula-keep-region-active): New function for Lucid menus.
	(simula-indent-exp): New command that indents a whole expression.
	(simula-indent-line): New strategies for finding the right amount
	to indent.
	(simula-skip-comment-backward): Added optional parameter stop-at-end
	to stop at the first END statement.
	(simula-expand-stdproc): Added abbrev expansion to verbatim copy
	of abbrev table, same for function simula-expand-keyword.
	(simula-search-backward): Added Doc string, and lots of error checking.
	(simula-search-forward): Added Doc string, and lots of error checking.
	Added hilit19 config code.
	(simula-version): New variable and function to report value.
	(simula-submit-bug-report): New function to submit bug report.

1996-04-19  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* term/x-win.el [motif]: Make f10 undefined.

1996-04-19  Torbjorn Einarsson  <T.Einarsson@clab.ericsson.se>

	* f90.el (f90-keywords-re): Added operator and result.
	(f90-keywords-level-3-re): Added operator and result.
	(f90-match-end, f90-looking-at-program-block-start): Fixed bug
	with false matching in comments/strings.
	(f90-looking-at-program-block-start, f90-imenu-generic-expression):
	Added knowledge of pure and extrinsic subroutines.
	(f90-abbrev-start): Fixed bug using next-command-event.
	(f90-keywords-level-3-re): Added keyword "nullify".
	(f90-else-like-re): Fixed indentation of case() statements.
	(f90-font-lock-keywords-2): Changed highlighting of case() statements.

1996-04-19  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* metamail.el (metamail-mailer-name): New variable.
	(metamail-environment): Add MM_QUIET.
	(metamail-switches): Delete -m emacs.
	(metamail-interpret-header, metamail-interpret-body): New functions.
	(metamail-region, metamail-buffer): New arg VIEWMODE.

	* Optional argument which value is passed to the environment
	variable EMACS_VIEW_MODE is added to the function metamail-buffer
	and metamail-region.
	* files.el (after-find-file): Mention file name in
	"auto save is newer" message.

1996-04-18  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* term/win32-win.el (x-select-text):  Remember selected text.
	(x-get-selection-value): Return nil if the clipboard data is
	is the same as the remembered selected text.

1996-04-18  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus.el (gnus-summary-pipe-output, gnus-buffer-configuration,
	gnus-window-to-buffer): Pop up the shell buffer after piping
	articles through a filter.

	* gnus-ems.el: Make invisible text intangible as well.

1996-04-17  Simon Marshall  <simon@spiff.gnu.ai.mit.edu>

	* replace.el (occur): Fix up interactive code.
	Strip text properties from regexp.

1996-04-16  Francesco Potorti`  <F.Potorti@cnuce.cnr.it>

	* vc.el (vc-comment-ring): Initialise using make-ring.
	(vc-clear-context): Initialise vc-comment-ring using make-ring.
	(vc-finish-logentry): Don't initialise vc-comment-ring here.

1996-04-15  Eric Ding <ericding@mit.edu>

	* goto-addr.el (goto-address-send-using-mh-e):
	Renamed from goto-address-send-using-mhe.  Require `mh-comp'.

1996-04-15  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* sh-script.el (sh-while-getopts): Punctuate help message better.

	* cl-extra.el (isqrt): Support expanded range of Lisp integers.
	(cl-expt): Bug fix for (expt -1 -N).
	(cl-macroexpand-all): Change to support `labels'.
	* cl-macs.el (defstruct): Treat multi-nested :include properly.
	(flet): Warn when flet rebinds a macro name.
	(labels): Rewrite to be fully CL-compliant.

1996-04-13  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* completion.el: Provide `completion'.
	(cmpl-make-standard-completion-syntax-table): Initialize
	all chars (to whitespace if nothing else).
	(c-mode-map, fortran-mode-map): Add defvars to avoid warnings.

1996-04-12  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (interpreter-mode-alist): Recognize perl5.

1996-04-11  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* mail-utils.el (mail-fetch-field): Use skip-chars-backward
	to back over whitespace; don't back up past opoint.

	* files.el (auto-mode-alist): Handle `.java'.

	* startup.el (command-line-x-option-alist):
	--title or -T sets only the title.  Allow -title as alias too.

1996-04-10  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* term/x-win.el (x-handle-display): Set DISPLAY envvar too.

1996-04-08  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* disass.el (disassemble-internal): Graceful error if compile failed.

1996-04-07  Ed Reingold  <reingold@spiff.gnu.ai.mit.edu>

	* diary-lib.el (fancy-diary-display): Fix length of separator
	string.

1996-04-06  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* cal-menu.el (calendar-mouse-goto-date): New function.
	Call it instead of calendar-goto-date throughout this file.
	(calendar-event-to-date): Switch buffers based on the event.

1996-04-05  Simon Marshall  <simon@spiff.gnu.ai.mit.edu>

	* ehelp.el (electric-help-mode): Use add-hook mouse-leave-buffer-hook.
	(electric-help-retain): Use remove-hook.

1996-04-05  <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* gomoku.el (gomoku-click): Position on nearest square.  Adapt keymap
	accordingly.
	(gomoku-mouse-play): Use it to play nearest to mouse click.
	(gomoku-terminate-game): Factorize messages.
	(gomoku): Allow interactive passing of board size.  Don't make a fuss
	about restarting a game that hasn't progressed.
	(gomoku-offer-a-draw): Give user the choice it pretended to give.
	(gomoku-point-x): Deleted function.
	(gomoku-point-y, gomoku-point-square): Simplified because point is
	always on a square.
	(gomoku-goto-xy, gomoku-plot-square): Fix line count due to intangible
	newlines.
	(gomoku-init-display): Once again fairly fast due to minimization of
	characters in buffer and text-property operations.  Cursor cannot be
	be off a square.
	(gomoku-display-statistics): Simplified equivalently.
	(gomoku-winning-qtuple-beg, gomoku-winning-qtuple-end)
	(gomoku-winning-qtuple-dx, gomoku-winning-qtuple-dy): Pseudo variables
	only used for non-functional argument passing deleted.
	(gomoku-cross-winning-qtuple): Accordingly deleted function and
	(gomoku-check-filled-qtuple): Accordingly adapted.
	(gomoku-cross-qtuple): Don't be confused by tabs.
	(gomoku-move-down, gomoku-move-up): Simplified because point is always
	on square.
	(gomoku-beginning-of-line, gomoku-end-of-line): New commands necessary
	because intangible newlines perverted these.

1996-04-04  Erik Naggum  <erik@naggum.no>

	* dired.el (dired-noselect): Resolve symbolic links in argument.

1996-04-04  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* electric.el (Electric-command-loop):
	Set universal-argument-other-key to 0.

1996-04-04  Richard Stallman  <rms@lucy.gnu.ai.mit.edu>

	* rmailsum.el (rmail-summary-scroll-between-messages): New var.
	(rmail-summary-scroll-msg-down, rmail-summary-scroll-msg-up):
	Obey that var.

	* isearch.el (isearch-mode): Use add-hook for mouse-leave-buffer-hook.
	(isearch-done): Use remove-hook.

1996-04-04  Simon Marshall  <simon@spiff.gnu.ai.mit.edu>

	* timer.el (run-at-time): Allow floating REPEAT values.

1996-04-03  Ed Reingold  <reingold@spiff.gnu.ai.mit.edu>

	* calendar.el (general-holidays): Spelling fix.

1996-04-03  Richard Stallman  <rms@lucy.gnu.ai.mit.edu>

	* gud.el (gud-mode): Doc fix.

1996-04-03  Erik Naggum  <erik@naggum.no>

	* gnus.el (gnus-summary-prepare-threads): Call `gnus-message'
	instead of `message'.

	* startup.el (command-line-1): Document the C- and M- conventions
	more completely.

1996-04-02  Noah Friedman  <friedman@prep.ai.mit.edu>

	* files.el (file-newest-backup): Return the newest backup for the
	exact file name specified, not the newest backup of all files
	whose names start with that substring.

1996-04-02  Richard Stallman  <rms@lucy.gnu.ai.mit.edu>

	* sendmail.el (mail): Once again set default dir to home dir.

1996-04-02  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* timer.el (timer-event-handler): Save copies of events too.

1996-03-31  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* hexl.el (hexlify-buffer, dehexlify-buffer): Clear out the undo
	info, and don't record undo info for the conversion.

1996-03-29  Ed Reingold  <reingold@spiff.gnu.ai.mit.edu>

	* solar.el: Misc fixes to arc-trig functions.

1996-03-29  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* rmail.el (rmail-forward): Put the "end" line right after the
	forwarded message; the signature goes after.

1996-03-29  Ed Reingold  <reingold@mole.gnu.ai.mit.edu>

	* cal-persian.el: New file.

	* diary-lib.el, calendar.el: Add Persian calendar.

	* cal-menu.el (calendar-mode-map,calendar-mouse-print-dates): Add
	Persian calendar.

1996-03-28  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el and related files: copyright message updated.
	Also, added eval-when-compile's to reduce the number of warnings.
	* viper.el (vip-add-newline-at-eob-if-necessary):
	don't add newline for read-only files.
	* viper-util.el (vip-set-replace-overlay): made non-detachable
	under XEmacs.
	* viper-ex.el (ex-next): bug fix.
	* viper-macs.el (vip-events-to-macro):
	discard events represented as lists in macro
	definitions.
	* viper-mous.el (vip-mouse-click-insert-word): fixed a typo.

1996-03-28  Richard Stallman  <rms@charlie-brown.gnu.ai.mit.edu>

	* tmm.el (tmm-define-keys): New arg MINIBUFFER.
	(tmm-add-prompt): Pass new arg in both calls.

1996-03-27  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* facemenu.el (list-text-properties-at): Display category's properties.

1996-03-27  Geoff Voelker  <voelker@cs.washington.edu>

	* makefile.nt: Change uses of del to $(DEL).

1996-03-27  Simon Marshall  <simon@spiff.gnu.ai.mit.edu>

	* rmail.el (rmail-fontify-message, rmail-unfontify-buffer-function):
	Reset the buffer modified state if necessary.

1996-03-27  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* avoid.el (mouse-avoidance-old-pointer-shape): New vbl.
	(mouse-avoidance-mode): Save old pointer shape when entering
	protean mode; restore when exiting.

1996-03-26  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* sh-script.el (sh-alias-alist): Recognize lignux.

	* dired.el (dired-chown-program): Recognize lignux.

	* gnus-cus.el (gnus-make-face, custom-declare):
	Rename custom-asis to custom:asis.

1996-03-25  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (set-visited-file-name): Don't call find-buffer-visiting
	if filename is nil.

	* custom.el (custom:asis): Renamed from custom-asis.

	* mouse.el (mouse-buffer-menu): Keep the order of buffers straight.

	* timer.el (timer-event-handler): Record the last few events.

1996-03-24  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* sh-script.el (sh-shell-arg): Add no options for bash, ksh, or wksh.

	* ange-ftp.el (ange-ftp-wait-not-busy): New subroutine.
	Kill ftp process if user quits.
	(ange-ftp-raw-send-cmd): Use that.
	(ange-ftp-fix-dir-name-for-cms): Fix error message.

	* timer.el (timer-event-handler): Inhibit quitting.

1996-03-24  Jonathan Kamens  <jik@cam.ov.com>

	* terminal.el (te-terminal-name-prefix): Change from
	"emacs-virtual" to "emacs-em", so that things will work on systems
	which allow only short terminal-type names.
	(terminal-emulator): Delete the hyphen between
	te-terminal-name-prefix and the width and height of the window.
	(te-create-terminfo): Reformat the terminfo entry slightly.

	* terminal.el (te-terminfo-directory): New variable.
	(te-create-terminfo, te-tic-sentinel): Use te-terminfo-directory.

1996-03-23  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* timer.el (timer-set-time): Don't set usecs to nil.
	(timer-duration): Return nil if junk at end of string.
	Handle just a number--treat it as number of seconds.

	* ange-ftp.el (ange-ftp-dired-call-process): Return 1 if error.
	(ange-ftp-call-chmod): If ftp chmod cmd fails, try rsh.
	(ange-ftp-remote-shell): New variable.

	* timer.el (timer-event-handler): Catch errors when running the event.

	* ange-ftp.el (ange-ftp-call-chmod): Return proper value.

1996-03-23  Per Abrahamsen  <abraham@dina.kvl.dk>

	* custom.el (custom-type-properties):
	Use custom-asis instead of as-is.
	(custom-asis): Set it to itself.
	* gnus-cus.el: Use custom-asis instead of as-is.

1996-03-22  Michelangelo Grigni  <mic@mathcs.emory.edu>

	* ffap.el: Doc fixes.  Reorganized.  Retired v18 support.
	(ffap-bindings): Offers a default installation.
	(ffap-string-at-point): Modified arguments.
	(ffap-gnus-hook): Updated for Gnus 5.
	(ffap-tex-init): Delayed initialization of `ffap-tex-path'.
	(ffap-dired): New entry in `ffap-alist'.
	(ffap-menu-rescan): May fontify the choices in buffer.
	(ffap-read-file-or-url): `PC-completion-as-file-name-predicate'
	used if available, to work with complete.el.

1996-03-22  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* faces.el (x-frob-font-slant): Properly handle a match against
	x-font-regexp-head.
	(x-frob-font-weight): Separate two cond cases by analogy with
	x-frob-font-slant.

	* vc.el (vc-update-change-log): Use add-log-full-name and
	add-log-mailing-address only if non-nil.

	* add-log.el (add-log-full-name, add-log-mailing-address):
	Add autoload cookies.

1996-03-22  <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* gomoku.el: Ancient leading comment removed.
	(gomoku-mode-map): Added numeric keypad for 8 directions, changed
	comments to lowercase (C-c rather than C-C), added SPC to play and
	undo's binding to go back.
	(gomoku-emacs-won, gomoku-font-lock-O-face, gomoku-font-lock-X-face)
	(gomoku-font-lock-keywords):  New variables.
	(gomoku-mode): Use it and make buffer read-only for user.
	(gomoku-terminate-game): Remove (ding) -- maybe should be optonal.
	(gomoku-init-display): Rewritten, makes fields intangible so you
	can't go in between.  Make free fields have mouse-face.
	(gomoku-cross-qtuple): Take account of intangible text, and that
	empty lines are now really empty.
	(gomoku-move-left, gomoku-move-right): Removed thanks to intangibility.
	(gomoku-move-ne, -se, -nw, -sw): Use normal left / right motion.

1996-03-22  Lars Magne Ingebrigtsen  <larsi@dain.ifi.uio.no>

	* elp.el (elp-instrument-package): Don't instrument keymaps and
	autoloaded functions.

1996-03-21  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* cplus-md.el (indent-c++-exp): Use calculate-c-indent-after-brace.
	(c++-mode): Require c-mode.

	* gnus-cus.el (custom-declare): Change `as' to `as-is'.

1996-03-21  Per Abrahamsen  <abraham@dina.kvl.dk>

	* custom.el (custom-type-properties): Add new type `triggle' for
	use with "boolean" face properties.

1996-03-20  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* sh-script.el (sh-font-lock-keywords): Highlight \ only with
	non-alphanumeric.

1996-03-19  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* edebug.el (edebug-eval-defun): Convert defvar to defconst.

	* gnus-cus.el (gnus-make-face): Redo Feb 20 change.

	* custom.el (custom-face-hack): Avoid evalling the args
	in the list that the export function returns.

	* inf-lisp.el (switch-to-lisp): Sometimes turn on pop-up-frames.

	* fill.el (fill-region-as-paragraph): Fix the second check for
	whether we reached the end of the paragraph.

1996-03-18  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* window.el (count-windows): Doc fix.

1996-03-18  Francesco Potorti`  <F.Potorti@cnuce.cnr.it>

	* simple.el (insert-buffer): Interactive default changed to a more
	reasonable one.

1996-03-17  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* fill.el (fill-context-prefix): Unused var `eol' deleted.

1996-03-16  Geoff Voelker  <voelker@cs.washington.edu>

	* term/win32-win.el: Don't define backspace, M-backspace, delete,
	and M-delete; they are already defined in winnt.el.

1996-03-16  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* replace.el (occur): If no matches, just display in echo area.

	* emacsbug.el (report-emacs-bug): Use a different address
	for pretest versions.

	* comint.el (comint-exec-1): Use dumb instead of unknown, for terminfo.

1996-03-14  Roland McGrath  <roland@charlie-brown.gnu.ai.mit.edu>

	* compile.el (compilation-find-buffer): Only choose
	compilation-last-buffer if it is compilation-buffer-p.

1996-03-14  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* map-ynp.el (map-y-or-n-p): Fix previous change.
	Delete autoload cookie (file is preloaded).

	* imenu.el (imenu-generic-expression):
	Autoload the make-variable-buffer-local call.

1996-03-12  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* lisp-mode.el (lisp-fill-paragraph): Treat code-and-comment
	case specially.

1996-03-11  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-cus.el (gnus-make-face): Undo Feb 20 change.

1996-03-08  Ethan Bradford  <ethanb@phys.washington.edu>

	* mailalias.el (mail-get-names): Understand "+username" format for
	/etc/passwd lines.

1996-03-08  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* imenu.el (imenu--menubar-select): Handle the "rescan" item.
	(imenu--mouse-menu): Pass proper arg to x-popup-menu.

1996-03-08  Gregory Neil Shapiro  <gshapiro@scooter.WPI.EDU>

	* mailabbrev.el (mail-abbrev-modtime): New variable.
	(mail-abbrevs-sync-alaises): New function. Updates mail-abbrevs if
	modtime of mail-personal-alias-file is different than
	mail-abbrev-modtime.
	(mail-abbrevs-setup): Call mail-abbrevs-sync-aliases.

1996-03-08  Erik Naggum  <erik@naggum.no>

	* cl-extra.el (equalp): Use string-equal on strings.

1996-03-08  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* menu-bar.el (menu-bar-tools-menu): Delete ediff-doc and
	eregistry items.

	* help.el (describe-mode): Handle minor mode w/o mode line indicator.

	* bibtex.el (bibtex-version): Variable deleted.
	(bibtex-submit-bug-report): Don't use that.

1996-03-07  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* rmailsum.el (rmail-make-basic-summary-line): Limit line count
	to reformatted header if we have reformatted it.

	* ehelp.el (with-electric-help): Make buffer read-only as last thing.

1996-03-07  Simon Marshall  <simon@spiff.gnu.ai.mit.edu>

	* font-lock.el (font-lock-set-defaults): Also test font-lock-keywords
	against compiled null keywords.

	* rmail.el (rmail-fontify-buffer-function): Fontify any message here.

1996-03-07  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* font-lock.el (font-lock-fontify-block):
	Use facemenu-keymap to make the binding.

1996-03-06  Espen Skoglund  <espensk@tklab3.cs.uit.no>

	* pascal.el (pascal-declaration-end): Now locates the end of a
	parameterlist correctly.
	(electric-pascal-tab): Never indented a line when
	pascal-tab-always-indent was set to nil.
	(pascal-indent-case): Now locates the end of a case-statement
	correctly.

1996-03-06  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* tar-mode.el (tar-subfile-mode): Doc fix.
	(tar-extract): Call tar-subfile-mode after setting buffer-read-only
	and the buffer modified flag.

1996-03-06  Stefan Schoef  <schoef@OFFIS.Uni-Oldenburg.DE>

	* bibtex.el (bibtex-pop): New generic function which unifies the
	functionality of bibtex-pop-previous and bibtex-pop-next.  Now,
	bibtex-pop moves to the end of field after the pop.  Concatenated
	strings are now handled correctly.  Delimiters are not added to
	non-delimited entries.  Changed occurences of
	bibtex-text-in-cfield to bibtex-text-in-field.
	(bibtex-pop-previous, bibtex-pop-next): Call bibtex-pop.
	(bibtex-complete-string): Fixed bug that removed delimiters
	around the following field if current field is already
	undelimited on completion.
	(bibtex-complete-string, bibtex-remove-double-quotes-or-braces):
	Only remove delimiters if field text is not concatenated.
	(bibtex-font-lock-keywords): Use the same regexps used
	in all other places of bibtex.el to parse the buffer.
	(bibtex-mode): Changed the definition of font-lock-defaults,
	so that quote-delimited entries aren't fontified as strings anymore.
	(bibtex-parse-keys): Changed the regexp used for finding
	crossref entries.
	(bibtex-field-const, bibtex-reference-key): Fixed the regexp
	to match more of the characters allowed here by BibTeX/LaTeX.
	(bibtex-field-name): Made it less restrictive.
	(bibtex-field-string): Changed so that quote-delimited entries
	with quotes inside aren't a problem anymore.  Changed nesting
	level of braces in entries to support three inner braces.
	(bibtex-validate-buffer): By giving an optional argument, the
	user can now let it not validate the whole buffer, but only
	the portion starting at point.  Small modification in strategy
	used to find next entry.
	(bibtex-print-help-message): Ignore case in field name when
	searching for help text.
	(bibtex-submit-bug-report): New function.

1996-03-06  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* saveplace.el (save-place-kill-emacs-hook):
	Always call save-places-to-alist.

	* profile.el (profile-convert-byte-code): New function.
	(profile-a-function): Use profile-convert-byte-code.

	* bytecomp.el (post-command-idle-hook, post-command-idle-delay):
	Mark obsolete.

	* complete.el (PC-completion-as-file-name-predicate):
	Replace PC-do-completion-filename-completers.
	(PC-do-completion): Use that.

1996-03-05  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* cl-extra.el (equalp): Correctly compare last elt of two lists.

	* mailabbrev.el (mail-abbrevs-setup): Doc fix.

	* texinfo.el (texinfo-section-types-regexp)
	(texinfo-section-level-regexp, texinfo-subsection-level-regexp)
	(texinfo-subsubsection-level-regexp): Add defvars.

1996-03-05  Per Abrahamsen  <abraham@dina.kvl.dk>

	* texinfo.el (texinfo-section-list): New variable.
	(texinfo-outline-level): New function.
	(texinfo-mode): Use them.

1996-03-05  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* complete.el (PC-do-completion-filename-completers): New variable.
	(PC-do-completion): Use it.

	* desktop.el: Global vars mam, fn, bn, misc renamed.
	(desktop-buffer-misc): Renamed from misc.  Add defvar.
	(desktop-buffer-major-mode): Renamed from mam.  Add defvar.
	(desktop-buffer-file-name): Renamed from fn.  Add defvar.
	(desktop-buffer-name): Renamed from bn.  Add defvar.
	(desktop-create-buffer, desktop-buffer): Use new names.

1996-03-04  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* desktop.el (desktop-list*): New function.
	(desktop-internal-v2s): Generate output using desktop-list*.

	* saveplace.el (save-place-kill-emacs-hook): Don't save
	if we never loaded the save-place-file.

	* rmail.el (unforward-rmail-message): Add autoload declaration.
	* undigest.el (unforward-rmail-message): Delete autoload cookie.

	* rmail.el (rmail-unix-mail-delimiter): Don't accept newlines in month.

1996-03-03  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* indent.el (beginning-of-line-text):
	Check adaptive-fill-regexp is non-nil.

	* dunnet.el: Require cl only when compiling.
	(scroll-step): Don't set it globally.
	(dun-mode): Set scroll-step locally.

1996-03-03  Per Abrahamsen  <abraham@dina.kvl.dk>

	* texinfo.el (texinfo-font-lock-keywords): Fixed regexp for `@end'
	and `@item'.

1996-03-03  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* dired-aux.el (dired-compress-file-suffixes): New variable.
	(dired-compress-file): Use that to control file naming.

1996-03-02  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* font-lock.el (global-map): Change C-M-g to M-g M-g.

	* cc-mode.el (set-c-style): Autoload the definition.
	(c-set-style): Add autoload cookie.

1996-03-01  Johan Vromans  <jvromans@squirrel.nl>

	* forms.el (forms-insert-after):
	New variable. Non-nil means: inserts of new
	records go after current record, also initial position is at last
	record.
	(forms-mode, forms-insert-record): Use it.

1996-03-01  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (set-visited-file-name): Query if there's already another
	buffer visiting this file.

	* startup.el (command-line-normalize-file-name): Do save-match-data.

	* imenu.el (imenu--menubar-select): No longer interactive.
	(imenu-create-submenu-name): Function deleted.
	(imenu-example--create-lisp-index): Don't use it.
	(imenu--generic-function): Don't use imenu-create-submenu-name.
	(imenu-submenu-name-format): Variable deleted.
	(imenu--split-menu): Use TITLE as the head of the new list.
	Don't split if everything fits in one level.
	(imenu--split-submenus): New function.
	(imenu-update-menubar): Use imenu--split-submenus.
	(imenu--mouse-menu): Use imenu--split-submenus.

	* imenu.el (imenu-submenu-name-format): Delete the `...'.

	* skeleton.el: Add provide call.

1996-02-29  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* simple.el (backward-delete-char-untabify):
	Don't handle overwrite-mode here (done in delete-backward-char).

1996-02-29  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* lisp-mode.el (emacs-lisp-byte-compile-and-load): Correct logic.

1996-02-28  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* server.el (server-process-filter):
	Use command-line-normalize-file-name.

	* startup.el (command-line-normalize-file-name):
	Convert /// at beginning to just /.

	* iso-acc.el (iso-languages): Add ~? and ~!.

1996-02-28  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* font-lock.el (turn-on-font-lock-if-enabled): Bind inhibit-quit.
	(font-lock-value-in-major-mode): New function to process alists.
	(font-lock-mode, font-lock-set-defaults): Use it.
	(font-lock-choose-keywords): Don't process alists here.
	(global-font-lock-mode): Show message if extra arg MESSAGE is non-nil.

	* subr.el (get-buffer-window-list): Take args like next-window not
	get-buffer-window.

	* timer.el (timer-set-time, timer-set-time-with-usecs): Doc fix.
	(run-at-time, with-timeout): Doc fix.
	(run-with-timer): Just call run-at-time.
	(timer-set-idle-time): New function.
	(run-with-idle-timer): Use it to set the idle time.
	Doc fix.  Fix interactive code.

	* time.el (display-time): Just use run-at-time to start the timer.

	* paren.el: (show-paren-delay): New variable.
	(show-paren-mode): New command.  Use it.  Call it at the top-level.
	(show-paren-mode, show-paren-idle-timer): New variables.
	(show-paren-function): Renamed from show-paren-command-hook.

1996-02-27  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* levents.el (timeout-event-p): Function deleted.

	* compile.el (compilation-parse-errors):
	Collapse //'s using command-line-normalize-file-name.

	* startup.el (command-line-normalize-file-name):
	Don't collapse // at start of file name.

	* server.el (server-process-filter):
	Don't collapse // at start of file name.

	* frame.el (handle-delete-frame): Use save-buffers-kill-emacs.

	* time.el (display-time): Use rmail-after-get-new-mail-hook.

	* rmail.el (rmail-get-new-mail): Run rmail-after-get-new-mail-hook.

1996-02-27  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* iso-transl.el (iso-transl-dead-key-alist): Fix syntax for ?^.

1996-02-26  Mark Osbourne  <marko@lexis-nexis.com>

	* hexl-mode.el (hexl-mode-exit, hexl-maybe-dehexlify-buffer):
	Corrected write-contents-hook to write-contents-hooks.

1996-02-26  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* tpu-edt.el (tpu-load-xkeys): Fix previous change.

	* make-mode.el (makefile-runtime-macros-list): Add + to the list.

1996-02-26  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* cal-china.el, cal-islam.el: Renamed from cal-chinese.el and
	cal-islamic.el to avoid 14-character limitation.
	* calendar.el, diary-lib.el, holidays.el: Fix autoload references.

1996-02-26  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* iso-acc.el (iso-acc-minibuf-setup): New function.
	Add it to minibuf-setup-hook.

1996-02-26  Erik Naggum  <erik@naggum.no>

	* rmailsum.el (rmail-make-basic-summary-line): Fix previous change.

	* rmail.el (rmail-clear-headers): Bind case-fold-search to t
	across the whole function.

1996-02-25  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* sendmail.el (mail-mode-map): Bind M-TAB to mail-complete.

	* mailalias.el (mail-complete): Add autoload cookie.

	* undigest.el (unforward-rmail-message): Add autoload cookie.

1996-02-26  Paul Eggert  <eggert@twinsun.com>

	* vc-hooks.el (vc-find-cvs-master): Don't require a "/" after the
	modification time in CVS/Entries, since the time may be followed
	by a conflict notice (in CVS 1.7) or by some other value (in CVS 1.3).

1996-02-25  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* vc-hooks.el (vc-follow-link): Kill buffer before creating new one.

	* finder.el (finder-compile-keywords-make-dist): New function.

	* emerge.el (emerge-combine-versions-template): Make the
	generated comments on the #else and #endif follow the GNU standards.

	* ps-print.el (ps-generate): Bind inhibit-read-only.

	* info.el (Info-index): If fail, go back to original node.
	(Info-find-node): Make error messages consistent.
	(Info-insert-dir): Fix error message.

1996-02-24  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* mail-utils.el (rmail-dont-reply-to): Allow parsing lists of
	addresses with comment fields.

1996-02-23  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* imenu.el (imenu-add-to-menubar): Add menu item for current buf only.
	(imenu-update-menubar): Never add menu item here.

	* undigest.el (unforward-rmail-message):
	Handle any kind of forwarding delimiters.

1996-02-23  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nntp.el (nntp-request-post): Clear the server buffer before
	sending text to the server.

1996-02-23  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* decipher.el: Load cl within eval-when-compile.
	(decipher-font-lock-keywords): Fix doc patching error.

	* sendmail.el (mail-mode): Treat `-- ' line as paragraph separator.

	* vc-hooks.el (vc-follow-link): Simplify by taking advantage
	of Feb 21 change in find-file-noselect.

1996-02-22  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* man.el (man): Don't call Man-init-defvars here.
	Do it at top level instead.
	(Man-init-defvars): Now a defun, not a defsubst.
	Don't set Man-uses-untabify-flag.
	(Man-uses-untabify-flag): Add doc string.  Make default value t.
	(Man-filter-list): Add doc string.

	* rmailsum.el (rmail-make-basic-summary-line): Less space before subj.

1996-02-22  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el: (vc-follow-link): New function.
	(vc-find-file-hook): Use it.

1996-02-22  Erik Naggum  <erik@naggum.no>

	* fill.el (fill-region-as-paragraph): Doc fix.

	* comint.el (make-comint, comint-run): Fix autoload cookie.

1996-02-21  Christopher J. Madsen  <ac608@yfn.ysu.edu>

	* decipher.el (decipher-mode): Removed nonstandard font-lock support.
	(decipher-make-checkpoint, decipher-resync): Removed special
	support for font-lock.
	(decipher-resync): Removed `$' from regexps.
	(decipher-set-map): Use font-lock-fontify-region-function.
	(decipher-font-lock-keywords): Removed newlines from regexps.
	(decipher-use-font-lock): Deleted.
	(decipher-toggle-font-lock, decipher-turn-on-font-lock): Deleted.

1996-02-21  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* vc-hooks.el: Move all the put's for menu-enable props to top level.
	(vc-next-action, vc-toggle-read-only): Enable whenever vc-mode.

	* startup.el (before-init-hook, after-init-hook): Doc fix.
	(term-setup-hook): Doc fix.
	(emacs-startup-hook): New defvar.

	* paren.el: Use run-with-idle-timer, not post-command-idle-hook.

	* rnewspost.el (news-reply-mode-map): Delete news-reply-signature.
	(news-reply-signature): Improve the message.

	* ps-print.el (ps-generate-postscript-with-faces):
	Handle buffer-invisibility-spec when interpreting the invisible prop.

	* lisp-mode.el (lisp-fill-paragraph): When filling a comment,
	find paragraph bounds by hand, and pass the SQUEEZE-AFTER arg
	to fill-region-as-paragraph.

	* fill.el (fill-region-as-paragraph): New arg SQUEEZE-AFTER.

	* doctor.el: More censorship.

	* undigest.el (unforward-rmail-message): New command.

	* cplus-md.el (c++-mode-syntax-table): Don't use c-mode-syntax-table.

	* timer.el (run-with-idle-timer): New function.
	(timer-create, timerp): Leave a slot for idle-delay.
	(timer-activate-when-idle): New function.
	(timer-event-handler): Handle idle-delay timers specially.
	(cancel-timer, cancel-function-timers): Handle idle-delay timers.

	* perl-mode.el (perl-imenu-generic-expression): Recognize packages.

	* rnewspost.el (news-reply-yank-message-id, news-reply-yank-from):
	Fix swapped args in defvars.

	* simple.el (shell-command): Call file name handler.

	* imenu.el (imenu-buffer-menubar): Add defvar.
	(imenu-update-menubar): Make a buffer-specific copy of the local map.

	* ange-ftp.el (dired-call-process): Put on ange-ftp property.
	* dired-aux.el (dired-call-process): Call file name handler.

	* files.el (find-file-noselect): If after-find-file switches buffers,
	return the buffer that it leaves current.

	* derived.el (derived-mode-merge-syntax-tables): Use inheritance.

	* dunnet.el (dun-urinate): Renamed.
	(dun-verblist): Indecent word deleted.
	(dunnet): Print "censored" message.

	* time.el (display-time-update): New subroutine broken out from
	display-time-event-handler.

	* time.el (display-time): Add hook to rmail-get-new-mail-hook.

	* rmail.el (rmail-get-new-mail): Don't mess with display-time here.

1996-02-21  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* fill.el (canonically-space-region): Use insert-before-markers
	when inserting spaces at end of line.

1996-02-21  Anders Lindgren  <andersl@csd.uu.se>

	* follow.el: Update some doc string.  Call `add-minor-mode'.
	(follow-windows-start-end-cache, follow-cache-command-list):
	New variables.
	(follow-cache-valid-p, follow-invalidate-cache): New functions.
	(follow-windows-start-end, follow-post-command-hook,
	follow-generic-filter): Cache support added.
	(follow-avoid-tail-recenter): Problem with minibuffer-only
	frames corrected.
	(follow-windows-aligned-p): Minor change.

1996-02-21  Roland McGrath  <roland@charlie-brown.gnu.ai.mit.edu>

	* compile.el (compilation-minor-mode): Run compilation-minor-mode-hook.

	* c-mode.el: Added provide.

1996-02-20  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus-msg.el (gnus-inews-insert-headers): Check whether Sender
	and From are equal before inserting a Sender header.

	* nnheader.el (nnheader-insert-head): Make sure the entire head of
	the article is inserted.

	* gnus-cus.el (gnus-make-face):
	Use `as-is' parameters to `custom-face-lookup'.

1996-02-20  Erik Naggum  <erik@naggum.no>

	* finder.el: Removed (require 'picture).
	(finder-insert-at-column): New function.
	(finder-list-keywords, finder-list-matches): Use it.

1996-02-19  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* files.el (interpreter-mode-alist): Add mawk.
	(set-auto-mode): Allow either space or tab in #! line.

1996-02-19  Christopher J. Madsen  <ac608@yfn.ysu.edu>

	* decipher.el (decipher-mode): Added special support for font-lock.
	(decipher-set-map, decipher-insert): Likewise.
	(decipher-make-checkpoint, decipher-resync): Likewise.
	(decipher-use-font-lock, decipher-font-lock-keywords): New vars.
	(decipher-toggle-font-lock, decipher-turn-on-font-lock): New funcs.

1996-02-16  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper-mous.el (vip-mouse-click-insert-word): Fixed a typo.

	* viper-macs.el (ex-map-read-args,ex-unmap-read-args): Fixed messages.
	(vip-events-to-macro): Delete nil in macro definitions.
	(vip-events-to-macro): Discard events represented as lists in
	macro definitions.

	* menu-bar.el: Added [ediff-doc] and [eregistry] to
	menu-bar-tools-menu.

	* ediff-util.el: Changed file name length from 8 to 7 under DOS.
	(ediff-make-temp-file): Should work with DOS now.
	(ediff-copy-list): Made cl-independent.

	* ediff-util.el, ediff-diff.el, ediff-wind.el:
	Added face support for XEmacs TTY and DOS.

	* ediff-util.el, ediff-wind.el, ediff-init.el
	(ediff-prefer-long-help-message): renamed into
	ediff-use-long-help-message.

	* ediff-init.el, ediff-wind.el: Fixed make-ctl-frame for xemacs.

	* ediff-wind.el (ediff-setup-control-frame): Control frame's
	surrogate minibuffer changes without the need to delete the frame.

	* ediff-merg.el: Changed some defaults.

	* ediff-mult.el (ediff-show-meta-buffer): Protected against errors
	when meta-buffer is invisible.

	* ediff-wind.el (ediff-skip-unsuitable-frames): Won't select small
	frames any more.
	(ediff-setup-control-frame): Won't grab mouse on quit.

	* ediff-hook.el: Added Ediff Manual.

	* ediff.el, ediff-util.el (ediff-make-temp-file): Preserves buffer
	file names as much as possible.

	* ediff-util.el (ediff-compute-custom-diffs-maybe): Now handles
	temp file names correctly.
	(ediff-intersection, ediff-union, ediff-set-difference,
	ediff-copy-list): Functions modified.
	(ediff-union, ediff-intersection, ediff-set-difference): New
	functions.  Moved ediff-documentation to ediff.el.

	* ediff.el: Made all Ediff faces hidden from facemenu.

	* ediff-init.el (ediff-hide-face): New function.
	(ediff-collect-diffs-metajob): Fixed.
	(ediff-check-for-cl-seq): Function deleted
	(ediff-abbreviate-file-name): Now a defun.
	(ediff-has-face-support-p): New function.  Ediff now supports
	faces whenever possible.
	(ediff-force-faces): New variable.

	* ediff-diff.el (ediff-set-diff-overlays-in-one-buffer): Takes
	advantage of advance-front/rear features of overlays.  Works
	synchronously for DOS, Windows.

	* ediff-util.el (ediff-copy-diff,ediff-pop-diff,
	ediff-make-bullet-proof-overlay): These now take advantage of
	advance-front/rear features of overlays.

	* ediff.el (ediff-patch-file): Epatch now ignores VERSION_CONTROL
	environment variable and prevents the use of the -V option in GNU
	diff.
	(run-ediff-from-cvs-buffer): New function.  Moved all
	version-control-related stuff to a new file, ediff-vers.el.

	* ediff-util.el (ediff-save-buffer-in-file): New function
	(ediff-visible-region): No longer narrows the merge buffer.
	(ediff-status-info): Now tells if we are focusing on regions where
	both buffers differ from the ancestor.
	(ediff-jump-to-difference, ediff-get-diff-posn): Changed message.
	(ediff-compute-custom-diffs-maybe): Now works for merge jobs.

	* ediff-mult.el: Now uses ediff-check-for-cl-seq to make sure
	cl-seq is loaded.
	(ediff-append-custom-diff): Finds custom diffs in more cases.
	Ediff is no longer dependent on cl.el.  Added ediff-union to
	smooth out the possible differences between common emacs
	intersection/union and cl.el.

	* viper.el: Added face support for devices that have faces.
	(vip-forward-paragraph,vip-backward-paragraph): Now work
	corretly when they are used as motion specs in other commands.
	(vip-set-hooks): Added viper to tcl-mode-hook.

	* viper-util.el (vip-has-face-support-p,vip-abbreviate-file-name):
	New functions.
	(vip-force-faces): New variable.

	* viper-keym.el: Added special binding (vip-handle-!) for `!' in
	ex-read-filename-map.

	* viper-ex.el (vip-handle-!): New function.
	(vip-ex-read-file-name): Now handles SPC correctly in :r !cmd
	and :w !cmd.

1996-02-15  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* imenu.el (imenu--generic-function): Ignore text properties.

	* files.el (auto-mode-alist): Recognize GNUmakefile.
	Recognize .itcl and .itk suffixes.

	* ange-ftp.el (ange-ftp-default-user): Doc fix.

1996-02-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* info.el (info-insert-file-contents-1) [MSDOS]: Remove leading
	dot only from non-empty suffixes.

1996-02-15  Christopher J. Madsen  <ac608@yfn.ysu.edu>

	* decipher.el: Doc changes.
	(decipher-char): Added defvar (and also for following variables).
	(decipher--prev-char): Renamed from decipher-prev-char.
	(decipher--digram): Renamed from digram.
	(decipher--digram-list): Renamed from digram-list.
	(decipher--before): Renamed from before-array.
	(decipher--after): Renamed from after-array.
	(decipher--freqs): Renamed from freq-array.

1996-02-15  Francesco Potorti`  <pot@cnuce.cnr.it>

	* hanoi.el (hanoi): Compute height and width of the window in the
	correct way, give the correct error message if the window is too
	small.  Make rings only with numerical characters.  Set default
	number of rings to 7 (was 3 before).

1996-02-15  Erik Naggum  <erik@naggum.no>

	* gnus-kill.el (gnus-kill-file-kill-by-thread): Correct
	interactive declaration.

1996-02-15  Ed Reingold  <reingold@mole.gnu.ai.mit.edu>

	* cal-coptic.el (ethiopic-calendar-epoch): Correct value.
	(ethiopic-calendar-month-name-array): Fix spelling.
	(coptic-calendar-month-name-array): Fix spelling.

1996-02-13  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* vc-hooks.el (vc-consult-rcs-headers): Ignore text properties.

	* startup.el (command-line-1): Don't explain recover-session if
	auto-save-list-file-prefix is nil.

1996-02-13  Francesco Potorti`  <pot@cnuce.cnr.it>

	* hanoi.el (hanoi): Don't show line and column numbers.

1996-02-12  Roland McGrath  <roland@charlie-brown.gnu.ai.mit.edu>

	* compile.el (compilation-parse-errors): Detect doubled slashes in
	file names matched and fix them up in the buffer.

1996-02-12  <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* mailalias.el (mail-names, mail-local-names, mail-directory-names)
	(mail-address-field-regexp, mail-complete-alist)
	(mail-complete-function, mail-directory-function)
	(mail-directory-requery, mail-directory-process, mail-directory-stream)
	(mail-directory-parser): New variables.
	(expand-mail-aliases): Use `mail-address-field-regexp'.
	(build-mail-aliases): Use space in buffer-name semantics.
	(define-mail-alias): Reset `mail-names' to t.
	(mail-complete): New command.
	(mail-get-names, mail-directory, mail-directory-process)
	(mail-directory-stream, mail-sentto-newsgroups): New functions.

1996-02-11  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* startup.el (command-line): On windows NT, look for .emacs or _emacs.

1996-02-11  Eli Zaretskii  <eliz@is.elta.co.il>

	* paren.el (show-paren-command-hook): Position show-paren-overlay-1
	properly when first creating it (just like when moving it).

1996-02-10  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* info.el (Info-find-index-name): New subroutine, from Info-index-next.
	Match any type of definition, not just Function and Command.
	(Info-index-next): Use Info-find-index-name.
	(Info-find-node, Info-index, Info-index-next): Use `...' in err msgs.

	* doctor.el (doctor-mode): State that file has been censored.

1996-02-09  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* picture.el (picture-mode-map): Install picture-self-insert
	where completion has put its own self-insert commands.

	* cc-mode.el (c++-mode):
	Delete duplicate setq of imenu-generic-expression.

1996-02-09  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* f90.el (f90-indent-subprogram): Fix message.

1996-02-09  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* gnus-ems.el: File censored.

1996-02-09  Lars Magne Ingebrigtsen  <larsi@eistla.ifi.uio.no>

	* nntp.el (nntp-send-region-to-server): Use a temporary buffer to
	send text to the server.

	* ediff-init.el: Make sure `facemenu-unlisted-faces' is bound.

1996-02-09  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* info.el (info): Doc fix.

	* add-log.el (add-log-current-defun): In Lisp, if we don't find a
	real defun, return nil, not "".

	* term-nasty.el: Censored.

	* decipher.el: Load cl only when compiling.

1996-02-08  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* rmail.el (rmail-find-all-files): In a directory, ignore `.' and `..'.

1996-02-08  Christopher J. Madsen  <ac608@yfn.ysu.edu>

	* decipher.el: New file.

1996-02-08  Simon Leinen  <simon@lia.di.epfl.ch>

	* sgml-mode.el (html-tag-alist): Within the <ADDRESS> tag
	generated with an <HTML> tag, use `user-mail-address'.

1996-02-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (x-display-pixel-height, x-display-pixel-width):
	Make the returned value consistent with one-pixel-per-character.

1996-02-08  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* subr.el (get-buffer-window-list): New function.

	* font-lock.el (turn-on-font-lock): Turn on only if supported.
	(turn-on-font-lock-if-enabled): Don't test if supported here.
	Renamed from turn-on-font-lock-if-supported.

1996-02-07  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* lisp-mnt.el: Change defconst into defvar.
	Many doc fixes.

1996-02-07  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* timer.el (run-at-time): Handle numbers as relative times in
	seconds, as the original code did.

1996-02-06  Barry Warsaw  <bwarsaw@anthem (Barry Warsaw)>

	* cc-mode.el (c-common-init): Fix typo.

	* cc-mode.el (c++-mode-map, objc-mode-map, java-mode-map):
	In XEmacs, use set-keymap-parents if it is fboundp.

	* cc-mode.el (c-delete-backslash):
	Sync with old-c-mode.el.  Given by Ben Wing <wing@666.com>.

	* cc-mode.el (c-emacs-features):
	Determine which paragraph filling regexp suite to use based on the
	Emacs version number.

	(c-fill-paragraph): Use the paragraph filling regexp suite as
	determined in c-emacs-features.

	* cc-mode.el:
	imenu is required in Emacs 19, but doesn't exist in XEmacs

	* cc-mode.el (c-site-default-style): New variable.

	* cc-mode.el:
	(java-mode, java-syntax-table, java-mode-map, java-mode-abbrev-table):
	New in support of Java.

	* cc-mode.el (c-common-init): Make comment-multi-line a local variable.

	* cc-mode.el (c-set-style):
	Conditional up-casing of stylename for backwards compatibility.

	* cc-mode.el (c-backward-to-start-of-do):
	Eliminate infinite loop in perverse cases.

	* cc-mode.el (c-electric-lt-gt): New command.

	* cc-mode.el (c-mode-map):
	Only rebind M-q if fill-paragraph-function doesn't exist, as in
	pre-Emacs 19.30.

	(c-common-init): Set fill-paragraph-function if it exists.

	* cc-mode.el (c-guess-basic-syntax):
	CASE 5B.3: ansi-funcdecl-cont could include legal C++ `throw'
	declaration.

	* cc-mode.el (c-offsets-alist): ansi-funcdecl-cont => +

	* cc-mode.el (c-beginning-of-statement-1):
	Restore old CASE 3 logic -- checking for at a c-conditional-key.

	(c-guess-basic-syntax): CASE 5A.2: watch out for enum function
	return types. CASE 15D: check for landing on a brace that opens a
	nested function.

1996-02-06  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* simple.el (text-read-only): New error symbol.
	(kill-region): Use it when text has read-only text property.
	(yank-pop): Turn on inhibit-read-only.

1996-02-05  Jari Aalto  <ssjaaa@uta.fi>

	* lisp-mnt.el (lm-header-prefix): New variable.
	(lm-comment-column): defvar moved.
	(lm-history-header, lm-commentary-header):  New variables.
	(lm-get-header-re, lm-get-package-name): New functions.
	(lm-code-mark): defun --> defsubst.
	(lm-history-mark, lm-commentary-mark): New functions.
	(lm-header): Now accepts RCS ident style headers.
	(lm-summary): Now accepts unix `what' commands prefix @(#).
	(lm-crack-address, lm-authors, lm-maintainer, lm-insert-at-column):
	(lm-creation-date, lm-last-modified-date, lm-version):
	(lm-keywords, lm-adapted-by): Comments made into doc strings.
	(lm-commentary): Added more tolerant 'cond' case.
	Now uses functions lm-commentary-mark, lm-... to get points.
	(lm-verify): Made interactive. Added more check points in the last
	prog1 statement.
	(lm-synopsis): Made interactive.

1996-02-05  Lars Magne Ingebrigtsen  <larsi@eistla.ifi.uio.no>

	* mail-extr.el (mail-extract-address-components): Accept strings
	that end with double trailing quote marks.

1996-02-04  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* lisp-mnt.el (lm-insert-at-column): Renamed from insert-at-column.
	All callers changed.
	(lm-synopsis): Add interactive spec.

	* view.el (View-search-last-regexp-forward)
	(View-search-last-regexp-backward): Nice error if no prev regexp.

1996-02-04  Lars Magne Ingebrigtsen  <larsi@eistla.ifi.uio.no>

	* gnus.el (gnus-update-read-articles): Remove duplicated article
	numbers on group exit.
	(gnus-request-accept-article): Make sure there's a newline at the
	end of the buffer.
	(gnus-adjust-marked-articles): Don't remove illegal ticked
	articles (for forwards compatability).

1996-02-03  Lars Magne Ingebrigtsen  <larsi@aegir.ifi.uio.no>

	* gnus.el (gnus-gnus-to-newsrc-format): Turn off version-control
	before saving the .newsrc files.

	* gnus-msg.el (gnus-mail-reply-using-mail): Use the local keymap
	instead of `mail-mode-map'.

1996-02-03  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* shell.el (shell-mode): Set shell-dirstack-query for the ksh.
	(shell-resync-dirs): Set shell-last-dir for the ksh.

1996-02-02  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* view.el (view-mode-map): Don't call suppress-keymap.

	* ehelp.el (with-electric-help):
	Bind inhibit-read-only around the erase-buffer.
	(electric-help-form-to-execute): Renamed from to-be-executed.
	Add defvar for it.
	(electric-help-mode): Turn off view-mode.

1996-02-02  Morten Welinder  <terra@diku.dk>

	* timer.el (run-with-timer): Set repetition interval.

	* time.el (display-time): Rewrite to use built-in timers.
	(display-time-event-handler): Renamed from display-time-filter;
	now takes no parameters.
	(display-time-sentinel): Function deleted.
	(display-time-process): Variable deleted.
	(display-time-timer): New variable.

1996-02-02  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (auto-mode-alist): .ksh suffix means sh-mode.
	(write-file): Interactively, prefix arg means don't confirm.

1996-02-02  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* font-lock.el (font-lock-keywords): Doc fix.
	(font-lock-defaults-alist): Use alists.
	(font-lock-set-defaults, font-lock-unset-defaults): Cope with alists.
	(font-lock-mark-block-function): New variable for block fontification.
	(font-lock-fontify-block): New function.  Use it here.
	(font-lock-fontify-window): Deleted.
	(font-lock-fontify-syntactically-region): Don't widen here.
	(font-lock-default-fontify-region): Do it here.
	(font-lock-default-fontify-buffer): Use font-lock-unfontify-buffer.

	* rmail.el (rmail-mode): Use alists for font-lock-defaults.
	(rmail-fontify-buffer-function): Flag the buffer as fontified.
	(rmail-unfontify-buffer-function): Remove all text properties.

1996-02-02  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* ange-ftp.el (ange-ftp-default-user): Doc fix.

	* edmacro.el (edmacro-original-buffer, edmacro-finish-hook)
	(edmacro-store-hook): Add defvars.

1996-02-01  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* lisp-mode.el (lisp-mode-variables): Locally clear adaptive-fill-mode.

	* ange-ftp.el (ange-ftp-netrc-default-user): New variable.
	(ange-ftp-netrc-default-password):
	(ange-ftp-netrc-default-account):
	(ange-ftp-get-user): Use ange-ftp-netrc-default-user.
	(ange-ftp-get-passwd): Use ange-ftp-netrc-default-...
	(ange-ftp-get-account): Likewise.
	(ange-ftp-parse-netrc-group): Set ange-ftp-netrc-default-...
	(ange-ftp-write-region): executing-macro -> executing-kbd-macro.

	* compile.el (compilation-filter): Run compilation-filter-hook.

1996-01-31  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* format.el (format-deannotate-region): Fixed bug that created
	double marking of multi-annotation text-properties (eg, bold-italic).

1996-01-31  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* timer.el (run-at-time): Support relative time specs again.
	(timer-duration): New function.
	(timer-duration-words): New variable.
	(timer-relative-time): New subroutine.
	(timer-inc-time): Use timer-relative-time.
	(timer-set-time, timer-set-time-with-usecs): Allow floating DELTA.

1996-01-31  Caleb Deupree <cdeupree@cincom.com>

	* winnt.el (mode-line-format): Include column-number-mode.

1996-01-30  David Kegedal  <davidk@lysator.liu.se>

	* sendmail.el (mail-setup): For mail-self-blind, use user-mail-address.

1996-01-29  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* timer.el (timer-create): Init slot 0 to t.

1996-01-29  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* ada-mode.el (ada-indent-region, ada-check-matching-start,
	ada-check-defun-name): Fix error format string.
	* allout.el (outline-process-exposed): Likewise.
	* bookmark.el (bookmark-load): Likewise.
	* cpp.el (cpp-parse-error): Likewise.
	* ediff-init.el (ediff-event-point, ediff-event-buffer):
	Likewise.
	* etags.el (visit-tags-table-buffer, tags-loop-scan,
	complete-tag): Likewise.
	* forms.el (forms--process-format-list): Likewise.
	* gnus-ems.el (gnus-summary-insert-pseudos-xemacs): Likewise.
	* hexl.el (hexl-hex-char-to-integer, hexl-oct-char-to-integer):
	Likewise.
	* info.el (Info-extract-pointer): Likewise.
	* mh-seq.el (mh-read-seq): Likewise.
	* mh-utils.el (mh-handle-process-error): Likewise.
	* msb.el (msb--choose-menu): Likewise.
	* nntp.el (nntp-send-strings-to-server, nntp-async-send-strings):
	Likewise.
	* reporter.el (reporter-dump-variable): Likewise.
	* tq.el (tq-process-buffer): Likewise.
	* vip.el (vip-execute-ex-command, ex-write): Likewise.
	* viper-ex.el (vip-ex, ex-expand-filsyms, vip-execute-ex-command):
	Likewise.
	* viper-macs.el (vip-register-macro): Likewise.
	* viper.el (vip-brac-function): Likewise.

1996-01-29  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* sh-script.el (sh-shell-variables-initialized): New variable.
	(sh-mode): Make sh-shell-variables and
	sh-shell-variables-initialized local.
	(sh-set-shell): Don't scan the buffer for variable assignments.
	Set sh-shell-variables-initialized to nil.
	(sh-shell-initialize-variables): New function.
	(sh-add-completer): New function.  Initialize sh-shell-variables
	here if not yet done.
	(sh-add): Use sh-add-completer for completion.

	* timer.el (timer-event-handler): Timer event is now a list,
	not just a cons.

	* faces.el (face-color-gray-p): Return nil if x-color-values does.

	* timer.el (with-timeout): New macro.
	(with-timeout-handler): New function.
	(y-or-n-p-with-timeout): New function.
	(add-timeout, timeout-event-p): New functions.
	(run-with-timer): Renamed from run-after-delay.
	(run-at-time, run-with-timer): Return the timer.

1996-01-28  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* timer.el (run-after-delay): Add autoload cookie.
	Delete USECS arg.  Let REPEAT be a float.

	* timer.el (timer-inc-time): New function.
	(run-at-time): Use that.
	(run-after-delay): New function.

	* timer.el: Add a usecs slot to each timer.
	Almost all functions changed.

1996-01-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* cmacexp.el (c-macro-preprocessor): Define a preprocessor name
	which is valid on MS-DOS.
	(c-macro-expansion): Do not rely on ``/tmp/'' being present; use
	environment variables as alternatives (MSDOS).  Use
	`shell-file-name' rather than ``sh''.  Redirect `stderr' with
	`call-process-region' option, not from the shell.  Handle shells
	which don't return exit code from `cpp' (MSDOS).  Put messages
	from `cpp' inside a comment, to avoid messing up syntax
	highlighting.

1996-01-28  Morten Welinder  <terra@diku.dk>

	* timer.el: Complete rewrite to use built-in timer feature.

1996-01-28  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (list-directory): Set default-directory better if the
	argument is a directory's file name.

1996-01-28  Erik Naggum  <erik@naggum.no>

	* apropos.el (apropos-print): Fix previous change.

1996-01-27  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* edmacro.el (edit-kbd-macro): Reject empty cmd name.

	* macros.el (name-last-kbd-macro): Reject empty cmd name.

	* apropos.el (apropos-print): Omit key sequences that contain a frame.

1996-01-26  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* ispell.el (ispell-help): Use set-minibuffer-window.

	* dired.el (dired-get-filename): When quoting " chars,
	handle all of them, including one at start of file name.

	* startup.el (command-line-normalize-file-name): New function.
	(command-line-1): Call it to handle foo//bar in non-Emacs fashion.

	* server.el (server-process-filter):
	In file name, collapse multiple slashes to one.

1996-01-26  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el, viper-macs.el, viper-util.el, viper-mous.el:
	Moved functions around to minimize compiler warnings.

1996-01-26  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* tex-mode.el (tex-face-alist, tex-latex-face-alist): New variables.
	(tex-common-initialization): Set facemenu-add-face-function,
	facemenu-end-add-face, facemenu-remove-face-function.

	* vc.el (vc-diff): Make NOT-URGENT default to t.

1996-01-26  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* font-lock.el (font-lock-after-unfontify-buffer): New function.
	(font-lock-default-unfontify-buffer): Use it.
	(font-lock-fontify-buffer-function):
	(font-lock-unfontify-buffer-function):
	(font-lock-fontify-region-function):
	(font-lock-unfontify-region-function):
	(font-lock-inhibit-thing-lock): New variables for Local Fontification.
	(font-lock-set-defaults): Set them here.
	(font-lock-fontify-buffer, font-lock-unfontify-buffer):
	(font-lock-fontify-region, font-lock-unfontify-region): Use them.
	(font-lock-default-fontify-buffer):
	(font-lock-default-unfontify-buffer):
	(font-lock-default-fontify-region):
	(font-lock-default-unfontify-region): Renamed as `default' functions.

	* fast-lock.el: New version 3.09 from author.
	(fast-lock-save-cache): Cope if fast-lock-minimum-size is a list.
	(fast-lock-minimum-size): Doc fix.
	(fast-lock-mode): Respect the value of font-lock-inhibit-thing-lock.
	(fast-lock-after-unfontify-buffer): New function.

	* rmail.el (rmail-mode): Setup font-lock-defaults local fontification.
	(rmail-fontify-buffer-function):
	(rmail-unfontify-buffer-function):
	(rmail-fontify-message): New functions.

1996-01-26  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* make-mode.el (makefile-font-lock-keywords): Improve highlighting
	of variable references inside other highlighted regions.

1996-01-25  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* sendmail.el (mail-yank-original): Doc fix.

1996-01-25  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* rmail.el (rmail-start-mail): Set mail-dedicated-frame frame param.

	* sendmail.el (mail-bury): Check mail-dedicated-frame frame param.

	* browse-url.el (browse-url-netscape):
	Check for call-process returning a string.

1996-01-25  Eli Zaretskii  <eliz@is.elta.co.il>

	* dos-fns.el (mode25): Moved from `src/dosfns.c' for backward
	compatibility.
	(mode4350): Moved from `src/dosfns.c' for backward compatibility.

1996-01-25  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* font-lock.el (font-lock-unfontify-buffer): New function.
	(font-lock-unset-defaults): New function.
	(font-lock-mode): Use them.  Doc fix.
	Don't make font-lock-fontified buffer local here.
	(font-lock-set-defaults): Do it here.
	(font-lock-compile-keyword): New function.  Recognise `eval' keywords.
	(font-lock-compile-keywords): Use it.
	(global-font-lock-mode): New command for Global Font Lock mode.
	(font-lock-global-modes): New variable.
	(font-lock-change-major-mode, turn-on-font-lock-if-supported): New
	functions.

	* perl-mode.el (perl-font-lock-keywords-1, perl-font-lock-keywords-2):
	New variables.
	(perl-mode): Use them.

	* texinfo.el (texinfo-font-lock-keywords): Tweaked command regexp.

	* sendmail.el (mail-font-lock-keywords): Use `eval' keyword.

	* rmailsum.el (rmail-summary-mode): Use make-local-hook for
	post-command-hook.
	(rmail-summary-disable, rmail-summary-enable): Respect hook localness.

1996-01-25  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* gnus.el (read-news): Define as alias for gnus.

	* rmail.el (rmail-start-mail): Set unsplittable frame parameter
	and make the window dedicated.

1996-01-24  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* saveplace.el (toggle-save-place): Fix message text.
	* forms.el (forms-mode, forms-toggle-read-only): Fix message text.
	(forms-search-forward, forms-search-backward): Likewise.
	* info.el (Info-goto-emacs-command-node): Fix error text.
	* bookmark.el (bookmark-alist-from-buffer): Fix error text.
	(bookmark-maybe-upgrade-file-format, bookmark-set): Likewise.
	(bookmark-send-annotation, bookmark-send-edited-annotation): Likewise.
	(bookmark-load): Delete redundant format call.

1996-01-24  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* cookie1.el (cookie-snarf): Pass proper format string to message.
	* diary-lib.el (simple-diary-display, fancy-diary-display):
	Likewise.
	* dired.el (dired-internal-noselect): Likewise.
	* ebuff-menu.el (Electric-buffer-menu-undefined): Likewise.
	* edebug.el (edebug-next-breakpoint): Likewise.
	* edt.el (edt-display-the-time): Likewise.
	* ehelp.el (electric-help-command-loop): Likewise.
	* f90.el (f90-indent-subprogram, f90-match-end): Likewise.
	* facemenu.el (list-text-properties-at): Likewise.
	* finder.el (finder-summary): Likewise.
	* flow-ctrl.el (enable-flow-control): Likewise.
	* forms.el (forms--help, forms-search-forward,
	forms-search-backward): Likewise.
	* help-macro.el (make-help-screen): Likewise.
	* hippie-exp.el (hippie-expand): Likewise.
	* holidays.el (calendar-cursor-holidays): Likewise.
	* info.el (Info-edit, Info-goto-emacs-command-node): Likewise.
	* ispell.el (ispell-command-loop, ispell-region): Likewise.
	* ispell4.el (start-ispell, ispell-next): Likewise.
	* lisp-mnt.el (lm-report-bug): Likewise.
	* macros.el (kbd-macro-query): Likewise.
	* medit.el (medit-save-define): Likewise.
	* nnmail.el (nnmail-move-inbox): Likewise.
	* picture.el (picture-mode): Likewise.
	* rmail.el (rmail-insert-inbox-text): Likewise.
	* rmailedit.el (rmail-edit-current-message): Likewise.
	* server.el (server-process-filter): Likewise.
	* sgml-mode.el (sgml-tag-help): Likewise.
	* shadow.el (list-load-path-shadows): Likewise.
	* shadowfile.el (shadow-shadows, shadow-add-to-todo): Likewise.
	* shell.el (shell-dirstack-message): Likewise.
	* simula.el (simula-electric-keyword): Likewise.
	* solar.el (sunrise-sunset): Likewise.
	* term.el (term-read-noecho): Likewise.
	* terminal.el (te-edit): Likewise.
	* type-break.el (type-break-demo-life): Likewise.
	* view.el (view-mode-enter, View-scroll-lines-forward): Likewise.
	* viper-ex.el (ex-pwd, vip-info-on-file): Likewise.
	* viper-macs.el (ex-map-read-args, ex-unmap-read-args,
	vip-record-kbd-macro): Likewise.
	* viper-util.el (vip-save-setting): Likewise.

	* ada-mode.el (ada-adjust-case-region, ada-indent-region): Delete
	format call inside message.
	* array.el (array-what-position): Likewise.
	* bookmark.el (bookmark-write-file, bookmark-load): Likewise.
	* bytecomp.el (byte-compile-log-1): Likewise.
	* edt.el (edt-y-or-n-p): Likewise.
	* enriched.el (enriched-next-annotation): Likewise.
	* ispell4.el (ispell-point): Likewise.
	* mh-e.el (mh-get-new-mail): Likewise.
	* saveplace.el (toggle-save-place, save-place-alist-to-file,
	load-save-place-alist-from-file): Likewise.
	* shadow.el (list-load-path-shadows): Likewise.
	* shadowfile.el (shadow-cancel, shadow-copy-file): Likewise.
	* subr.el (read-quoted-char): Likewise.
	* tpu-edt.el (tpu-y-or-n-p): Likewise.
	* vip.el (vip-replace-string, vip-search-forward,
	vip-search-backward): Likewise.
	* viper-ex.el (ex-set): Likewise.

1996-01-24  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* startup.el (command-line-1): Update copyright in startup banner.

1996-01-24  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* tmm.el (tmm-prompt): Set last-command-event before calling the
	selected function.

1996-01-24  Erik Naggum  <erik@naggum.no>

	* emacsbug.el (report-emacs-bug): Insert newlines only in the
	inserted key descriptions.

	* viper.el (vip-ask-level): Prefix \ to ( at start of line.

	* term.el (term-exec-hook): Doc fix.

	* solitaire.el (solitaire): Doc fix.

	* solar.el (solar-moment, solar-ephemeris-time,
	solar-equatorial-coordinates, solar-horizontal-coordinates): Doc
	fixes.

	* lunar.el (lunar-new-moon-on-or-after): Doc fix.

	* dabbrev.el (dabbrev-abbrev-skip-leading-regexp): Doc fix.

1996-01-24  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* make-mode.el (makefile-browser-toggle): Use delete-region,
	not kill-line.

1996-01-24  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* f90.el (f90-face-*): Reinstalled code deleted on Sep 22.
	(f90-hilit-patterns): New variable.
	(f90-mode): Call hilit-set-mode-patterns if defined.
	(f90-auto-hilit19): New variable.
	(f90-fill-region): Bind f90-auto-hilit19 to nil.
	(f90-update-line): Rehilight if appropriate.

1996-01-24  <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* sgml-mode.el (sgml-quick-keys): New variable.
	(sgml-mode-map): Use it, defined additional long keys to compensate.
	(sgml-tag-alist): Added <![ ]>
	(sgml-tag): Special treatment for previous construct.
	(sgml-auto-attributes): Deleted variable covered by sgml-quick-keys,
	changed function of same name.
	(sgml-delete-tag): Newline also counts as whitespace before tag.
	(html-quick-keys): Use sgml-quick-keys as default, thus changed to nil.
	(html-mode-map): Added C-c C-c char combinations for when
	html-quick-keys is nil.
	(html-tag-alist): Added /cgi-bin/ to href completions, submit (spelling
	fixed) button to form.
	(html-checkboxes): New skeleton.

1996-01-24  Ed Reingold  <reingold@mole.gnu.ai.mit.edu>

	* cal-x.el: Fix doc strings at top of file.

	* cal-tex.el (cal-tex-preamble): Add \hfuzz=1000pt to get rid of
	overfull box messages.

	* solar.el (calendar-latitude, calendar-longitude,
	calendar-location-name, solar-sunrise-and-sunset): Fix doc strings.
	(solar-exact-local-noon, solar-sunrise-sunset): Refer to
	(calendar-longitude) and (calendar-latitude) instead of
	calendar-longitude and

1996-01-24  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* iso02-acc.el: File deleted.

	* font-lock.el (turn-on-font-lock): Test window-system.

1996-01-23  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* lisp-mode.el (lisp-fill-paragraph): Use fill-paragraph once again
	for filling a comment.

	* paragraphs.el (forward-paragraph): Comment change.

1996-01-23  Ralf Fassel  <ralf@natlab.research.philips.com>

	* iso-acc.el (iso-languages): Restructure the list to remove
	redundancy in list elements.
	(iso-accents-compose-key): Function deleted.
	(iso-accents-compose, iso-accents-customize, iso-accentuate,
	iso-accent-rassoc-unit, iso-unaccentuate, iso-deaccentuate): Adapt
	for new structure of `iso-languages'.

1996-01-23  Eli Zaretskii  <eliz@is.elta.co.il>

	* compile.el (compilation-handle-exit): Undo previous change.
	Don't reference `proc' object.
	Pass current buffer to `compilation-finish-function'.

1996-01-22  Paul Eggert  <eggert@twinsun.com>

	* version.el (emacs-build-time): Record (current-time),
	not (current-time-string).
	(emacs-version): Use new form of emacs-build-time.
	This lessens confusion when the dumped Emacs starts up in a
	different time zone.

1996-01-21  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* iso-acc.el (iso-accents-customize): Extract accent chars
	properly from iso-accents-list.

	* rmailsum.el (rmail-summary-goto-msg):
	Pass along args NOWARN and SKIP-RMAIL in recursive call.

1996-01-21  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* autoload.el (update-file-autoloads): Only give "up to date" msg
	if (interactive-p).
	(update-autoloads-from-directory): Call expand-file-name on arg.

1996-01-20  Paul Eggert  <eggert@twinsun.com>

	* vc-hooks.el (vc-utc-string): Remove; it wasn't reliable near DST
	or leap-second transitions.
	(vc-find-cvs-master): Convert UTC string to encoded time and compare
	the results to the file attributes, rather than attempting to convert
	file attributes to UTC string (which wasn't reliable).

1996-01-20  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* isearch.el (isearch-other-meta-char): Avoid error if lookup in
	function-key-map gives another keymap.

	* vc.el (vc-backend-checkout): Use let to restore default-directory.
	(vc-next-action-dired): Likewise.

	* msb.el (msb--toggle-menu-type): Call menu-bar-update-buffers
	with no argument.

	* iso02-acc.el: File deleted.
	* iso-acc.el (iso-languages): Rename "default" to "latin-1".
	Add a new element "latin-2" copied from iso02-acc.el.

	* type-break.el: Move defsubsts before defuns.

1996-01-20  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* compile.el (compilation-handle-exit): If process-status doesn't
	exist (e.g. on MSDOS), use an empty string.

	* rmailsort.el: Add (require 'rmail).

1996-01-20  Michael Kifer  <kifer@cs.sunysb.edu>

	* viper.el (vip-auto-indent,vip-electric-mode): Are now local
	variables.
	(vip-open-line,vip-Open-line,vip-autoindent): Are now electrified
	functions.
	(vip-set-hooks): Viperized awk, ksh, makefile, and html-helper modes.
	(vip-custom-file-name): Adapted to non-Unix systems.
	(vip-move-minibuffer-overlay): Removed.
	(vip-read-string-with-history): Now accepts correct defaults when
	called to read a shell command.

1996-01-19  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* files.el (auto-mode-alist): Recognize ".exp" suffix.

1996-01-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* tpu-edt.el (tpu-load-xkeys): Use `convert-standard-filename' to
	set the name of the key mapping file.
	* tpu-mapper.el: Likewise.

1996-01-19  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* menu-bar.el (menu-bar-search-menu): Clean up key symbols.
	(menu-bar-tools-menu): Rename vc-menu key symbol to just vc.

	* unrmail.el (unrmail): Default the directory of TO-FILE based on FILE.

	* pc-select.el (pc-selection-mode): Don't mess with c-mode-map.

	* tar-mode.el (tar-summarize-buffer): Fix "done" message.
	(tar-summarize-buffer):
	Insert summary lines in same order as tar-parse-info.

	* files.el (find-file-noselect): Fix error message style.

	* lisp-mode.el (emacs-lisp-mode-map): Avoid duplicate in menu bindings.

1996-01-19  Erik Naggum  <erik@naggum.no>

	* pp.el (pp-eval-expression): Use `frame-width' instead of
	`screen-width'.

1996-01-18  Erik Naggum  <erik@naggum.no>

	* sh-script.el (sh-mode): Add autoload cookie.

1996-01-18  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* rmailsum.el (rmail-make-basic-summary-line): Include msg line number.

	* uniquify.el: Several doc fixes.

1996-01-18  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* mouse.el (mouse-buffer-menu): Delete debugging code.

1996-01-17  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* ls-lisp.el (ls-lisp-support-shell-wildcards): Add autoload cookie.

	* cc-mode.el: Load imenu when compiling.

	* dos-fns.el (convert-standard-filename): Preserve ~ as last char.

	* make-mode.el (makefile-mode): Fix criterion for calling
	makefile-define-space-face.

	* goto-addr.el (goto-address-at-point, goto-address-at-mouse):
	Add autoload cookies.

1996-01-17  Eli Zaretskii  <eliz@is.elta.co.il>

	* dos-fns.el (convert-standard-filename): Don't do anything if the
	argument is empty, or isn't a string; leave alone characters with
	ASCII codes above 127 and special characters legal in DOS filenames.

1996-01-17  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* files.el (auto-mode-alist): Use "\\`" instead of "^".

1996-01-17  Michael Staats <michael@thp.Uni-Duisburg.DE>

	* pc-select.el: Add some keybindings.
	(next-line-mark, next-line-nomark): Set this-command.
	(previous-line-mark, previous-line-nomark): Likewise.
	(end-of-line-mark, end-of-line-nomark): Likewise.

1996-01-16  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* sh-script.el (sh-indent-line): Cope if no previous noncomment line.

1996-01-16  Lars Magne Ingebrigtsen  <larsi@narfi.ifi.uio.no>

	* nntp.el (nntp-accept-response): Add a timeout parameter to
	`accept-process-output'.

	* nnkiboze.el (nnkiboze-close-group): Should only be run from
	summary buffers.

	* gnus.el (gnus-group-make-help-group): Check whether
	`installation-directory' is nil before using it.

1996-01-16  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* sh-script.el (sh-shell-variables): New variable.
	(sh-set-shell, sh-remember-variable):
	Set sh-shell-variable, not process-environment.
	(sh-mode): Don't make process-environment local.
	Add a mode-class property.
	(sh-add): Use sh-shell-variable in completion.
	Compute alist properly from process-environment.

1996-01-16  Stefan Schoef  <schoef@OFFIS.Uni-Oldenburg.DE>

	* bibtex.el (bibtex-font-lock-keywords, bibtex-mode):
	Use word-syntax in patterns.

	* bibtex.el (bibtex-font-lock-keywords): Allow a more relaxed format
	of the buffer and use more appropriate faces.

1996-01-16  Erik Naggum  <erik@naggum.no>

	* autoload.el (update-file-autoloads): Fix message.

1996-01-15  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* dos-fns.el (ps-lpr-switches, ps-lpr-command): Just setq them;
	duplicate defvar is a bad idea.

	* cc-mode.el (c-common-init): Make comment-multi-line buffer-local.

1996-01-15  Eli Zaretskii  <eliz@is.elta.co.il>

	* dos-fns.el (dos-printer): New variable, the local printer device.
	(dos-print-region-function): New function, used for
	`print-region-function'.
	(dos-ps-printer): New variable; if a string, it's the name of the
	local printer device.
	(ps-lpr-command, ps-lpr-switches): Set them properly for Ghostscript.
	(lpr-headers-switches): Set to non-nil, to disable page headers'
	support under MS-DOS.

	* lpr.el (print-region): Make pipes use binary mode if file is binary.

	* ps-print.el (ps-do-despool): On MS-DOS, allow both the usual and
	the alternative printing methods.

1996-01-15  Erik Naggum  <erik@naggum.no>

	* autoinsert.el (auto-insert-alist): Use FSF's new address.

1996-01-14  Morten Welinder  <terra@diku.dk>

	* desktop.el (desktop-read): Do nothing in batch mode.
	Clear desktop-delay-hook after use.  Simplify.

	* tar-mode.el (tar-summarize-buffer): Speed-up for large files.

1996-01-14  Erik Naggum  <erik@naggum.no>

	* all files: Update FSF's address in, and unify formatting of,
	comment preambles.

1996-01-13  Erik Naggum  <erik@naggum.no>

	* files.el (auto-mode-alist): Add sgml-mode and html-mode.

1996-01-12  Erik Naggum  <erik@naggum.no>

	* sgml-mode.el: Remove redundant auto-mode-alist hacking.
	Removed auto-mode-alist hacking for html-mode to files.el.

	* cc-mode.el (c-add-style): Fix typo.

1996-01-12  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* page.el (forward-page): Simplify how we avoid getting stuck
	when moving backwards.

1996-01-12  <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* sgml-mode.el: Also load for .sgm and .dtd files.
	(sgml-specials, sgml-name-8bit-mode, sgml-char-names)
	(sgml-font-lock-keywords, sgml-face-tag-alist, sgml-tag-face-alist)
	(sgml-display-text, sgml-tag-alist, sgml-tag-help)
	(sgml-auto-attributes): New variables.
	(sgml-mode-common): New function.
	(sgml-mode): Most code moved to it.
	(sgml-name-char, sgml-name-self, sgml-maybe-name-self)
	(sgml-name-8bit-mode, sgml-tag, sgml-attributes, sgml-auto-attributes)
	(sgml-tag-help, sgml-maybe-end-tag, sgml-skip-tag-backward)
	(sgml-skip-tag-forward, sgml-tags-invisible): New commands.
	(sgml-beginning-of-tag, sgml-value): New functions.

	(html-*): All these functions and variables are new.
	Mostly they parametrize everything preceding.

	* autoinsert.el (auto-insert-alist): For html-mode, use `sgml-tag'.

	* facemenu.el (facemenu-add-face): Adding default to no region
	once again sets it for following typed in text.

1996-01-12  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* hideshow.el: Many doc fixes.
	(hs-hide-hook): Renamed from hs-hide-hooks.
	(hs-show-hook): Renamed from hs-show-hooks.

1996-01-11  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (write-contents-hooks): Doc fix.

1996-01-11  Erik Naggum  <erik@naggum.no>

	* apropos.el (apropos-print): Fix previous change to mouse message.

1996-01-11  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* dired.el (dired-ls-F-marks-symlinks): Doc fix.

1996-01-10  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc.el (vc-cancel-version): Use search-forward to scan error
	message. Added comments.

	* vc-hooks.el (vc-follow-symlinks): New variable.
	(vc-find-file-hook): Use it.

1996-01-10  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* sh-script.el (sh-mode): Don't move point.
	(sh-set-shell): New args NO-QUERY-FLAG and INSERT-FLAG.
	Pass them to executable-set-magic.
	Really set font-lock-syntax-table.  Slight cleanups.

	* cc-mode.el (c-add-style): Downcase STYLE before use.

1996-01-10  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* diff.el (diff): Fix local compilation-exit-message-function to
	take the proper arguments; remove gratuitous use of if around
	cond; return useful mode line messages for normal completion.

1996-01-09  Karl Heuer  <kwzh@nutrimat.gnu.ai.mit.edu>

	* imenu.el (imenu--create-keymap-2): Delete debugging line.

	* ange-ftp.el (ange-ftp-name-format): Don't match "/:" or "/.:".

1996-01-08  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* man.el (Man-filter-list): Recognize "Rev" footers.

1996-01-08  Michael Ernst  <mernst@asia.cs.rice.edu>

	* uniquify.el (uniquify-rationalize-file-buffer-names): If
	newbuffile is nil, don't call expand-file-name on it.

1996-01-08  Dave Love  <d.love@dl.ac.uk>

	* vc.el (vc-update-change-log): Use add-log-full-name and
	add-log-mailing-address if they are defined.

1996-01-08  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* edt.el (edt-emulation-on): system-type is a symbol.

	* apropos.el (apropos-print): Fix message about mouse command.

	* tmm.el (tmm-menubar-mouse): Add autoload cookie.

	* make-mode.el (makefile-space-face): Don't work on
	facemenu-unlisted-faces if it isn't bound.

	* iso-acc.el (iso-accents-accent-key): Check iso-accents-enable here.
	(iso-accents-customize): Define all possible accent keys with
	translations, not just the enabled ones.
	Don't bind iso-accents-enable around the initial call to this function.
	(iso-accents-enable): Make the default once again include all prefixes.

	* term/x-win.el (x-cut-buffer-or-selection-value): Don't print messages
	about failure to get selection or cut buffer.

	* ediff-hook.el: Delete spaces before `...' in menu strings.

	* emerge.el (menu-bar-emerge-menu): Delete spaces before `...'.

1996-01-07  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* executable.el (executable-find): Renamed from `executable'.
	(executable-set-magic): Use new name `executable'.  Fix messages.
	Add save-excursion.  Don't test this-command--use interactive
	to get the information.  Simplify considerably.

	* winnt.el (using-unix-filesystems):
	Don't do anything to write-contents-hooks.

	* mh-utils.el (mh-display-msg): Use kill-local-variable
	to clear out write-contents-hooks.

	* files.el (write-contents-hooks): Call make-variable-buffer-local.
	Doc fix.
	(local-write-file-hooks, write-file-hooks): Doc fixes.

	* lisp-mode.el (emacs-lisp-byte-compile): Fix error message.
	(emacs-lisp-compile-and-load): New function.
	(emacs-lisp-mode-map): Add emacs-lisp-compile-and-load to menu bar.

	* imenu.el (imenu--create-keymap-2): Fix bug in constructing
	the lambda expression.  Use backquote.  Don't use incf.

	* sh-script.el (sh-alias-alist): Don't map sh to bash.
	(sh-canonicalize-shell): New function.
	(sh-shell-file): Renamed from sh-shell-path.
	(sh-set-shell): Don't set local-abbrev-table.
	(sh-abbrevs): Variable and function definition commented out.

	* diff.el (diff): Set compilation-exit-message-function.

1996-01-06  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* dos-fns.el (convert-standard-filename): Make sure firstdot
	is not nil.

	* easymenu.el (easy-menu-define): Doc fix.

1996-01-06  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* compile.el (compilation-error-regexp-alist, grep-regexp-alist
	compilation-mode-font-lock-keywords): Allow leading "[a-zA-Z]:" in file
	name regexps, for DOS drive letters.

1995-11-06  Dave Love  <d.love@dl.ac.uk>

	* compile.el (compilation-error-regexp-alist): Add MIPS lint
	regexps.

1996-01-06  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* compile.el (compilation-error-regexp-alist): Broaden GNAT regexp
	to match column numbers.

	* compile.el (compilation-handle-exit): New function, broken out
	of compilation-sentinel.
	(compilation-sentinel, compile-internal): Use it.
	(compilation-exit-message-function): Doc fix for protocol change: take
	process status and exit-code args instead of process object.
	(grep): Use new protocol for compilation-exit-message-function.

	* autoload.el (update-file-autoloads): Fix placement of new
	sections.

	* autoload.el (update-file-autoloads): Notice when searching found
	nothing at all.
	(update-autoloads-from-directory): New function.
	(batch-update-autoloads): Use it.
	(update-directory-autoloads, update-autoloads-here): Functions removed.

1996-01-05  Stephen Gildea  <gildea@x.org>

	* time-stamp.el (time-stamp-line-limit): negative value counts
	from end of file.

1996-01-05  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* fill.el (fill-region-as-paragraph): Check again for reaching
	the end of the paragraph, after we adjust for places we can't break
	and make sure to keep at least one word.

	* dired.el (dired-standard-move-to-filename-regexp): New variable.
	(dired-insert-directory): Don't alter environment if would use the
	C locale anyway, or if dired-move-to-filename-regexp has been
	changed from the default value.
	When changing the environment, avoid need for setenv.

1996-01-05  Karl Eichwalder  <ke@ke.Central.DE>
	and  Karl Fogel  <kfogel@floss.red-bean.com>

	* bookmark.el: "cyclic.com" addresses changed to "red-bean.com".
	(bookmark-bmenu-mode-map): Don't bind C-k.
	(bookmark-bmenu-mode): Better key description.
	(bookmark-bmenu-execute-deletions): Display message while working.
	(bookmark-version): Upped to 2.6.20.
	(bookmark-load): Fixed "done" message, duh.

1996-01-05  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* rmail.el (rmail-retry-failure): Bind inhibit-read-only.

	* mail-extr.el (mail-extr-nuke-outside-range): Fix error message.
	(mail-extract-address-components, what-domain): Fix error messages.

1996-01-04  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (interpreter-mode-alist): Add most shells, with sh-mode.
	Add tail, more, less, pg with text-mode.
	(auto-mode-alist): Recognize extensions that indicate
	shell scripts, as well as common init file names.
	* executable.el (interpreter-mode-alist): Don't alter this here.
	* sh-script.el (interpreter-mode-alist, auto-mode-alist):
	Don't alter this here.

	* autoload.el (batch-update-autoloads): Use error-message-string.

1996-01-04  Paul Eggert  <eggert@twinsun.com>

	Spelling corrections.

	* ediff-wind.el (ediff-mouse-pixel-threshold): Renamed from
	ediff-mouse-pixel-threshhold.
	* gnus.el (gnus-cache-removable-articles): Renamed from
	gnus-cache-removeable-articles.
	(gnus-newsgroup-savable-name): Renamed from
	gnus-newsgroup-saveable-name.
	(gnus-bugaboo): Renamed from gnus-boogaboo.
	* sendmail.el (sendmail-sync-aliases): Renamed from
	sendmail-synch-aliases.
	* type-break.el (type-break-guesstimate-keystroke-threshold):
	Renamed from type-break-guestimate-keystroke-threshold.
	* vi.el (vi-backward-windowful): Renamed from vi-backward-windowfull.
	(vi-forward-windowful): Renamed from vi-forward-windowfull.

	* cc-mode.el (c++-c-mode-syntax-table): Fix misspelling in
	initialization.
	* tex-mode.el (slitex-mode): Fix misspelling in value.

	* dunnet.el (dun-cd): Fix local var misspelling.
	* ediff-diff.el (ediff-exec-process): Likewise.
	* terminal.el (te-process-output): Likewise.

	* custom.el (custom-default-validate): Fix message spelling.
	* debug.el (debug): Likewise.
	* doctor.el (make-doctor-variables, doctor-othermodifierp,
	doctor-strangelove): Likewise.
	* dunnet.el (dun-sauna-heat, dun-login): Likewise.
	* gnus.el (gnus-summary-save-article): Likewise.
	* hideshow.el (hs-hide-block): Likewise.
	* hilit19.el (hilit-submit-feedback): Likewise.
	* mail-extr.el (mail-extr-nuke-outside-range,
	mail-extr-all-top-level-domains): Likewise.
	* simple.el (shell-command): Likewise.
	* term.el (term-process-pager): Likewise.
	* term/sun-mouse.el (describe-mouse-briefly): Likewise.

	* ada-mode.el (ada-case-keyword, ada-auto-case, ada-krunch-args,
	ada-call-pretty-printer): Doc fix.
	* allout.el (outline-primary-bullet, outline-numbered-bullet,
	outline-override-protect, outline-explicitly-deactivated,
	outline-init, outline-chart-subtree, outline-chart-spec,
	outline-make-topic-prefix, outline-open-topic,
	outline-reindent-body, outline-yank-processing, outline-yank,
	outlineify-sticky): Doc fix.
	* apropos.el (apropos-files-scanned): Doc fix.
	* arc-mode.el (archive-summarize-files): Doc fix.
	* bib-mode.el (capitalize-title-stop-words): Doc fix.
	* bibtex.el (bibtex-generate-autokey, bibtex-find-entry-location):
	Doc fix.
	* bookmark.el (bookmark-save-flag, bookmark-read-annotation-text-func,
	bookmark-rename, bookmark-bmenu-mode, bookmark-menu-rename): Doc fix.
	* cc-mode.el (c-file-offsets, c++-mode, c-mode, objc-mode,
	c-postprocess-file-styles): Doc fix.
	* cl-extra.el (cl-copy-tree): Doc fix.
	* comint.el (comint-ptyp, comint-completion-autolist): Doc fix.
	* compile.el (compilation-error-list): Doc fix.
	* cplus-md.el (c++-mode): Doc fix.
	* cpp.el (cpp-unknown-face, cpp-face-mono-list, cpp-face-all-list):
	Doc fix.
	* custom.el (rear-nonsticky, custom-property-set, custom-field-accept,
	custom-repeat-extract, custom-pair-extract, custom-list-extract,
	custom-choice-extract, custom-choice-validate, custom-mode-map):
	Doc fix.
	* dired-x.el (dired-mark-sexp): Doc fix.
	* docref.el (docref-subst): Doc fix.
	* edebug.el (edebug-read): Doc fix.
	* ediff-init.el (ediff-keep-variants): Doc fix.
	* ediff-wind.el (ediff-prefer-iconified-control-frame): Doc fix.
	* edt.el (edt-find-forward, edt-find-backward, edt-find,
	edt-find-next-forward, edt-find-next-backward, edt-find-next): Doc fix.
	* ffap.el (ffap-list-env): Doc fix.
	* files.el (make-directory): Doc fix.
	* fill.el (fill-context-prefix, unjustify-current-line,
	unjustify-region): Doc fix.
	* font-lock.el (font-lock-keywords): Doc fix.
	* format.el (format-annotate-atomic-property-change): Doc fix.
	* forms.el (forms-toggle-read-only, forms-enumerate): Doc fix.
	gnus-cus.el: Doc fix.
	* gnus-edit.el (gnus-score-custom-data): Doc fix.
	* gnus-uu.el (gnus-uu-do-not-unpack-archives): Doc fix.
	* gnus.el (gnus-buffer-configuration,
	gnus-article-hide-headers-if-wanted): Doc fix.
	* hexl.el (hexl-program, hexl-beginning-of-1k-page,
	hexl-end-of-1k-page, hexl-beginning-of-512b-page,
	hexl-end-of-512b-page): Doc fix.
	* hideshow.el (hs-unbalance-handler-method, hs-show-block): Doc fix.
	* hilit19.el (hilit-lookup-face-create): Doc fix.
	* icomplete.el (icomplete-simple-completing-p, icomplete-completions):
	Doc fix.
	* info.el (Info-get-token): Doc fix.
	* isearch.el (isearch-abort, isearch-no-upper-case-p): Doc fix.
	* iso-acc.el (iso-accents-mode): Doc fix.
	* iso-cvt.el (iso-fix-tex2iso): Doc fix.
	* ispell4.el (ispell-gnu-look-still-broken-p, ispell-message-text-end):
	Doc fix.
	* make-mode.el (makefile-insert-special-target,
	makefile-backslash-region): Doc fix.
	* mh-e.el (mh-good-msg-regexp): Doc fix.
	* modula2.el (m2-case, m2-for, m2-if): Doc fix.
	* msb.el (msb-max-file-menu-items, msb-menu-cond): Doc fix.
	* nnmail.el (nnmail-message-id-cache-length): Doc fix.
	* pascal.el (pascal-auto-newline, pascal-mode, electric-pascal-hash):
	Doc fix.
	* rcompile.el (remote-compile-run-before): Doc fix.
	* refbib.el (r2b-additional-stop-words, capitalize-title-stop-words):
	Doc fix.
	* regi.el (regi-interpret): Doc fix.
	* reporter.el (reporter-dont-compact-list): Doc fix.
	* sh-script.el (sh-mode-syntax-table): Doc fix.
	* simple.el (next-completion): Doc fix.
	* skeleton.el (skeleton-insert): Doc fix.
	* supercite.el (sc-citation-nonnested-root-regexp,
	sc-add-citation-level, sc-no-blank-line-or-header): Doc fix.
	* tempo.el (tempo-local-tags, tempo-user-elements, tempo-use-tag-list):
	Doc fix.
	* term.el (term-ptyp, term-termcap-format, term-scroll-region,
	term-completion-autolist): Doc fix.
	* texinfo.el (texinfo-master-menu): Doc fix.
	* texnfo-upd.el (texinfo-master-menu): Doc fix.
	* thingatpt.el (read-from-whole-string): Doc fix.
	* tmm.el (tmm-get-keybind): Doc fix.
	* tpu-edt.el (GOLD-map, GOLD-CSI-map, GOLD-SS3-map, tpu-set-mark):
	Doc fix.
	* type-break.el (type-break-keystroke-threshold, type-break-mode):
	Doc fix.
	* vip.el (vip-shift-width): Doc fix.
	* viper.el (vip-insert-diehard-minor-mode, vip-toggle-search-style,
	vip-del-backward-char-in-replace, vip-query-replace): Doc fix.
	* vmsproc.el (display-subprocess-window): Doc fix.
	* xscheme.el (xscheme-control-g-synchronization-p): Doc fix.

1996-01-04  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* browse-url.el (browse-url-usr1-signal): Doc fix.

1996-01-04  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* autoload.el (generate-file-autoloads): Preserve whitespace after
	cookie in literal text copied to output; eat only a single space.

1996-01-04  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* subr.el (error): Doc fix.

1996-01-04  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc.el: Better doc strings for a few variables.
	(vc-cancel-version): Handle versions that start a new branch.
	(vc-backend-checkout): SCCS case: handle empty revision number.
	(vc-diff): Don't pop to the *vc-diff* buffer if file is unchanged.

	* vc-hooks.el: Better doc strings.

1996-01-04  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* browse-url.el (browse-url-mosaic): Print "done" message
	after starting mosaic.  Change the message about sending a signal.
	(browse-url-netscape): Print "done" message after starting.
	(browse-url-usr1-signal): Use SIGUSR1 in upper case.
	(browse-url-at-point, browse-url-at-mouse, browse-url-of-buffer)
	(browse-url-of-file, browse-url-of-dired-file): Add autoload cookies.

1996-01-03  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* dired.el (dired-insert-directory): Force use of C locale.

	* sendmail.el (mail-header-separator): Don't put on read-only property.

1996-01-02  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* man.el (Man-mode-map): Delete `toggle-truncate-lines' binding.

	* xt-mouse.el (xterm-mouse-translate, xterm-mouse-event):
	Variable `last' renamed to `xterm-mouse-last'.
	(xterm-mouse-last): Add defvar.

	* sendmail.el (sendmail-send-it): Make deletion of empty subject line
	work reliably.

	* tmm.el (tmm-prompt): Major cleanups.  Handle pop-menu case nicely.
	Arg BIND renamed to MENU.
	Look at MENU to decide whether it is a keymap.
	Arg IN-POPUP now used only in recursive call.
	Use "Menu bar" as the default menu name.
	Delete some debugging code.

	* tmm.el (tmm-menubar-mouse): New function, handles [menu-bar mouse-1].
	(tmm-menubar): New arg x-position.
	(tmm-prompt): New arg default-item specifies item to offer by default.

1996-01-01  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* startup.el (normal-top-level):
	Add ~ at end of auto-save-list-file-prefix.

	* completion.el (save-completions-file-name):
	Use convert-standard-filename.

	* paths.el (abbrev-file-name): Use convert-standard-filename.

	* saveplace.el (save-place-file): Use convert-standard-filename.

	* viper.el (vip-custom-file-name): Use convert-standard-filename.

	* dired-x.el (dired-local-variables-file):
	Use convert-standard-filename.

	* files.el (convert-standard-filename): New function.
	* dos-fns.el (convert-standard-filename): New alternate definition.

1996-01-01  Eli Zaretskii  <eliz@is.elta.co.il>

	* term/pc-win.el (x-colors): New variable, a list of colors
	supported by PC color displays under MS-DOS.
	(msdos-color-translate): Use `x-colors'.
	(x-defined-colors): New alternate definition.

	* facemenu.el (facemenu-read-color, list-colors-display)
	(facemenu-get-face): Treat all non-nil window-system values alike.
	(facemenu-color-equal): Special case for MSDOS.

1995-12-31  Eli Zaretskii  <eliz@is.elta.co.il>

	* cpp.el (cpp-config-file): New variable.
	(cpp-edit-load): Use `cpp-config-file'.
	(cpp-edit-save): Use `cpp-config-file'.

	* completion.el (save-completions-file-name): Under MS-DOS set to
	a filename without a leading dot.

	* custom.el (custom-file):  Under MS-DOS set to a filename without
	a leading dot.

	* vip.el (vip-startup-file): New variable.
	(vip-mode): Use `vip-startup-file' for the startup file name.

	* ffap.el (ffap-list-env): Use `path-separator' rather than ":".

	* startup.el (auto-save-list-file-prefix):  Under MS-DOS, use `.s-'.
	(normal-top-level): Under MS-DOS, use `make-temp-name' to produce
	a unique `auto-save-list-file-name' (PID is not unique enough).
	(command-line-1): Delete explicit test for msdos and windowsnt;
	test just `window-system'.

	* files.el (abbrev-file-name): Drive letter can go beyond `Z'
	under MS-DOS/Novell.
	(auto-mode-alist): Support txt and txi like text and texi.
	(backup-buffer): Use convert-standard-filename.
	(basic-save-buffer-1): Make the name of the temporary file (where
	precious files are saved) conform to MS-DOS 8+3 constraints.

1995-12-31  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* jka-compr.el (auto-compression-mode): Add `interactive'.
	Put \-newline in doc string.
	(toggle-auto-compression): New arg MESSAGE.  Don't use interactive-p.

	* mouse.el (mouse-drag-region, mouse-drag-secondary):
	Bind echo-keystrokes to 0.

	* hexl.el (hexl-mode): Don't call kill-all-local-variables.
	Save write-contents-hooks, require-final-newline, the syntax table.
	Use make-local-hook for change-major-mode-hook.
	(hexl-mode-exit): Restore those vars; remove our local hooks.

1995-12-30  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* find-file.el: Doc fixes.
	(ff-get-file): Use get-file-buffer to avoid false match.
	(ff-switch-to-buffer): Rename arg FILE to BUFFER-OR-NAME.

	* lpr.el (lpr-page-header-switches, lpr-headers-switches): Doc fixes.

1995-12-30  <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* facemenu.el (facemenu-add-face-function, facemenu-end-add-face)
	(facemenu-remove-face-function): New variables.
	(list-text-properties-at): Output in echo area when one short prop.
	(facemenu-self-insert-face): Deleted function.
	(facemenu-add-face): 2nd & 3rd arg optional, thus also handles
	`facemenu-self-insert-face'.  Use new variables to potentially do
	something other than set a face under mode (TeX, HTML) control.
	When region is empty, add face to next input.

	* tex-mode.el (tex-face-alist, tex-latex-face-alist): New variables.
	(latex-mode, tex-common-initialization): Use them to set up facemenu.

1995-12-29  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* term/x-win.el (x-handle-switch, x-handle-numeric-switch)
	(x-handle-args): Use command-line-x-option-alist.
	(x-option-alist, x-switch-definitions, x-long-option-alist): Deleted.

1995-12-29  Erik Naggum  <erik@churchy.gnu.ai.mit.edu>

	* vc.el (vc-backend-checkin): Use vc-checkin-switches.

1995-12-29  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* startup.el (command-line-x-option-alist): Use x-handle-geometry
	for geometry options.

	* startup.el (command-line-x-option-alist): New variable.
	(command-line-1): Ignore X options when not using X.

	* jka-compr.el (auto-compression-mode): This is now a stub function
	that calls toggle-auto-compression, and is put bodily into loaddefs.el.
	(toggle-auto-compression): Renamed from auto-compression-mode.
	Not autloaded.

1995-12-28  Karl Eichwalder  <ke@ke.Central.DE>

	* dired.el (dired): Fix typo.

1995-12-28  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* ps-print.el (ps-do-despool): Alternative output method for MSDOS.

	* files.el (recover-session): Bind ls-lisp-support-shell-wildcards.

1995-12-28  Eli Zaretskii  <eliz@is.elta.co.il>

	* ls-lisp.el (ls-lisp-support-shell-wildcards): New variable.
	(insert-directory): Convert the filename wildcard to an equivalent
	Emacs regexp, when `ls-lisp-support-shell-wildcards' is non-nil.
	Handle file patterns like "/foo*/" as if it were "/foo*", like the
	shell would.  Print zero total for files whose total size is
	exactly zero (in particular, for no files at all).  Say "No match"
	when no files match the given wildcard.
	(ls-lisp-format): Make directory listing format more like POSIX ls.

	* files.el (wildcard-to-regexp): New function.

1995-12-28  1995  Marc Fleischeuers  <marc@mpi.nl>

	* files.el (make-auto-save-file-name): Make name always end in #,
	i.e. overwrite third char in extension if required.

1995-12-27  Ed Reingold  <reingold@mole.gnu.ai.mit.edu>

	* diary-lib.el: Replaced all uses of get-file-buffer with
	find-buffer-visiting.

	* cal-menu.el (calendar-mouse-print-dates): Put date on top of menu.

	* calendar.el: Fix autoloads for astro functions.

	* solar.el: Rewrote completely for better accuracy.

1995-12-26  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* mouse.el (mouse-menu-buffer-maxlen): New variable.
	(mouse-buffer-menu): Use it.

1995-12-26  Karl Eichwalder  <ke@ke.Central.DE>

	* menu-bar.el (buffers-menu-max-size): Move definition to top of file.

1995-12-25  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* mouse.el (mouse-buffer-menu): If lots of buffers,
	group them into multiple panes.

	* cc-mode.el: Switch to GNU style only the first time file is loaded.

	* hideif.el: Many doc fixes.
	(hide-ifdefs): New arg NOMSG.  Set hif-outside-read-only here.
	(hif-before-revert-function): New function.  Put on after-revert-hook.

	* files.el (revert-buffer): New arg preserve-modes.
	(after-find-file): New arg nomodes.
	* vc.el (vc-revert-buffer1): Pass t as preserve-modes to revert-buffer.

	* vc.el: Fix error message style.
	(vc-backend-checkout, vc-backend-checkin):
	Allow vc-checkin-switches and vc-checkout-switches to be a string.

1995-12-24  Noah Friedman  <friedman@prep.ai.mit.edu>

	* window.el (split-window-vertically): Don't change point in old
	window if both the original point and the end of the buffer are
	visible after splitting, when split-window-keep-point is nil.

1995-12-24  Michael Ernst  <mernst@cs.rice.edu>

	* uniquify.el (uniquify-fix-list-filename-lessp):
	Renamed from uniquify-filename-sort.

1995-12-24  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* make-mode.el (makefile-add-log-defun): Rewrite to scan back
	checking one line at a time.  Notice blank lines and comments.

1995-12-24  Karl Fogel  <kfogel@wombat.gnu.ai.mit.edu>

	* bookmark.el: Removed all `bookmark-xemacsp' conditional code
	relating to menus.  Do ";;;###autoloads" the as they were done in
	2.6.13.
	(bookmark-version): new var, set to 2.6.19.
	(baud-rate): set to 19200 if not already bound.
	(bookmark-make): don't call `set-text-properties' on a Lisp string
	if this is XEmacs, because it won't work.
	(buffer-substring-no-properties): if this is not fboundp, then
	fset it to `buffer-substring-without-properties'.

1995-12-24  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* iso-acc.el: When turning on default settings,
	preserve iso-accents-enable if it's already set.

	* rmail.el (rmail-forward): Quote lines with `- ' when necessary.

1995-12-24  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* files.el (save-some-buffers): Don't give message if we queried.

1995-12-23  Geoff Voelker  <voelker@cs.washington.edu>

	* term/win32-win.el: Disable scrollbars until fully functional.

1995-12-23  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* ps-print.el (ps-spool-buffer-with-faces): Fix typo in previous chg.
	(ps-spool-region-with-faces): Likewise.

	* cc-mode.el (c-fill-paragraph): Return t if did special filling.
	Otherwise return nil and don't change the buffer.

	* fill.el (fill-paragraph-function): Doc fix.

	* iso-acc.el (iso-languages): Add entry for `irish'.

	* cc-mode.el (c-mode-map): Don't rebind M-q.
	(c-common-init): Set fill-paragraph-function.

	* rmail.el (rmail): Allow nonexistent file as arg.

1995-12-22  Eli Zaretskii  <eliz@is.elta.co.il>

	* compile.el (compile-internal): On systems with no asynchronous
	processes: do relevant parts of compilation-sentinel after the
	process exits; make modeline during and after compilation be
	similar to what compilation-sentinel displays.

1995-12-22  Erik Naggum  <erik@naggum.no>

	* paths.el (rmail-spool-directory): Append slash to all pathnames.

1995-12-21  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* emacsbug.el (report-emacs-bug): Don't die if *Messages* buf is gone.

1995-12-21  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* disp-table.el (standard-display-european): Make 160 display as space.

	* files.el (save-buffer): Doc fix.

1995-12-21  <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* sendmail.el (mail-setup): Put text property on mail-header-separator.
	(mail-header-separator): Set it up for use as a category property.
	(mail, mail-send): Turn on inhibit-read-only temporarily.

1995-12-20  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* disp-table.el (standard-display-european): Test code 161, not 160.

	* loaddefs.el (debug-ignored-errors): Set it.

1995-12-18  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* startup.el (normal-top-level): Don't set auto-save-list-file-name
	if auto-save-list-file-prefix is nil.

1995-12-17  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* simple.el (shell-command-on-region): If current buffer is
	*Shell Command Output*, use the replacement case.

	* iso-acc.el: Many doc fixes.

	* iso-ascii.el (iso-ascii-convenient): New variable.
	(iso-ascii-display): New function to implement that variable.
	Use it instead of using standard-display-ascii directly.

	* startup.el (normal-top-level): Don't set auto-save-list-file-name
	if it was already set non-nil (by .emacs, for example).
	(auto-save-list-file-prefix): Doc fix.

	* imenu.el (imenu-update-menubar): New function.
	(imenu-add-to-menubar): Use an ordinary menu bar submenu.
	Add imenu-add-to-menubar to menu-bar-update-hook to update the submenu.
	(imenu--make-index-alist): Add noerror argument.
	(imenu--menubar-select): New function.
	(imenu--create-keymap-1, imenu--create-keymap-2): New arg COMMANDS.
	(imenu): Allow a string as arg.

1995-12-16  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* emacsbug.el (report-emacs-bug): If `mail' asks for confirmation
	and the user doesn't give it, don't do anything more.
	Explain a way to cancel the message.
	Include recent keys and recent *Messages* messages at end.

1995-12-15  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* ps-print.el: Doc fixes.

	* edebug.el (edebug-read-syntax-table): Add backquote.
	(edebug-read-alist): Handle comma and backquote.
	(edebug-read-backquote, edebug-read-comma): New functions.
	(edebug-read-list): Special handling for backquote.

	* rmail.el (rmail-ignored-headers): Add resent-date, nntp-posting-host.

	* make-mode.el (makefile-font-lock-keywords): Fix bad structure
	for the "^\t+#" element.

	* startup.el (command-line-1): Use auto-save-list-file-prefix
	when checking for existing files.

1995-12-14  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* calendar.el (calendar-astro-from-absolute): Autoload it.

	* subr.el (add-to-list): Doc fix.

	* supercite.el (sc-attribs-extract-namestring): Do look for
	doublequotes after finding angle brackets.

	* rmail.el (rmail-retry-failure): Fix previous change.
	Combine variables mail-buffer and rmail-buffer.
	Look for an end-delimiter in case where the start-of-bounce
	delimiter looks like -- plus some more text.

1995-12-13  Kevin Rodgers <kevinr@ihs.com>

	* ange-ftp.el (ange-ftp-load): Added missing form to `cdr' down
	tryfiles in `while' loop.

1995-12-12  Michael Ernst  <mernst@cs.rice.edu>

	* uniquify.el (uniquify-fix-list-filename-lessp): Rename from
	uniquify-filename-sort.
	Correct doc references to Emacses that aren't FSF GNU Emacs 19.

1995-12-12  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* flow-ctrl.el (enable-flow-control-on): Try the whole TERM name
	before trying to strip off words from the end.

	* rmail.el (rmail-search): Doc fix.

1995-12-11  Ake Stenhoff <etxaksf@aom.ericsson.se>

	* cc-mode.el (cc-imenu-c++-generic-expression): New variable.
	(cc-imenu-c-generic-expression): New variable.
	(c++-mode): Set imenu-generic-expression.
	(c-mode): Set imenu-generic-expression.

1995-12-10  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* isearch.el (isearch-done): Use executing-kbd-macro.

	* rmailsum.el (rmail-make-basic-summary-line):
	Recognize user-mail-address in From field means msg is from you.

1995-12-07  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* byte-opt.el (byte-compile-unfold-lambda): Recursively optimize body.

	* cc-mode.el (c-style-alist): Downcase the style names.
	(c-set-style): Downcase style names for lookup.
	(cc-mode style): Define with lower-case name.

1995-12-06  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* ange-ftp.el (ange-ftp-start-process): Bind env var TERM to dumb.

	* lpr.el (lpr-switches, lpr-add-switches): Doc fixes.

1995-12-05  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* cc-mode.el (c-progress-fini): Fix "done" message.

1995-12-04  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* subr.el (buffer-substring-no-properties): Function deleted.

1995-12-03  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* paren.el (window-setup-hook): Clear blink-matching-paren-on-screen;
	don't touch  blink-paren-function.

	* simple.el (blink-matching-paren-on-screen): New variable.
	(blink-matching-open): Obey it.

	* completion.el (symbol-under-point, symbol-before-point)
	(symbol-under-or-before-point, symbol-before-point-for-complete):
	Use unwind-protect to restore syntax table.
	(symbol-before-point, symbol-before-point-for-complete):
	Start the backward scan-sexps from point, not (1+ (point)).

	* bytecomp.el (byte-compile-output-docform): Don't do dynamic doc
	strings if byte-compile-compatibility.

	* isearch.el (isearch-search-and-update): Use isearch-case-fold-search
	around the looking-at call.

1995-12-02  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* paths.el (rmail-spool-directory): Try /var/spool/mail.
	(news-path): Use /var/spool/news as last resort.

	* lisp-mode.el (lisp-fill-paragraph): Several changes.
	Change how to recognize partial comment lines,
	how to find start of region to fill.  Use fill-region.
	Use tabs when making comment-fill-prefix.

1995-12-01  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* isearch.el (isearch-just-started): New variable.
	(isearch-mode): Set it.
	(isearch-search): Clear it.
	(isearch-repeat): If isearch-just-started, don't test for empty match.
	(isearch-unread): Use store-kbd-macro-event.

1995-12-01  Francesco Potorti` <pot@cnuce.cnr.it>

	* gud.el (gud-sdb-marker-filter): Modify the regexp for sysVR3 to
	take care of the asterisk prompt.  Correctly set gud-marker-acc.

1995-12-01  Francesco Potorti` <pot@cnuce.cnr.it>

	* make-mode.el: Add faces to menu only if window-system.
	(makefile-mode): Do not check if makefile-define-space-face is
	defined.  Call it only if window-system.

1995-11-30  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* gnus-msg.el (gnus-post-news): Add autoload.

1995-12-20  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* compile.el (compilation-mode): Add autoload cookie.

1995-12-19  Noah Friedman  <friedman@prep.ai.mit.edu>

	* yow.el (apropos-zippy): New command.
	(yow-load-message, yow-after-load-message): New constants.
	(yow, read-zippyism): Use them.
	Now KEN and BARBIE are PERMANENTLY ADDICTED to MIND-ALTERING DRUGS..

1995-12-19  Daniel Pfeiffer  <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* apropos.el (apropos-match-face): Use `secondary-selection' rather
	than `highlight' to distinguish it from mouse-face highlighting of
	hyperlinks.
	(apropos-mode-map): Rename from `apropos-local-map'.
	(apropos-mode): Set it rather than have a local-map that made RET
	locally unusable when copied to other buffer.
	(apropos-print): Use it.  When there is only one property, show
	what it is.  Remove superfluous `save-excursion', thus making help
	commands' return-message be correct.
	(apropos-print, apropos-describe-plist): `print-help-return-message'
	like help commands.

1995-12-19  Eli Zaretskii  <eliz@is.elta.co.il>

	* time.el (display-time): make it work under ms-dos by setting the
	`dos-display-time' variable instead of invoking `wakeup' as
	asynchronous process (which doesn't work under ms-dos).

1995-12-19  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* files.el (auto-mode-alist): Recognize .S and .asm extensions.

	* files.el (make-backup-file-name, backup-file-name-p): Use ~ even
	on ms-dos.
	* dired.el (dired-flag-backup-files): Undo previous change.

1995-12-16  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nntp.el (nntp-open-server): Enable successful "connectionless"
	server switching.

1995-12-15  Eric Ding  <ericding@mit.edu>

	* goto-addr.el: Mouse-click method now bound using text
	properties rather than local-set-key.

1995-12-15  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* sendmail.el (mail-bury): Use window-dedicated-p.

	* files.el (set-auto-mode): Recognize `#!/bin/env INTERPRETER' hack.

1995-12-14  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus.el (gnus-summary-mode-line-format,
	gnus-article-mode-line-format, gnus-group-mode-line-format):
	Include the buffer name in the default mode strings.
	(gnus-mode-non-string-length): Changed the default to not
	limit/pad mode line lengths.
	(gnus-set-mode-line): Supply new values for the mode string
	variables.
	(gnus-summary-remove-lines-marked-with): Put point on the current
	article after expunging lines.

1995-12-14  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* etags.el: Fix changes of 4 Feb 95 by brat@htilbom.ernet.in.
	(find-tag-file-order): Variable removed.
	(find-tag-noselect): Remove variable SEARCH-TAG and special case
	setting find-tag-order for patterns ending in dot.
	(find-tag-in-order): Remove variable TAGS-TABLE-FILE.
	Remove variable MATCH-TYPE and code testing it for special case.
	(etags-recognize-tags-table): Put tag-exact-file-name-match-p first in
	find-tag-tag-order list.  Don't set find-tag-file-order.
	(etags-snarf-tag): Notice file name match and return tag info with t
	in place of tag text.
	(etags-goto-tag-location): If (car TAG-INFO) is t, go directly to
	the specified location.
	(tag-exact-file-name-match-p): Renamed from tag-filename-match-p,
	and fixed.
	(tags-table-files): Doc fix: names are returned unexpanded.
	(etags-tags-table-files): Don't expand file names.
	(tags-table-including, next-file): Expand result of (tags-table-files).
	(tags-complete-tags-table-file): New function, helper for interactive
	spec of list-tags.
	(list-tags): Revert to original code, but use that function to lazify
	the completion table.
	(tags-list-functions-in-file, tags-locate-file-in-tags-table):
	Functions removed.

	* autoload.el (generate-file-autoloads): If no buffer visiting
	FILE exists, read it into a temp buffer for processing without
	visiting it.

1995-12-13  Stefan Schoef  <schoef@OFFIS.Uni-Oldenburg.DE>

	* bibtex.el (bibtex-auto-fill-function): Adapted for use with
	changed autofill policy of emacs-19.30 (uses now fill-prefix
	instead of indent-line-function).
	(bibtex-indent-line-function): Removed (not used any more).

	* bibtex.el (bibtex-make-field): Was broken when called
	non-interactively.

	* bibtex.el (bibtex-make-field): Point is now placed on closing
	brace or quote (suggested by Karl Eichwalder <ke@ke.Central.DE>).

	* bibtex.el (bibtex-clean-entry): Comma after last field isn't
	deleted anymore (new standard in BibTeX 0.99 and 1.xx).
	(bibtex-enclosing-reference-maybe-empty-head): Works with entries
	with comma after last field.
	(bibtex-reference): Permits entries with comma after last field.
	(bibtex-font-lock-keywords): Enhanced to support new field-name
	characters (suggested by Martin Maechler
	<maechler@stat.math.ethz.ch>).

	(bibtex-field-name): Now numbers (not as the first sign), dashes,
	and underscores are allowed (suggested by Martin Maechler
	<maechler@stat.math.ethz.ch> and Oren Patashnik
	<opbibtex@labrea.Stanford.EDU>).

	* bibtex.el (bibtex-make-field): Was broken on lines containing
	non-parenthesized entries (reported by Karl Eichwalder
	<ke@ke.Central.DE>).

	* bibtex.el (bibtex-validate-buffer): Changed so that preamble
	references are ignored (same as string entries) (reported by
	Martin Maechler <maechler@stat.math.ethz.ch>).

	* bibtex.el (bibtex-enclosing-reference-maybe-empty-head):
	New function to be used in case reference head may be empty.
	(bibtex-clean-entry, bibtex-pop-previous, bibtex-pop-next): Uses
	now bibtex-enclosing-reference-maybe-empty-head.
	(bibtex-mode): Added support for font-lock mode.
	(bibtex-font-lock-keywords): New variable with font-lock keywords
	for BibTeX mode.

	* bibtex.el (bibtex-make-optional-field): Not longer interactive
	(suggested by Karl Eichwalder <karl@pertron.central.de>).

	* bibtex.el (bibtex-maintain-sorted-entries): Set to nil, since it
	requires more user attention and more restricted files to have
	this set to t.
	(bibtex-maintain-sorted-entries,
	bibtex-sort-ignore-string-entries): Made buffer local, since it
	may depend on the buffer which preferences to use.
	(bibtex-validate-buffer): Looking for correct sort order only when
	bibtex-maintain-sorted-entries is non-nil.
	Put a comment in the `KNOWN BUGS' section about the
	quote-inside-quotes problem.
	(whole file): Changed string `true' in some documentation strings
	to `non-nil' (e.g. `if variable has a true/non-nil value').
	(bibtex-mode-map): Changed `move/edit' to `bibtex-edit'.

	* bibtex.el (bibtex-sort-entries): Now works correctly with
	`@String' entries inside BibTeX files (i.e. after the occurence of
	other references).
	(bibtex-validate-buffer): Inserted code which looks if entries are
	balanced (a single non-escaped quote inside braces was not
	detected till now, but bibtex-sort-entries stumbles about it).

	* bibtex.el (bibtex-entry): bibtex-move-outside-of-entry is only
	called when bibtex-maintain-sorted-entries is nil (otherwise
	bibtex-find-entry-location determines the correct location).
	(bibtex-find-entry-location): Now uses binary search. As before,
	it assumes that the buffer is sorted without duplicates (but as
	before it is only called when bibtex-maintain-sorted-entries is
	t). Ignores `@String' entries if told so via variable
	bibtex-sort-ignore-string-entries.

	* bibtex.el (bibtex-clean-entry): Respect
	bibtex-maintain-sorted-entries when inserting autokey.
	(bibtex-validate-buffer): Searching whole buffer for duplicates
	and correct order is now done directly instead of calling
	bibtex-find-entry-location (since this is to be reprogrammed to
	use a binary search instead a sequential one).

	* bibtex.el (bibtex-parse-keys): May now be called with an
	optional parameter which (if t) tells bibtex-parse-keys that it
	should abort if input is pending.
	(bibtex-mode): The instance of bibtex-parse-keys called in
	auto-save-mode-hook is now called with this new parameter set to
	t, so an auto-save caused by exceeding auto-save-interval is now
	aborted immediately if user is still typing.

	* bibtex.el (bibtex-print-help-message, bibtex-clean-entry): Use
	now constant strings instead of custom ones.

	* bibtex.el (bibtex-clean-entry): Changed the call of
	bibtex-enclosing-reference to a more specific call so entries
	without a key (here allowed) can be handled.
	(bibtex-reference-key): Cleared off parentheses (caused string
	entries enclosed by parentheses instead of braces to be not added
	to bibtex-completion-candidates).
	(bibtex-complete-string): Made it use bibtex-string.

	* bibtex.el (bibtex-keys,
	bibtex-buffer-last-parsed-for-keys-tick): New buffer-local
	variables to make parsing of BibTeX buffer for reference keys
	(needed by TAB completion in minibuffer when entering key) more
	occasional.
	(bibtex-parse-keys): New function to parse for keys (functionality
	was partially included in bibtex-entry).
	(bibtex-entry): Changed to use bibtex-parse-keys.
	(bibtex-mode): Installs bibtex-parse-keys as an
	auto-save-mode-hook, so whole buffer is parsed at most when it is
	autosaved.
	(bibtex-clean-entry): Calls bibtex-parse-keys on the new entry, so
	bibtex-keys remains consistent for new entries that are finished
	by calling this function (most should).

	* bibtex.el (bibtex-inside-field): Be independent on current
	setting of bibtex-field-right-delimiter (allows more intermixing
	between quotes and braces).
	(bibtex-make-field): Last change didn't make it work correctly
	when called non-interactively by bibtex-entry (fixed).

1995-12-13  Eli Zaretskii  <eliz@is.elta.co.il>

	* dired.el (dired-flag-backup-files): Under MS-DOS, search for
	possible backup files by checking for filenames which end with a
	`k' (the backup extension is `.bak').

1995-12-13  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* faces.el (modify-face): Take extra optional arg FRAME.
	Use face-try-color-list to change foreground and background colours.
	If BOLD-P, ITALIC-P or UNDERLINE-P not nil or t, don't change the
	display attribute corresponding to that arg.  Doc fix.

1995-12-12  David K}gedal  <davidk@lysator.liu.se>

	* sendmail.el (sendmail-send-it): Added support for Resent-CC and
	Resent-BCC headers.

1995-12-12  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* rmail.el (rmail-forward): Delete trailing blank lines.

	* fill.el (fill-context-prefix): Doc fix.

	* sh-script.el: Provide sh-script.

1995-12-12  Karl Eichwalder  <ke@ke.Central.DE>

	* add-log.el (change-log-mode): Defaults for `indent-tabs-mode'
	and `tab-width'.

1995-12-12  Daniel Pfeiffer  <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* sh-script.el (sh-mode-map): Make the code more legible.
	(sh-font-lock-keywords-1): Allow keyword `in' at eol too.
	(sh-font-lock-keywords-only): New variable to prevent an apostrophe
	in comment from misfontifying buffer, but to allow users who don't
	have such to get strings fontified.
	(sh-mode): Use it.

1995-12-12  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* faces.el (x-frob-font-weight, x-frob-font-slant): Make sure
	case-fold-search is bound to t.

1995-12-11  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* comint.el (send-invisible): Send string using comint-input-sender.

1995-12-09  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* font-lock.el (font-lock-mode): Don't turn on in any buffer with
	a leading space in its name, and widen when unfontifying.  Doc fix.
	(font-lock-fontify-buffer): Widen when fontifying.
	(font-lock-fontify-window): New command.  Bind to C-S-l.
	(font-lock-fontify-region, font-lock-unfontify-region): Bind both
	change hooks to nil while changing text properties.

1995-12-09  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus.el (gnus-simplify-mode-line): New function to simplify the
	mode line in a safer manner.
	(gnus-group-mode, gnus-browse-mode, gnus-summary-mode,
	gnus-article-mode, gnus-server-mode): Use the function.

1995-12-08  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus.el (gnus-group-set-mode-line): Allow user defined specs in
	the group format mode line.

1995-12-06  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus.el (gnus-parse-headers-hook): New hook.
	(gnus-get-newsgroup-headers): Call it.
	(gnus-get-newsgroup-headers-xover): Call it.
	(gnus-group-mode-map): Moved `gnus-group-fetch-faq' from `M-f' to
	`H f'.
	(gnus-summary-copy-article): Allow respooling to any backend.
	(gnus-summary-set-process-mark): Make sure each article can only
	be process marked once.
	(gnus-summary-remove-lines-marked-with): Put point on a valid
	article after removing lines.
	(gnus-summary-sort-by-author): Didn't allow sorting when
	pseudo-articles were present.
	(gnus-summary-sort-by-subject): Ditto.

1995-12-06  Erik Naggum  <erik@naggum.no>

	* files.el (recover-file): Also recover new, unsaved files.

1995-12-05  Ed Reingold  <reingold@mole.gnu.ai.mit.edu>

	* cal-menu.el (calendar-mode-map): Undefine search button.
	Many places: Use correct names of functions.

	* diary-lib.el: Changed all occurrences of buffer-substring to
	buffer-substring-no-properties.
	(diary-iso-date): Autoload it.

	* cal-dst.el (dst-in-effect): Fixed calculations for southern
	hemisphere and made the doc string clearer.

1995-12-03  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* copyright.el (copyright-regexp): Recognize ISO copyright symbol.
	(copyright-update): Pattern is now match #2, not #1.

1995-12-02  Erik Naggum  <erik@naggum.no>

	* disp-table.el (display-table-slot,set-display-table-slot):
	Document the slot names.

1995-12-01  Francesco Potorti` <pot@cnuce.cnr.it>

	* gud.el (gud-sdb-marker-filter): start may be nil, so check it
	with numberp before using it.

	* isearch.el (isearch-edit-string): Consider the case when
	isearch-string is empty and so are the search rings.

1995-11-30  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* gnus-msg.el (gnus-post-news): Add autoload.

1995-11-29  Paul Eggert  <eggert@twinsun.com>

	* cal-chinese.el (calendar-chinese-sexagesimal-name): Renamed from
	calendar-chinese-sexagisimal-name to fix misspelling.
	* cal-hebrew.el (holiday-rosh-hashanah-etc): Fix misspelled var.
	* holidays.el (holiday-easter-etc): Fix misspelling of "Whitmonday".
	* calendar.el (calendar-setup, calendar-basic-setup,
	calendar-next-calendar-round-date,
	calendar-previous-calendar-round-date, cal-tex-cursor-year),
	cal-julian.el (calendar-absolute-from-astro),
	cal-mayan.el: (calendar-next-calendar-round-date,
	calendar-previous-calendar-round-date),
	diary-lib.el (list-sexp-diary-entries),
	solar.el (solar-longitude): Doc fixes to fix misspellings.

1995-11-29  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (auto-mode-alist): Don't purecopy the alist elts.

	* saveplace.el (save-place-limit): New variable.
	(load-save-place-alist-from-file): Obey it.
	Fix "done" message.
	(save-place-alist-to-file): Fix "done" message.

1995-11-28  Gary Oberbrunner  <garyo@darkstar.avs.com>

	* gud.el (gud-dbx-find-file): Find correct source file.

1995-11-27  Erik Naggum  <erik@naggum.no>

	* apropos.el (apropos-follow): Rewrite to use whole line as target
	of reference.

1995-11-27  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* apropos.el (apropos-mouse-follow): Do save-excursion.
	Error if not adjacent to a mouse-face property.

1995-11-26  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* rmailsum.el (rmail-summary-get-new-mail): Don't call
	rmail-summary-goto-msg if msg is 0.

1995-11-24  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* mailalias.el (build-mail-aliases): Use buffer-substring-no-properties
	not buffer-substring.

1995-11-24  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* Version 19.30 released.

	* diary-lib.el: Renamed from diary.el.
	* calendar.el, cal-tex.el: Use new name diary-lib.

	* cc-mode.el (c++-mode, objc-mode, c-mode): Doc fix.

	* font-lock.el (font-lock-make-faces): Add special code for ms-dos.

	* view.el (view-mode, view-mode-enter): Doc changes.
	(view-mode-map): Change h and ? to use describe-mode.
	Delete binding of help char.
	(view-mode-enter): Use describe-mode in message.

1995-11-23  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* ediff-mult.el (ediff-intersect-directories): Quote symbols
	starting with `:'.

	* view.el (view-mode-enter): Replace Help-helper by help-command
	in doc string and message.

	* sort.el (sort-regexp-fields): Doc fix.
	* inf-lisp.el (inferior-lisp-load-command): Doc fix.
	* imenu.el (imenu-generic-expression, imenu--generic-function):
	Doc fix.

	* add-log.el (add-change-log-entry): Initialize add-log-full-name
	and add-log-mailing-address before prompting.

1995-11-23  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* completion.el (cmpl-make-standard-completion-syntax-table)
	(cmpl-make-c-def-completion-syntax-table): Use make-syntax-table.
	(completion-c-mode-hook): Encapsulate C-mode changes in new function.
	Either call it now or put it on c-mode-hook.

1995-11-22  Barry Warsaw  <bwarsaw@anthem (Barry Warsaw)>

	* cc-mode.el (c-beginning-of-statement-1): CASE 3, can't just
	return t at end of let clause since this will break
	arglist-cont-nonempty lines.

1995-11-22  Geoff Voelker  <voelker@cs.washington.edu>

	* makefile.nt (install, clean): Don't use switches to del not
	supported by Windows 95.

1995-11-21  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* man.el (Man-fontify-manpage, Man-cleanup-manpage):
	Convert \255 to a dash.

	* apropos.el (apropos-print): Put the item property
	on the whole printed symbol.
	(apropos-follow): Look for the item property only adjacent to point.
	Signal an error if there is none.

1995-11-20  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* apropos.el (apropos-print): Use apropos-local-map as buffer's map,
	not as a text property.

	* ediff-hook.el (menu-bar-epatch-menu, menu-bar-ediff-merge-menu)
	(menu-bar-ediff-menu): Give names to the menus.

	* ediff-mult.el: Renamed from ediff-meta.el.  Changed provide.
	* ediff.el, ediff-util.el: Require ediff-mult.
	* ediff-hook.el (ediff-show-registry): Use renamed file ediff-mult.el.

	* array.el (array-mode): Set overwrite-mode to overwrite-mode-textual.

	* term/pc-win.el (msdos-color-aliases): Add more aliases.
	(msdos-face-setup): Change colors for bold, bold-italic, underline.
	(x-frob-font-slant): Define as no-op.

	* saveplace.el (save-place-to-alist): Handle hexl-mode specially.

1995-11-19  Erik Naggum  <erik@naggum.no>

	* calendar.el (cal-tex-cursor-week-iso): Doc fix.

1995-11-19  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* calendar.el:
	(cal-tex-cursor-filofax-week): Renamed from cal-tex-cursor-week6.
	(cal-tex-cursor-filofax-2week): Renamed from cal-tex-cursor-week5.
	(cal-tex-cursor-week-monday): Renamed from cal-tex-cursor-week4.
	(cal-tex-cursor-week-iso): Renamed from cal-tex-cursor-week3.

	* cal-tex.el (cal-tex-version): Deleted.
	(cal-tex-cursor-year-landscape): Doc fix.
	(cal-tex-cursor-filofax-week): Renamed from cal-tex-cursor-week6.
	(cal-tex-cursor-filofax-2week): Renamed from cal-tex-cursor-week5.
	(cal-tex-cursor-week-monday): Renamed from cal-tex-cursor-week4.
	(cal-tex-cursor-week-iso): Renamed from cal-tex-cursor-week3.

	* info.el (Info-directory-list): Use source-directory.

1995-11-18  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* calendar.el (calendar-goto-info-node): Don't let
	same-window-buffer-names do its usual job--force *info* buffer
	into another window.

	* simple.el (do-auto-fill): Look at 2nd line for fill prefix
	even when on the first line.  Don't accept non-whitespace prefix
	from the first line.

	* fill.el (fill-context-prefix): New arg first-line-regexp.

	* finder.el (finder-known-keywords): Delete `debugging'.

1995-11-18  Lars Magne Ingebrigtsen  <larsi@surt.ifi.uio.no>

	* nntp.el (nntp-open-server): Accept a second optional parameter
	for just changing virtual server.  Doc fix.
	(nntp-possibly-change-server): Use it.
	(nntp-close-server): Ditto.

1995-11-17  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* cc-mode.el (c-guess-basic-syntax, c-beginning-of-statement-1):
	Do not check for c-conditional-key when skipping backwards over
	statements that look sort of like conditionals.  This makes
	statements following nested functions indent correctly.  CASE 9B.3
	(unknown catchall) now gets triggered by the brace that opens a
	nested function.  Also, this changes the relpos for top-level
	defun-open braces, but that will be very hard to fix, and it may
	break backward compatibility.

	* cc-mode.el (c-guess-basic-syntax):
	CASE 5H, inclass relpos should be relative to
	boi of the open brace, not the beginning of the class keyword.

	* cc-mode.el (c-fill-paragraph): Doc fix.

1995-11-17  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* gnus.el (gnus-group-quit-config): Return the quit-config instead
	of a list containing the quit-config.

1995-11-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* mail-utils.el (rmail-dont-reply-to): Preserve whitespace after comma.

1995-11-17  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* etags.el (next-file): Make interactive arg t if had any prefix arg.

	* faces.el (face-color-supported-p): Return nil if no window system.

1995-11-17  Ed Reingold  <reingold@spiff.gnu.ai.mit.edu>

	* cal-coptic.el: Fix epoch of Ethiopiac calendar.

	* cal-chinese.el: Minor fixes.

1995-11-17  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* indent.el (move-to-left-margin): Removed left-over code that
	made it fail on right-justified and centered text.

	* fill.el (fill-region-as-paragraph): Remove redundant "setq from".
	Don't add extra newline at end if there is no text in paragraph --
	doing so can make fill-region loop.
	When testing for indentation exceeding fill-column, skip back over
	tabs too.

1995-11-17  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* rmail.el (rmail-retry-failure): Add missing colons in regexp.
	Use " +", not " *", to check for indented text.
	Don't make a temp buffer; just record the indent amount.  Simplify.

1995-11-17  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* simple.el (do-auto-fill): Ignore the result of fill-context-prefix
	if it is empty.

	* cc-mode.el (c-common-init): Set adaptive-fill-regexp to nil.

	* fill.el (fill-context-prefix): Use adaptive-fill-regexp only if non-nil.

1995-11-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* calendar.el (calendar-julian-date-string): Autoload this.

1995-11-16  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* ange-ftp.el (ange-ftp-process-handle-hash): If
	ange-ftp-hash-mark-unit is nil, don't display a message.
	(ange-ftp-process-filter): Call ange-ftp-process-handle-hash even
	if ange-ftp-hash-mark-unit is nil.

1995-11-16  Johan Vromans  <jvromans@squirrel.nl>

	* forms.el: Use `buffer-substring-no-properties' instead of
	`buffer-substring' to avoid the properties being copied.

1995-11-16  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* cc-mode.el (c-beginning-of-statement, c-end-of-statement):
	New arg sentence-flag.  Use that instead of interactive-p.
	(c-mode-help-address): Send bug reports to bug-gnu-emacs too.

	* fill.el (fill-context-prefix): Check adaptive-fill-function non-nil.

1995-11-16  Per Abrahamsen  <abraham@dina.kvl.dk>

	* menu-bar.el (minibuffer maps): Delete extra quote.

1995-11-16  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* info.el (Info-complete-menu-item): Don't treat `* Menu:'
	as a menu item.

1995-11-15  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* nntp.el (nntp-close-server-internal):
	Don't call nntp-possibly-change-server.

	* cplus-md.el (c++-mode): Remove autoload cookie.

	* mouse-sel.el (mouse-sel-lost-selection-hook): Undo prev change.

	* tmm.el (tmm-prompt): Delete tmm-add-prompt if we fail.
	Don't switch to *Completions* if it wasn't created.

	* startup.el (command-line-1): Mention F10.

1995-11-14  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* fill.el (fill-individual-paragraphs): Advance 1 line in inner loop.
	(fill-region-as-paragraph): Handle left margin extending to or past
	fill-column.

	* mouse-sel.el (mouse-sel-lost-selection-hook): Use (car selection).

	* indent.el (indent-line-to): Delete spaces before inserting a tab.

	* calendar.el (calendar-julian-from-absolute): Autoload it.

	* goto-addr.el (goto-address): Use S-mouse-2, not S-mouse-1.
	Add autoload cookie.

	* startup.el (command-line-1): Reorganize the initial help output.

	* hexl.el (hexl-mode): Set require-final-newline to nil.
	If point was at end of buffer, move it back one byte.

1995-11-14  Eric Ding  <ericding@mit.edu>

	* goto-addr.el (goto-address-highlight-p): New variable.
	(goto-address-fontify): Removed check for invisible text,
	set inhibit-point-motion-hooks instead

1995-11-13  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* vc-hooks.el (vc-locking-user): In CVS case, convert
	user number to a string.

	* vc.el (vc-directory): Require dired.
	(vc-revert-buffer): Ignore vc-suppress-confirm.

1995-11-13  Morten Welinder  <terra@diku.dk>

	* arc-mode.el (archive-remote-regexp): Doc fix.

1995-11-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* compile.el (compilation-sentinel): Use the local value of
	compilation-exit-message-function in the process buffer.

1995-11-12  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* tmm.el (tmm-define-keys): Don't define ESC ESC.

	* ffap.el: New file.

	* info.el (info-insert-file-contents-1): Various rewrites.
	Compute EXT-LEFT after removing the dot from SUFFIX.

1995-11-11  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* window.el (balance-windows): Don't count the menu bar's lines
	in the frame height.

	* menu-bar.el (delete-frame): Don't use delete-frame as event name.

	* startup.el (command-line): Don't reject unknown args here.
	(command-line-1): Detect it here.

	* dabbrev.el (dabbrev-case-replace): Doc fix.

1995-11-10  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* tmm.el: Define menu-bar mouse-1 as tmm-menubar.

	* simple.el (universal-argument-other-key): Add to existing
	unread-command-events value.

1995-11-10  Per Abrahamsen  <abraham@dina.kvl.dk>

	* xt-mouse.el (global-map): Removed bindings of down events to ignore.
	(xterm-mouse-translate): Only generate down event when bound.
	Cleanup.  Support for mode line and vertical bar dragging, and
	menu-bar events.
	(xterm-mouse-x): New variable.
	(xterm-mouse-y): New variable.
	(mouse-position): Advice to use above variables.
	(xterm-mouse-event): Support menu-bar.  Set xterm-mouse-x and
	xterm-mouse-y.

1995-11-10  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* add-log.el (change-log-mode): Remove incorrect "^" anchors from
	paragraph-start and -separate.
	(change-log-fill-paragraph): Use regular value of paragraph-start
	to bound paragraph to be filled, modified values only to do the
	filling.  Make lines beginning with parentheses
	paragraph-starters, but not paragraph-separators.

	* cc-mode.el (c-common-init): Remove "^" from paragraph-start and
	paragraph-separate.  Moved page-delimiter first in case it has a
	"^" also.

	* lisp-mode.el (lisp-mode-variables, lisp-fill-paragraph): Remove
	"^" from paragraph-start and paragraph-separate.  Moved
	page-delimiter first in case it has a "^" also.

	* sh-script.el (sh-mode): as above.  Use page-delimiter rather than
	literal "^L".

	* fill.el (fill-region-as-paragraph): Since adaptive-fill-regexp
	is supposed to match text STARTING at the left margin, use
	`looking-at' rather than `re-search-forward'.
	(fill-individual-paragraphs): Match fill-prefixes starting at
	left-margin.

1995-11-10  Erik Naggum  <erik@naggum.no>

	* view.el (View-scroll-lines-forward): Don't recenter at end.

1995-11-10  Kevin Rodgers <kevinr@ihs.com>

	* files.el (find-file-noselect): Respect the value of
	find-file-visit-truename when FILENAME is a directory and
	find-file-run-dired is non-nil.

1995-11-10  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* facemenu.el (facemenu-unlisted-faces): Remove font-lock faces from
	the default list.  The list of face names was out of sync; to
	prevent this from happenning again I made font-lock.el, and other
	packages that create "private" faces, put them on the list
	themselves.  This should give them a better chance of being
	updated when the packages are changed.

	* calendar.el (holiday-face, calendar-today-face, diary-face): Add
	faces to facemenu-unlisted-faces before creating so that facemenu
	won't list them as faces to be added interactively.

	* viper.el: Don't list any faces in menu.

	* paren.el (show-paren-command-hook): Don't list `paren-mismatch'
	face in menu.

	* make-mode.el (makefile-space-face): Don't list in facemenu.

	* ediff-init.el: All faces added to facemenu-unlisted-faces list.

	* facemenu.el (facemenu-active-faces): Replaces function
	`facemenu-discard-redundant-faces'.  This version, written by
	Simon Marshall, is faster and does not require optional
	argument for recursive re-entry.  New argument FRAME allows
	check to be done relative to face definitions in any frame.

1995-11-10  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* enriched.el (enriched-next-annotation): Doc fix.

	* dos-fns.el: Fix previous change.

1995-11-09  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* make-mode.el (makefile-mode): Call makefile-define-space-face
	only if it is defined.
	(makefile-define-space-face): Create the face unconditionally;
	alter it only if have X.

	* cal-x.el: Require calendar.

1995-11-09  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* simple.el (do-auto-fill): Use fill-context-prefix.

	* fill.el (fill-region-as-paragraph): Use fill-context-prefix.
	(fill-context-prefix): New function.

1995-11-09  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* font-lock.el (font-lock-mode): Use make-local-hook.
	(font-lock-fontify-buffer): Don't preserve buffer modification here,
	it is done elsewhere, but do preserve match-data.
	(font-lock-fontify-syntactically-region,
	font-lock-fontify-keywords-region): Don't preserve buffer modification
	and temporarily install font-lock-syntax-table here.
	(font-lock-fontify-region): Do it here instead.
	(font-lock-fontify-anchored-keywords): Ensure LIMIT is end of line.
	(font-lock-match-c++-style-declaration-item-and-skip-to-next): No need
	to do end-of-line here now.
	(font-lock-keywords): Doc fix.
	(font-lock-make-face): Add the face to facemenu-unlisted-faces, from
	Boris Goldowsky <boris@gnu.ai.mit.edu>.

	* compile.el (compilation-mode-font-lock-keywords): No leading spaces.

1995-11-08  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* apropos.el (apropos-print): Use buffer *Apropos*, not *Help*.
	(apropos-follow): Don't print a "how to get back" message.

	* awk-mode.el (awk-mode): Require cc-mode.

	* term/pc-win.el (x-display-color-p): Accept optional arg.

	* dos-fns.el (mode-line-format): Modify it, don't override it entirely.

	* startup.el (command-line): Complain about unknown options.

1995-11-07  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* simple.el (shell-command-on-region): Use region-beginning
	and region-end, to put them in the command history.

1995-11-07  Kevin Gallo  <kgallo@microsoft.com>

	* term/win32-win.el: New file.

	* startup.el [win32] (normal-top-level, command-line, command-line-1):
	* mouse.el [win32] (mouse-set-region):
	* faces.el [win32] (make-face, make-face-x-resource-internal):
	* facemenu.el [win32] (face-menu-read-color, list-colors-display,
		facemenu-color-equal, face-menu-get-face):
	Test for 'win32 window system as well as 'x.

	* makefile.nt (install): Change same-dir test to create test file in
	installation tree and thereby support read-only shares.

1995-11-06  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* apropos.el (apropos-follow): Fix error message.

	* startup.el (command-line): Handle = in option only if starts with --.

	* tmm.el (tmm-define-keys): New subroutine.
	(tmm-add-prompt): Use that to define keys in both maps separately.

	* term/internal.el: Rewrite for new case tables.

1995-11-06  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* fill.el (fill-region-as-paragraph): Don't insert extra space
	at end of filled region.

1995-11-06  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* bytecomp.el (byte-force-recompile): Make suitably interactive.

1995-11-04  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* tmm.el: Use f10 as well as M-`.

	* menu-bar.el (menu-bar-tools-menu): Always define GNUS entry.

	* bytecomp.el (byte-compile-associative): Do operations left to right.

1995-11-04  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* make-mode.el (makefile-define-space-face): Don't make face if non-X.

1995-11-04  Lars Magne Ingebrigtsen  <larsi@ifi.uio.no>

	* nnvirtual.el, nntp.el, nnspool.el, nnml.el, nnmh.el, nnmbox.el,
	* nnmail.el, nnkiboze.el, nnheader.el, nnfolder.el, nneething.el,
	* nndoc.el, nndir.el, nnbabyl.el, gnus.el, gnus-vm.el,
	* gnus-vis.el, gnus-uu.el, gnus-score.el, gnus-msg.el, gnus-mh.el,
	* gnus-kill.el, gnus-ems.el, gnus-edit.el, gnus-cite.el,
	* gnus-cache.el, custom.el: New files.

1995-11-03  Erik Naggum  <erik@naggum.no>

	* gnus.el, gnusmail.el, gnuspost.el, gnusmisc.el, gnus-uu.el,
	* mhspool.el, nnspool.el, nntp.el: GNUS release 4 files deleted.

	* hilit19.el: Removed old gnus hooks.
	(gnus-group-mode): Adapt to new Gnus.
	(gnus-summary-mode): Removed.

1995-11-03  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* sendmail.el (mail): Don't change directory for *mail* buffer.
	(sendmail-send-it, mail-recover): Instead, temporarily change to a
	safe directory for just the subprocess.

	* tex-mode.el (tex-send-command): Give meaningful error message.

1995-11-03  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* sendmail.el (mail-yank-clear-headers): Do nothing if
	mail-yank-ignored-headers is nil.

	* pc-select.el (pc-selection-mode): Don't mess with c-mode-map.

	* startup.el (user-mail-address): Doc fix.

	* view.el (view-mode-map): Use ordinary Help command.

1995-11-02  Daniel Pfeiffer <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* sh-script.el (sh-shells): Eliminated variable redundant with
	`interpreter-mode-alist'.
	(sh-beginning-of-command): Take into account \quoted newline.
	(sh-builtins, sh-leading-keywords, sh-other-keywords): Now three
	distinct sets for font-locking.
	(sh-font-lock-keywords-1, sh-font-lock-keywords-2): New variables
	and functions to give the user finer control over how much to fontify,
	including new distinction between keywords and builtins.
	(sh-mode): Use new features of `font-lock-defaults' and adaptation
	to skeleton changes.
	(sh-while): Fix csh, es & rc skeletons.

	* skeleton.el (skeleton-end-hook): Now defvared and responsible for
	pushing out anything following skeleton to next line.  Thus this
	behaviour can now be controlled by modes.
	(skeleton-insert): Parameter `no-newline' removed.
	(skeleton-read): Take this into account.
	(skeleton-internal-1): Less spurious empty lines when wrapping.

	* sh-script.el (sh-remember-variable): Set variable to empty string,
	so as not to mess up subprocesses' environment.  Not so nice for
	completion.

	* two-column.el (minor-mode-map-alist): Use substitute-key-definition
	to find the appropriate bindings for window enlarge/shrink.
	(2C-shrink-window-horizontally, 2C-enlarge-window-horizontally):
	Renamed from shrink-window-horizontally, enlarge-window-horizontally
	to avoid redefining the standard functions.

1995-11-02  Stephen Gildea <gildea@x.org>

	* mh-e.el (mh-make-folder-mode-line): support mh-msg-count.
	(mh-delete-scan-msgs): use fast new mh-goto-msg.
	* mh-utils.el (mh-goto-msg): binary search (much faster!).
	(mh-prompt-for-folder): error if regular file.
	* mh-comp.el: reporter.el support.

1995-11-02  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* rmail.el (rmail-delete-message-hook): New hook.
	(rmail-delete-message, rmail-delete-forward): Run the hook.

	* rmail.el (rmail-mode-hook, rmail-get-new-mail-hook): Add defvars.
	(rmail-show-message-hook): Likewise.

	* simple.el (do-auto-fill): When choosing fill-prefix,
	don't include the left-margin indentation.

	* fill.el (fill-individual-paragraphs): Insist on nonempty header name,
	in the special mailp case.

1995-11-02  Erik Naggum  <erik@naggum.no>

	* ehelp.el (with-electric-help): Add missing argument MINHEIGHT.

1995-11-02  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-utc-string): Use timezone of TIMEVAL for the
	correction, not the current one.
	(vc-rcsdiff-knows-brief): New variable.
	(vc-rcs-lock-from-diff): Use it.

	* vc.el (vc-backend-diff): Use new variable vc-rcsdiff-knows-brief.

1995-11-01  Karl Heuer  <kwzh@gnu.ai.mit.edu>

	* make-mode.el: Renamed from makefile.el.

	* term/x-win.el: Don't require initial whitespace in vendor name.

	* tpu-edt.el (tpu-set-mode-line): Add element for column number.

1995-10-31  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* cc-mode.el (c-recognize-knr-p): Default now t.

	* server.el (server-log): Record the current time.
	End with newline whenever STRING doesn't end with one.

	* sh-script.el (sh-mode-map): Put sh-execute-region on C-M-x.
	Put executable-interpret on C-c C-x.

1995-10-31  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* loadup.el: Always load menu-bar.

	* msb.el (msb--toggle-menu-type): Pass t as arg.

	* startup.el (command-line-1): Say how to invoke menu bar, if not X.

	* jka-compr.el (auto-compression-mode): Make arg optional.

	* loadup.el: Fix previous change.

1995-10-30  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* mailabbrev.el (mail-abbrev-syntax-table): Fix initialization.

	* startup.el (command-line): If not X, do enable menu bar.

1995-10-30  Stephen Gildea  <gildea@x.org>

	* time-stamp.el: Update some doc strings.
	(time-stamp-strftime): Ignore some additional chars we might want
	to use in the future for additional controls or parameters.
	(time-stamp): Minor optimizations.

1995-10-30  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* help.el (describe-function): Call documentation just once.
	(describe-key): Likewise.

	* files.el (set-auto-mode): If mode cmds move point, obey them.

	* help.el (describe-variable): Don't call substitute-command-keys.

	* rmailsum.el (rmail-summary-overlay): Make it a permanent local.

	* vmsx.el: File deleted.

1995-10-30  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* makefile.el (makefile-define-space-face): Use frame-parameters for
	frame and display attributes.

1995-10-29  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* loadup.el (finding existing executable versions):
	Add a period to the end of BASE.

	* arc-mode.el (archive-zoo-summarize): Handle archives
	with long file names.

	* disass.el (disassemble-internal): Handle lazy-loaded doc strings.
	(disassemble-1): Handle lazy-loaded bytecode objects.

	* etags.el (select-tags-table): Don't modify the value of
	tags-table-list.

1995-10-29  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* tmm.el (tmm-old-mb-map): Initialize to nil.
	(tmm-delete-map): Don't use tmm-old-mb-map if nil.
	(tmm-add-prompt): Bind C-n and C-p.
	Put only the shortcuts into the completion buffer's map.
	Produce the completion list by hand so as not to sort it.
	(tmm-prompt): Start at the first item in the menu.
	Don't reverse tmm-km-list; reverse compl-list instead.
	Use try-completion in last-ditch attempt to find a match.
	Rename compl-list to history.
	(tmm-get-keybind): Put more local bindings last in a menu.
	Major rewrite.
	(tmm-menubar): Handle menu-bar-final-items.
	(tmm-remove-shortcuts): Function deleted.
	(tmm-add-shortcuts): If we can't find a letter shortcut,
	use a numeric shortcut.

	* simple.el (column-number-mode): Make default value nil.

	* cc-mode.el (c-guess-basic-syntax): Verify c-access-key is non-nil
	before looking for it.

	* bytecomp.el (byte-recompile-directory): New arg FORCE.
	(byte-force-recompile): New function.

	* case-table.el (describe-buffer-case-table): Use set-char-table-range.

1995-10-28  Erik Naggum  <erik@naggum.no>

	* iso02-syn.el: Adapt to new char-table implementation.  Fix name
	of file in the first line, part number syntax of ISO standards,
	and `provide' clause.  Register file with RCS.

	* ange-ftp.el (ange-ftp-ftp-name,ange-ftp-replace-name-component):
	Use posix-string-match for complex regexp in `ange-ftp-name-format'.
	(ange-ftp-process-sentinel): Quote final * in buffer name match.

1995-10-27  Noah Friedman  <friedman@prep.ai.mit.edu>

	* rlogin.el (rlogin): If `buffer' arg is a buffer object,
	initialize `buffer-name' to the buffer name.
	Set `buffer' to buffer actually created or returned by
	get-buffer-create.
	Set `proc' to the process actually in the new buffer, not the
	process with the name buffer-name; they may not be the same if
	buffers have been renamed.

1995-10-26  Ed Reingold  <reingold@spiff.gnu.ai.mit.edu>

	* cal-chinese.el (calendar-chinese-sexagisimal-name): New
	function.
	(holiday-chinese-new-year,calendar-chinese-date-string): Use it.

1995-10-26  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (set-visited-file-name, basic-save-buffer):
	Set buffer-file-number consistently with find-file-noselect.

1995-10-26  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* font-lock.el: General reorganisation.
	(font-lock-fontify-syntactically-region): Renamed from
	font-lock-fontify-region.  Assume that region end-points are at bol.
	Don't bother wrapping with save-excursion; caller does this.
	(font-lock-fontify-keywords-region): Renamed from
	font-lock-hack-keywords.  Call font-lock-fontify-anchored-keywords if
	car of HIGHLIGHT is not a number (i.e., is another MATCHER, not a
	MATCH), for new MATCH-ANCHORED font-lock-keywords structure.
	(font-lock-fontify-region): Use them.
	(font-lock-after-change-function): Use it.  Don't bother invalidating
	font-lock-cache-position; called function does this.
	(font-lock-keywords-only): Renamed from font-lock-no-comments.
	(font-lock-maximum-decoration, font-lock-maximum-size): Doc fix for new
	functionality.
	(font-lock-set-defaults, font-lock-mode): Cope if they are lists.
	(font-lock-keywords): Doc fix for new MATCH-ANCHORED structure and
	new OVERRIDE values.
	(font-lock-fontify-anchored-keywords): New function for processing the
	new MATCH-ANCHORED structure.
	(font-lock-fillin-text-property, font-lock-prepend-text-property,
	font-lock-append-text-property): New text property functions.
	(font-lock-apply-highlight): Use them for new OVERRIDE values.
	(scheme-font-lock-keywords): New variable.
	(c-font-lock-keywords-3, c++-font-lock-keywords-3): New variables.
	(font-lock-defaults-alist): Use them for Scheme, C and C++ modes.

	* fast-lock.el (fast-lock-read-cache): Set fast-lock-cache-filename.
	(fast-lock-cache-data): Don't set it here via caller's local variable.

	* fortran.el (fortran-mode): Addition for font-lock-defaults.
	(fortran-font-lock-keywords-3): Rewrite using MATCH-ANCHORED structure.

	* rmail.el (rmail-font-lock-keywords): Better citation regexp.

	* sendmail.el (mail-font-lock-keywords): Likewise.

1995-10-26  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* morse.el: New file.

1995-10-25  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* cc-mode.el (c-mode): Add autoload.

	* loadup.el: Don't load c-mode.
	* loaddefs.el: Get rid of cplus-md.el; add cc-mode.el.

	* cmacexp.el: Require cc-mode.

	* hideif.el: Provide hideif; require cc-mode.

	* help.el (describe-key, describe-key-briefly): For a mouse click,
	go to its buffer and position before looking up the key.

1995-10-25  Gregor Schmid  <gs@ivu-berlin.de>

	* tcl-mode.el: Add support for imenu.
	Add support for font-lock-mode (thanks to <simonm@mail.esrin.esa.it>).

1995-10-24  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (set-visited-file-name): Abbreviate buffer-file-name.

	* mouse.el (mouse-drag-region): Set end-of-range after
	calling mouse-scroll-subr.
	(mouse-set-region): Don't do the sit-for on a pc frame.

1995-10-24  Brian D. Carlstrom  <bdc@ai.mit.edu>

	* gud.el (gud-dbx-directories): New variable.
	(gud-dbx-massage-args): Use gud-dbx-directories.
	(gud-dbx-file-name): New function.
	(gud-irixdbx-marker-filter): Use gud-dbx-file-name.
	(gud-dbx-file-file): Use gud-dbx-file-name.

	* gud.el (gud-filter): Fix previous change.

1995-10-24  Ed Reingold  <reingold@spiff.gnu.ai.mit.edu>

	* cal-menu.el (calendar-mouse-print-dates): Fix entry for Chinese
	calendar.

	* cal-chinese.el: Completely rewritten!

1995-10-24  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* add-log.el (get-method-definition, get-method-definition-1):
	Rename var md to get-method-definition-md and defvar it.

1995-10-23  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* ange-ftp.el (internal-ange-ftp-mode):
	Set comint-password-prompt-regexp locally to not match anything.

	* informat.el (Info-validate, Info-validate-node-name):
	Use buffer-substring-no-properties.
	(Info-tagify, batch-info-validate, Info-validate-tags-table): Likewise.

	* informat.el (Info-validate-tags-table): Change handling
	of newline in the loop reading node names.

	* info.el (Info-following-node-name, Info-extract-menu-node-name)
	(Info-select-node): Use buffer-substring-no-properties.

1995-10-22  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* case-table.el (copy-case-table): New function.
	(set-case-syntax-delims, set-case-syntax-pair, set-case-syntax):
	Clear out the three extra slots.

1995-10-22  Erik Naggum  <erik@naggum.no>

	* derived.el (derived-mode-init-mode-variables): Make proper
	syntax-table.

	* iso-syntax.el: Handle new case-table implementation.

1995-10-21  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* msb.el: Require cl only when compiling.

1995-10-21  Axel Boldt  <boldt@math.ucsb.edu>

	* electric.el (Electric-command-loop): Don't display a prompt
	if 2nd arg equals or returns 'noprompt.

	* ehelp.el: Fix key bindings.
	(electric-help-mode): Use mouse-leave-buffer-hook.
	(electric-help-retain): Remove mouse-leave-buffer-hook.
	(with-electric-help): New argument minheight.
	(electric-help-execute-extended): New function.
	(electric-help-ctrl-x-prefix): New function.
	(electric-help-command-loop): Make messages more consistent.
	Include strategic sit-for 0, so that
	pos-visible-in-window-p will return the right thing.
	Make 2nd arg of Electric-command-loop return 'noprompt if we
	are in isearch-mode.
	Eval to-be-executed at the very end.
	(ehelp-map): Electrify apropos too.

1995-10-20  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* noutline.el (outline-view-change-hook): New hook variable.
	(outline-flag-region): Run the hook.

	* informat.el (Info-validate-tags-table): Fix the scan of the
	tags table checking that the positions are right.
	(Info-validate): Use buffer-substring-no-properties.

	* dabbrev.el (dabbrev-expand): When no more expansions,
	Put back the original abbrev with its original case pattern.
	(dabbrev--find-expansion): Move buffers that are visible on the screen
	to the front of the list to be searched.

	* startup.el (normal-top-level): Set auto-save-list-file-name later,
	after calling command-line.

1995-10-20  Erik Naggum  <erik@naggum.no>

	* comint.el (comint-exec-1): Fix previous change.

1995-10-20  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* add-log.el (add-log-current-defun):
	Handle `private', `public' in C++ class definitions.

1995-10-19  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* isearch.el (isearch-message-prefix):
	Change "wrapped" to "overwrapped" when past original start point.

	* comint.el (comint-exec-1): Don't alter EMACS envvar
	if it's already defined.

	* cplus-md.el (calculate-c++-indent): Skip over paren-group
	when looking back to determine context of a top-level line.
	Don't treat a line starting with } as a continuation.

1995-10-18  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* emacsbug.el (report-emacs-bug): Don't mention
	system-configuration-options if it is empty.
	Make it clearer what that text is.

1995-10-17  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* tex-mode.el (tex-start-of-header): Now a regexp.
	(tex-end-of-header): Likewise.
	(plain-tex-mode, latex-mode, slitex-mode, tex-region):
	Changed accordingly.

	* pc-select.el (pc-selection-mode): Add autoload cookie.

	* pc-select.el: New file.

1995-10-16  Rolf Ebert  <re@waporo.muc.de>

	* ada-mode.el:
	All doc strings changed to comply with standard Emacs conventions.
	(ada-mode): Support new font-lock-mode.
	(ada-format-paramlist): Changed all `accept' to `access'.
	(ada-insert-paramlist): Changed all `accept' to `access'.
	(ada-in-comment-p): Use standard Emacs way `parse-partial-sexp'.
	(ada-font-lock-keywords-1): Change order of some alternatives.

1995-10-16  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* cc-mode.el (c-emacs-features): Don't expect integer in syntax table.

	* flow-ctrl.el (enable-flow-control): Use a char-table.

1995-10-15  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* mailabbrev.el (mail-abbrev-syntax-table): Rewrite using
	map-char-table.

	* derived.el (derived-mode-merge-syntax-tables): Rewrite using
	map-char-table.

	* hippie-exp.el (he-transfer-case): Fix typo in prev change.

1995-10-13  Michael Kifer  <Michael Kifer <kifer@cs.sunysb.edu>>

	* ediff.el (ediff-version): is now autoloaded.
	* ediff-init.el: Moved defsubsts up.
	* ediff-hook.el: Now defines [window] in menu-bar-ediff-menu.

1995-10-13  Michael Kifer  <Michael Kifer <kifer@cs.sunysb.edu>>

	* viper.el (vip-set-hooks): Use view-mode-hook in emacs and view
	hook in xemacs.
	(vip-read-string-with-history): minibuffer-setup-hook no longer
	waits for the user to type, if there are unread events.
	Added (vip-leave-region-active) to all simple movement commands.
	Viper now understands syntactic tables.
	Harnessed view-minor-mode.
	(vip-read-string-with-history,vip-search): won't pause inside
	macros any more.
	* viper-mous.el (vip-surrounding-word): modified to understand
	tripple clicks.
	* viper-util.el (vip-leave-region-active): new function.
	* viper-ex.el (ex-write): uses better defaults.
	* viper-macs.el (vip-record-kbd-macro): correctly escapes `.' and
	`[' now.

1995-10-13  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* help.el (variable-at-point, function-called-at-point):
	Switch temporarily to emacs-lisp-mode-syntax-table.

	* goto-addr.el: New file.
	* browse-url.el: New file.

1995-10-13  Anders Holst (aho@nada.kth.se)

	* hippie-exp.el:
	(hippie-expand): Removed bug - don't undo from another buffer.
	(he-reset-string): Removed bug - don't move markers.
	(he-capitalize-first): New function, defining new "case".
	(he-transfer-case): New function.
	(he-transfer-case-ok): Function removed.
	(he-substitute-string,he-ordinary-case-p,he-string-member): Use the
	new functions above, for the new case handling.
	(he-file-name-chars): New variable.
	(he-file-name-beg): Use `he-file-name-chars'.
	(he-file-name-nondirectory,he-file-name-directory,
	he-file-directory-p,he-concat-directory-file-name): New functions
	to handle VMS and PC filename formats more accurately.
	(try-complete-file-name,try-complete-file-name-partially): Use the
	new functions above.
	(try-expand-line-all-buffers,try-expand-list-all-buffers,
	try-expand-dabbrev-all-buffers): Use `case-fold-search' from the
	original buffer.
	(he-line-beg): Removed bug that made point move.
	(try-expand-all-abbrevs): Check that abbrev tables exist before use.
	(try-expand-dabbrev-visible): New try function.
	(he-search-window): New variable used by `try-expand-dabbrev-visible'.
	(he-dab-search-regexp): Function removed.
	(he-dab-search): Renamed to `he-dabbrev-search'.
	(he-dabbrev-search): Find only whole matching symbols.
	(he-dabbrev-skip-space): New variable.
	(he-dabbrev-beg): Use `he-dabbrev-skip-space'.
	(try-expand-dabbrev-from-kill,he-dabbrev-kill-search): New try
	function, with requisites.
	(try-expand-whole-kill,he-whole-kill-search,he-kill-beg): New try
	function, with requisites.
	(he-search-loc2): New variable, used by `try-expand-whole-kill'
	and `try-expand-dabbrev-from-kill'.
	(hippie-expand-try-functions-list): Added the try functions
	`try-complete-file-name-partially', `try-expand-dabbrev-from-kill'
	and `try-complete-lisp-symbol-partially'.
	(Several functions): Adjusted and corrected use of `he-tried-table'.

1995-10-13  Ed Reingold  <reingold@spiff.gnu.ai.mit.edu>

	* cal-tex.el: Minor fixes to doc strings and other small changes.

1995-10-12  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* help.el (variable-at-point, function-called-at-point):
	Fix revious changes.

	* iso-transl.el: Handle aliases dead-acute,...

1995-10-12  Ed Reingold  <reingold@cs.uiuc.edu>

	* cal-tex.el: New file.

	* calendar.el: Add autoloads and key definitions for cal-tex.el.

	* cal-menu.el: Add menu items for cal-tex.el.

1995-10-11  Robert J. Chassell  <bob@hill.gnu.ai.mit.edu>

	* texinfmt.el (texinfo-unsupported): Handle commands in all capitals.

1995-10-11  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (find-alternate-file-other-window): New function.

1995-10-11  Michael Kifer  <kifer@cs.sunysb.edu>

	* menu-bar.el: Moved (define-key menu-bar-ediff-menu ...) to
	ediff-hook.el, as menu-bar-ediff-menu is not defined yet.

1995-10-11  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* fill.el (adaptive-fill-function): Change defun to defvar.

1995-10-10  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* simple.el (next-completion): Specify the LIMIT arg when
	searching for text properties.

	* help.el (function-called-at-point, variable-at-point):
	Don't back up if we start at the beginning of a symbol.

	* disp-table.el (display-table-slot, set-display-table-slot):
	Get slot number from a property of its name.
	Eliminate the type-checking.
	(make-display-table): Call make-char-table the new way.
	(describe-display-table): Use slot names to access slots.
	(display-table): Give it the char-table-extra-slots property.
	(display-table-char-p, display-table-vector-p): Functions deleted.
	(display-table-slot-name-alist): Variable deleted.

1995-10-09  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* mail-utils.el (mail-strip-quoted-names): Preserve white space
	after comma when stripping text outside of <> delims.

1995-10-09  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* view.el: Doc fixes.
	(view-highlight-face): New variable.
	(view-search): Use that variable.

1995-10-09  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* etags.el (tags-table-check-computed-list): Map
	 tags-expand-table-name over lists of included tables.

1995-10-09  Erik Naggum  <erik@naggum.no>

	* disp-table.el: New implementation with char-tables.

1995-10-09  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* xt-mouse.el: New file.

1995-10-09  Noah Friedman  <friedman@prep.ai.mit.edu>

	* mailabbrev.el (mail-abbrev-syntax-table): Use `equal' instead of
	`=', in case elts of syntax table are lists, not integers.

1995-10-08  Erik Naggum  <erik@naggum.no>

	* ada-mode.el (ada-gen-treat-proc): Bind `procname' and `functype'.

	* view.el (view-exit): Delete view-overlay only if it exists.

1995-10-08  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* server.el (server-start): Try both full hostname and shortened
	hostname when deleting the socket file.

	* gud.el (gud-filter): Move the gud-display-frame call
	outside of the save-excursion.  New var process-window
	controls which window to do it in.

1995-10-07  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* subr.el (make-syntax-table): Use nil for "inherit".

1995-10-06  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* bytecomp.el (byte-compile-from-buffer): Bind print-level.

	* simple.el (newline): Call barf-if-buffer-read-only.

	* iso-acc.el: Fix typo calling iso-accents-customize.
	(iso-accents-compose): If this-command is non-nil, do prompt.

1995-10-05  Michael Kifer  <kifer@cs.sunysb.edu>

	* ediff-meta.el: new file.
	* ediff-hook.el: new file.
	* ediff.el: Moved menubar definitions to a new file, ediff-hook.el
	(ediff-files,ediff-merge-files): better file-name defaults.
	(ediff-split-string): new function.
	(ediff-exec-process): now handles diff args separated by space.
	(ediff-backup-extension): new variable.
	Replaced -hooks with -hook.
	(ediff-revision-key): variable deleted.
	* ediff-util.el (ediff-toggle-read-only,ediff-read-file-name):
	replaced abbreviate-file-name with ediff-abbreviate-file-name.
	(ediff-documentation): bug fix.
	(ediff-setup,ediff-really-quit): modified to work with Ediff
	session groups.
	(ediff-quit,ediff-really-quit): now ask if the user wants to delete
	buffers.
	* ediff-init.el (ediff-abbreviate-file-name): function modified.
	(ediff-truncate-string-left): new function.
	(ediff-strip-last-dir,ediff-key-press-event-p,ediff-event-point,
	ediff-event-buffer): new functions.
	(ediff-frame-has-menubar,ediff-protect-meta-chars): functions deleted.
	* ediff-wind.el (ediff-make-frame-position): fixed bugs.
	(ediff-control-frame-parameters): fixed defaults.
	* ediff-diff.el (ediff-setup-diff-regions,ediff-setup-diff-regions3,
	ediff-setup-fine-diff-regions): functions modified.
	(ediff-shell-command,ediff-shell-command-sentinel,
	ediff-shell-command-filter): deleted.
	(ediff-exec-process,ediff-process-sentinel,ediff-process-filter): new.

1995-10-05  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* appt.el (appt-disp-window): Call raise-frame.

	* view.el (View-search-regexp-forward, View-search-regexp-backward):
	If arg is empty, use view-last-regexp.
	(view-overlay): New variable, local in all buffers.
	(view-search): Highlight the match using view-overlay.
	(view-exit): Delete view-overlay.

1995-10-04  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* desktop.el (desktop-outvar): Support truncation.
	(desktop-globals-to-save): Doc fix.

	* startup.el (command-line): Init user-mail-address here,
	after reading init file.
	(normal-top-level): Not here.

	* gnuspost.el (gnus-inews-do-fcc): Use mail-file-babyl-p.

	* gnus.el (gnus-summary-save-in-mail): Use mail-file-babyl-p.

	* startup.el (auto-save-list-file-prefix): New variable.
	(normal-top-level): Use it.

	* files.el (recover-session): Use auto-save-list-file-prefix.

	* sendmail.el (mail-signature-file): New variable.
	Fix various doc strings to mention it.
	(mail-signature): Use mail-signature-file.

	* unrmail.el (unrmail): Call rmail-toggle-header.

	* isearch.el (isearch-forward): Doc fix.

1995-10-04  Andre Spiegel  <spiegel@pogo.gnu.ai.mit.edu>

	* vc.el (vc-next-action-on-file): When locking the latest trunk
	version, use empty version number.

1995-10-01  Noah Friedman  <friedman@prep.ai.mit.edu>

	* terminal.el (te-escape): Remove spurious partial duplicate
	definition.

1995-10-01  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (recover-session-finish): Ask only about files that
	have auto-save files now.  Don't put "temp" into temp file names.

1995-09-30  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* files.el (cd): Fix interactive spec to require match if there is
	no CDPATH.

1995-09-28  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* comint.el (comint-password-prompt-regexp): Recognize
	Old Password and New password.

1995-09-28  Michael Ernst  <mernst@rice.edu>

	* ispell.el (ispell-message-text-end): Match reporter.el bug reports.

1995-09-28  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* help.el (print-help-return-message): Handle lists in
	special-display-regexps and same-window-regexps.  Also in
	special-display-buffer-names and same-window-buffer-names

	* files.el (interpreter-mode-alist): Handle nawk.

1995-09-27  Richard Stallman  <rms@pogo.gnu.ai.mit.edu>

	* sendmail.el (sendmail-send-it): Handle FCC after all text changes.
	(mail-do-fcc): Don't add From field here.

	* undigest.el (undigestify-rmail-message): Better error messages.

1995-09-26  Richard Stallman  <rms@pogo.gnu.ai.mit.edu>

	* ange-ftp.el (ange-ftp-dumb-unix-host): Avoid error if HOST is nil.

1995-09-25  Richard Stallman  <rms@pogo.gnu.ai.mit.edu>

	* add-log.el (add-log-current-defun): Ignore quotes before fcn name.

1995-09-25  Karl Heuer  <kwzh@nutrimat.gnu.ai.mit.edu>

	* info.el (Info-title-face-alist): New var.
	(Info-fontify-node): Check for headings that are `underlined' with
	characters on the following line.

1995-09-25  Richard Stallman  <rms@pogo.gnu.ai.mit.edu>

	* help.el (help-mode): Call view-mode.

	* diary.el (mark-sexp-diary-entries): Add \ for C-M-f's sake.

	* view.el (view-mode-enter): Renamed from view-mode.  Callers changed.
	Don't create local vars here.  Set view-mode-auto-exit.
	Don't change local map--just set view-mode.
	(view-mode): New function toggles minor mode in the usual way.
	(view-mode-map): Put this on minor-mode-map-alist.
	(view-mode-exit): Do the exit actions only if view-mode-auto-exit.
	(View-scroll-lines-forward): Exit only if view-scroll-lines-forward.
	(view-mode-auto-exit, view-old-buffer-read-only)
	(view-old-Helper-return-blurb, view-scroll-size, view-last-regexp)
	(view-exit-action, view-return-here, view-exit-position):
	Defvar them and make them always-local.

1995-09-25  Erik Naggum  <erik@naggum.no>

	* startup.el (command-line-1): --eval: Don't print the value.
	(command-line-1): --insert: Don't complain on --insert=file.

1995-09-24  Richard Stallman  <rms@pogo.gnu.ai.mit.edu>

	* replace.el (occur): Indent better for matches that contain newlines.

1995-09-23  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* jka-compr.el (auto-compression-mode): Add autoload cookie.
	Renamed from toggle-auto-compression.
	(toggle-auto-compression): Define as alias.

1995-09-22  Erik Naggum  <erik@naggum.no>

	* cl-macs.el (get-setf-method): Protect caller's match-data from
	string-match.

1995-09-22  Karl Heuer  <kwzh@nutrimat.gnu.ai.mit.edu>

	* edt.el (edt-setup-default-bindings): Revert function is
	revert-buffer, not revert-file.

1995-09-22  Torbjorn Einarsson <T.Einarsson@clab.ericsson.se>

	* f90.el: Major revision.
	Much improved and quicker highlighting using font-lock.
	Support for hilit19 removed.
	Support for imenu added.
	Changed indentation for continue statements.
	Added treatment of preprocessor directives.
	(f90-directive-comment-re) is now a regular expression.
	Many bug fixes.

1995-09-22  Ed Reingold  <reingold@spiff.gnu.ai.mit.edu>

	* cal-menu.el (calendar-mouse-chinese-date): New function.
	(calendar-mouse-print-dates): Use it.

1995-09-21  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* sendmail.el (mail-do-fcc): Erase the ` mail-temp' buffer.
	(mail-do-fcc): Clear read-only flag in ` mail-temp' buffer.

	* undigest.el (undigestify-rmail-message): Scan back as far as start
	of message, to find end of digest.

	* rmailout.el (rmail-file-p): Function moved to mail-utils.el
	ad renamed to mail-file-babyl-p.
	(rmail-output, rmail-output-to-rmail-file): Use new name.
	* mail-utils.el (mail-file-babyl-p): Function moved from
	rmail.el and renamed.

	* sendmail.el (mail-file-babyl-p): Function deleted.
	(sendmail-send-it): Load mail-utils first thing.

1995-09-21  Erik Naggum  <erik@naggum.no>

	* byte-opt.el (byte-boolean-vars): Update list to reflect actual
	DEFVAR_BOOL symbols in the C code.

1995-09-21  Karl Heuer  <kwzh@nutrimat.gnu.ai.mit.edu>

	* edt.el (edt-set-screen-width-80, edt-set-screen-width-132):
	If a terminal-specific function exists, call it.
	* edt-vt100.el (edt-set-term-width-80, edt-set-term-width-132):
	Terminal-specific functions.
	Don't redefine edt-set-screen-width-80 and edt-set-screen-width-132.

	* terminal.el (te-escape, te-escape-help): Handle non-ASCII events.

1995-09-19  Edward M. Reingold  <reingold@emr.cs.uiuc.edu>

	* cal-chinese.el: New file.

	* cal-coptic.el: New file.

	* cal-julian.el: New file.  All Julian calendar related code moved here
	from calendar.el, holidays.el, and diary-lib.el.

	* cal-iso.el: New file.  All ISO calendar related code moved here
	from calendar.el and diary-lib.el.

	* cal-islamic.el: New file. All Islamic calendar related code
	moved here from calendar.el, holiday.el, diary-lib.el, and
	diary-ins.el.

	* cal-hebrew.el: New file. All Hebrew calendar related code
	moved here from calendar.el, holiday.el, diary-lib.el, and
	diary-ins.el.

	* cal-move.el: New file.  All functions related to movement in the
	calendar moved here from calendar.el.

	* diary.el: New file.  Functions related to the diary moved from
	diary-lib.el and diary-ins.el.

	* holidays.el (holiday-hebrew):  Moved to cal-hebrew.
	(holiday-islamic): Moved to cal-islamic.
	(holiday-julian): Moved to cal-julian.

	* cal-x.el (calendar-setup):  Moved to calendar.el.

	* diary-lib.el: Deleted.
	(diary-date, diary-remind): New functions.
	(list-sexp-diary-entries): Mention them in doc string.
	(diary-remind-message, marking-diary-entries,
	marking-diary-entry): New variables.
	(diary-mark-sexp-diary-entries, mark-diary-entries): Rewritten to
	accomodate marking-diary-entries.
	(diary-sexp-entry): Fix indentation.
	(diary-chinese-date, diary-coptic-date, diary-ethiopic-date):
	Do autoloads.
	(diary-islamic-date, list-islamic-diary-entries,
	mark-islamic-diary-entries, mark-islamic-calendar-date-pattern):
	Moved to cal-islamic.el.
	(diary-hebrew-date, list-hebrew-diary-entries,
	mark-hebrew-diary-entries, mark-hebrew-calendar-date-pattern):
	Moved to cal-hebrew.el.
	Everything else moved to diary.el.

	* diary-ins.el: Deleted.
	(insert-islamic-diary-entry, insert-monthly-islamic-diary-entry,
	insert-yearly-islamic-diary-entry): Moved to cal-islamic.el.
	(insert-hebrew-diary-entry, insert-monthly-hebrew-diary-entry,
	insert-yearly-hebrew-diary-entry): Moved to cal-hebrew.el.
	Everything else moved to diary.el.

	* cal-menu.el (calendar-mouse-print-dates): Add Chinese and Coptic
	dates; fix astro date message.
	(calendar-mouse-2-date-menu): Add dayname to menu.

	* cal-french.el (french-calendar-special-days-array,
	calendar-french-date-string): Fix accents.
	(calendar-goto-french-date): Use reverse instead of nreverse; fix
	accents.
	(french-calendar-epoch): New variable.
	(calendar-french-from-absolute, calendar-absolute-from-french): Use it.

	* cal-dst.el: Fix commentary.
	(dst-adjust-time): Moved and renamed from solar.el.
	(dst-in-effect): New function.

	* solar.el (solar-equinoxes-solstices, solar-ephemeris-correction,
	solar-equinoxes/solstices): Rewritten.
	(solar-apparent-longitude-of-sun): Deleted.
	(solar-longitude, solar-date-next-longitude): New functions.
	(solar-adj-time-for-dst): Renamed dst-adjust-time and moved to
	cal-dst.el.
	(solar-sin-degrees, solar-cosine-degrees, solar-tangent-degrees):
	Take angle mod 360.0.
	(solar-tangent-degrees): Change to macro.

	* calendar.el (calendar-mod, calendar-absolute-from-astro,
	calendar-astro-from-absolute): New functions.
	(calendar-astro-date-string, calendar-goto-astro-day-number): Use
	them.  Autoload holiday-chinese-new-year,
	calendar-goto-chinese-date, calendar-print-chinese-date,
	calendar-chinese-date-string, calendar-goto-coptic-date,
	calendar-print-coptic-date, calendar-coptic-date-string,
	calendar-goto-ethiopic-date, calendar-print-ethiopic-date,
	calendar-ethiopic-date-string, calendar-one-frame-setup, and
	calendar-two-frame-setup.  (oriental-holidays): New variable for
	Chinese New Year.  (calendar-mode-map): Put Chinese and Coptic
	calendar functions on keys.  (calendar-setup): Moved here from
	cal-x.el.  (diary-file): Mention Chinese, Coptic, and Ethiopic
	dates.  (calendar-goto-today, calendar-forward-month,
	calendar-forward-year, calendar-backward-month,
	calendar-backward-year, scroll-calendar-left,
	scroll-calendar-right, scroll-calendar-left-three-months,
	scroll-calendar-right-three-months,
	calendar-cursor-to-nearest-date, calendar-forward-day,
	calendar-backward-day, calendar-forward-week,
	calendar-backward-week, calendar-beginning-of-week,
	calendar-end-of-week, calendar-beginning-of-month,
	calendar-end-of-month, calendar-beginning-of-year,
	calendar-end-of-year, calendar-cursor-to-visible-date,
	calendar-goto-date, calendar-goto-iso-date): Moved to cal-move.el.
	(calendar-goto-julian-date): Moved to cal-julian.
	(calendar-cursor-to-date, generate-calendar-month): Consider the
	space next to a one-digit date as being on that date.

	* cal-mayan.el (calendar-mayan-tzolkin-from-absolute): Use them.
	(mayan-adjusted-mod): Moved to calendar.el and renamed calendar-mod.

	* lunar.el (lunar-new-moon-time, lunar-new-moon-on-or-after) New
	functions.


1995-09-18  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* subr.el (substitute-key-definition): Do recursively scan
	where KEYMAP has nothing at all.

	* mouse.el (C-down-mouse-1): Use buffer menu, not font menu.
	(S-down-mouse-1): Put font menu here.

	* mouse.el (mouse-drag-vertical-line): New function.
	(mouse-scroll-min-lines): New variable.
	(mouse-scroll-subr): Use it.

1995-09-17  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* files.el (find-alternate-file): Kill any preexisting ` **lose**' buf.

1995-09-14  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* dunnet.el (dun-climb): Handle unknown object name.
	(dun-objnames): Add "palm" as alias for "tree".

	* indent.el (indent-for-tab-command): Get the prefix arg
	and pass it along to indent-line-function if it isn't nil.

1995-09-14  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-fetch-master-properties): Call "cvs status"
	in the right directory, passing only the nondirectory part of
	the file name.
	(vc-find-cvs-master): Bind `mtime' locally instead of using it
	as a free variable.

1995-09-12  Erik Naggum  <erik@naggum.no>

	* dired-x.el: Remove `dired-up-directory'.
	(dired-find-buffer-nocreate): Add optional argument `mode' like
	the function it redefines from dired.el.

	* dired.el (dired-up-directory): Add optional argument
	`other-window' to obviate the need to redefine it in dired-x.el.

1995-09-12  Richard Stallman  <rms@whiz-bang.gnu.ai.mit.edu>

	* files.el (auto-mode-alist): .pl is now Perl.

	* delsel.el (clipboard-yank): Add delete-selection property.

1995-09-11  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* server.el (server-process-filter): Ignore lines that don't start
	with `Error:' or `Client:'.

1995-09-08  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* dired.el (dired-internal-noselect): Set dired-directory
	when refreshing a buffer that displays a list of files.
	(dired-find-buffer-nocreate): Handle the case when
	dired-directory is a list.
	(dired-sort-other): Don't set mode-name if we are not in
	dired-mode.

	* vc.el (vc-dired-mode): Now a major mode derived from dired-mode.
	(vc-directory): Take DIRNAME as an argument.  Ask for it in
	the minibuffer.  Don't kill pre-existing vc-dired buffers
	(dired now re-uses the right one).
	(vc-file-tree-walk): New argument DIRNAME.  Updated all callers.
	(vc-dired-update): New function.  `g' in vc-dired-mode calls it.
	(vc-dired-reformat-line): Handle different ls -l formats.

	* vc-hooks.el (vc-locking-user): Fixed wrong parentheses.

1995-09-08  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* register.el: Rename all register-name args to `register'.

1995-09-07  Paul Eggert  <eggert@twinsun.com>

	* env.el (setenv): Call set-time-zone-rule when setting TZ.

1995-09-07  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* text-mode.el (center-line): New arg NLINES.
	Do nothing for lines that are too wide.

	* hexl.el (hexl-current-address): New arg VALIDATE.
	Handle point values in the ASCII text section and in the addresses.
	(hexl-insert-char): Handle point located in the ASCII text.

1995-09-06  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* info.el (Info-suffix-list): Add .inf to MSDOS list.

	* ange-ftp.el (ange-ftp-gwp-filter): Go to process buffer
	before getting text from it.

	* mouse.el (mouse-drag-region): Record where the mouse drag has reached
	and use that to adjust the drag event before replaying it.

	* gud.el (gud-filter): Save up text that arrives while processing
	previous text.

1995-09-06  Fred Pierresteguy  <F.Pierresteguy@frcl.bull.fr>

	* rmailsum.el (rmail-summary-construct-io-menu): Use all of FILES.
	Also disable the menu instead of not displaying it, if FILES is empty.

1995-09-05  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* browse-url.el: New file.

1995-09-04  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* mailabbrev.el (mail-interactive-insert-alias):
	Call mail-abbrev-expand-hook.

1995-09-02  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* info.el (info-insert-file-contents): Use info-insert-file-contents-1
	to set FULLNAME.  Use call-process-region to run the decode program.
	(Info-find-node): Use info-insert-file-contents-1.
	(info-insert-file-contents-1) [MSDOS]: Don't use the dot in SUFFIX
	if FILENAME already has one.

	* dired.el (dired-internal-noselect): New arg MODE.
	If it's non-nil, switch to that nil.
	(dired-find-buffer-nocreate): New arg MODE.

	* mouse.el (mouse-drag-region): Store the right end position
	in the drag-event before replaying it at the end.

	* files.el (auto-mode-alist): Handle .f90 files.

	* dired.el (dired-internal-noselect): Use dirname when finding
	existing buffer.

1995-08-31  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* cc-compat.el: New file.

	* sendmail.el (sendmail-send-it): Use user-mail-address.

1995-08-31  Barry Warsaw  <bwarsaw@anthem (Barry Warsaw)>

	* cc-mode.el (c-backslashify-current-line): Obsolete.
	(c-append-backslash, c-delete-backslash): Taken from c-mode.el.
	(c-backslash-region): Likewise.

	* cc-mode.el (c-indent-defun): Watch out for point being on the
	first top-level open brace in the buffer.

	* cc-mode.el (c-copy-tree, c-mapcar-defun): Define functions only
	available in XEmacs 19.12, or Emacs 19 + lucid.el.

	* cc-mode.el (c-lineup-ObjC-method-call): New implementation
	better handles 1. indentation of arguments to keyword parameters,
	2. multiline method calls.

	* cc-mode.el (c-electric-brace): Fixed preservation of
	no-whitespace before brace.

	* cc-mode.el (c-guess-basic-syntax): CASE 5A.1: Watch out for
	c-state-cache; it may or may not be in place, but it should be
	ignored.

	* cc-mode.el (c-electric-colon): In call to c-lookup-lists, fixed
	incorrect quoting of symbols in the quoted list.

	* cc-mode.el (c-search-uplist-for-classkey): Watch out for
	embedded c-class-key keywords.

	* cc-mode.el (c-common-init): Make a deep copy of c-offsets-alist
	so that changing the buffer-local value in one buffer doesn't
	affect the global value, or other buffers.

	* cc-mode.el (c-snug-do-while): forward-sexp call could fail;
	wrap it in a c-safe.

	* cc-mode.el (c++-mode, objc-mode): comment-multi-line must be nil
	if // is the default comment style.

1995-08-31  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* ange-ftp.el (ange-ftp-vms-sans-version): Accept extra args.

1995-08-30  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* simple.el (kill-new): Compute 2nd arg to interprogram-cut-function
	based on REPLACE.

	* files.el (list-directory): Set default-directory.

1995-08-30  Per Abrahamsen  <abraham@dina.kvl.dk>

	* mouse.el (mouse-skip-word): Skip complete symbol when over a
	character with symbol syntax.

1995-08-29  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* dired-aux.el (dired-byte-compile): Report failure if output file
	is not created.

	* term/x-win.el (function-key-map): Consistently map CLEAR to C-l.

1995-08-29  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-utc-string): New function.
	(vc-find-cvs-master): Use it to compare mtime and checkout time.
	(vc-locking-user): CVS case: *only* use checkout time.
	(vc-find-cvs-master): Don't attempt to find the RCS master file.
	Throw the full name of CVS/Entries.
	(vc-name): Doc change (special CVS case).
	(vc-after-save): Handle the case when a file is saved in the very
	second in which it was checked out.

	* vc.el (vc-dired-update-line): Don't use dired-do-redisplay.
	(vc-next-action-dired): Adjust default-directory before calling
	vc-next-action-on-file.
	(vc-next-action-on-file): Handle CVS merge in vc-dired-mode correctly.
	(vc-next-action): Ask for a check-in comment if there are "added"
	CVS files.  Don't special-case single files in vc-dired-mode.
	(vc-file-clear-masterprops): Typo fix.
	(vc-latest-on-branch-p): Always true for CVS.
	(vc-directory): Header change.  Do display the buffer, even if no
	locked/registered files were found.

1995-08-28  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (recover-session-finish): Catch error in recover-file.

	* makefile.el (makefile-font-lock-keywords): Highlight lines with
	tab followed by #, and initial spaces preceding tabs--not all
	initial spaces.

1995-08-27  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* tmm.el: Fix typo in global-map define.

	* cl-seq.el (rassoc): Definition deleted.

	* mailabbrev.el (mail-mode-syntax-table): defvar deleted.

	* edebug.el: Delete redundant defvars of built-in variables.

	* edmacro.el: Load cl only during compilation.
	(edmacro-mismatch, edmacro-subseq): New functions.
	Use them instead of mismatch and subseq.

	* hideif.el (hide-ifdef-hiding): Delete duplicate defvar.

	* modula2.el (m2-execute-monitor-command): Renamed from
	execute-monitor-command.

1995-08-26  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* refer.el (refer-every): Renamed from every.
	(refer-convert-string-to-list-of-strings): Renamed from
	convert-string-to-list-of-strings.

	* levents.el (eventp): Duplicate definition deleted.

	* ws-mode.el (wordstar-center-line): Renamed from center-line.
	(wordstar-center-region): Renamed from center-region.
	(wordstar-center-paragraph): Renamed from center-paragraph.

	* x-menu.el: Doc fixes.
	(caar, cdar): Deleted--use (car (car ...)).

	* find-file.el (ada-spec-suffix): Definition deleted.
	(ada-make-filename-from-adaname): Delete autoload.
	(ff-special-constructs): Load ada-mode before referring to
	ada-spec-suffix and ada-make-filename-from-adaname.

	* life.el (abs): Function definition deleted.
	(goto-beginning-of-buffer): Macro deleted.  Use goto-char.
	(goto-end-of-buffer): Macro deleted.  Use goto-char.
	(maxint): Macro deleted.
	(life-increment): Renamed from increment.
	(life-initialized): New variable.
	(life): Do (random t) only once and only when `life' is called.

	* info.el (Info-default-directory-list): Duplicate defvar deleted.

1995-08-25  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* uniquify.el: New file.

	* mailabbrev.el (rebuild-mail-abbrevs): FILE defaults to visited file.

	* executable.el (executable-set-magic): Use make-local-hook
	for after-save-hook.

	* files.el (basic-save-buffer): Doc fix.
	(after-save-hook): Add defvar.

1995-08-25  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>
	* vc.el: Enhanced vc-dired-mode.
	(vc-directory): Kill existing vc-dired buffers for this directory.
	Provide a better header.  Corrected the check whether any files were
	found at all (don't display a listing in this case).  Under CVS,
	display cvs-status rather than vc-locking-user.
	(vc-next-action-on-file): When doing a check-in in vc-dired-mode, find
	the file in another window.
	(vc-next-action-dired): Update dired listing while processing the
	files.
	(vc-next-action): Check whether a check-in comment is really needed
	for this mass operation.
	(vc-checkout): Resynch the buffer, even if it's not current.
	(vc-dired-state-info, vc-dired-update-line): New functions.
	(vc-dired-prefix-map): Added local definition for `g' and `='.
	(vc-dired-reformat-line): Simplified.  Erase the hardlink count from
	the listing, because it doesn't relate to version control.

	* vc.el: Added functions to dispatch on backend release numbers.
	Under RCS, use this to find out whether new features can be used.
	(vc-rcs-release, vc-cvs-release, vc-sccs-release): New variables, may
	be set by the user.
	(vc-backend-release, vc-release-greater-or-equal,
	vc-backend-release-p): New Functions.
	(vc-do-command): Allow FILE to be nil.
	(vc-backend-checkin): When creating a branch, don't bother to unlock
	the old version if this is RCS 5.6.2 or higher.
	(vc-next-action-on-file): Allow lock-stealing only if RCS 5.6.2 or
	higher.
	(vc-backend-admin, vc-backend-checkin): If available, use ci -i
	and -j.  Updated Developer's Notes.

	* vc.el (vc-backend-diff): Handle the case of a locally added CVS
	file correctly.

	* vc-hooks.el (vc-fetch-master-properties): Count cvs status
	"Needs Patch" as `needs-checkout'.
	(vc-after-save): Clear the cvs status.

1995-08-25  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* etags.el (next-file): Advance next-file-list before finding the
	file named in its car, in case finding signals an error.

1995-08-25  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* help.el (describe-function): Show file name for autoloaded fns.

	* simple.el (what-line): Print narrowed linenum with full buffer num.

1995-08-24  Tom Tromey  <tromey@irish.colorado.edu>

	* makefile.el (makefile-mode-syntax-table): "]" is a close-paren.
	(makefile-add-log-defun): Avoid error at eob.

1995-08-23  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* makefile.el: Doc fixes.
	(makefile-font-lock-keywords): Highlight lines of just whitespace.

1995-08-22  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* edebug.el (edebug-outside-post-command-idle-hook)
	(post-command-idle-hook): New variables.
	(edebug-enter, edebug-outside-excursion): Use them.

	* avoid.el (mouse-avoidance-mode): Use post-command-idle-hook.
	Use remove-hook.

	* two-column.el (2C-mode): Use make-local-hook and add-hook.

	* icomplete.el (icomplete-minibuffer-setup): Use make-local-hook
	and add and remove hooks locally.

	* ediff-util.el (ediff-profile): Use make-local-hook
	and add and remove hooks locally.

1995-08-22  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* files.el (basic-save-buffer): Call vc-after-save, to
	support implicit locking in VC.

	* vc-hooks.el (vc-simple-command): New function.
	(vc-fetch-master-properties): CVS case: Use it.
	(vc-lock-from-permissions, vc-file-owner, vc-rcs-lock-from-diff):
	New functions.
	(vc-locking-user): Largely rewritten.  Uses the above, handles RCS
	non-strict locking.  Under CVS in CVSREAD-mode, learn the locking
	state from the permissions.
	(vc-find-cvs-master): Use vc-insert-file, rather than
	find-file-noselect. Greatly speeds up things.
	(vc-consult-rcs-headers): Bug fix, return status in all cases.

	* vc.el: Removed the comment that said we assume strict locking.
	(vc-next-action-dired): Don't switch to vc-parent-buffer, because
	that was already done.

1995-08-22  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* sc.el: Provide sc.

1995-08-21  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* compile.el (compilation-exit-message-function): New variable.
	(compilation-sentinel): If compilation-exit-message-function is
	non-nil, call it to produce messages for buffer and mode line.
	(grep): Use that variable to produce snazzier messages.

1995-08-21  Richard Stallman  <rms@pogo.gnu.ai.mit.edu>

	* paren.el: Use post-command-idle-hook.
	(show-paren-command-hook): No need to test for idleness.

1995-08-21  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-fetch-master-properties): RCS case: get locking
	mode.  CVS case: new state `locally-added'.
	(vc-locking-user): Under RCS with non-strict locking, don't trust
	the file permissions.  CVS case: change which states count as
	"locked".
	(vc-consult-rcs-headers): Streamlined. Don't set vc-locking-user if
	this is called under CVS.  Under RCS, use a heuristic to find the
	value of vc-checkout-model without examining the master file.
	(vc-parse-locks): Set vc-checkout-model.
	(vc-status): Comment change.
	(vc-after-save-hook, vc-after-save): The former renamed to the
	latter. Now unconditionally called by `basic-save-buffer', determines
	whether the buffer should be "locked" or not.
	(vc-checkout-model): Values are now `manual' and `implicit'.  Derive
	the property on a per-file basis, supporting all possible modes.
	(vc-mode-line): No longer use dynamic after-save-hook. Changed
	references to `automatic' into `implicit'.

	* vc.el (vc-latest-on-branch-p): Under CVS, handle the case when
	the file is added, but not yet committed.
	(vc-backend-checkout): RCS case: In non-strict locking mode, force
	to overwrite the writable workfile. CVS case: Do the right thing in
	CVSREAD-mode.

1995-08-21  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (auto-mode-alist): Turn on use of makefile-mode.

	* rmailsum.el: Require rmail.
	(rmail-new-summary): Specify size in split-window.
	Call rmail-select-summary to force size to specified amount.

1995-08-21  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* fast-lock.el: New version 3.07 from author.
	(fast-lock-mode): Use buffer-file-truename, not buffer-file-name.
	(fast-lock-cache-directories, fast-lock-cache-name): Doc fixes.

1995-08-21  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* solar.el: Doc fixes.

1995-08-20  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* icon.el: Define user options with defvar, not defconst.

1995-08-20  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* dired.el (dired-string-replace-match): Simplify using replace-match.

	* dired-aux.el (dired-expand-newtext): Function deleted.

	* bytecomp.el (byte-compiler-base-file-name): New function.
	(byte-compile-dest-file): Call byte-compiler-base-file-name.

	* jka-compr.el (jka-compr-byte-compiler-base-file-name): New function.
	Use it to handle byte-compiler-base-file-name operation.

1995-08-20  Michael Kifer  <Michael Kifer <kifer@cs.sunysb.edu>>

	* viper.el (vip-set-hooks): Use view-mode-hook in emacs and view
	hook in xemacs.
	(vip-read-string-with-history): minibuffer-setup-hook no longer
	waits for the user to type, if there are unread events.
	Harnessed view-minor-mode.
	Added (vip-leave-region-active) to all simple movement commands.
	* viper-mous.el (vip-surrounding-word): modified to understand
	tripple clicks.
	* viper-util.el (vip-leave-region-active): new function.

1995-08-19  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* vc.el (file-regular-p-18): Fix test for whether to use this.

	* info.el (Info-find-emacs-command-nodes): Fix previous change.
	(Info-suffix-list): For MS-DOS, use gunzip as the only uncompressor,
	and don't include .info as suffix.
	(info-insert-file-contents-1): New function.
	(info-insert-file-contents): Use info-insert-file-contents-1.

	* macros.el (insert-kbd-macro): Express vector char modifiers with
	escape prefixes.  Express big basic char codes in octal.

1995-08-19  Karl Heuer  <kwzh@gnu.ai.imt.edu>

	* hilit19.el (hilit-submit-feedback): New ftp site.

1995-08-19  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* info.el (Info-file-list-for-emacs): New variable.
	(Info-find-emacs-command-nodes): Look in those files, if appropriate.

	* files.el (basic-save-buffer): Confirm for overwriting old file
	when a file name is specified.

1995-08-18  Daniel Pfeiffer  <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* skeleton.el (skeleton-newline-indent-rigidly): New variable.
	(skeleton-internal-1): Use it for indenting after \n because previous
	behaviour was only useful for `sh-script.el' and old `ada.el'.  Other
	modes now get their own indentation.
	(skeleton, skeleton-modified, skeleton-point, skeleton-regions): `New'
	variables for passing between the mutually recursive functions of
	the skeleton engine.  Introduced to remove compiler warnings.
	(skeleton-proxy): New argument `str' to make this settable when calling
	a skeleton as a function.
	(skeleton-insert): New argument `str' to pass down.  Element `\n'
	now usually indents according to mode.  Subskeletons may also have
	a list of strings as iterator.  Earlier modification also removed
	meaning of `quit' -- I did not put it back in since it's useless.
	When quitting out of a subskeleton while still wrapping around text
	don't duplicate first line of that text.
	(skeleton-end-hook): New hook useful say for modes that leave a `;' on
	an empty line to indent right and then want to clean it up when doing
	a skeleton there.

	* sh-script.el (sh-newline-and-indent): Don't interpret prefix arg
	since `newline-and-indent' doesn't either.  Don't turn a trailing
	quoted tab into a space.
	(sh-mode): Use new `skeleton-newline-indent-rigidly'.
	(sh-set-shell): Make maximum font-locking also hightlight keywords
	after ``' and `!'.  (The latter is for ksh '93 but should't hurt other
	shells.)

1995-08-18  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc.el (vc-next-action-on-file): Changed doc string, CVS case.
	(vc-backend-checkin): Clear master properties before doing the
	check-in.  In the CVS case, catch error and display an appropriate
	message in the echo area.
	(vc-backend-revert): Clear master properties, because some might get
	outdated by the operation.
	(vc-backend-merge-news): Scan the output of "cvs update" and find out
	whether conflicts have occurred.

	* vc-hooks.el (vc-fetch-master-properties):
	Recognize cvs status "Unresolved Conflict".
	(vc-locking-user): Count cvs status `unresolved-conflict' as "locked".

	* vc.el (vc-finish-logentry):
	Delete the *VC-log* buffer *before* doing the
	actual check-in. That leads to a better display in case the check-in
	fails.

	* vc.el (vc-latest-on-branch-p): Defined it for CVS in the obvious way.
	(vc-next-action-on-file): Removed special CVS cases. At this level,
	CVS is now mostly handled like the other backends.
	(vc-backend-checkout): CVS case: Clear sticky tag as default when
	doing a verbose checkout. (This used to be done in
	vc-next-action-on-file.)

	* vc-hooks.el (vc-checkout-model):
	New property and access function (still simplistic).
	(vc-after-save-hook): New function.
	(vc-mode-line): When the file is locked by somebody else, make the
	buffer read-only.  (Formerly this was only done for root.)  Don't
	write-protect the buffer if the file is unlocked.  Instead, install
	vc-after-save-hook, which "locks" the file when modifications are
	saved.

1995-08-18  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* makefile.el (makefile-space-face): New variable.
	(makefile-define-space-face): New function.
	(makefile-tab-face): Variable deleted.
	(makefile-define-tab-face): Function deleted.
	(makefile-font-lock-keywords): Highlight leading spaces, not tabs.

1995-08-17  Karl Heuer  <kwzh@nutrimat.gnu.ai.mit.edu>

	* hilit19.el (hilit-submit-feedback): New bug-reporting address.

1995-08-17  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc.el (vc-next-action-on-file): Moved the setting of the default
	branch to vc-backend-checkout, where it belongs.
	(vc-backend-checkout): If an explicit version was specified, adjust
	the default branch accordingly.

	* vc-hooks.el (vc-top-version): Renamed to vc-master-workfile-version.
	Updated all references.
	vc.el: Changed references to vc-top-version into
	vc-master-workfile-version.

	* vc.el (vc-next-action-on-file): Query when trying to lock
	non-latest version.

	* vc.el: Let vc-cancel-version handle branches correctly, and
	behave more comfortably in the `norevert' case.
	(vc-revert-buffer1): Split part of the function into vc-buffer-context
	and vc-restore-buffer-context, so we can use it also in other
	circumstances.
	(vc-buffer-context, vc-restore-buffer-context): New functions.
	(vc-clear-headers): New function, uses the above.
	(vc-cancel-version): When `norevert', locks the most recent remaining
	version.  Also, refuse to work on anything but the latest version of
	a branch.  Removed the check whether the version is the user's,
	because that is difficult to decide, now that multiple branches are
	possible.
	(vc-latest-on-branch-p): New function.
	(vc-head-version): New access function to the already existing
	property.
	(vc-trunk-p, vc-branch-part): Functions moved before first use.

1995-08-16  Fred Pierresteguy  <F.Pierresteguy@frcl.bull.fr>

	* rmailsum.el (rmail-new-summary): Enable the Input/output menu.

1995-08-16  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* pascal.el (pascal-mode): Set comment-start.
	(pascal-toggle-completions): Doc fix.

1995-08-16  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* simple.el (blink-matching-paren-dont-ignore-comments): New var.
	(blink-matching-open): Use it.
	Also, if the matching char hasn't paren syntax, call that mismatch.

	* inf-lisp.el (inferior-lisp): Use pop-to-buffer.
	Add *inferior-lisp* to same-window-buffer-names.

	* cmuscheme.el (run-scheme): Use pop-to-buffer.
	Add *scheme* to same-window-buffer-names.

	* xscheme.el (run-scheme): Use pop-to-buffer.

1995-08-15  Karl Heuer  <kwzh@nutrimat.gnu.ai.mit.edu>

	* sh-script.el (sh-mode-map): Use new name skeleton-pair-insert-maybe.
	(sh-mode): Use new names skeleton-pair-alist, skeleton-pair-filter.

1995-08-15  Daniel Pfeiffer <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* skeleton.el (skeleton-pair-insert-maybe): Plain insert in Ovwrt mode
	(skeleton-insert): If skeleton doesn't fit in window, put beginning
	at top before going to _ point.
	(skeleton-internal-list): Rewritten so that resume: sections pertain
	only to inferior skeletons and make str available there
	(skeleton-read): Don't quit and remove partial skeleton when empty
	string entered for outer iterator.  Added implicit argument `input'.
	(define-skeleton, skeleton-insert, skeleton-internal-list): Use `x
	rather than backquote's (` x) or own (list 'x)

	* sh-script.el (sh-test): New variable.
	(sh-if, sh-until, sh-while): Use it.
	(sh-while-getopts): Handle csh passably well.
	(sh-font-lock-keywords): Use `font-lock-variable-name-face'.
	(sh-set-shell): Respect `font-lock-maximum-decoration'.

1995-08-15  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* supercite.el (sc-attribs-extract-namestring): If name has <...>,
	treat everything before that as the full name.

1995-08-14  Karl Heuer  <kwzh@nutrimat.gnu.ai.mit.edu>

	* view.el: Rewrite as a minor mode.

	* viper.el (vip-set-hooks): Use view-mode-hook, not view-hook.

1995-08-14  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (basic-save-buffer-1): Pass new arg to write-region.

1995-08-14  Erik Naggum  <erik@naggum.no>

	* files.el (insert-file-contents-literally): New function.
	(find-file-noselect): Use it if new optional argument `rawfile' is
	non-nil.

	* startup.el (command-line-1): Add option --eval to evalute an
	expression on the command line and print the result.

1995-08-14  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* paren.el (show-paren-command-hook): Do nothing if have unread events.

1995-08-13  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* mouse.el (mouse-drag-region): Unread the up-event
	rather than execute it here.

1995-08-12  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* rmail.el (rmail-convert-file): Look back for ^_ only at bol.

	* simple.el (shell-command-on-region): Don't examine order of
	point and mark; use order of START and END instead.
	Interactively pass point and mark, not region-beg and region-end.

1995-08-10  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* isearch.el (isearch-other-meta-char): Avoid bug checking whether
	a key is defined in the function key map.
	Call cancel-kbd-macro-events.

	* bytecomp.el (byte-compile-insert-header): Use 19.29, not 19.28.90
	as limit for where dynamic docstrings are allowed.

	* server.el (server-buffer-done): Pause between client commands,
	but not after the last one.

	* files.el (recover-file): It's ok if the visited file doesn't exist.
	(recover-session-finish): Compute "file name" from autosave file
	if no visited file.

1995-08-10  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc.el (vc-dired-reformat-line): Display eight character user names
	correctly.

1995-08-10  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* font-lock.el (font-lock-beginning-of-syntax-function): New variable.
	(font-lock-defaults-alist): New element to specify it.
	(font-lock-set-defaults): Set it.
	(font-lock-fontify-region): Use it when calculating the cache state.
	(font-lock-maximum-size): Add autoload cookie.
	(font-lock-fontify-region, font-lock-unfontify-region): Also wrap
	value of buffer-file-truename to avoid clash detection.
	(font-lock-hack-keywords): Likewise.  Also use a while loop, not
	mapcar, when applying keywords.
	(tex-font-lock-keywords): Rewritten again.
	(scheme-font-lock-keywords): New keywords.
	(font-lock-defaults-alist): Specify defaults for them.

	* fortran.el (fortran-font-lock-keywords-1): Fix column 72 comments.

	* texinfo.el (texinfo-font-lock-keywords): Rewritten.
	(texinfo-mode): Set up font-lock-defaults for keywords only.

	* help.el (help-font-lock-keywords): New keywords.
	(help-mode): Set up font-lock-defaults.

1995-08-09  Francesco Potorti`  (pot@cnuce.cnr.it)

	* man.el (Man-translate-references): Anchor the regexps.

1995-08-08  Boris Goldowsky  <boris@gnu.ai.mit.edu>

	* forms.el (forms-check-number-of-fields): New vbl.
	(forms-mode): Don't issue warning if vbl says not to.

1995-08-08  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* vc.el (vc-revert-buffer): In a dedicated solitary window,
	make the frame invisible instead of trying to delete window.

	* paragraphs.el (forward-paragraph): Don't overlook a paragraph-start
	line just because it ends at eob.

	* edebug.el (edebug-functionp): Return t for a bytecode function.

	* dired.el (dired-mode-map): Set up the map completely
	before storing it into dired-mode-map.

1995-08-07  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* bytecomp.el (byte-compile-insert-header): New args inbuffer and
	outbuffer.  Test byte-compile-dynamic-docstrings in the initially
	current buffer.
	(byte-compile-from-buffer): Add new args to byte-compile-insert-header.

	* startup.el (command-line-1): Fix previous change.

	* bytecomp.el (byte-compile-output-docform): Check
	byte-compile-dynamic-docstrings in input buffer, not output buffer.

1995-08-06  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* delsel.el (delete-selection-pre-hook): New type value `yank'.
	(yank): Use `yank' as delete-selection property.

	* simple.el (column-number-mode, line-number-mode): Default now t.

1995-08-05  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* faces.el (set-face-background): When using face-color-supported-p,
	specify foreground, not background.

1995-08-04  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* bibtex.el (bibtex-maintain-sorted-entries): Make nil the default.

	* ps-print.el: Renamed `fsf' to `emacs' in all names.
	(ps-print-emacs-type): Renamed from emacs-type.

1995-08-04  Stephen A. Wood  <saw@hallc1.cebaf.gov>

	* fortran.el (fortran-auto-fill-mode, fortran-do-auto-fill,
	fortran-fill): Invoke auto filling only when past fill-column.

1995-08-04  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* compile.el (compilation-error-regexp-alist): Add regexp for Sun
	ada.

1995-08-03  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* solitaire.el: New file.

1995-08-03  Morten Welinder  <terra+@cs.cmu.edu>

	* arc-mode.el: Standardize layout of doc strings.

1995-08-03  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* rsz-mini.el (resize-minibuffer-setup): Use make-local-hook.

	* tmm.el: Don't alter bindings in minibuffer-local-must-match-map
	or completion-list-mode-map.
	(tmm-add-prompt): Use make-local-hook; add hook locally.
	(tmm-delete-map): Delete hook locally.

	* indent.el (tab-to-tab-stop): Expand abbrevs only after a word-char.

1995-08-02  Rob Riepel  <riepel@Snowflake.Stanford.EDU>

	* tpu-edt.el (tpu-control-keys): New initial value, nil.
	(tpu-help): Back up one page at a time.
	(tpu-set-control-keys): New function.
	(tpu-edt-on): Call tpu-set-control-keys.

1995-08-02  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* jka-compr.el (jka-compr-load): Bind load-force-doc-strings.

	* dired-aux.el (dired-do-copy): Doc fix.

	* arc-mode.el (archive-remote-regexp): Don't accept hostnames
	ending in period.  (See previous ange-ftp.el change.)

	* gud.el (gud-xdb-marker-filter): Change pattern to accept spc at end.

1995-08-01  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* ange-ftp.el (file-name-handler-alist): Don't match host name
	ending in period.

1995-08-01  Daniel Pfeiffer  <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* two-column.el (2C-toggle-autoscroll, 2C-autoscroll):
	Only (sit-for 0) once for smoother scrolling.
	(2C-associated-buffer): go to same line and column.
	(2C-newline): new function.
	(2C-other): optional arg to signal missing other buffer.

1995-08-01  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* byte-opt.el (byte-optimize-nthcdr): Fix previous change.

1995-07-31  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* startup.el (command-line-1):
	Mention recover-session if there's a .saves file.

	* files.el (recover-session): Mention deletion is possible.
	(recover-session-finish): Call dired-do-flagged-delete.

	* dired.el (dired-do-flagged-delete): New arg nomessage.

	* vi.el (vi-scroll-amount, vi-shift-width): Fix syntax of doc strings.

1995-07-31  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* subr.el (run-hooks): Variable doc fix.
	(run-hooks, run-hook-with-args-until-success,
	run-hook-with-args-until-failure): Functions moved to C.

1995-07-30  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* dired-aux.el (dired-read-shell-command): Use
	`shell-command-history' in read-string.

1995-07-30  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* iso-acc.el: Major additions by Gustavo Chaves.
	(iso-languages): New variable.
	(iso-accents-list): Now set by iso-customize-accents.
	(iso-customize-accents): New function.
	(iso-accentuate, iso-deaccentuate, iso-unaccentuate):
	(iso-accent-rassoc-unit): New functions.

	* rmail.el (rmail-unix-mail-delimiter): Allow two-letter timezone name.

	* faces.el (set-face-background): Don't treat nil as a color.

	* loadhist.el (unload-feature): Delete the file's load-history element.
	(file-set-intersect): Renamed from set-intersect.
	(file-dependents): Use new name.

	* ehelp.el (with-electric-help): Doc fix.

	* files.el (cd): When reading arg, use just directory as the default.

	* bytecomp.el (byte-compile-insert-header): If compiling for vers 18,
	arrange to set current-load-list when loading the file.

1995-07-29  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* fill.el (fill-region-as-paragraph): Don't find adaptive-fill-regexp
	on first line of paragraph if it's a paragraph-separate line.
	Don't look past the intended line.
	(adaptive-fill-function): New variable.
	(fill-region-as-paragraph): Use it.
	(colon-double-space): New variable.
	(canonically-space-region): Put two spaces after colon if necessary.

	* simple.el (do-auto-fill): Use adaptive-fill-function.

	* paragraphs.el (forward-paragraph): Don't move back over a line
	before the paragraph which doesn't start with fill-prefix unless
	that is the only line we've moved over.

1995-07-28  Michael Ernst  <mernst@research.microsoft.com>

	* simple.el (scroll-other-window-down): Bind to S-C-M-v.  Enhance
	documentation.

1995-07-28  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* info.el (Info-read-node-name-1): New function.
	(Info-read-node-name): Use Info-read-node-name-1
	to avoid getting confused by spaces when text starts with (FILENAME).

1995-07-28  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc.el (vc-resynch-buffer): New function.
	(vc-locked-example): Renamed to vc-snapshot-precondition. It now also
	checks whether any of the files are visited.
	(vc-retrieve-snapshot): If any files are visited, ask whether to
	revert their buffers. Use vc-backend-checkout and vc-resynch-buffer
	to do that, instead of vc-checkout.

	* vc.el (vc-backend-checkout): Adjust default-directory so that the
	checked-out file goes to the right place.

1995-07-28  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* dired.el (dired-insert-set-properties): Catch errors.

	* simple.el (next-line): Doc fix.

	* dabbrev.el (dabbrev-expand): Save previous point for undo.

1995-07-27  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* simple.el (do-auto-fill): Handle adaptive-fill-regexp.

	* texnfo-upd.el (texinfo-specific-section-type):
	Use buffer-substring-no-properties.

1995-07-27  Karl Heuer  <kwzh@nutrimat.gnu.ai.mit.edu>

	* imenu.el: (imenu-generic-lisp-expression)
	(imenu-generic-c++-expression, imenu-generic-c-expression)
	(imenu-generic-ada-expression, imenu-generic-texinfo-expression)
	(imenu-generic-latex-expression): Vars deleted; now handled by the
	major modes themselves.
	(imenu--scanning-method-alist): Var deleted.
	(imenu-default-create-index-function): Don't use that alist.
	* cplus-md.el (c++-imenu-generic-expression): Var defined.
	(c++-mode): Set imenu-generic-expression.
	* c-mode.el (c-imenu-generic-expression): Var defined.
	(c-mode): Set imenu-generic-expression.
	* tex-mode.el (latex-imenu-generic-expression): Var defined.
	(latex-mode): Set imenu-generic-expression.
	* texinfo.el (texinfo-imenu-generic-expression): Var defined.
	(texinfo-mode): Set imenu-generic-expression.
	* ada-mode.el (ada-imenu-generic-expression): Var defined.
	(ada-mode): Set imenu-generic-expression.
	* lisp-mode.el (lisp-imenu-generic-expression): Var defined.
	(lisp-mode-variables): Set imenu-generic-expression.

	* faces.el (x-font-regexp): Add \\(\\) for substring extraction.

1995-07-27  Ulrich Mueller  <ulm@vsnhd1.cern.ch>

	* fortran.el (fortran-break-line): Fixed a bug that sometimes
	deleted first character in statement field of continuation line.

1995-07-27  Espen Skoglund  <espensk@tklab1.cs.uit.no>

	* pascal.el (pascal-mode): Added imenu support.
	(pascal-imenu-generic-expression): New variable.

1995-07-27  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* texinfo.el (texinfo-environment-regexp): Allow whitespace at BOL.

	* isearch.el (isearch-mode-map): Don't bind tab, return, kp-N, etc.
	(isearch-other-meta-char): Special handling for keys like tab, etc.

1995-07-26  Stefan Schoef  <schoef@OFFIS.Uni-Oldenburg.DE>

	* bibtex.el: Add keywords and comments as per conventions.

	* bibtex.el: Changed almost all occurences of buffer-substring to
	buffer-substring-no-properties..

	* bibtex.el (bibtex-find-entry-location, bibtex-clean-entry):
	Added support to handle invalidate buffers in a more friendly
	manner.

	* bibtex.el (bibtex-make-field): Changed to be called either
	interactively with a string (field name) or from Lisp with a list
	of two strings (FIELDNAME COMMENT).

1995-07-26  Rob Riepel  <riepel@Snowflake.Stanford.edu>

	* tpu-edt.el (tpu-version): New version.
	(tpu-help-keypad-map): New help text.
	(tpu-backward-line): Only move to BOL if not already there.

	* tpu-extras.el (tpu-backward-line): Only move to BOL if not
	already there.

1995-07-26  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* indent.el (indent-region-function): Doc fix.

	* lisp-mode.el (shared-lisp-mode-map):
	Don't bind TAB, just set indent-line-function.

Wed Jul 26 15:40:00 Michael Kifer  (kifer@cs.sunysb.edu)

	* viper-ex.el (vip-submit-report): fnc modified.

	* viper-keym.el (vip-overriding-map): new variable.

	* viper-macs.el (vip-repeat-from-history-key): new default.
	(vip-read-fast-keysequence, ex-unmap-read-args, ex-map-read-args):
	changed to use vip-read-key.

	* viper-mous.el (vip-multiclick-timeout): new default.
	(vip-surrounding-word, vip-mouse-click-get-word): fnc modified.

	* viper-util.el (vip-add-hook, vip-remove-hook): new fncs.

	* viper.el (vip-info-file-name): variable removed.
	(vip-envelop-ESC-key, vip-start-replace, vip-finish-R-mode,
	vip-start-R-mode, vip-insert-state-pre-command-sentinel,
	vip-R-state-post-command-sentinel, vip-replace-char) fncs modified.

1995-07-25  Karl Heuer  <kwzh@nutrimat.gnu.ai.mit.edu>

	* faces.el (x-font-regexp-weight-subnum, x-font-regexp-slant-subnum)
	(x-font-regexp-swidth-subnum, x-font-regexp-adstyle-subnum): Defconst.

1995-07-25  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* imenu.el (imenu--history-list): Don't make this buffer-local.
	(imenu): Call imenu-choose-buffer-index from interactive spec.

1995-07-25  Karl Heuer  <kwzh@nutrimat.gnu.ai.mit.edu>

	* subr.el (run-hook-with-args): Deleted; now in C code.

1995-07-24  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* imenu.el: Many doc fixes.

1995-07-25  Ake Stenhoff  <etxaksf@aom.ericsson.se>

	* perl-mode.el (perl-imenu-generic-expression) New variable.
	(perl-mode): Set imenu-generic-expression.

	* imenu.el (imenu-generic-expression): Call make-variable-buffer-local.
	(imenu-create-index-pattern): Variable deleted.

1995-07-22  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* tar-mode.el (tar-copy): Inhibit use of jka-compr handler
	when both to- and from- files would use it.

1995-07-22  Daniel Pfeiffer  <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* apropos.el: Add latest changes of old library and some more.
	(apropos): Only show unbound symbols when do-all
	(apropos-documentation-check-elc-file): new copied function.
	(apropos-command): also use `apropos-do-all' when called as function.
	(apropos-print-doc): renamed from `apropos-print-documentation', i
	is numeric index, replaces parameter tem.
	(apropos-macrop): new function.
	(apropos-print): use it to differentiate macros.
	(apropos-symbol-face, apropos-keybinding-face, apropos-label-face)
	(apropos-property-face, apropos-match-face): new variables
	replace and extend the effect of `apropos-use-faces'.
	(apropos-safe-documentation): renames `safe-documentation', also
	returns a cons.
	(apropos-regexp, apropos-files-scanned, apropos-accumulator)
	(apropos-item): new variables to prevent compiler warnings.
	(apropos-value-internal, apropos-documentation-internal): new fns.

1995-07-21  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* byte-opt.el (byte-optimize-lapcode): Fix format calls.

	* imenu.el (imenu-choose-buffer-index):
	Avoid trying to select WINDOW if it is nil.

	* menu-bar.el (menu-bar-buffer-menu): Function deleted.
	(global-map): Define [menu-bar buffer] as a keymap with no fcn name.
	(menu-bar-update-buffers): After defining it, call it.

	* faces.el (make-face-bold, make-face-italic, make-face-bold-italic)
	(make-face-unbold, make-face-unitalic):
	No error if font is already bold, italic, or whatever.

	* font-lock.el (font-lock-make-faces): Redo logic for whether
	to call font-lock-make-face for a given face.

1995-07-20  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* rmail.el (rmail-insert-inbox-text): Always use movemail
	when renaming a file.

	* simple.el (indent-new-comment-line):
	fill-prefix overrides comment indentation.

	* skeleton.el (local-variables-section): Delete autoload cookie.
	(skeleton-pair-insert-maybe): Renamed from pair-insert-maybe.
	(skeleton-pair, skeleton-pair-filter, skeleton-pair-alist)
	(skeleton-pair-on-word): Renamed from pair-...
	(mirror-mode): Commented out.

	* info.el (Info-current-file): Doc fix.
	(Info-find-node): Set Info-current-file to file name as specified.

1995-07-20  Dave Love  <d.love@dl.ac.uk>

	* mail-utils.el (mail-fetch-field): Use buffer-substring-no-properties.

1995-07-20  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* derived.el (derived-mode-set-keymap): Cope if old-map is nil.

	* menu-bar.el (menu-bar-update-yank-menu): Treat all-dashes specially.

1995-07-19  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* sendmail.el (mail-default-reply-to): Doc fix.

1995-07-18  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* backquote.el (backquote): Doc fix.

	* noutline.el (outline-next-visible-heading): Rewritten to handle
	backwards motion and handle beg/end of buffer properly.

	* menu-bar.el (menu-bar-tools-menu): Don't define gnus entry
	if no network support.

	* faces.el (x-create-frame-with-faces):
	Specify frame arg to x-color-values and frame-parameters.
	(set-face-background): Pass background-p arg to face-color-supported-p.

1995-07-18  Michael Ernst  <mernst@research.microsoft.com>

	* ehelp.el (electric-helpify): Autoload with-electric-help,
	electric-helpify.

1995-07-18  Rolf Ebert  <re@waporo.muc.de>

	* ada-mode.el (ada-ident-re): Doc fix.
	(ada-end-stmt-re): Corrected serious pb of wrong parentheses.
	(ada-subprog-start-re): Removed 'body' from the list.
	(ada-format-paramlist): Simplified a regexp.
	(ada-indent-current): On first line of the buffer, indent to column 0.
	Don't reindent if new position is the same as the old one.  Thus, a
	correcly indended line is not modified.
	(ada-get-indent-subprog): Simplified a regexp.
	(ada-goto-matching-decl-start): Distinguish between normal type
	declaration and protected types, which are more like procedures.
	(ada-remove-trailing-spaces): Use save-match-data, save-restriction
	and widen when removing whitespace.
	(ada-font-lock-keywords-1): Add 'pragma' as keyword.
	(ada-font-lock-keywords-2): Allow *qualified* idents after 'end'.

	* files.el (auto-mode-alist): Recognize *.ads and *.adb as Ada
	specs and bodies.

1995-07-18  Dave Love  <d.love@dl.ac.uk>

	* nroff-mode.el (font-lock-defaults): New variable.
	(nroff-mode-syntax-table): New variable to provide comment syntax
	for font-lock; I'm not sure if this is (or should be) necessary in
	19.29 with font-lock-defaults.
	(nroff-font-lock-keywords): New variable.
	(nroff-mode): Install nroff syntax table and font lock keywords.
	Comment about comments in filling and line-counting.

1995-07-18  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc.el (vc-do-command): Added parameter BUFFER (the default,
	if nil, is *vc*). Updated all callers.
	(vc-next-action-on-file, vc-diff, vc-version-diff, vc-backend-diff):
	Use buffer *vc-diff* for diff output instead of *vc*.

	* vc-hooks.el (vc-mode-line, vc-find-file-hook): Moved the test for
	version-controlled symbolic link from the former to the latter.

	* files.el (file-name-sans-versions):
	Recognize version control version numbers.

1995-07-18  Mike Williams  <mikew@gopher.dosli.govt.nz>

	* mouse-sel.el: Don't (require 'backquote).

	* mouse-sel.el (mouse-extend-internal): Select space in between
	"things" when extending selection, ie. we are extending to
	"thing" boundaries.

	* mouse-sel.el: Use x-lost-selection-hooks to handle loss of selection.
	(mouse-sel-lost-selection-hook): New function.
	(mouse-sel-selection-owner-p-function): Variable removed.
	(mouse-sel-selection-owner-p): Function removed.
	(mouse-sel-validate-selection): Function removed.

	* thingatpt.el (forward-same-syntax): New function.

1995-07-16  Richard Stallman  <rms@gnu.ai.mit.edu>

	* appt.el: Add provide.

1995-07-15  Richard Stallman  <rms@gnu.ai.mit.edu>

	* byte-opt.el (byte-optimize-if): Optimize (if (not foo) nil ...).

	* add-log.el (add-log-current-defun): Handle C struct definitions.
	(add-change-log-entry): Use case-sensitive search for file name.
	Find first blank line correctly.

1995-07-14  Karl Fogel  <kfogel@floss.cyclic.com>

	* bookmark.el (bookmark-make): Strip text properties off name.
	(bookmark-make-cell): Use `buffer-substring-no-properties'.

1995-07-14  Richard Stallman  <rms@gnu.ai.mit.edu>

	* bytecomp.el (byte-compile-output-file-form): Bind print-length
	and print-level to nil.

1995-07-13  Richard Stallman  <rms@gnu.ai.mit.edu>

	* mouse.el (mouse-major-mode-menu): Catch quit in read-key-sequence.

1995-07-12  Richard Stallman  <rms@gnu.ai.mit.edu>

	* bookmark.el (bookmark-yank-word): Use buffer-substring-no-properties.

1995-07-13  Richard Stallman  <rms@gnu.ai.mit.edu>

	* files.el (auto-mode-alist): Move .scm.[0-9] before nroff-mode.
	Escape the second period.

1995-07-12  Richard Stallman  <rms@gnu.ai.mit.edu>

	* dabbrev.el (dabbrev--search): Don't let spurious match in middle
	of word obscure real match at start of same word.

	* term/x-win.el (vendor-specific-keysyms):
	In Sun keys, f36 was misnamed f35 and f37 misnamed f36.

	* fill.el (canonically-space-region): Doc fix.

	* menu-bar.el (menu-bar-help-menu): Add finder-by-keyword.

	* ediff-wind.el (ediff-skip-unsuitable-frames): Use make-frame,
	not ediff-make-frame.

1995-07-12  Richard Stallman  <rms@gnu.ai.mit.edu>

	* paths.el (remote-shell-program): Try rcmd also.

1995-07-11  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-mode-line): Don't write-protect a
	VC-Log buffer.  Better mode line text for initial comments.
	Streamlined the function.

1995-07-10  Richard Stallman  <rms@gnu.ai.mit.edu>

	* faces.el (x-create-frame-with-faces): Set background-mode
	and display-type frame parameters.

	* mouse.el (mouse-major-mode-menu): Don't call command-execute
	if lookup-key gives nil.

	* byte-opt.el (byte-optimize-nth, byte-optimize-nthcdr):
	Do nothing if form wrong length.
	(byte-optimize-multiply): Fix bug in 0 case.
	(byte-optimize-divide): Optimize (/ CONST CONST) if safe.

1995-07-09  Richard Stallman  <rms@gnu.ai.mit.edu>

	* fill.el (fill-region-as-paragraph): In adaptive-fill-mode,
	if paragraph has one line, take the fill prefix from it.
	(adaptive-fill-regexp): Doc fix.

	* startup.el (normal-top-level): Don't use mail-host-address
	for auto-save-list-file-name.

	* sendmail.el (mail-setup-hook): New defvar.
	(mail): Doc fix.

1995-07-06  Francesco Potorti`  <pot@cnuce.cnr.it>

	* simple.el (shell-command): Use save-match-data.
	Put the buffer in shell mode, don't use shell-command-filter.
	(shell-command-filter): Deleted.
	(shell-command-sentinel): Don't reset the mode line.
	Don't test the buffer name--what was that for, anyway?.

1995-07-06  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc.el (vc-backend-merge-news): Force to refetch the
	properties after the merge.

	* vc-hooks.el (vc-locking-user): Consider a cvs file "locked"
	if its status is either 'locally-modified or 'needs-merge.
	(vc-workfile-version): Catch 'found when calling vc-find-cvs-master.
	(vc-fetch-master-properties): Handle cvs status "Needs Checkout".
	This is intended for future use.

1995-07-06  Richard Stallman  <rms@whiz-bang.frob.com>

	* byte-opt.el (byte-optimize-logmumble): Fix (logior -1 ...) case.

	* cc-mode.el (c-set-style-1): Copy c-offsets-alist if nec.

1995-07-05  Richard Stallman  <rms@whiz-bang.frob.com>

	* faces.el (x-frob-font-slant, x-frob-font-weight):
	Replace the adstyle field with *, if we can find it.

	* find-file.el (ff-set-point-accordingly): Doc fix.

	* vc-hooks.el (vc-fetch-master-properties): Shrink the window
	that displays the error message.

	* faces.el (set-face-background): Use face-color-supported-p.

1995-07-04  Ralf Fassel  <ralf@prl.philips.nl>

	* fill.el (fill-individual-paragraphs): Use `adaptive-fill-regexp'
	to determine `fill-prefix' if `adaptive-fill-mode' is non-nil.

1995-07-04  Richard Stallman  <rms@whiz-bang.frob.com>

	* cc-mode.el (c-common-init): Copy c-offsets-alist.

1995-07-02  Richard Stallman  <rms@whiz-bang.frob.com>

	* ebuff-menu.el (electric-buffer-list): Save point before
	finding the first buffer line, and use that saved point to
	determine the buffer to use, if it is a reasonable value.

	* faces.el (face-color-gray-p): New function.
	(face-default-stipple): New variable.
	(set-face-background): Use face-default-stipple for all grays.
	(set-face-stipple): Change arg name.
	(face-color-supported-p): Use face-color-gray-p.

	* simple.el (column-number-mode): New variable and new command.
	* loaddefs.el (mode-line-format): Use column-number-mode.

1995-07-17  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* sh-script.el (interpreter-mode-alist): Delete autoload cookie.
	* executable.el (interpreter-mode-alist): Delete autoload cookie.

1995-07-12  Karl Heuer  <kwzh@kropotkin.gnu.ai.mit.edu>

	* comint.el (comint-kill-output): Preserve entire partial line at
	end, even if it doesn't match comint-prompt-regexp.

1995-07-12  Roland McGrath  <roland@churchy.gnu.ai.mit.edu>

	* copyright.el: Fixed Author: comment.  This code bears no
	relation to what I wrote.

1995-07-09  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* font-lock.el: Moved font-lock-doc-string-face to bytecomp.el.
	(font-lock-fontify-region): Do all cleanups inside unwind-protect.
	(font-lock-hack-keywords): Likewise.
	(font-lock-choose-keywords): Don't eval here.
	(font-lock-set-defaults): Do it here and compile too.

	* bytecomp.el: Make executing-macro, before-change-function,
	after-change-function and font-lock-doc-string-face obsolete.

	* version.el: Do a purecopy of emacs-version for UN*X's what command.

1995-07-08  Johan Vromans  <jvromans@hill.gnu.ai.mit.edu>

	* forms.el (forms-mode): Treat local-write-file-hooks as a list.

1995-07-07  Francesco Potorti`  <pot@cnuce.cnr.it>

	* mailalias.el (build-mail-aliases): Fixed the regexp for "^group".

1995-07-07  Daniel Pfeiffer  <Daniel.Pfeiffer@Informatik.START.dbp.de>

	* apropos.el: Restructured, largely rewritten and extended.
	(apropos-use-faces, apropos-local-map): New variables.
	(apropos-command): New name for `command-apropos' no longer in help.el.
	(apropos-value): New command.
	(apropos-documentation): New name for `super-apropos'
	(apropos-follow, apropos-mouse-follow): New commands for hypertext.
	(apropos-describe-plist): New function.

	* help.el: (command-apropos): Deleted function.  This is replaced by
	apropos-command in apropos.el.

	* autoload.el: (make-autoload): Generate `(autoload ...)' form for
	`(define-skeleton ...)'

	* skeleton.el: partly rewritten and extended.
	(skeleton-filter, skeleton-untabify, skeleton-further-elements)
	(skeleton-abbrev-cleanup): New variables
	(skeleton-proxy, skeleton-abbrev-cleanup): New functions
	(skeleton-insert): Sublanguage element < must now be handled via
	`skeleton-further-elements' (used only in sh-script and ada).  Lisp
	expressions can be quoted to ignore the return value.
	(skeleton-read): New name for `skeleton-internal-read' because this may
	be useful in skeletons.
	(local-variables-section): New skeleton command, might go to simple.el.

	* autoinsert.el: extended to use skeletons or call functions
	(auto-insert, auto-insert-query, auto-insert-prompt): New variables
	(auto-insert-alist): New features
	(auto-insert): New name for `insert-auto-insert-files'
	(define-auto-insert): New function

	* copyright.el: New name for generalized upd-copyr.el
	(copyright-limit, copyright-regexp): New variables
	(copyright-query): New name for `inhibit-update-copyright'
	(copyright-current-year): New name for `current-year'
	(copyright-current-gpl-version): New name for `current-gpl-version'
	(copyright-update): New name for `update-copyright' and
	`ask-to-update-copyright'
	(copyright): New skeleton command

	* executable.el: New file extracted and optimized from sh-script.el

	* sh-script.el: restructured, largely rewritten without the bugs and
	extended to cover over 15 shells.  Most variables can now work as a
	lookup table, and, unless set by user, do.
	(sh-mode-syntax-table): Possibly multiple tables.
	(sh-shell): Set initially so shell or other libraries may use features.
	(sh-assignment-regexp): Replaces `sh-assignment-space'.
	(sh-here-document-word): Set to more common "EOF".
	(sh-variables): Changed semantics.
	(sh-font-lock-keywords): Much nicer.
	(sh-ancestor-alist, sh-alias-alist, sh-shells, sh-abbrevs)
	(sh-dynamic-complete-functions, sh-require-final-newline)
	(sh-comment-prefix, sh-indentation, sh-header-marker, sh-builtins)
	(sh-leading-keywords): New variables.
	(sh-use-prefix, sh-find-file-modifies, sh-query-for-magic)
	(sh-magicless-file-regexp, magic-number-alist, sh-executable)
	(sh-chmod-argument, sh-shell-is-csh, sh-tab-width)
	(sh-sh-font-lock-keywords, sh-ksh-font-lock-keywords)
	(sh-bash-font-lock-keywords, sh-csh-font-lock-keywords)
	(sh-tcsh-font-lock-keywords): Variables deleted, see also executable.el.

	(sh-mode): Shell dependent code moved to `sh-set-shell'.
	(sh-feature, sh-abbrevs, sh-syntax-table, sh-append, sh-modify): New
	functions.
	(sh-execute-region): New command.
	(sh-indexed-loop): Far more efficient code generated for sh.
	(sh-repeat, sh-tmp-file, sh-while-getopts): New skeletons.
	(sh-or-other-mode, define-sh-skeleton, sh-executable, sh-chmod)
	(sh-query-for-variable): Command deleted.

	* two-column.el: Symbols renamed to be like mode-line indicator.
	Supposed to now also work for Lucid.
	(2C-mode-map): New name for `tc-mode-map'.  Additionally bound to [f2].
	(2C-minor-mode-map) New variable.
	(2C-mode): New name for `tc-other'.
	(2C-mode-line-format): New name for `tc-mode-line-format'.
	(2C-other-buffer-hook): New variable.
	(2C-separator): New name for `tc-separator'.
	(2C-window-width): New name for `tc-window-width'.
	(2C-beyond-fill-column): New name for `tc-beyond-fill-column'.
	(2C-autoscroll, 2C-autoscroll-start): New variables.

	(2C-other): New name for `tc-other'.
	(2C-mode): New name for `tc-mode', `tc-two-columns'.
	(2C-two-columns): New function.
	(2C-associate-buffer): New name for `tc-associate-buffer'.
	(2C-split): New name for `tc-split'.
	(2C-dissociate): New name for `tc-dissociate'.
	(2C-merge): New name for `tc-merge'.
	(2C-associated-buffer): New name for `tc-associated-buffer'.
	(2C-toggle-autoscroll, 2C-autoscroll): New functions.
	(tc-scroll-line, tc-scroll-up, tc-scroll-down, tc-recenter): Deleted
	functions.

1995-07-06  Karl Heuer  <kwzh@nutrimat.gnu.ai.mit.edu>

	* timezone.el (timezone-parse-date): Ignore text properties.

	* find-dired.el (find-dired): Undefine the g command.

1995-07-02  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* bytecomp.el (byte-compile-obsolete): Do the funcall to compile
	the form whether or not we warn.

	* c-mode.el (calculate-c-indent-after-brace): New function.
	(calculate-c-indent, indent-c-exp): Use it.

	* faces.el (x-font-regexp): Include the avgwidth.

	* iso-transl.el (iso-transl-char-map): Treat m, *m like u and *u.

1995-07-01  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* subr.el (shell-quote-argument): Don't do anything, on MS-DOS.

	* sendmail.el (mail-default-reply-to): Initialize to nil.
	(mail-setup): Override it from env var if nil.

	* talk.el (talk-disconnect): Make it interactive.
	(talk-add-display): Ignore dead buffers and deleted frames.

	* font-lock.el (font-lock-make-faces): On grayscale screen,
	use grays for background, not foreground.

	* faces.el (describe-face): new function.

1995-06-30  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-fetch-master-properties): Better error
	message in case the "cvs status" command fails.

1995-06-30  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* man.el (Man-underline-face): Doc fix.

	* mailalias.el (define-mail-alias): Doc fix.

1995-06-30  Paul Eggert  <eggert@twinsun.com>

	* sendmail.el (sendmail-send-it): If mail-from-style is parens,
	don't escape all parentheses; escape only the nonmatching ones.

	* sendmail.el (sendmail-send-it): If user-full-name contains
	special characters, quote or escape them for the From: line.

1995-06-30  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* rmail.el (rmail-find-all-files): Bind case-fold-search.

	* term/x-win.el (x-colors): Doc fix.

1995-06-30  Kevin Rodgers <kevinr@ihs.com>

	* mailabbrev.el (mail-resolve-all-aliases-1):
	Downcase address before recursive call.

1995-06-29  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* time.el (display-time-filter): Move run-hooks inside let.

	* simple.el (switch-to-completions): Make a completions window if none.

	* mouse.el (mouse-selection-click-count-buffer): New variable.
	(mouse-drag-region): Set it.
	(mouse-save-then-kill): Test it.

1995-06-29  David M Smith  <D.M.Smith@lancaster.ac.uk>

	* ielm.el (ielm-font-lock-keywords): New variable
	(inferior-emacs-lisp-mode): Use it for font-lock support

1995-06-29  Bryan O'Sullivan  <bos@Eng.Sun.COM>

	* ange-ftp.el (ange-ftp-normal-login): if ange-ftp-smart-gateway
	is set but ange-ftp-gateway-host is nil, use user@host
	proxy protocol.

1995-06-29  Morten Welinder  <terra+@cs.cmu.edu>

	* arc-mode.el (archive-mode): Add autoload cookie.

	* files.el (auto-mode-alist): Make archive-mode the default for
	.arc, .lzh, .zip, and .zoo files.

1995-06-29  Karl Fogel  (kfogel@wombat.gnu.ai.mit.edu)

	* bookmark.el: use "Save" and "Save As" instead of the nonstandard
	"Save" and "Write", in menu item titles.

1995-06-29  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* menu-bar.el (find-tag): Delete the menu-enable property.

	* info.el (Info-goto-node, Info-search):
	In Transient Mark mode, deactivate the mark.

	* faces.el (make-face-x-resource-internal): Give special meanings
	to font "names" `italic', `bold', and `bold-italic'.

	* rmail.el (rmail-summary-by-sender): Autoload this.
	(rmail-mode-map): Add rmail-summary-by-senders.

1995-06-28  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* fill.el (current-fill-column): If fill-column is nil, return nil.
	* simple.el (do-auto-fill): No-op if (current-fill-column) is nil.

	* loadup.el: Put isearch before menu-bar.

	* loaddefs.el: Don't set up key-translation-map.

	* help-macro.el (make-help-screen): Handle help-event-list.
	Handle backspace like delete.
	* help.el: Bind f1 and help like C-h.

	* supercite.el (sc-electric-mode-map): Bind f1 and help like C-h.
	* ediff-util.el (ediff-setup-keymap): Bind f1 and help like C-h.
	* edt.el (edt-setup-default-bindings): Bind f1 and help like C-h.

	* cplus-md.el (electric-c++-terminator): Fix logic for handling colon.

	* menu-bar.el: Make more menu-enables check (not buffer-read-only).
	Add minibuffer local menu bar menus.

	* startup.el: Update copyright year in message.

	* server.el (server-process-filter): Detect error messages from server.

1995-06-27  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* edt.el (edt-emulation-on): Check window-system for x, specifically.

1995-06-27  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-consult-rcs-headers): Use an even more
	pedantic regexp to match RCS time strings.  Improved
	efficiency by using looking-at instead of re-search "\\=...

1995-06-27  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* ediff-wind.el (ediff-control-frame-parameters):
	Specify user-position.

	* imenu.el (imenu-choose-buffer-index): Understand that (menu-bar)
	doesn't specify a window.

	* startup.el (command-line): Extract arg value properly for -u.

	* subr.el (lambda): Doc fix.

1995-06-26  Ake Stenhoff  <etxaksf@aom.ericsson.se>

	* imenu.el (imenu-use-keymap-menu): New variable.
	(imenu-auto-rescan): New variable.
	(imenu-auto-rescan-maxout): New variable.
	(imenu-generic-expression): Doc changes.
	(imenu-generic-lisp-expression): New variable.
	(imenu-generic-c-expression): New variable.
	(imenu-example--generic-c++-expression): Changed the name to
	imenu-generic-c++-expression.
	(imenu-example--generic-texinfo-expression): Changed the name to
	imenu-generic-texinfo-expression.
	(imenu-example--generic-latex-expression): Changed the name to
	imenu-generic-latex-expression.
	(imenu--scanning-method-alist): New variable.
	(imenu--split-menu): Changed it to make the title "Index menu"
	instead of "Function menus".
	(imenu--make-index-alist): Changed to handle auto rescan.
	(imenu--create-keymap-2): New function to create a keymap.
	(imenu--create-keymap-1): New function.
	(imenu--in-alist): New function.
	(imenu-default-create-index-function): Changed to handle
	imenu--scanning-method-alist).
	(imenu--generic-extract-name): Removed.
	(imenu--generic-function): Rewritten to handle submenus.
	(imenu--mouse-menu): Changed to handle keymaps.

1995-06-26  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* paths.el (remote-shell-program): Fix typo checking /usr/bin/remsh.

1995-06-26  Eric S. Raymond  <esr@snark.thyrsus.com>

	* vc.el (vc-start-entry): Prevent lossage when doing a mass checkin
	from a VC-dired buffer.

1995-06-26  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-consult-rcs-headers): Handle the new time
	string formats of RCS 5.7.

1995-06-26  Mike Long  <mike.long@analog.com>

	* view.el (view-file-other-window): Re-add missing argument to
	switch-buffer-other-window.
	(view-mode-map): Leave C-c alone!
	(view-mode): Doc fix.

1995-06-26  Simon Marshall  <simon@duality.gnu.ai.mit.edu>

	* font-lock.el (font-lock-defaults-alist): List all keywords for C and
	Emacs Lisp modes.  Doc fix.
	(font-lock-maximum-decoration): Doc fix.
	(font-lock-choose-keywords): New function.  Use them.
	(font-lock-set-defaults): Use it.  Doc fix.
	(lisp-font-lock-keywords): Default to lisp-font-lock-keywords-1.
	(c-font-lock-keywords): Default to c-font-lock-keywords-1.
	(c++-font-lock-keywords): Default to c++-font-lock-keywords-1.

	* fortran.el (fortran-mode): List all keywords for font-lock-defaults.
	(fortran-font-lock-keywords): Default to fortran-font-lock-keywords-1.

1995-06-24  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* rmail.el (rmail-revert): Use the default revert-buffer-function

	* simple.el (newline): Put point at right place if insert gets error.

1995-06-24  Karl Fogel  <kfogel@floss.cyclic.com>

	* mail-hist.el (mail-hist-text-size-limit): New var.
	(mail-hist-text-too-long-p): New func.
	(mail-hist-add-header-contents-to-ring): call above; if the text is
	too long, then store the empty string in the history.

1995-06-24  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* pc-mode.el (pc-bindings-mode): Add autoload.

	* enriched.el (excerpt): Ignore error making `excerpt' italic.

1995-06-23  Tom Tromey  <tromey@drip.colorado.edu>

	* makefile.el (makefile-define-tab-face): New function.
	(makefile-tab-face): Don't create face here.
	(makefile-mode): Call makefile-define-tab-face.

1995-06-23  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* cc-mode.el (c-mode): Delete autoload cookie.

	* mail-hist.el: Don't autoload anything to turn on mail-hist.
	(mail-hist-enable): New function, autoloaded.

1995-06-23  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el: Fix bug concerning vc-latest-version.
	Accessing that property left erroneous contents in the
	*vc-info* buffer, which could later be misinterpreted by
	other functions.
	(vc-insert-file): Erase the current buffer before inserting the file.
	(vc-fetch-master-properties, vc-fetch-properties): Don't erase the
	buffer because that is now done in vc-insert-file.
	(vc-fetch-properties): Kill the *vc-info* buffer when done.

1995-06-23  Paul Eggert  <eggert@twinsun.com>

	* vc.el (vc-backend-admin, vc-backend-checkin): Assume that
	comments are empty if they contain only white space.

1995-06-22  Andre Spiegel  <spiegel@berlin.informatik.uni-stuttgart.de>

	* vc-hooks.el (vc-fetch-master-properties): Pass an absolute
	pathname to the cvs status command. This is required to make
	recursive vc-directory listings work.

1995-06-22  Ethan Bradford  <ethanb@phys.washington.edu>

	* vt-control.el (vt-keypad-on, vt-keypad-off): Updated codes sent
	to terminal to eliminate some garbage that made NCSA telnet crash.

1995-06-22  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* vip.el (vip-push-mark-silent): Use (mark t).

	* mouse.el (mouse-yank-at-click): Clear mouse-selection-click-count.

1995-06-21  Richard Stallman  <rms@mole.gnu.ai.mit.edu>

	* files.el (buffer-file-truename): Duplicate definition deleted.

	* simple.el (mark-even-if-inactive): Duplicate definition deleted.

	* lisp-mode.el (eval-defun): Don't change defvar to defconst
	if it has just one argument.

See ChangeLog.5 for earlier changes.
